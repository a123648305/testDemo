(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9851],{89851:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var t=n(85354),a=n.n(t),t=n(67294),c=n.n(t),i=n(61409),s=n(92360),r=n(5133),l=n(36144),o=function(t){function e(e){var a=t.call(this,e)||this;return a.resetFontSize=function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,t=Math.min(e/750,t/690);document.querySelector("html").style.fontSize=24*t+"px"},a.handleSubmit=function(){var e=a.state,t=e.activeTabIndex,n=e.warningValueInput,e=e.token;-1!==t?""!==n?l.h.post("/price/warning/token/change/price",{token:e,warningPrice:parseInt(n,10),priceCompareType:0===t?"GT":1===t?"LT":"LT_OR_GT"}).then(function(e){200===e.status&&(r.Z.success("修改成功"),setTimeout(function(){return i.mW.goBack()},1500))}):r.Z.warning("请输入预警修改值"):r.Z.warning("请选择预警值条件")},a.state={currWarningValue:0,currWarningType:"",compareType:"",activeTabIndex:-1,warningValueInput:"",token:"",warningType:""},a}a()(e,t);var n=e.prototype;return n.componentWillMount=function(){window.addEventListener("resize",this.resetFontSize),this.resetFontSize()},n.componentDidMount=function(){for(var e=this.state,t=e.currWarningValue,n=e.currWarningType,a=e.compareType,i=e.token,r=e.warningType,c=window.location.search.substring(1).split("&"),s=c.length-1;0<=s;s--){var l=c[s].split("=");"alertValue"===l[0]&&(t=l[1]),"alertType"===l[0]&&(n=l[1]),"compareType"===l[0]&&(a=l[1]),"token"===l[0]&&(i=l[1]),"warningType"===l[0]&&(r=l[1])}this.setState({currWarningValue:t,currWarningType:n,compareType:a,token:i,warningType:r,activeTabIndex:"BREAK_BACK_PRICE"===r?1:-1})},n.componentWillUnmount=function(){window.removeEventListener("resize",this.resetFontSize)},n.switchTab=function(e){this.setState({activeTabIndex:e})},n.handleInput=function(){var e=this.refs.input.value;this.setState({warningValueInput:e})},n.render=function(){var e=this,t=this.state,n=t.currWarningValue,a=t.currWarningType,i=t.compareType,r=t.activeTabIndex,t="BREAK_BACK_PRICE"===t.warningType;return c().createElement("div",{className:"update_thresholdValue"},c().createElement("p",{className:"pageTitle"},"预警值修改"),c().createElement("div",{className:"top"},c().createElement("p",{className:"title",style:{marginBottom:"0.667rem"}},"当前预警值"),c().createElement("p",{style:{marginBottom:"2.33rem"}},c().createElement("span",{className:"flag"},"GT"===a?"高于":"LT"===a?"低于":"差价高于"),c().createElement("span",{className:"value"},n)),c().createElement("p",{className:"title",style:{marginBottom:"1rem"}},"预警值条件"),c().createElement("div",{className:"tabs"},!t&&c().createElement("div",{className:0===r?"item active":"item",onClick:function(){return e.switchTab(0)}},"高于"),c().createElement("div",{className:t||1===r?"item active":"item",onClick:function(){return e.switchTab(1)}},"低于"),"PRODUCT"===i&&c().createElement("div",{className:2===r?"item active":"item",onClick:function(){return e.switchTab(2)}},"差价高于")),c().createElement("p",{className:"title",style:{marginBottom:"1rem"}},"修改预警值"),c().createElement("input",{className:"input",ref:"input",onInput:function(){return e.handleInput()}}),c().createElement("p",null,c().createElement(s.Button,{type:"primary",style:{marginBottom:"1.667rem",width:"100%",height:"3rem"},onClick:this.handleSubmit},"确认修改"))))},e}(t.Component)}}]);