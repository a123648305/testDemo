(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[7518],{47168:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-adb4f3"},36529:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-e4544d"},3208:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-ebf79b"},99760:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-c76ee9"},78769:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-6fef87"},51575:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-e404a5"},49158:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-b8b5f7"},73700:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-8ab005"},34030:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-21f712"},45886:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-d634cf"},76987:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-012355"},71626:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-a7213b"},24285:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-e75279"},24860:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-111600"},77517:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-614297"},76892:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-60582c"},27416:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-462d57"},72887:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-5f102f"},89319:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-d2bb54"},75602:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-29e131"},66682:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-2baee4"},83550:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-a9b9bb"},76761:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-5efc13"},36325:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-ddc524"},34419:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-4603ac"},35173:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-561563"},94525:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-f08669"},86264:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-53dacd"},70701:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-18aaed"},11099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-49a61b"},66924:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-3ad1cd"},67901:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-3c6c53"},728:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-3899c8"},54742:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-117668"},41175:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-052563"},67669:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-860a9e"},48731:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-9fa1ec"},69717:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-5cf279"},784:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-42ec6d"},14026:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-1e5b92"},77999:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-5b9680"},86455:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-21ee3f"},50060:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-2b47f7"},52752:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-6f30e7"},92017:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var a=n(67154),f=n.n(a),t=n(85354),i=n.n(t),a=n(67294),y=n.n(a),E=n(92360),r=[{title:"天猫",imgName:"tm"},{title:"淘宝",imgName:"tb"},{title:"京东",imgName:"jd"},{title:"苏宁易购",imgName:"snyg"},{title:"唯品会",imgName:"wph"},{title:"国美",imgName:"gm"},{title:"1号店",imgName:"yhd"},{title:"酒仙",imgName:"jx"},{title:"拼多多",imgName:"pdd"}];const g=function(e){e=e.style;return y().createElement("div",{className:"dataSource-wrapper",style:e},y().createElement("span",null,"请将商品详情页链接粘贴到搜索框"),y().createElement("div",null),y().createElement("div",null,"目前系统支持的数据源"),y().createElement("ul",null,r.map(function(e,t){return y().createElement("li",{key:t},y().createElement("img",{src:n(41484)("./source_"+e.imgName+".png")}),y().createElement("span",null,e.title))})))};var p=n(29383),b=n(85151),d=n(36144),m=n(5133),l=[{label:"",prop:"status",minWidth:"30",fixed:"left",render:function(e){return 0<e.categories.length&&y().createElement("i",{className:"icon-cem_right",style:{fontSize:"20px",position:"relative",top:"2px",color:"#bfbfbf"}})}},{label:"商品标题",prop:"title",minWidth:"260",fixed:"left",sortable:"custom",render:function(t){return y().createElement("span",{className:"ellipisis highlight",style:{maxWidth:260},title:t.title,onClick:function(e){e.stopPropagation(),s(t)}},t.title)}}],s=function(e){e=e.url;window.open(e,"_blank")},v=function(t){function e(e){var s=t.call(this,e)||this;return s.getTableHeight=function(){var e=document.documentElement.clientHeight-46-48-48-92-32-24-16;s.setState({maxHeight:e})},s.setPage=function(e){s.setState({pageNum:e,currentRowIndex:0},function(){return s.searchList(!1)})},s.refreshTable=function(){var e=s.state,t=e.currentRowIndex,n=e.hideOldTask,e=e.data;s.setState({currentRowIndex:n||t===e.length-1?t:t+1},function(){return s.searchList(!1)})},s.execCopy=function(e){s.copyInfo.value=e,s.copyInfo.select(),document.execCommand("copy"),m.Z.success({message:"复制成功",duration:1500})},s.handleRowClick=function(e){var n="",t=s.state,a=t.currentRowIndex,i=t.currentRowKey,r=s.state.data,n="string"==typeof e?e:e.url;r.forEach(function(e,t){e.url===n&&(a=t,i=n)}),s.setState({currentRowIndex:a,currentRowKey:i},function(){return s.props.onRowClick(r[a])})},s.handleSort=function(e){e=e.order;s.setState({order:e,currentRowIndex:0},function(){return s.searchList(!1)})},s.state={targetLink:"",hideOldTask:!1,maxHeight:0,columns:l,data:[],pageNum:1,pageSize:20,totalRows:0,order:null,currentRowIndex:0,currentRowKey:""},s}i()(e,t);var n=e.prototype;return n.componentDidMount=function(){this.getTableHeight()},n.saveTargetLink=function(e){var t=this;0!==e.trim().length?/(http|https):\/\/([\w.]+\/?)\S*/.test(e)?this.setState({targetLink:e,pageNum:1,columns:l,hideOldTask:!1,currentRowIndex:0},function(){return t.searchList(!0)}):this.props.onReqSuccess({linkListLength:0,linkValid:!1,tips:"输入的商品链接格式有误，请重新输入",isInitial:!0,linkDetail:{}}):this.props.onReqSuccess({linkListLength:0,linkValid:!1,tips:"输入不能为空，请粘贴正确的商品链接",isInitial:!0,linkDetail:{}})},n.searchList=function(o){var c=this,e=this.state,t=e.pageNum,n=e.pageSize,a=e.targetLink,i=e.hideOldTask,r=e.order,u=e.currentRowIndex,s={url:a,projectId:this.props.projectId,hideExistsTasks:i,pageSize:n,pageIndex:t,sortModel:null===r?null:{sortName:"TITLE",sortType:"ascending"===r?"ASC":"descending"===r?"DESC":""}};this.props.onReqSuccess({loading:!0,linkDetail:{}}),this.setState({data:[]},function(){d.h.post("/connection/smart/find",f()({},s)).then(function(e){var t,n,a,i,r,s,l;e.data&&e.data.result&&(t=(l=e.data.result).count,n=l.list,a=l.supportTypes,i=l.customizeConfig,r=l.spuId,s=l.spuName,e=l.skuId,l=l.skuName,c.props.onReqSuccess({linkListLength:t,linkValid:!0,tips:"",isInitial:!1,loading:!1,supportTypes:a,customizeConfig:i,spuId:r,spuName:s,skuId:e,skuName:l}),n.forEach(function(e){var t=/<img.*?(?:>|\/>)/gi,n=/\s+/g;e.title&&(t.test(e.title)&&(e.title=e.title.replace(t,"")),n.test(e.title)&&(e.title=e.title.replace(n," ")))}),c.props.onRowClick(0<t?n[u]:{}),c.setState({data:n||[],currentRowKey:0<n.length?n[u].url:"",totalRows:t,loading:!1},function(){o&&c.getCoulmns()}))}).catch(function(e){e.data&&e.data.msg&&c.props.onReqSuccess({linkListLength:0,linkValid:!1,tips:e.data.msg,linkDetail:{},isInitial:!1,loading:!1,supportTypes:[]}),c.setState({data:[],totalRows:0,loading:!1})})})},n.getCoulmns=function(){var i=this,e=this.state,t=e.columns,n=e.data,r=[];2===t.length&&0<n.length&&function(){for(var a=n[0].configDetails,e=0;e<a.length;e++)!function(n){a[n].topicTypeId||r.push({label:a[n].topicTypeValue,prop:a[n].topicTypeId,minWidth:100,render:function(e){var t=e.configDetails.filter(function(e){return e.topicTypeValue===a[n].topicTypeValue&&!e.topicTypeId});return y().createElement("span",{className:"ellipisis",style:{maxWidth:100},title:t[0]&&t[0].topicValue,onClick:function(e){e.stopPropagation(),i.execCopy(t[0]&&t[0].topicValue)}},t[0]&&t[0].topicValue)}})}(e);i.setState({columns:t.concat(r)})}()},n.toggleHistorySku=function(){var e=this,t=this.state.hideOldTask;this.setState({hideOldTask:!t,pageNum:1,currentRowIndex:0},function(){return e.searchList(!1)})},n.getRowStyle=function(){return{cursor:"pointer"}},n.getRowkey=function(e){return e.url},n.render=function(){var t=this,e=this.state,n=e.hideOldTask,a=e.columns,i=e.data,r=e.pageSize,s=e.pageNum,l=e.totalRows,o=e.maxHeight,c=e.loading,u=e.currentRowKey,e=this.props.style;return y().createElement("div",{className:"linkTable-wrapper",style:e},y().createElement("div",null,y().createElement("span",null,"链接"),y().createElement("span",null,y().createElement(b.Jg,{checked:n,onChange:function(){return t.toggleHistorySku()}}),y().createElement("span",null,"隐藏已经设为任务的SKU"))),y().createElement(p.Z,{ref:function(e){return t.table=e},columns:a,data:i,loading:c,pageSize:r,onSortChange:this.handleSort,currentPage:s,total:l,onPage:this.setPage,currentRowKey:u,rowKey:this.getRowkey,highlightCurrentRow:!0,onCurrentChange:this.handleRowClick,rowStyle:this.getRowStyle,maxHeight:o}),y().createElement("input",{type:"text",ref:function(e){return t.copyInfo=e},style:{opacity:"0"}}))},e}(y().Component),t=n(45697),t=n.n(t),o=n(94157),c=n(35239),C=function(t){function e(e){var u=t.call(this)||this;return u.init=function(){u.setState(f()({},u.props,{optionsCopy:u.props.options}))},u.openPanel=function(e){u.state.panelShow&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout(function(){return u.setState({panelShow:!0})},0),u.input&&u.input.focus()},u.closePanel=function(){u.setState({panelShow:!1})},u.handleClickItem=function(e){var t=u.state,n=t.value,a=t.optionsCopy,i=u.state.options,r=[],t=n.map(function(e){return String(e)}).indexOf(String(e));-1<t?n.splice(t,1):(n.push(e),u.setRecentList({label:e,value:e}));t=a.map(function(e){return String(e.label)}).indexOf(String(e));if(-1===a.map(function(e){return String(e.label)}).indexOf(String(e))&&-1<t)i.splice(t,1),r=i;else{for(var s=[],l=0;l<n.length;l++){for(var o=!1,c=0;c<a.length;c++)String(a[c].value)===String(n[l])&&(o=!0);o||s.push({label:n[l],value:n[l]})}r=a.concat(s)}u.setState({value:n,keyWord:"",options:0<n.length?r:a}),u.props.onChange(n)},u.setRecentList=function(t){var e,n=u.props.uniqueKey,a=JSON.parse(c.t.get(c.V.recentList));a&&a[n]?(-1<(e=a[n].findIndex(function(e){return e.value===t.value}))&&a[n].splice(e,1),a[n].splice(0,0,t),a[n]=a[n].length<=5?a[n]:a[n].slice(0,5),c.t.set(c.V.recentList,JSON.stringify(a)),u.setState({recentList:a[n]})):(a?(a[n]=[t],c.t.set(c.V.recentList,JSON.stringify(a))):((a={})[n]=[t],c.t.set(c.V.recentList,JSON.stringify(a))),u.setState({recentList:[t]}))},u.getRecentList=function(){var e=u.props.uniqueKey,t=JSON.parse(c.t.get(c.V.recentList));u.setState({recentList:t&&t[e]?t[e]:[]})},u.handleSearch=function(){var e=u.state.optionsCopy,t=[],n=String(u.input.value);if(0<n.trim().length){for(var a=0;a<e.length;a++){var i=e[a].label;-1<String(i).indexOf(n)&&String(i)!==n&&t.push(e[a])}t.push({label:n,value:n}),u.setState({options:t,keyWord:n})}else u.setState({keyWord:n,options:e})},u.onInputKeyDown=function(e){e.stopPropagation;var t=u.state,n=t.keyWord,t=t.uniqueKey;if(13===e.keyCode&&0<n.trim().length){for(var a=document.getElementById(t).children[0].children,i=0,r=0;r<a.length;r++)if(a[r].innerText===n){i=r;break}a[i].click(),setTimeout(function(){return u.setState({panelShow:!0})},0)}},u.calcDropdownHeight=function(){var e=u.state,t=e.options,e=e.recentList;return 106+(0===e.length?0:30*(e.length-1))+(0===t.length?0:8<t.length?210:30*(t.length-1))},u.renderPopup=function(){var e,t=u.state,n=t.value,a=t.options,i=t.uniqueKey,r=t.recentList;u.selectWrapper&&(e=u.selectWrapper.clientWidth);t=-(u.calcDropdownHeight()+6);return y().createElement("div",{className:"rc-select-dropdown rc-select-dropdown-special rc-select-dropdown--multiple rc-select-dropdown-placement-bottomLeft",ref:function(e){return u.selectDropdown=e},style:{width:e,left:"0",top:t}},y().createElement("div",{className:"recentList",style:{overflow:"auto",transform:"translateZ(0px)"}},y().createElement("div",null,"最近输入"),y().createElement("ul",{className:"rc-select-dropdown-menu  rc-select-dropdown-menu-root rc-select-dropdown-menu-vertical"},r&&0<r.length?r.map(function(e,t){return y().createElement("li",{key:t,role:"option",className:"rc-select-dropdown-menu-item",style:{userSelect:"none"},arialselected:"false",unselectable:"on",onClick:function(){return u.handleClickItem(e.value)}},e.label)}):y().createElement("li",{role:"option",className:"rc-select-dropdown-menu-item",style:{userSelect:"none"}},"暂无数据"))),y().createElement("div",{id:i,style:{overflow:"auto",transform:"translateZ(0px)",paddingTop:"6px"}},y().createElement("ul",{className:"rc-select-dropdown-menu  rc-select-dropdown-menu-root rc-select-dropdown-menu-vertical",style:{maxHeight:"240px"}},a&&0<a.length?a.map(function(e,t){return y().createElement("li",{key:t,role:"option",className:-1<n.map(function(e){return String(e)}).indexOf(String(e.value))?"rc-select-dropdown-menu-item rc-select-dropdown-menu-item-selected":"rc-select-dropdown-menu-item",style:{userSelect:"none"},arialselected:"false",unselectable:"on",onClick:function(){return u.handleClickItem(e.value)}},e.label,y().createElement("i",{className:"icon-cem_check-out"}))}):y().createElement("li",{role:"option",className:"rc-select-dropdown-menu-item",style:{userSelect:"none"}},"暂无数据"))))},u.state={value:e.value||[],options:e.options||[],recentList:[],panelShow:!1,keyWord:""},u}i()(e,t);var n=e.prototype;return n.componentDidMount=function(){this.init(),this.getRecentList(),window.addEventListener("click",this.closePanel)},n.UNSAFE_componentWillReceiveProps=function(e){this.setState(f()({},e,{optionsCopy:e.options}))},n.componentWillUnmount=function(){window.removeEventListener("click",this.closePanel)},n.render=function(){var n=this,e=this.state,t=e.value,a=e.panelShow,i=e.placeholder,e=e.keyWord;return y().createElement(o.Z,{ref:function(e){return n.trigger=e},action:["click"],popupAlign:{points:["bl","tl"],offset:[0,0]},popup:this.renderPopup(),popupVisible:a},y().createElement("div",{ref:function(e){return n.selectWrapper=e},className:"select-wrapper",onClick:this.openPanel},y().createElement("div",{className:"rc-select rc-select-enabled rc-select-no-arrow"},y().createElement("div",{className:"rc-select-selection rc-select-selection--multiple"},y().createElement("div",{className:"rc-select-selection__rendered"},y().createElement("div",{unselectable:"on",className:"rc-select-selection__placeholder",style:{display:"none",userSelect:"none"}},i),y().createElement("ul",null,t&&0<t.length&&t.map(function(e,t){return y().createElement("li",{key:t,unselectable:"on",className:"rc-select-selection__choice",role:"presentation",title:"5",style:{userSelect:"none"}},y().createElement("div",{className:"rc-select-selection__choice__content"},e),y().createElement("span",{className:"rc-select-selection__choice__remove"},y().createElement("i",{className:"icon-cem_delete",onClick:function(){return n.handleClickItem(e)}})))}),y().createElement("li",{className:"rc-select-search rc-select-search--inline"},y().createElement("div",{className:"rc-select-search__field__wrap"},y().createElement("input",{ref:function(e){return n.input=e},autoComplete:"off",className:"rc-select-search__field",style:{width:0<e.length?14*e.length+"px":"0.75em"},value:e,onChange:this.handleSearch,onKeyDown:function(e){return n.onInputKeyDown(e)}}),y().createElement("span",{className:"rc-select-search__field__mirror"}," ")))))))))},e}(a.Component);C.propTypes={value:t().array.isRequired,options:t().array.isRequired,onChange:t().func.isRequired,placeholder:t().string,uniqueKey:t().string};var S=function(n){function e(e){var t=n.call(this,e)||this;return t.clear=function(){t.props.onChange("")},t.state={value:""},t}i()(e,n);var t=e.prototype;return t.componentDidMount=function(){this.setState(f()({},this.props))},t.componentWillReceiveProps=function(e){this.setState(f()({},e))},t.render=function(){var e=this,t=this.state,n=t.value,a=t.type,i=t.disabled,r=(t.firstEnter,t.maxLength),t=t.onBlur;return y().createElement("div",{className:"customized-input-wrapper"},y().createElement(E.Input,{type:a||"text",value:n,onChange:this.props.onChange,disabled:i,maxLength:r,onBlur:t}),n&&0<n.length&&!i&&a&&"text"===a&&y().createElement("i",{className:"icon-cem_delete",onClick:function(){return e.clear()}}))},e}(y().Component),t=n(97189),u=n.n(t),w=n(35303),N=n(17190),k=function(t){function e(e){var p=t.call(this,e)||this;return p.init=function(){var e=p.props,t=e.linkDetail,n=t.categories,t=(t.sourceName,t.title,e.topicValues),n=(e.topicOpts,e.supportTypes,e.customizeConfig,e.spuId,e.spuName,e.skuId,e.skuName,u().deepClone(n));p.setState(f()({},p.props,{categoryCopy:n,topicValuesCopy:t}))},p.addLink=function(){var e=p.state,t=e.linkDetail,n=t.url,a=(t.name,t.configDetails),i=t.categories,r=e.categoryCopy,s=e.projectId,l=e.topicValues,o=e.spuId,t=e.skuId;e.spuName,e.skuName;if(0!==r.length){for(var c=r.length-1;0<=c;c--)if(0===r[c].name.trim().length)return void m.Z.warning("请输入任务名称");var u=[];p.props.topicOpts.forEach(function(e){p.state["value"+e.id]&&u.push({id:e.id,name:p.state["id"+e.id]})}),p.props.spuList&&0<p.props.spuList.length&&!o?p.setState({spuTip:"请选择SPU词条"}):p.props.skuList&&0<p.props.skuList.length&&!t?p.setState({skuTip:"请选择SKU词条"}):(t={key:n,projectId:s,topics:a.map(function(t,e){return{topicTypeId:t.topicTypeId,topicArr:t.topicArr?0<t.topicArr.length?t.topicArr:[{id:l.find(function(e){return e.id===t.topicTypeId}).values.find(function(e){return e.name.includes("空值")}).id,name:l.find(function(e){return e.id===t.topicTypeId}).values.find(function(e){return e.name.includes("空值")}).name}]:[]}}),customizeConfig:u,spuGroupId:o,skuGroupId:t,categories:r},p.props.spuList&&0<p.props.spuList.length&&p.props.skuList&&0<p.props.skuList.length&&(t.flag="PROJECT"),d.h.post("/connection/add/url",t).then(function(e){2e4===e.data.code&&(m.Z.success(i&&0<i.length?"修改成功":"添加成功",1e3),p.props.refreshTable())}))}else m.Z.warning("请至少选择一项目标数据")},p.changeCategory=function(t){for(var e=p.state,n=e.categoryCopy,a=e.linkDetail,i=a.title,e="从"+a.sourceName+"提取"+i+e.supportTypes.filter(function(e){return e.id===t})[0].name+"数据",r=-1,s=n.length-1;0<=s;s--)n[s].id===t&&(r=s);-1<r?n.splice(r,1):n.push({id:t,name:e}),p.setState({categoryCopy:n})},p.setTaskName=function(t,e){var n=p.state.categoryCopy;n.filter(function(e){return e.id===t})[0].name=e,p.setState({categoryCopy:n})},p.setConfigValue=function(i,e){for(var t=p.state,n=t.linkDetail,r=t.topicValues,a=n.configDetails,s=a.length-1;0<=s;s--)a[s].topicTypeId===i&&a[s].topicTypeId&&(a[s].topicArr=e.map(function(e){if(e){for(var t=r.filter(function(e){return e.id===i})[0].values,n=0;n<t.length;n++)if(t[n].name===e){var a=t[n];return{id:a.id,name:a.name}}return{id:"",name:e}}}));p.setState({linkDetail:n})},p.onBlur=function(t){var e=p.state,n=e.categoryCopy,a=e.linkDetail,i=a.sourceName,r=a.title,a=e.supportTypes,e=p[t].state.value,a="从"+i+"提取"+r+a.filter(function(e){return e.id===t})[0].name+"数据";0===e.trim().length&&(n.filter(function(e){return e.id===t})[0].name=a),p.setState({categoryCopy:n})},p._handleOnSelectChange=function(e,t,n){var a,i;e&&e.length&&(a=e[e.length-1],p.props["topicValue"+t].find(function(e){return e.value===a})?p.setState(((i={})["value"+n.id]=[a],i["id"+n.id]=p.props["topicValue"+t].find(function(e){return e.value===a}).id,i)):d.h.post("/subscribe-topic-value/add",{projectId:p.props.projectId,topicId:n.id,value:a})),e.length||p.setState(((e={})["value"+n.id]=void 0,e))},p.state={linkDetail:{},categoryCopy:[],topicValuesCopy:[],customizeConfig:[],spuTip:"",skuTip:""},p}i()(e,t);var n=e.prototype;return n.componentDidMount=function(){this.init()},n.UNSAFE_componentWillReceiveProps=function(e){var t=e.linkDetail.categories,n=e.topicValues,t=u().deepClone(t);this.setState(f()({},e,{categoryCopy:t,topicValuesCopy:n}))},n.render=function(){var a=this,e=this.state,t=e.linkDetail,n=e.minHeight,i=e.categoryCopy,r=e.topicValues,s=e.supportTypes,l=e.spuId,o=e.skuId,c=e.spuName,u=(e.skuName,e.spuTip),p=e.skuTip,d=t.sourceName,m=t.title,h=t.url,f=t.categories,g=t.configDetails,v=this.props,k=v.spuList,e=v.skuList,v=v.topicOpts;return y().createElement("div",{className:"linkDetail-wrapper",style:{display:t.url?"block":"none"}},y().createElement("div",{style:{minHeight:n+"px",maxHeight:n+"px",paddingBottom:"60px"}},y().createElement("span",null,m),y().createElement("div",null,y().createElement("label",null,"数据来源"),y().createElement(S,{value:d,disabled:!0})),y().createElement("div",null,y().createElement("label",null,"SKU链接"),y().createElement(S,{value:h,disabled:!0})),y().createElement("div",null,y().createElement("label",null,"目标数据"),y().createElement("div",null,s&&s.map(function(t,e){return y().createElement("span",{key:e},y().createElement(b.Jg,{checked:i&&0<i.filter(function(e){return e.id===t.id}).length,disabled:f&&0<f.filter(function(e){return e.id===t.id}).length,onChange:function(){return a.changeCategory(t.id)}}),y().createElement("span",null,t.name))}))),i&&0<i.length&&i.map(function(t,e){return y().createElement("div",{key:e},y().createElement("label",null,0===e?"任务名称":""),y().createElement(S,{ref:function(e){return a[t.id]=e},type:"textarea",value:t.name,onChange:a.setTaskName.bind(a,t.id),maxLength:100,onBlur:a.onBlur.bind(a,t.id)}))}),k&&0<k.length&&y().createElement("div",null,y().createElement("label",null,"SPU词条"),y().createElement(N.Z,{onChange:function(e){a.setState({spuId:e.id,spuName:e.name})},trigger:"click",data:k,value:l,onTipClick:function(){u&&a.setState({spuTip:""})},addText:"创建SPU词条",onAddClick:function(){window.open("/account/project/base?drawerVisible=true")},className:(u?"content-error":"")+" select_opts"}),u&&y().createElement("span",{className:"content-error-hint"},u)),e&&0<e.length&&y().createElement("div",null,y().createElement("label",null,"SKU词条"),y().createElement(N.Z,{onChange:function(e){a.setState({skuId:e.id,skuName:e.name})},trigger:"click",data:l?e.filter(function(e){return e.parentId===l}):e,value:o,onTipClick:function(){p&&a.setState({skuTip:""})},addText:"创建SKU词条",onAddClick:function(){window.open("/account/project/base/sku?spuId="+l+"&spuName="+c+"&drawerVisible=true")},className:(p?"content-error":"")+" select_opts"}),p&&y().createElement("span",{className:"content-error-hint"},p)),k&&e&&v&&v.length?v.map(function(t,n){return y().createElement("div",{className:"topic",key:t.id},y().createElement("label",{className:"ellipsis"},t.name),y().createElement("div",{className:"select"},y().createElement(w.RS,{tags:!0,multiple:!1,onChange:function(e){a._handleOnSelectChange(e,n,t)},value:a.state["value"+t.id],optionLabelProp:"label",optionFilterProp:"label",placeholder:"请选择或者输入"},a.props["topicValue"+n]&&a.props["topicValue"+n].map(function(e){return y().createElement(w.Wx,{key:e.id,value:e.value,label:e.value},e.value)}))))}):null,g&&0<g.length&&g.filter(function(e){return!!e.topicTypeId}).map(function(n,e){var t=r.filter(function(e,t){return e.id===n.topicTypeId})&&0<r.filter(function(e,t){return e.id===n.topicTypeId}).length&&r.filter(function(e,t){return e.id===n.topicTypeId})[0].values.filter(function(e){return!e.name.includes("空值")})||[];return y().createElement("div",{key:e,className:"topic"},y().createElement("label",null,n.topicTypeValue),y().createElement("div",{className:"select"},y().createElement(C,{uniqueKey:n.topicTypeId,value:n.topicArr&&0<n.topicArr.length?n.topicArr.filter(function(e){return!e.name.includes("空值")}).map(function(e){return e.name}):[],options:t.map(function(e,t){return{label:e.name,value:e.name}}),onChange:a.setConfigValue.bind(a,n.topicTypeId),placeholder:"请选择已有"+n.topicTypeValue+"或键入新的"+n.topicTypeValue})))})),y().createElement(E.Button,{type:"primary",onClick:this.addLink},f&&0<f.length?"提交修改":"立即添加"))},e}(y().Component),_=n(55815),T=n(46701),h=function(t){function e(e){var o=t.call(this,e)||this;return o.componentDidMount=function(){var t=o.props.location.state.id;o.setState({projectId:t},function(){return o.fetchTopicValue()}),d.h.post("/subproject-connection/group/list",{projectId:t}).then(function(e){var t=e.data.result,e=t.spuList,t=t.skuList;o.setState({spuList:e,skuList:t})}),d.h.post("/subscribe-topic/list",{projectId:t,pageIndex:1,pageSize:100,name:"",valueFrom:[t]}).then(function(e){e=e.data.result.result.filter(function(e){return"USER_CUSTOMIZE"===e.topicType});o.setState({topicOpts:e}),e.forEach(function(e,n){d.h.post("/subscribe-topic-value/list",{projectId:t,topicId:e.id,valueFrom:[t],pageSize:1e3,pageIndex:1}).then(function(e){var t;2e4===e.data.code&&o.setState(((t={})["topicValue"+n]=e.data.result.result,t))})})})},o.handleSearch=function(){var e=document.querySelector(".link-input input").value;o.linkTable.saveTargetLink(e)},o.setReqSuccess=function(e){o.setState(f()({},e))},o.setLinkDetail=function(e){o.setState({linkDetail:e})},o.fetchTopicValue=function(){var e=o.state.projectId;d.h.post("/projects/connection/search",{id:e,sortModel:{sortType:"ASC",sortName:"NAME"}}).then(function(e){e=e.data;if(2e4===e.code){for(var t=e.result.titles,n=[],a=0;a<t.length;a++){var i=t[a],r=i.id,s=i.name,l=i.values,i=i.child;n.push({id:r,name:s,values:l}),i&&n.push(i)}o.setState({topicValues:n})}})},o.state={isInitial:!0,linkValid:!0,tips:"",linkListLength:0,linkDetail:{},projectId:"",loading:!1,topicValues:[],value:[],supportTypes:[],spuList:[],skuList:[],topicOpts:[]},o}i()(e,t);var n=e.prototype;return n.handleKeyUp=function(e){e.stopPropagation(),13===e.keyCode&&(e=document.querySelector(".link-input input").value,this.linkTable.saveTargetLink(e))},n.refreshTable=function(){this.fetchTopicValue(),this.linkTable.refreshTable()},n.render=function(){var t=this,e=this.state,n=e.isInitial,a=e.linkValid,i=e.tips,r=e.linkListLength,s=e.linkDetail,l=e.projectId,o=e.loading,c=e.topicValues,u=e.supportTypes,p=e.spuList,d=e.skuList,m=e.topicOpts,h=document.documentElement.clientHeight-46-78-24-24,e=location.pathname.split("/")[3];return y().createElement("div",{className:"addLink_wrapper"},y().createElement(_.Z,{title:(0,T.u)({title:"新增链接任务",url:"/account/project/"+e+"/addLink"})}),y().createElement("div",{className:"addLink_body"},y().createElement("div",null,y().createElement("div",{style:{height:h+"px"}},y().createElement("div",null,y().createElement(E.Input,{ref:function(e){return t.urlInput=e},prepend:"商品详情页",append:y().createElement("div",{className:"queryButton",onClick:function(){return t.handleSearch()}},y().createElement("i",{className:"icon-cem_search"})),placeholder:"请复制商品链接至此，按回车即可",className:"link-input",onKeyUp:function(e){return t.handleKeyUp(e)}}),y().createElement("span",{style:{color:a?"#8C8C8C":"#D96969"}},a?0<r?y().createElement("span",null,"共发现 ",y().createElement("strong",null,r)," 个相关链接"):n?"":"暂无数据":i),y().createElement("div",{style:{marginTop:"20px"}})),y().createElement(E.Loading,{text:"拼命加载中",loading:o},y().createElement(g,{style:{display:n?"block":"none"}}),y().createElement(v,{ref:function(e){return t.linkTable=e},style:{display:n?"none":"block"},onReqSuccess:this.setReqSuccess,onRowClick:this.setLinkDetail,projectId:l}))),y().createElement("div",{style:{minHeight:h+"px"}},y().createElement(k,f()({},this.state,{linkDetail:s,minHeight:h,refreshTable:function(){return t.refreshTable()},projectId:l,topicValues:c,supportTypes:u,spuList:p,skuList:d,topicOpts:m}))))))},e}(y().Component)},46701:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var a=n(35239),i=function(e){var t=e.title,e=e.url;return[{title:"所有项目",url:"/account/project"},{title:a.t.get(a.V.backProjectConfig).name,url:"/account/project/preview"},{title:"comment"===e.split("/")[3]?"电商评论":"price"===e.split("/")[3]?"电商监控":"数据链接",url:"/account/project/"+e.split("/")[3]},{title:t,url:e}]}},17190:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var t=n(67154),a=n.n(t),t=n(85354),i=n.n(t),t=n(67294),C=n.n(t),s=void 0;const S=function(e){var t=e.data.name,n=e.onCheck,a=e.checked,e=C().useState(a),i=e[0],r=e[1];return C().useEffect(function(){r(a)},[a]),C().createElement("label",{className:"el-checkbox yt_product_subscribe_editable-radio",onClick:function(e){s=setTimeout(function(){s&&clearTimeout(s);var e=!i;r(e),n(e)},100)}},C().createElement("input",{value:t,className:"ec-label "+(i?"is_checked":""),title:t,maxLength:6,style:{background:"transparent"}}))};var l=n(92360),o=void 0;const w=function(e){var t=e.keyword,n=e.onCloseClick,a=e.onChange,i=C().useState(t),e=i[0],r=i[1];return C().useEffect(function(){r(t)},[t]),C().createElement(l.Input,{placeholder:"请输入关键字",value:e,icon:e&&"close",onIconClick:function(){r(""),n()},onChange:function(e){r(e),o&&clearTimeout(o),o=setTimeout(function(){a(e),o=void 0},500)}})};const r=function(e){var t=e.className,n=e.onTipClick,a=e.show,i=e.onClick,r=e.onMouseEnter,s=e.onMouseLeave,l=e.addText,o=e.data,c=e.value,u=e.trigger,p=e.defaultValue,d=e.onTagChange,m=e.getTagListRef,h=e.onAddClick,f=e.disabled,g=e.keyword,v=c&&o.find(function(e){return e.id===c})?o.find(function(e){return e.id===c}).name:p&&o&&o.some(function(e){return e.id===p})?o&&o.find(function(e){return e.id===p}).name:o&&o.length?"请选择":"请添加",k=C().useState(g||""),y=k[0],E=k[1],e=C().useState(o),k=e[0],b=e[1];return C().useEffect(function(){b(o)},[o]),C().useEffect(function(){var e=y?o.filter(function(e){return 0<=e.name.toLowerCase().indexOf(y.toLowerCase())}):o;b(e)},[y,o]),C().useEffect(function(){g&&E(g)},[g]),C().createElement("div",{className:"yt_product_setting_edit_input_select_wraper "+t,onClick:"click"===u&&n,onMouseEnter:"hover"===u&&n,onMouseLeave:function(){"hover"===u&&(s(),y&&E(""))}},C().createElement("div",null,C().createElement("div",{className:"ets-trigger",onClick:function(){"click"===u&&(i(),y&&E(""))},onMouseEnter:function(){"hover"===u&&(a||r())}},C().createElement("span",{className:"ets-trigger-title",style:{color:c||!o||o.find(function(e){return e.id===c})||p?"#262626":"#bfbfbf"}},v),C().createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:a?"rotate(-180deg)":""}})),C().createElement("div",{className:"ets-option-panel "+(a?"ets-show":""),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},C().createElement("div",{className:"ets-list",ref:m},o&&0<o.length?C().createElement(C().Fragment,null,C().createElement("div",{style:{maxHeight:260}},C().createElement("div",{className:"ets-search"},C().createElement(w,{keyword:y,onChange:E,onCloseClick:function(){return E("")}})),C().createElement("div",{className:"ets-list-content"},k&&0<k.length?C().createElement(C().Fragment,null,k.slice(0,100).map(function(e){return C().createElement(S,{key:e.id,data:e,checked:c===e.id,onCheck:function(){return e.id?d({id:e.id,name:e.name,split:e.split}):d({name:e.name,split:e.split})}})}),99<k.length&&C().createElement("div",{style:{color:"#d96969",paddingLeft:"18px",fontSize:"12px"}},"— 查看更多请搜索")):C().createElement("div",{className:"no_data"},"暂无数据")))):C().createElement("div",{className:"no_data"},"暂无数据")),C().createElement("div",{className:"ets-add"},C().createElement("div",{className:"ets-add-diviver"}),C().createElement("div",{className:"add_btn "+(f?"add_disabled_btn":""),onClick:function(){f||(h(),y&&E(""),("click"===u?i:r)())}},l)))))},c=function(t){function e(e){var n=t.call(this,e)||this;return n._handleOnTagChange=function(e){n.props.onChange(e),n._setPadShowFalse()},n._setPadShowFalse=function(){n.state.show&&n.setState({show:!1})},n._setPadShowTrue=function(){n.state.show||n.setState({show:!0})},n._handleOnMouseEnter=function(){var e=n.state.show;setTimeout(function(){n.setState({show:!e})},0)},n._handleOnClick=function(e){var t=n.state.show;setTimeout(function(){n.setState({show:!t})},0)},n.tagListRef=void 0,n.state={show:!1},n.event={onClick:n._handleOnClick,onMouseEnter:n._handleOnMouseEnter,onMouseLeave:n._setPadShowFalse,onTagChange:n._handleOnTagChange,getTagListRef:function(e){return n.tagListRef=e}},n}i()(e,t);var n=e.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){e.show!==this.props.show&&this._setPadShowTrue()},n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.addEventListener("click",this._setPadShowFalse)},n.render=function(){return C().createElement(r,a()({},this.props,this.state,this.event))},e}(C().PureComponent)},24473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(67154),p=n.n(a),i=n(37316),d=n.n(i),t=n(85354),r=n.n(t),a=n(67294),m=n.n(a),i=n(45697),t=n.n(i),i=n(94184),h=n.n(i),a=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.children,a=e.className,i=e.block,r=e.indeterminate,s=e.value,l=e.checked,o=e.defaultChecked,c=e.onChange,u=e.disabled,e=d()(e,["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"]),c={value:s,checked:l,defaultChecked:o,onChange:c,disabled:u},a=h()(t,((u={})[t+"-disabled"]=c.disabled,u[t+"-block"]=i,u[t+"-indeterminate"]=r,u),a);return m().createElement("label",p()({tabIndex:c.disabled?-1:0,className:a},e),m().createElement("input",p()({type:"checkbox",className:t+"-input"},c)),m().createElement("span",{className:t+"-status"}),n&&m().createElement("span",{className:t+"-text",title:n},n))},t}(a.Component);a.propTypes={prefixCls:t().string,value:t().oneOfType([t().string,t().number]),checked:t().bool,defaultChecked:t().bool,onChange:t().func,indeterminate:t().bool,disabled:t().bool,block:t().bool},a.defaultProps={prefixCls:"wt-checkbox"};const s=a},85151:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>a.Z,CS:()=>l});var a=n(24473),i=n(67154),o=n.n(i),r=n(37316),c=n.n(r),t=n(85354),s=n.n(t),i=n(67294),u=n.n(i),r=n(45697),t=n.n(r),r=n(94184),p=n.n(r),r=function(i){function e(){for(var n,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=i.call.apply(i,[this].concat(t))||this).handleCheckBoxChange=function(e){var t=n.props.onChange;t&&t(e)},n}return s()(e,i),e.prototype.render=function(){var i=this,e=this.props,t=e.prefixCls,n=e.children,a=e.className,r=(e.onChange,e.values),s=e.checkedList,l=e.block,e=c()(e,["prefixCls","children","className","onChange","values","checkedList","block"]),n=r?r.map(function(e,t){var n=0!==s.length&&-1!==s.indexOf(e);return u().createElement(Checkbox,{key:t,value:e,checked:n,onChange:function(e){return i.handleCheckBoxChange(e)},block:l},e)}):u().Children.map(n,function(e,t){if(e){var n=e.props,a=n.value,a=0!==s.length&&-1!==s.indexOf(a);return u().cloneElement(e,{checked:a,key:t,block:n.block||l,onChange:function(){var e=n.value;i.handleCheckBoxChange(e)}})}});return u().createElement("div",o()({className:p()(t,a)},e),n)},e}(i.Component);r.defaultProps={prefixCls:"wt-checkbox-group"},r.propTypes={onChange:t().func,values:t().array,block:t().bool};const l=r;var d=function(t){var n={};return Object.keys(t).forEach(function(e){/^data\-.+$/.test(e)&&(n[e]=t[e])}),n},i=function(e){function t(){return e.apply(this,arguments)||this}return s()(t,e),t.prototype.render=function(){var e=this.props,t=d(e);return u().createElement("label",{className:e.className,title:e.children},u().createElement("div",{className:"checkbox"},u().createElement("input",o()({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),u().createElement("div",{className:"checkbox-body"}))," ",u().createElement("span",null,e.children))},t}(i.Component);i.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}},41484:(e,t,n)=>{var a={"./source_bd.png":47168,"./source_bdtb.png":36529,"./source_bdzd.png":3208,"./source_bilibili.png":99760,"./source_bzy.png":78769,"./source_chuangwei.png":51575,"./source_coloros_bbs.png":49158,"./source_custom.png":73700,"./source_douyin.png":34030,"./source_dy.png":45886,"./source_dzdp.png":76987,"./source_ecovacs.png":71626,"./source_gm.png":24285,"./source_haixin.png":24860,"./source_hmts.png":77517,"./source_htsc.png":76892,"./source_huawei.png":27416,"./source_jd.png":72887,"./source_jrtt.png":89319,"./source_jts.png":75602,"./source_jx.png":66682,"./source_nps.png":83550,"./source_oppo.png":76761,"./source_opposq.png":36325,"./source_pdd.png":34419,"./source_smzdm.png":35173,"./source_snyg.png":94525,"./source_suning.png":86264,"./source_tb.png":70701,"./source_tm.png":11099,"./source_undefined.png":66924,"./source_vivo.png":67901,"./source_vivo_bbs.png":728,"./source_wph.png":54742,"./source_wx.png":41175,"./source_xhs.png":67669,"./source_xl.png":48731,"./source_xm.png":69717,"./source_xm_bbs.png":784,"./source_xw.png":14026,"./source_yhd.png":77999,"./source_ymx.png":86455,"./source_yp.png":50060,"./source_zh.png":52752};function i(e){e=r(e);return n(e)}function r(e){if(n.o(a,e))return a[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(a)},i.resolve=r,(e.exports=i).id=41484}}]);