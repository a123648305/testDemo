(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8929],{17190:(e,n,t)=>{"use strict";t.d(n,{Z:()=>s});var n=t(67154),a=t.n(n),n=t(85354),r=t.n(n),n=t(67294),y=t.n(n),o=void 0;const w=function(e){var n=e.data.name,t=e.onCheck,a=e.checked,e=y().useState(a),r=e[0],i=e[1];return y().useEffect(function(){i(a)},[a]),y().createElement("label",{className:"el-checkbox yt_product_subscribe_editable-radio",onClick:function(e){o=setTimeout(function(){o&&clearTimeout(o);var e=!r;i(e),t(e)},100)}},y().createElement("input",{value:n,className:"ec-label "+(r?"is_checked":""),title:n,maxLength:6,style:{background:"transparent"}}))};var l=t(92360),c=void 0;const b=function(e){var n=e.keyword,t=e.onCloseClick,a=e.onChange,r=y().useState(n),e=r[0],i=r[1];return y().useEffect(function(){i(n)},[n]),y().createElement(l.Input,{placeholder:"请输入关键字",value:e,icon:e&&"close",onIconClick:function(){i(""),t()},onChange:function(e){i(e),c&&clearTimeout(c),c=setTimeout(function(){a(e),c=void 0},500)}})};const i=function(e){var n=e.className,t=e.onTipClick,a=e.show,r=e.onClick,i=e.onMouseEnter,o=e.onMouseLeave,l=e.addText,c=e.data,s=e.value,u=e.trigger,d=e.defaultValue,p=e.onTagChange,m=e.getTagListRef,h=e.onAddClick,f=e.disabled,g=e.keyword,v=s&&c.find(function(e){return e.id===s})?c.find(function(e){return e.id===s}).name:d&&c&&c.some(function(e){return e.id===d})?c&&c.find(function(e){return e.id===d}).name:c&&c.length?"请选择":"请添加",_=y().useState(g||""),C=_[0],E=_[1],e=y().useState(c),_=e[0],k=e[1];return y().useEffect(function(){k(c)},[c]),y().useEffect(function(){var e=C?c.filter(function(e){return 0<=e.name.toLowerCase().indexOf(C.toLowerCase())}):c;k(e)},[C,c]),y().useEffect(function(){g&&E(g)},[g]),y().createElement("div",{className:"yt_product_setting_edit_input_select_wraper "+n,onClick:"click"===u&&t,onMouseEnter:"hover"===u&&t,onMouseLeave:function(){"hover"===u&&(o(),C&&E(""))}},y().createElement("div",null,y().createElement("div",{className:"ets-trigger",onClick:function(){"click"===u&&(r(),C&&E(""))},onMouseEnter:function(){"hover"===u&&(a||i())}},y().createElement("span",{className:"ets-trigger-title",style:{color:s||!c||c.find(function(e){return e.id===s})||d?"#262626":"#bfbfbf"}},v),y().createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:a?"rotate(-180deg)":""}})),y().createElement("div",{className:"ets-option-panel "+(a?"ets-show":""),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},y().createElement("div",{className:"ets-list",ref:m},c&&0<c.length?y().createElement(y().Fragment,null,y().createElement("div",{style:{maxHeight:260}},y().createElement("div",{className:"ets-search"},y().createElement(b,{keyword:C,onChange:E,onCloseClick:function(){return E("")}})),y().createElement("div",{className:"ets-list-content"},_&&0<_.length?y().createElement(y().Fragment,null,_.slice(0,100).map(function(e){return y().createElement(w,{key:e.id,data:e,checked:s===e.id,onCheck:function(){return e.id?p({id:e.id,name:e.name,split:e.split}):p({name:e.name,split:e.split})}})}),99<_.length&&y().createElement("div",{style:{color:"#d96969",paddingLeft:"18px",fontSize:"12px"}},"— 查看更多请搜索")):y().createElement("div",{className:"no_data"},"暂无数据")))):y().createElement("div",{className:"no_data"},"暂无数据")),y().createElement("div",{className:"ets-add"},y().createElement("div",{className:"ets-add-diviver"}),y().createElement("div",{className:"add_btn "+(f?"add_disabled_btn":""),onClick:function(){f||(h(),C&&E(""),("click"===u?r:i)())}},l)))))},s=function(n){function e(e){var t=n.call(this,e)||this;return t._handleOnTagChange=function(e){t.props.onChange(e),t._setPadShowFalse()},t._setPadShowFalse=function(){t.state.show&&t.setState({show:!1})},t._setPadShowTrue=function(){t.state.show||t.setState({show:!0})},t._handleOnMouseEnter=function(){var e=t.state.show;setTimeout(function(){t.setState({show:!e})},0)},t._handleOnClick=function(e){var n=t.state.show;setTimeout(function(){t.setState({show:!n})},0)},t.tagListRef=void 0,t.state={show:!1},t.event={onClick:t._handleOnClick,onMouseEnter:t._handleOnMouseEnter,onMouseLeave:t._setPadShowFalse,onTagChange:t._handleOnTagChange,getTagListRef:function(e){return t.tagListRef=e}},t}r()(e,n);var t=e.prototype;return t.UNSAFE_componentWillReceiveProps=function(e){e.show!==this.props.show&&this._setPadShowTrue()},t.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},t.componentWillUnmount=function(){window.addEventListener("click",this._setPadShowFalse)},t.render=function(){return y().createElement(i,a()({},this.props,this.state,this.event))},e}(y().PureComponent)},29257:(e,n,t)=>{"use strict";t.d(n,{$:()=>a});var a=[{id:"未知",name:"未知"},{id:"套装",name:"套装"},{id:"非套装",name:"非套装"}]},61918:(e,n,t)=>{"use strict";t.d(n,{Z:()=>a});var n=t(67294),u=t.n(n),n=t(45697),t=t.n(n),n=function(e){var n=e.className,t=e.onClear,a=e.onSearch,r=e.placeholder,i=e.style,o=e.defValue,l=e.signal,e=u().useState(o),c=e[0],s=e[1];u().useEffect(function(){s(o)},[o,l]);return u().createElement("div",{style:i,className:"yt_search_input_wrapper "+(n||"")},u().createElement("input",{placeholder:r,value:c,onKeyDown:function(e){13===e.keyCode&&a(c)},onChange:function(e){return s(e.target.value)},autoComplete:"off"}),c&&u().createElement("i",{className:"icon-cem_log-off",onClick:function(){s(""),t&&t("")}}),u().createElement("i",{className:"icon-cem_small-search",onClick:function(){return a(c)}}))};n.propTypes={className:t().string,onSearch:t().func.isRequired,placeholder:t().string,style:t().object,defValue:t().string,signal:t().any,onClear:t().func};const a=n},2271:(e,n,t)=>{"use strict";t.d(n,{Z:()=>N});var a=t(37316),p=t.n(a),n=t(67154),m=t.n(n),a=t(93913),r=t.n(a),n=t(85354),i=t.n(n),a=t(23279),o=t.n(a),n=t(67294),h=t.n(n),f=t(92360),s=t(35303),a=t(45697),n=t.n(a),u=[{label:"10项/页",value:10},{label:"20项/页",value:20},{label:"40项/页",value:40},{label:"100项/页",value:100}];const g=function(e){var n=e.onPageChange,t=e.onSizeChange,a=e.total,r=void 0===a?0:a,i=e.pageIndex,o=e.pageSize,l=e.currLength,c=e.layout,a=e.className,e=0===r?0:(i-1)*o+1,l=0===r?0:e+l-1;return 0===r?null:h().createElement("div",{className:"yt-awp-pagination "+(a||"")},h().createElement("span",{className:"total_num"},h().createElement("span",null,e+" - "+l+" "),"项，共",h().createElement("span",null," "+r+" "),"项"),h().createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},h().createElement(f.Pagination,{small:!0,pageSize:o,currentPage:i,pageCount:Math.ceil(r/o),layout:0===r?"":"prev, pager, next",onCurrentChange:n}),void 0===c||c.includes("sizes")?h().createElement(s.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:o||10,onChange:t},u.map(function(e,n){return h().createElement(s.Wx,{key:n,label:e.label,value:e.value},e.label)})):null))};n().propTypes={onPageChange:n().func,onSizeChange:n().func,total:n().number,pageIndex:n().number,pageSize:n().number,currLength:n().number,layout:n().string,className:n().string};var v=t(8201),a=t(48926),l=t.n(a),a=t(87757),c=t.n(a),d=t(36144);function _(){return(_=l()(c().mark(function e(n){var t,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.projectId,a=n.key,e.abrupt("return",d.h.post("/default/value/find",{projectId:t,key:a}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(){return(C=l()(c().mark(function e(n){var t,a,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.projectId,a=n.value,r=n.key,e.abrupt("return",d.h.post("/default/value/update",{projectId:t,key:r,value:a}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var E=t(39432),k=t(43036),y=t(51474),w=t(87219),a=function(n){function e(e){var s=n.call(this,e)||this;return s._setShowFalse=function(){s.setState({show:!1})},s._handleParentClick=function(e){s.state.show&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},s._handleOnTriggerClick=function(){setTimeout(function(){s.setState({show:!s.state.show})},0)},s._renderOptionItem=function(n,e,t,a,r,i){var o=s.state.maxLabelWidth,l=s.props,c=l.value,l=l.savedKey,c=c.find(function(e){return e.prop===n.prop});return h().createElement("div",{className:"opt_item "+(e?"draggable":""),key:n.prop},e&&h().createElement("i",{className:"icon-cem_move my_handle"}),h().createElement("div",{className:"opt_content",style:{width:o,marginLeft:e?0:12}},h().createElement("div",{className:"item_label",onClick:function(e){e.stopPropagation(),s._handleOnItemClick(n.prop)}},h().createElement("span",{className:"icon_checkbox "+(c&&c.checked?"checkbox_checked":"")}),h().createElement("span",null,n.label)),h().createElement("div",{className:"item_control",style:{display:"product_setting_link"===l?"none":"block"}},h().createElement(k.Z,{placement:"top",overlay:t},h().createElement("span",{onClick:function(e){return a(e,n.prop)}},h().createElement("i",{className:(e?"icon-cem_up":"icon-cem_up-and-down")+" fun_icon_a"}))),h().createElement(k.Z,{placement:"top",overlay:r},h().createElement("span",{onClick:function(e){return i(e,n.prop)},style:{marginLeft:4}},h().createElement("i",{className:"icon-cem_down fun_icon_b"}))))))},s._handleOnItemClick=function(n){var e=s.props,t=e.value,e=e.onChange;e&&e((0,w.ZP)(t,function(e){e=e.find(function(e){return e.prop===n});e&&(e.checked=!e.checked)}))},s._handleOnFilxedLeftClick=function(e,n){e.stopPropagation(),s._handleOnFixedChange(n,"left")},s._handleOnCancelFixedClick=function(e,n){e.stopPropagation(),s._handleOnFixedChange(n,"")},s._handleOnFixedRightClick=function(e,n){e.stopPropagation(),s._handleOnFixedChange(n,"right")},s._handleOnFixedChange=function(n,t){var e=s.props,a=e.value,e=e.onChange;e&&e((0,w.ZP)(a,function(e){e=e.find(function(e){return e.prop===n});e&&(e.fixed=t)}))},s.state={show:!1,value:[],leftOpts:[],normalOpts:[],rightOpts:[],maxLabelWidth:e.value.reduce(function(e,n){return Math.max((0,E.jD)(n.label,14)+56+16+16,e)},0)},s}i()(e,n),e.getDerivedStateFromProps=function(a,e){if(JSON.stringify(a.value)===JSON.stringify(e.value))return null;var n=a.value.reduce(function(e,n){var t=1;return"left"===n.fixed&&(t=0),e[t="right"===n.fixed?2:t].push(a.value.find(function(e){return e.prop===n.prop})),e},[[],[],[]]),t=n[0],e=n[1],n=n[2];return{value:a.value,leftOpts:t,normalOpts:e,rightOpts:n,maxLabelWidth:a.value.reduce(function(e,n){return Math.max((0,E.jD)(n.label,14)+56+16+16,e)},0)}};var t=e.prototype;return t.componentDidMount=function(){var o=this;window.addEventListener("click",this._setShowFalse);var e=document.querySelectorAll("#draggable_zone");e.length&&e.forEach(function(e){y.ZP.create(e,{group:"draggable_zone",animation:150,filter:".undraggable",draggable:".draggable",handle:".my_handle",onEnd:function(e){var n=o.props,t=n.value,a=n.onChange,r=e.newIndex,i=e.oldIndex;r!==i&&(n=t.filter(function(e){return"left"===e.fixed}),e=t.filter(function(e){return"right"===e.fixed}),t=(0,w.ZP)(t.filter(function(e){return!e.fixed}),function(e){var n=e.splice(i,1)[0];e.splice(r,0,n)}),a&&a([].concat(n,t,e)))}})})},t.componentWillUnmount=function(){window.removeEventListener("click",this._setShowFalse)},t.render=function(){var n=this,e=this.state,t=e.show,a=e.leftOpts,r=e.normalOpts,i=e.rightOpts,o=this.props,e=o.className,o=o.title;return h().createElement("div",{className:"yt_columns_selector_wrapper "+(e||""),onClick:this._handleParentClick},h().createElement("div",{className:"trigger "+(t?"sel":""),onClick:this._handleOnTriggerClick},o||"列",h().createElement("i",{className:"icon-cem_arrow-launches",style:{transform:t?"rotate(-180deg)":""}})),h().createElement("div",{className:"options "+(t?"active":"")},0<a.length&&h().createElement(h().Fragment,null,h().createElement("div",{className:"opt_label"},"固定在左侧"),a.map(function(e){return n._renderOptionItem(e,!1,"不固定",n._handleOnCancelFixedClick,"固定在列尾",n._handleOnFixedRightClick)})),(0<a.length||0<i.length)&&h().createElement("div",{className:"opt_label"},"不固定"),h().createElement("div",{id:"draggable_zone",style:{visibility:0<r.length}},r.map(function(e){return n._renderOptionItem(e,!0,"固定在列头",n._handleOnFilxedLeftClick,"固定在列尾",n._handleOnFixedRightClick)})),0<i.length&&h().createElement(h().Fragment,null,h().createElement("div",{className:"opt_label"},"固定在右侧"),i.map(function(e){return n._renderOptionItem(e,!1,"不固定",n._handleOnCancelFixedClick,"固定在列头",n._handleOnFilxedLeftClick)}))))},e}(h().PureComponent);const b=a;a.propTypes={className:n().string,title:n().string,value:n().arrayOf(n().shape({label:n().string,prop:n().string,fixed:n().string,checked:n().bool})),onChange:n().func};var S=t(35239),a=function(n){function e(e){var t=n.call(this,e)||this;return t._handleOnResize=function(){var e=document.querySelector(".yt-listview-wrapper");e&&t.setState({tableWidth:e.clientWidth-5})},t._handleOnColumnsChange=function(e){t.setState({columns:e},function(){t.props.savedKey&&!function(){return C.apply(this,arguments)}({projectId:S.t.get(S.V.curProject).id,key:t.props.savedKey,value:JSON.stringify(e.map(function(e){return{prop:e.prop,checked:e.checked,fixed:e.fixed}}))}).then(function(e){e.data})})},t.handleRoKey=function(e){var n=t.props.rowKeyProp;return n&&e&&e[n]?e[n]:JSON.stringify(e)},t.state={talbeWidth:0,columns:e.columns||[],loadingSave:!0},t}i()(e,n),e.getDerivedStateFromProps=function(e,n){};var t=e.prototype;return t.componentDidMount=function(){var t=this;window.addEventListener("resize",o()(this._handleOnResize,150)),this._handleOnResize();var e=this.props,n=e.savedKey,r=e.columns;n&&!function(){return _.apply(this,arguments)}({projectId:S.t.get(S.V.curProject).id,key:n}).then(function(e){var n,a=e.data;if(2e4===a.code)try{n=r.map(function(n,e){var t=JSON.parse(a.result).filter(function(e){e=e.prop;return n.prop===e});return t&&0<t.length?m()({},n,t[0]):n}).filter(function(e){return e})}catch(e){}finally{t.setState({columns:n||t.state.columns,loadingSave:!1})}})},t.componentWillUnmount=function(){window.removeEventListener("resize",this._handleOnResize)},t.componentDidUpdate=function(e,n){var r=this;JSON.stringify(e.columns)!==JSON.stringify(this.props.columns)&&0<this.props.columns.length&&this.setState({columns:this.props.columns.reduce(function(e,n,t){var a=r.state.columns.findIndex(function(e){e=e.prop;return n.prop===e});return e.splice(-1<a?a:t,0,m()({},n,r.state.columns[a])),e},[]).filter(function(e){return e})})},t.render=function(){var e=this.props,n=e.data,t=e.total,a=void 0===t?0:t,r=e.loading,i=e.savedKey,o=e.pageIndex,l=e.pageSize,c=e.onPageChange,s=e.onPageSizeChange,u=e.className,d=void 0===u?"":u,t=p()(e,["data","total","loading","savedKey","pageIndex","pageSize","onPageChange","onPageSizeChange","className"]),u=this.state,e=u.columns,u=u.loadingSave;return h().createElement(v.Z,{data:n,className:"yt-listview-wrapper "+d,loading:i&&u||r},(0,v.P)(n)&&h().createElement(h().Fragment,null,h().createElement(f.Table,m()({},t,{columns:(i?this:this.props).columns,data:n,rowKey:this.handleRoKey})),c&&h().createElement(g,{onPageChange:c,onSizeChange:s,total:a,currLength:n.length,pageIndex:o,pageSize:l}),i&&h().createElement(b,{className:"column_selector",value:e,savedKey:i,onChange:this._handleOnColumnsChange})))},r()(e,[{key:"columns",get:function(){var n,e=this.state,t=e.tableWidth,a=e.columns,r=this.props,e=r.columnRenders,i=void 0===e?{}:e,e=r.headerRenders,o=void 0===e?{}:e,r=r.prefixColumns,l=0,c=0,s=0,a=[].concat(void 0===r?[]:r,JSON.parse(JSON.stringify(a.filter(function(e){e=e.checked;return void 0===e||e}))));return a.forEach(function(e){s+=e.width,e.fixed?l+=e.width:c+=e.width;var n=i[e.prop];n&&(e.render=n);n=o[e.prop];n&&(e.renderHeader=n)}),s<t&&(n=t-l,a.forEach(function(e){void 0!==e.checked&&!e.checked||e.fixed||(e.width=e.width/c*n)})),a}}]),e}(h().PureComponent);a.propTypes={className:n().string,savedKey:n().string.isRequired,rowKeyProp:n().string,data:n().any.isRequired,total:n().number,fixedHeight:n().bool,loading:n().bool,pageIndex:n().number,pageSize:n().number,onPageChange:n().func,onPageSizeChange:n().func,columnRenders:n().shape(((t={})[n().string]=n().func,t)),headerRenders:n().shape(((t={})[n().string]=n().func,t)),prefixColumns:n().arrayOf(n().shape({label:n().string,prop:n().string,fixed:n().oneOf(["","left","right"]),width:n().number,checked:n().bool})),columns:n().arrayOf(n().shape({label:n().string,prop:n().string,fixed:n().oneOf(["","left","right"]),width:n().number,checked:n().bool})).isRequired};const N=a}}]);