(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1560],{11765:(e,t,n)=>{"use strict";n.d(t,{gt:()=>a,DR:()=>l,c6:()=>o});var t=n(67154),r=n.n(t),i=(n(2329),{"性别":"SCENE_SEX","年龄段":"SCENE_AGE","年龄":"SCENE_AGE","关系":"SCENE_RELATION","使用场合":"SCENE_USE_SCENE","用途":"SCENE_USE","购买决策":"SCENE_BUY_DECISION","用户建议":"SCENE_MY_ADVICE"}),a=function(e,t,n){var a=e.find(function(e){return"SCENE_ASPECT"===e.id});return[].concat(e.filter(function(e){return"SCENE_ASPECT"!==e.id}).map(function(e){return r()({},e)}),[{id:"SCENE_ASPECT",isSelectAll:a&&a.isSelectAll?a.isSelectAll:null,values:a?[].concat(a.values.map(function(e){return r()({},e)}),[{id:i[n],values:[t]}]):[{id:i[n],values:[t]}]}])},l=function(e,t,n){var a=e.find(function(e){return"CONFIG"===e.id});return[].concat(e.filter(function(e){return"CONFIG"!==e.id}).map(function(e){return r()({},e)}),[{id:"CONFIG",isSelectAll:a&&a.isSelectAll?a.isSelectAll:null,values:[].concat(a.values.filter(function(e){return e.id!==n}).map(function(e){return r()({},e)}),[{id:n,values:[t]}])}])},o=function(e,t,n){var a=e.find(function(e){return"ASPECT_MODEL"===e.id});return[].concat(e.filter(function(e){return"ASPECT_MODEL"!==e.id}).map(function(e){return r()({},e)}),[{id:"ASPECT_MODEL",values:a?[].concat(a.values.filter(function(e){return e.id!==n[0]&&"ASPECT_ESCORE"!==e.id}).map(function(e){return r()({},e)}),[{id:n[0],values:[t]},{id:"ASPECT_ESCORE",values:n[1].includes("负面")?["3"]:n[1].includes("正面")?["8"]:["3","8"]}]):[{id:n[0],values:[t]},{id:"ASPECT_ESCORE",values:n[1].includes("负面")?["3"]:n[1].includes("正面")?["8"]:["3","8"]}]}])}},2786:(e,t,n)=>{"use strict";n.d(t,{X_:()=>r});var t=n(30381),f=n.n(t),a=n(87219);function d(e,t){var n,a=JSON.parse(JSON.stringify(e)),r=e.quickChoice,i=e.from,l=e.to,e=f()().format("YYYY-MM-DD HH:mm:ss").split(" ")[1];return"近24小时"===r?1===t?(n=i.split(" ").map(function(e){return e.trim()}),a.from=f()(n[0]).format("YYYY-MM-DD")+" "+e,a.to=""+f()(n[0]).endOf("day").format("YYYY-MM-DD HH:mm:ss")):(n=l.split(" ").map(function(e){return e.trim()}),a.from=""+f()(n[0]).startOf("day").format("YYYY-MM-DD"),a.to=f()(n[0]).format("YYYY-MM-DD")+" "+e):/小时/.test(r)&&(r=i.split(" ").map(function(e){return e.trim()}),1===t?(a.from=i,a.to=f()(r[0]).format("YYYY-MM-DD")+" "+f()(i).hour()+":59:59"):(a.from=""+f()(r[0]).startOf("day").format("YYYY-MM-DD HH:mm:ss"),a.to=l)),a}var r=function(e,i,l,o,c,t){i.quickChoice;var s=i.numOfDays,u=/:/.test(i.quickChoice)||-1===i.quickChoice.indexOf("-");return"line"===e&&o instanceof Array&&0<o.length?(0,a.ZP)(i,function(e){var t,n=function(e,t,n){var a=n?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";switch(t){case"HOUR":return{from:f()(e).format("YYYY-MM-DD HH:00:00"),to:f()(e).format("YYYY-MM-DD HH:59:59")};case"YEAR":var r=f()(e);return{from:r.startOf("year").format(a),to:r.endOf("year").format(a)};case"QUARTER":var i=e.split("-"),i=f()().year(i[0]).quarter(i[1]);return{from:i.startOf("quarter").format(a),to:i.endOf("quarter").format(a)};case"MONTH":var l=f()(e);return{from:l.startOf("month").format(a),to:l.endOf("month").format(a)};case"WEEK":i=e.split("-"),l=i[0],i=i[1],i=f()().year(l).week(i);return{from:i.startOf("week").format(a),to:i.endOf("week").format(a)};case"DAY":default:return{from:e,to:e}}}(l,c,u),a=n.from,r=n.to;"DAY"!==c&&"HOUR"!==c?JSON.stringify(l)===JSON.stringify(o[0])?a=e.from:JSON.stringify(l)===JSON.stringify(o[o.length-1])&&(r=e.to):"DAY"!==c&&"HOUR"!==c||1!==s&&2!==s||(JSON.stringify(l)===JSON.stringify(o[0])?(a=d(i,1).from,r=d(i,1).to):JSON.stringify(l)===JSON.stringify(o[o.length-1])&&(r=d(i,2).to,a=d(i,2).from)),e.from=a,e.to=r,e.numOfDays=(t=r,n=a,t=Date.parse(r),n=Date.parse(n),n=Math.abs(t-n),Math.floor(n/864e5)+1),e.quickChoice=a.replaceAll("-",".")+" - "+r.replaceAll("-",".")}):i}},91455:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var a=n(37316),r=n.n(a),i=n(67154),c=n.n(i),t=n(85354),l=n.n(t),a=n(67294),T=n.n(a),o=n(35239),i=n(55609),D=n(48577),_=n(61409),N=n(19731),E=(n(43378),n(62443)),u=n(39432),f=n(70715),d=n(87300),p=n(81408),t=(n(11765),function(a){function e(){for(var s,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(s=a.call.apply(a,[this].concat(t))||this).chartRef=void 0,s.source=void 0,s.lineSource=void 0,s.objNames=void 0,s.mColor=f.OW,s.legendSelected=void 0,s.getChartRef=function(e){return s.chartRef=e},s.setValue=function(a){var e=a.sort(function(e,t){return t.total-e.total}).map(function(e){return e.name}),t=e.reduce(function(e,t){var n=a.find(function(e){return e.name===t});return s.legendSelected&&!s.legendSelected[t]||e.push([n.name,n.total]),e},[["挖掘场景","标签数量"]]),n=a[0].data.map(function(e){return e.name});s.lineSource=n.map(function(n){return[n].concat(e.map(function(t){var e=a.find(function(e){return e.name===t});if(e){e=e.data.find(function(e){return e.name===n});return e?e.count:0}return 0}))});n=[["日期"].concat(e)].concat(s.lineSource);s.objNames=e,s.source=[t,n]},s.getOption=function(e){var o=e.title,n=e.showLabel,c=Object.values(s.props.dateType)[0],e=160<(0,u.jD)(s.source[0].reduce(function(e,t,n){return 0===n?"":e+t[0]},""),12);return{title:{text:o},grid:[{left:36,top:100,width:270,bottom:24,containLabel:!0},{left:360,right:48,top:100,bottom:52,containLabel:!0}],dataset:s.source.map(function(e){return{source:e}}),tooltip:{trigger:"axis",showDelay:20,hideDelay:10,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",axisPointer:{type:"none",label:{show:!1}},position:function(e,t,n,a,r){var i=r.contentSize,l=r.viewSize,o=e[0]<l[0]/2?0:-1,r=e[1]<l[1]/2?-.5:-1,l=e[0]<l[0]/2?12:-12;return[e[0]+o*i[0]+l,e[1]+r*i[1]]},formatter:function(n,a,r){if(n.length)return setTimeout(function(){var e,t;"bar"!==n[0].seriesType?(t=n[0].axisValue,e=n.map(function(e){var t=e.marker,n=e.seriesName,e=e.data;return{name:"<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+t+"</span>"+n+"</div><div style='color: #262626;margin-left: 10px;'>\n                  "+(0,u.hE)(e.value)+"\n                </div></div>",value:e.value}}).map(function(e){return e.name}),t='\n            <span style="font-size: 12px; color: #8c8c8c; font-weight: 400;">'+(0,u.Sn)(c,t)+"</span>",r(a,(0,d.r)(t,e))):(e=(t=n[0]).marker,t=t.data,r(a,(0,d.r)(""+t[0],["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+e+"</span>标签数量</div><div style='color: #262626;margin-left: 10px;'>\n                       "+(0,u.hE)(t[1])+"\n                    </div></div>"],[{title:"消息",icon:"icon-cem_jump-message",callback:function(){return s._handleOnJumpMsg(n[0],o)}}],"yt_new_tooltip_wrapper")))},0)}},legend:{top:50,left:40,right:48,itemWidth:10,itemHeight:10,type:"scroll",itemGap:24,selected:s.legendSelected,data:s.objNames,icon:"circle"},dataZoom:[{show:!0,bottom:24,xAxisIndex:1,height:16,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"}],xAxis:[{type:"category",gridIndex:0,axisLabel:{rotate:e?45:0,show:!0,data:s.objNames,interval:0,formatter:function(e){return 6<e.length?e.substring(0,5)+"...":e}}},{type:"category",gridIndex:1,boundaryGap:!1,axisPointer:{type:"line",label:{show:!1}},axisLabel:{formatter:function(e){return(0,u.Sn)(c,e)}},data:s.lineSource.map(function(e){return e[0]})}],yAxis:[{type:"value",gridIndex:0,axisLabel:{color:"#626262",formatter:function(e){return(0,u.hE)(e)}},interval:(0,p.lQ)(s.source[0].slice(1)).intVal,max:(0,p.lQ)(s.source[0].slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},{type:"value",gridIndex:1,axisLabel:{color:"#626262",formatter:function(e){return(0,u.hE)(e)}},interval:(0,p.lQ)(s.source[1].slice(1)).intVal,max:(0,p.lQ)(s.source[1].slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}}],series:[{type:"bar",xAxisIndex:0,yAxisIndex:0,datasetIndex:0,barMaxWidth:24,data:s.source[0].slice(1),itemStyle:{color:function(e){var t=e.dataIndex,n=e.name;if(s.legendSelected){e=Object.keys(s.legendSelected);return f.OW[e.indexOf(n)]}return f.OW[t]}},label:{show:!0,position:"top",color:"#262626",formatter:function(e){e=e.value;return(0,u.hE)(e[1])}}}].concat(s.objNames.map(function(e,t){return{type:"line",name:s.objNames[t],xAxisIndex:1,yAxisIndex:1,symbolSize:1,datasetIndex:1,data:s.lineSource.map(function(e){return{value:e[t+1],tooltip:{trigger:"item",formatter:function(r,i,l){return setTimeout(function(){var e=r.seriesName,t=r.name,n=r.data,a=r.marker,t="\n                  <div style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;position:relative;\">\n                    <span style='position:absolute;width:40px;height:150px;left:-40px;top:-30px;'></span>\n                    <span style='position:absolute;width:40px;height:150px;right:-40px;top:-30px;'></span>\n                  </div>\n                  <span style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;\">"+(0,u.Sn)(c,t)+"</span>",n=["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+a+"</span>"+e+"</div><div style='color: #262626;margin-left: 10px;'>\n                      "+n.value+"\n                    </div></div>"];l(i,(0,d.r)(t,n,[{title:"消息",icon:"icon-cem_jump-message",callback:function(){return s._handleOnJumpMsg(r,o)}}],"yt_new_tooltip_wrapper"))},0)}},label:{show:n,position:"top",color:"#262626"}}}),itemStyle:{color:f.OW[t]}}}))}},s}return l()(e,a),e.prototype.renderChart=function(e,t,n){this.setValue(e),this.chartRef.clear(),this.chartRef.setOption(this.getOption({title:t,showLabel:n}))},e}(T().PureComponent)),m=n(8201),h=n(98191),S=n(50976),v=n(60496),s=n(94644),a=n(45697),a=n.n(a),t=function(r){function e(e){var a=r.call(this,e)||this;return a.handleOnMoreClick=function(e){var t=a.props,n=t.title,t=t.data;"image"===e&&a.chartRef?(0,s._v)(a.chartRef,n):"data"===e&&(0,m.P)(t)&&(0,s.aT)([a.source[0].map(function(e){return e.map(function(e){return e%1?(100*e).toFixed(2)+"%":e})}),a.source[1].map(function(e){return e.map(function(e){return e%1?(100*e).toFixed(2)+"%":e})})],n)},a.handleOnLegendChange=function(e){e=e.selected;a.legendSelected=e,a.renderChart()},a._handleOnJumpMsg=function(e,t){a.props.onMsgClick(e,t)},a._handleOnJumpAnalyze=function(e){a.props.onChartClick(e)},a.state={showLabel:!1},a}l()(e,r);var t=e.prototype;return t.componentDidMount=function(){var a=this;this.internalId=setInterval(function(){var e,t,n;a.chartRef&&(clearInterval(a.internalId),a.renderChart(),t=(e=a.chartRef._dom.children)[0],n=e[1],t.addEventListener("mouseleave",function(e){a.chartLeaveTimeout=setTimeout(function(){a.chartLeaveTimeout&&(n.style.display="none")},2e3)}),n&&n.addEventListener("mouseenter",function(e){a.chartLeaveTimeout=void 0}))},200)},t.componentDidUpdate=function(e,t){var n=e.data,a=this.props.data,e=t.showLabel,t=this.state.showLabel;(0,m.P)(a)&&JSON.stringify(n)!==JSON.stringify(a)&&this.renderChart(),e!==t&&this.renderChart(),!(0,m.P)(a)&&this.chartRef&&(this.chartRef=void 0)},t.renderChart=function(){var e=this.props,t=e.data,n=e.title,e=this.state.showLabel;(0,m.P)(t)&&this.chartRef&&r.prototype.renderChart.call(this,t,n,e)},t.render=function(){var e=this,t=this.props,n=t.data,a=t.loading,r=t.title,i=t.titleOverlay,l=t.onChange,o=t.onFlavorChange,c=t.dateOptions,s=t.dateType,u=t.flavorDateType,t=t.style,f=this.state.showLabel,d=Object.keys(s)[0],p=Object.keys(u)[0];return T().createElement(m.Z,{className:"yt_market_bm_sanalysis_bar_line_chart",data:n,style:t,loading:a,renderTitle:T().createElement(h.Z,{title:r,titleOverlay:i,data:n},T().createElement(v.Z,{options:c,activeObj:s[d],flavor:u[p],rightHook:!0,onChange:function(e){var t;return l(((t={})[d]=e,t))},onFlavorChange:function(e){var t;return o(((t={})[p]=e,t))}}),T().createElement(E.default,{placement:"top",content:"显示图表标签",mouseEnterDelay:.6},T().createElement("i",{className:"icon-tubiaobiaoqian "+(f?"active":""),onClick:function(){e.setState({showLabel:!f})}})),T().createElement(E.default,{placement:"top",content:"导出数据",mouseEnterDelay:.6},T().createElement("i",{className:"icon-daochu",onClick:function(){return e.handleOnMoreClick("data")}})),T().createElement(E.default,{placement:"top",content:"导出图片",mouseEnterDelay:.6},T().createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e.handleOnMoreClick("image")}})))},T().createElement(S.Z,{onChartReady:this.getChartRef,theme:"yunting_multi_color",option:{},style:{height:"100%"},onEvents:{legendselectchanged:this.handleOnLegendChange}}))},e}(t);t.propTypes={data:a().any,style:a().object,titleOverlay:a().oneOf([a().string,a().node]),title:a().string,loading:a().bool,onChange:a().func,onMsgClick:a().func,onChartClick:a().func,dateOptions:a().arrayOf({title:a().string,value:a().string}),dateType:a().object,flavorDateType:a().object};const A=t;var O=n(49447);const y=function(e){var t=e.pageType,n=e.dateOptions,a=e.trendData,r=e.timeType,i=e.fTimeType,l=e.fetchingTrendData,o=e.seneData,c=e.seneDateType,s=e.flavorSeneDateType,u=e.fetchingSeneData,f=e.relData,d=e.relDataType,p=e.flavorRelDataType,E=e.fetchingRelativeData,m=e.relChartConfig,h=e.onGraphClick,S=e.onFilterChange,v=e.onFlavorChange,y=e.filterReady,C=e.filterChange,g=e.onMsgClick,e=e.onChartClick;return T().createElement("div",{className:"yt_explore_scene_overview_wrapper"},T().createElement(D.Z,{onReady:y,onChange:C,pageType:t,advanceAuthority:!1,touchData:["电商评论"],selectValue:"电商评论",valueConf:["fullInfo"],showList:["fullDate","screening","save","sourceSearch"],hasHour:!0},T().createElement("div",{className:"content"},T().createElement(N.Z,{title:"提及场景标签的消息数量",data:a,loading:l,timeType:r,fTimeType:i,timeOptions:n,onFilterChange:S,onFlavorChange:v,onMsgClick:g,pageType:t,titleOverlay:T().createElement("div",null,"场景标签提及率 = 提及场景标签的消息数量 ÷ 消息总量")}),T().createElement(A,{title:"各场景标签数量",titleOverlay:T().createElement("div",null,T().createElement("div",null,"标签数量是指提及到场景标签的消息数量。"),T().createElement("div",null,"标签数量计算说明：如果一条消息中出现一个场景标签就计1，同一个场景标签在一个消息中不重复计数。")),data:o,dateOptions:n,dateType:{seneDateType:c},flavorDateType:{flavorSeneDateType:s},onChange:S,onFlavorChange:v,loading:u,onMsgClick:g,onChartClick:e}),T().createElement(O.Z,{title:"各场景关联关系分析",titleOverlay:T().createElement(_.rU,{className:"yt-new-feedback-read-more",to:"https://www.yuque.com/docs/share/65dc5ff0-5e47-4687-a25f-d4bcbb36d97e?# 《和弦图使用说明》",target:"_blank"},"了解更多"),data:f,chartConfig:{relChartConfig:m},dataType:{relDataType:d},flavorDataType:{flavorRelDataType:p},loading:E,onChange:S,onClick:h,onMsgClick:g}))))};function C(e,t,n,a){var r=e&&e.find(function(e){return"SCENE_ASPECT"===e.id}),i=e&&e.find(function(e){return"DEFAULT"===e.id});return t&&n?[].concat(e.filter(function(e){return"SCENE_ASPECT"!==e.id&&"DEFAULT"!==e.id}).map(function(e){return c()({},e)}),[{id:"SCENE_ASPECT",isSelectAll:r&&r.isSelectAll?r.isSelectAll:null,values:r?[].concat(r.values.map(function(e){return c()({},e)}),[{id:x[n],label:n,values:[t]}]):[{id:x[n],label:n,values:[t]}]},{id:"DEFAULT",isSelectAll:i&&i.isSelectAll?i.isSelectAll:null,values:i?[].concat(i.values.filter(function(e){return"MESSAGE_TYPE"!==e.id}).map(function(e){return c()({},e)}),[{id:"MESSAGE_TYPE",label:"消息类型",values:a?["电商追评","电商评论"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"消息类型",values:a?["电商追评","电商评论"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}]):[].concat(e.filter(function(e){return"DEFAULT"!==e.id}).map(function(e){return c()({},e)}),[{id:"DEFAULT",isSelectAll:i&&i.isSelectAll?i.isSelectAll:null,values:i?[].concat(i.values.filter(function(e){return"MESSAGE_TYPE"!==e.id}).map(function(e){return c()({},e)}),[{id:"MESSAGE_TYPE",label:"消息类型",values:a?["电商追评","电商评论"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"消息类型",values:a?["电商追评","电商评论"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}])}function g(e,t,n,a,r,i){var l=e&&e.find(function(e){return"SCENE_ASPECT"===e.id}),o=e&&e.find(function(e){return"DEFAULT"===e.id});return"node"!==t?"edge"===t?[].concat(e.filter(function(e){return"SCENE_ASPECT"!==e.id&&"DEFAULT"!==e.id}).map(function(e){return c()({},e)}),[{id:"SCENE_ASPECT",isSelectAll:l&&l.isSelectAll?l.isSelectAll:null,values:l?[].concat(l.values.filter(function(e){return e.id!==x[a[0]]&&e.id!==x[a[1]]}).map(function(e){return c()({},e)}),[{id:x[a[0]],label:a[0],values:[n[0]]},{id:x[a[1]],label:a[1],values:[n[1]]}]):[{id:x[a[0]],label:a[0],values:[n[0]]},{id:x[a[1]],label:a[1],values:[n[1]]}]},{id:"DEFAULT",isSelectAll:o&&o.isSelectAll?o.isSelectAll:null,values:o?[].concat(o.values.filter(function(e){return"MESSAGE_TYPE"!==e.id}).map(function(e){return c()({},e)}),[{id:"MESSAGE_TYPE",label:"消息类型",values:i?["电商追评","电商评论"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"消息类型",values:i?["电商追评","电商评论"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}]):e:(t=l&&l.values.find(function(e){return e.id===x[a[0]]}),[].concat(e.filter(function(e){return"SCENE_ASPECT"!==e.id&&"DEFAULT"!==e.id}).map(function(e){return c()({},e)}),[{id:"SCENE_ASPECT",isSelectAll:l&&l.isSelectAll?l.isSelectAll:null,values:l?[].concat(l.values.filter(function(e){return e.id!==x[a[0]]}).map(function(e){return c()({},e)}),[{id:x[a[0]],label:a[0],values:"analyze"!==r||!t||t.values.find(function(e){return e===n[0]})?[n[0]]:[].concat(t.values.filter(function(e){return e!==n[0]}),[n[0]])}]):[{id:x[a[0]],label:a[0],values:[n[0]]}]},{id:"DEFAULT",isSelectAll:o&&o.isSelectAll?o.isSelectAll:null,values:o?[].concat(o.values.filter(function(e){return"MESSAGE_TYPE"!==e.id}).map(function(e){return c()({},e)}),[{id:"MESSAGE_TYPE",label:"消息类型",values:i?["电商追评","电商评论"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"消息类型",values:i?["电商追评","电商评论"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}]))}var M=n(97194),b={"用户简画":"SCENE_USER","角色与关系":"SCENE_USER","性别":"SCENE_SEX","年龄段":"SCENE_AGE","年龄":"SCENE_AGE","关系":"SCENE_RELATION","使用场合":"SCENE_USE_SCENE","用途":"SCENE_USE","购买决策":"SCENE_BUY_DECISION","用户建议":"SCENE_MY_ADVICE","代言人":"SCENE_SPOKESMAN_ANALYSIS"},x={"性别":"SCENE_SEX","年龄段":"SCENE_AGE","年龄":"SCENE_AGE","关系":"SCENE_RELATION","角色与关系":"SCENE_RELATION","使用场合":"SCENE_USE_SCENE","用途":"SCENE_USE","购买决策":"SCENE_BUY_DECISION","用户建议":"SCENE_MY_ADVICE","代言人":"SCENE_ENDORSER"},Y=n(2786),P=n(64396).Z.explore.scene.overview,n=function(t){function e(e){var E=t.call(this,e)||this;return E._handleFilterReady=function(e,t){var n=(0,M.X)(e.dateFilter.numOfDays,!0),a=n.dateOptions,n=n.defaultDateType;E.props.fetchParams({projectId:o.t.get(o.V.curProject).id,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:e.dateFilter,dateOptions:a,defaultDateType:n,filterValues:t.fullInfo.filterValue})},E._handleFilterChange=function(e,t,n){var a=(0,M.X)(e.dateFilter.numOfDays,!0),r=a.dateOptions,a=a.defaultDateType;E.props.fetchData(c()({},e,{dateOptions:r,defaultDateType:a,timeType:a,seneDateType:a,filterValues:t.fullInfo.filterValue}))},E._handleOnFilterChange=function(e){e.timeType?E.props.fetchTrendData(e):e.relDataType||void 0!==e.flavorRelDataType?(void 0!==e.flavorRelDataType&&E.props.setDefaultValue(e),e.relDataType&&E.props.save(e)):e.seneDateType?E.props.fetchSeneData(e):e.relChartConfig&&E.props.setDefaultValue(e)},E._handleOnFlavorChange=function(e){e.fTimeType||e.flavorSeneDateType,E.props.setDefaultValue(e)},E._handleOnMsgClick=function(e,t,n){var a,r=e.name,i=e.seriesName,l=e.componentSubType,o=e.dataType,c=e.data,s=E.props,u=s.projectId,f=s.dateFilter,d=s.headerFilterParamsNew,p=s.seneDateType,e=s.seneData,s=s.filterValues;"bar"===l||"line"===l?(a={projectId:u,dateFilter:(0,Y.X_)(l,f,r,e[0].data.map(function(e){return e.name}),p),headerFilterParamsNew:C(d),filterModel:{project:[u],messageCategory:["COMMENT"]},fromScene:"bar"===l?b[r]:b[i],filterTip:null,filterValues:C(s,null,null,!0)},window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(a)))):"graph"===l&&(a="node"===o?g(d,o,[c.name],[c.category],"msg"):g(d,o,[c.source.split(":")[1],c.target.split(":")[1]],[c.sourceSceneName,c.targetSceneName],"msg"),l="node"===o?g(s,o,[c.name],[c.category],"msg",!0):g(s,o,[c.source.split(":")[1],c.target.split(":")[1]],[c.sourceSceneName,c.targetSceneName],"msg",!0),l={projectId:u,dateFilter:f,headerFilterParamsNew:"node"===o?C(d,c.name,c.category):a,filterModel:{project:[u],messageCategory:["COMMENT"],escore:n.includes("pos")?["1"]:n.includes("neg")?["-1"]:null},filterValues:"node"===o?C(s,c.name,c.category,!0):l},window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(l))))},E.event={filterReady:E._handleFilterReady,filterChange:E._handleFilterChange,onFilterChange:E._handleOnFilterChange,onFlavorChange:E._handleOnFlavorChange,onMsgClick:E._handleOnMsgClick},E}l()(e,t);var n=e.prototype;return n.componentWillUnmount=function(){this.props.clean()},n.render=function(){return T().createElement(y,c()({},this.props,this.state,this.event))},e}(T().Component);const w=(0,i.connect)(function(e){var t=e.loading,e=r()(e,["loading"]);return c()({},e[P],{fetchingTrendData:t.effects[P+"/fetchTrendData"]||!1,fetchingSeneData:t.effects[P+"/fetchSeneData"]||!1,fetchingRelativeData:t.effects[P+"/fetchRelativeData"]||!1})},function(t){return{save:function(e){return t({type:P+"/save",payload:e})},clean:function(e){return t({type:P+"/clean",payload:e})},setDefaultValue:function(e){return t({type:P+"/setDefaultValue",payload:e})},fetchParams:function(e){return t({type:P+"/fetchParams",payload:e})},fetchData:function(e){return t({type:P+"/fetchData",payload:e})},fetchTrendData:function(e){return t({type:P+"/fetchTrendData",payload:e})},fetchSeneData:function(e){return t({type:P+"/fetchSeneData",payload:e})},fetchRelativeData:function(e){return t({type:P+"/fetchRelativeData",payload:e})}}})(n)}}]);