(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[5292],{92090:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-6f99ea"},5292:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var t=n(81506),c=n.n(t),t=n(85354),a=n.n(t),t=n(67294),s=n.n(t),i=n(92360),m=n(5133),o=n(29383),l=n(36144),r=n(55815),u=n(60530),h=n(61409),d=function(e){function t(){var a=e.call(this)||this;return a.state={all:"",used:"",form:{name:""},columns:[{label:"",prop:"paddingLeft",width:16},{label:"团队",prop:"name",width:290,render:function(e,t,n){return s().createElement("span",null,e.name)}},{label:"成员",prop:"updatedAt",render:function(e,t,n){return s().createElement("span",null,e.count)}},{label:"操作",width:190,render:function(e,t,n){return s().createElement("span",null,s().createElement("span",{className:"operation_columns",onClick:a.editTeam.bind(c()(a),n)},"编辑"),s().createElement("span",{className:"operation_columns",onClick:a.deleteTeam.bind(c()(a),n)},"删除"))}}],selTeamName:"",teams:[],create:!1,teamName:""},a}a()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.getTeamList()},n.selTeamName=function(t){var e=this.state.teams;e.forEach(function(e){return e.sel=!1}),e[t].sel=!0,this.setState({teams:e,selTeamName:e[t].name},function(e){return document.querySelectorAll(".topicName")[t].select()})},n.changeName=function(e){var t=this.state.teams;t[e].name=document.querySelectorAll(".topicName")[e].value,this.setState({teams:t})},n.closeInput=function(e){var t=this,n=this.state.teams;n.forEach(function(e){return e.sel=!1}),void 0===n[e].name||""===String(n[e].name).replace(/ /g,"")?(m.Z.warning("名称不能为空"),n[e].name=this.state.selTeamName):this.state.selTeamName===n[e].name&&m.Z.warning("名称未发生改变"),this.setState({teams:n},function(){t.state.selTeamName!==n[e].name&&l.h.post("/team/update",{id:n[e].id,name:n[e].name}).then(function(e){m.Z.success("修改成功"),t.getTeamList()}).catch(function(e){t.getTeamList()})})},n.onChange=function(e,t){var n;this.setState({form:Object.assign(this.state.form,((n={})[e]=t,n))})},n.editTeam=function(e){var t=this.state.teams[e],e=t.id,t=t.name;h.mW.push({pathname:"/account/team/edit",state:{id:e,name:t}})},n.deleteTeam=function(t){var n=this;i.MessageBox.confirm("删除后无法恢复, 是否继续?","提示",{type:"warning"}).then(function(e){l.h.post("/team/delete",{id:n.state.teams[t].id}).then(function(e){m.Z.success("删除成功"),n.getTeamList()})})},n.createTeam=function(){this.setState({create:!0})},n.getTeamList=function(){var t=this;l.h.get("/team/list").then(function(e){t.setState({teams:e.data.result.list,used:e.data.result.used,all:e.data.result.limit})})},n.content=function(){return s().createElement("ul",{className:"team-infos"},s().createElement("li",{className:"team-info"},s().createElement("span",{className:"info-name"},"团队名称"),s().createElement(i.Input,{className:"info-value team-name",onChange:this.onChangeName.bind(this),onKeyDown:this.enter.bind(this),placeholder:"请输入内容"})))},n.onChangeName=function(e){this.setState({teamName:e})},n.enter=function(e){13===e.keyCode&&this.confirm()},n.confirm=function(e){var n=this,a=this.state.teamName;e.preventDefault(),""!==a?l.h.post("/team/add",{name:a}).then(function(t){n.setState({teamId:t.data.result},function(e){h.mW.push({pathname:"/account/team/edit",state:{id:t.data.result,name:a}})})}):m.Z.warning("请输入团队名称")},n.cancel=function(){this.setState({teamName:"",create:!1})},n.render=function(){var e=this.state,t=e.columns,n=e.teams,a=e.create,e=document.documentElement.clientHeight-46-54-24;return s().createElement("div",{className:"flex-col"},s().createElement("div",{className:"container flex-other common-wrapper"},s().createElement(r.Z,{title:"团队",rightContent:s().createElement(i.Button,{type:"primary",onClick:this.createTeam.bind(this)},"创建团队")}),s().createElement("div",{className:"common-padding-12"},s().createElement("div",{style:{minHeight:e,backgroundColor:"#fff"}},s().createElement(o.Z,{className:"team-table",columns:t,data:n||[],start:1,end:n.length,total:n.length})))),a&&s().createElement(u.Z,{title:"创建团队",content:this.content(),cancelFun:this.cancel.bind(this),confirmFun:this.confirm.bind(this)}))},t}(t.Component)},60530:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(85354),c=n.n(a),t=n(67294),r=n.n(t),a=n(45697),a=n.n(a),u=n(92360),a={picShow:a().bool,confirmShow:a().bool,cancelShow:a().bool,confirmFun:a().func,cancelFun:a().func},n={picShow:!0,src:n(92090),confirmShow:!0,cancelShow:!0,confirmFun:function(){console.log("confirm")},cancelFun:function(){console.log("cancel")},confirmName:"下一步",cancelName:"取消"},t=function(t){function e(e){return t.call(this,e)||this}return c()(e,t),e.prototype.render=function(){var e=this.props,t=e.title,n=e.content,a=e.src,c=e.picShow,s=e.confirmName,i=e.confirmFun,m=e.confirmShow,o=e.cancelName,l=e.cancelFun,e=e.cancelShow;return r().createElement("div",{className:"confirm-model-wrap-main"},r().createElement("div",{className:"confirm-model"},r().createElement("h4",{className:"model-title"},t),r().createElement("div",{className:"model-content"},n),r().createElement("div",{className:"option-btns"},m&&r().createElement(u.Button,{type:"primary",onClick:i},s),e&&r().createElement(u.Button,{onClick:l},o))),c&&r().createElement("div",{className:"pic-wrap"},r().createElement("img",{src:a})))},e}(t.Component);t.propTypes=a,t.defaultProps=n;const s=t}}]);