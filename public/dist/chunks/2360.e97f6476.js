(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[2360],{52360:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(37316),r=n.n(a),l=n(67154),v=n.n(l),t=n(85354),o=n.n(t),a=n(67294),L=n.n(a),l=n(55609),i=n(35239),I=n(8833),O=n(27310),F=n(60222),E=n(8201),_=n(60496),C=n(98191),b=n(50976),w=n(39432),x=n(94644);function S(e,t,n){return{datasets:[{dimensions:[N.some(function(e){return e.value===n})?N.find(function(e){return e.value===n}).title:"SPU","上新商品数"],source:e.map(function(e){return[e.name,e.total]})},{dimensions:["日期","数量"],source:t.map(function(e){return[e.date,e.count]})}]}}var N=[{title:"SPU",value:"SPU"},{title:"SKU",value:"SKU"},{title:"平台",value:"SOURCE"},{title:"店铺",value:"SHOP"}];const P=function(e){var o=e.data,i=e.trendData,t=e.loading,c=e.title,n=e.titleOverlay,a=e.timeOptions,r=e.timeType,l=e.timeTypeFlavor,s=e.rangeType,u=e.rangeTypeFlavor,d=e.clickedBarIndex,m=e.clickedLineIndex,p=e.onClick,g=e.onFilterChange,h=e.onFlavorChange,e=L().useState(void 0),f=e[0],y=e[1];return L().useEffect(function(){var e;f&&((0,E.P)(o)&&(0,E.P)(i)?(e=function(n,a,e,t,r,l,o){console.log("topTrendChart的数据",e,t);var i="#1574B3",t=S(e,t,o).datasets;return{title:{text:r},color:i,grid:[{left:36,right:"55%",top:45,bottom:40,containLabel:!0},{left:"50%",top:80,right:36,bottom:40,containLabel:!0}],tooltip:{trigger:"item",formatter:function(e){var t=e.marker,n=e.seriesName,a=e.name,e=e.value;return'\n        <span class="yt_echart_tooltip_title"><span style="color: #262626">'+(0,w.yV)(l,a)+"</span></span></br>\n        "+t+n+" ："+w.ZP.getApproximateNum(e)+"\n        "}},dataZoom:[{show:!0,type:"slider",xAxisIndex:1,handleSize:"100%",left:"53%",bottom:16,height:16,showDetail:!1,right:46}],dataset:t.map(function(e){return v()({},e,{sourceHeader:!1})}),xAxis:[{type:"value",gridIndex:0,minInterval:1,axisTick:{show:!0,alignWithLabel:!0}},{type:"category",gridIndex:1,boundaryGap:!1,axisTick:{show:!0},data:t[1].source.map(function(e){return(0,w.yV)(l,e[0])})}],yAxis:[{type:"category",data:e.map(function(e){return e.name}),inverse:!0,axisLabel:{formatter:function(e){return 16<e.length?e.substring(0,16)+"...":e}}},{type:"value",name:"上新商品数走势",nameTextStyle:{color:"#262626"},splitNumber:3,minInterval:1,gridIndex:1,axisLabel:{showMinLabel:!1}}],series:[{type:"bar",encode:{x:"上新商品数",y:N.find(function(e){return e.value===o}).title},xAxisIndex:0,yAxisIndex:0,barMaxWidth:24,large:!0,largeThreshold:400,progressive:0,data:t[0].source.map(function(e,t){return{value:e[1],name:e[0],itemStyle:{color:-1===n||n===t?i:"#d8d8d8"},tooltip:{trigger:"item",formatter:function(e){var t=e.marker,n=e.name,e=e.value;return""+t+n+" ："+w.ZP.getApproximateNum(e)}},barCategoryGap:30}})},{type:"line",xAxisIndex:1,yAxisIndex:1,name:"上新商品数",data:t[1].source.map(function(e,t){return{value:e[1],name:e[0],symbolSize:-1<a&&a===t?8:4,itemStyle:{color:-1===a||a===t?i:"#d8d8d8"}}}),lineStyle:{color:-1<a?"#d8d8d8":i}}]}}(d,m,o,i,c,r,s),f.clear(),f.setOption(e)):y(void 0))},[d,m,o,i,s,r,f]),L().createElement(E.Z,{className:"yt_market_new_monitoring_bar_line_chart",loading:t,data:i,renderTitle:L().createElement(C.Z,{title:c,titleOverlay:n,data:i,onMoreClick:function(e){var t,n,a,r,l;t=f,n=o,a=i,r=c,l=s,"image"===(e=e)?(0,x._v)(t,r):"data"===e&&(console.log("导出excel",n,a),l=[(a=S(n,a,l).datasets)[0].dimensions].concat(a[0].source),a=[a[1].dimensions].concat(a[1].source),a=[].concat(l,[[""]],a),(0,x.aT)([a],r))}},s&&L().createElement(_.Z,{options:N,activeObj:s,flavor:u,onChange:function(e){return g({selectType:e})},onFlavorChange:function(e){return h({selectTypeFlavor:e})}}),r&&L().createElement(_.Z,{options:a,activeObj:r,flavor:l,onChange:function(e){return g({timeType:e})},onFlavorChange:function(e){return h({timeTypeFlavor:e})}}))},L().createElement(b.Z,{theme:"yunting_neg_pos",className:"yt_echarts_style",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return y(e)},onEvents:{click:p}}))};function Z(e,t){return(0,E.P)(e)?[{name:s[t]+"上新商品数",count:e,format:"myriad"}]:e}function z(e){return L().createElement(L().Fragment,null,L().createElement("div",null,"「上新时间」是指系统采集到的具体的商品链接的时间和首条评论对应的时间中最早的那个时间。"),L().createElement("div",null,u[e]))}function R(){return L().createElement(L().Fragment,null,L().createElement("div",null,"「上新时间」是指系统采集到的具体的商品链接的时间和首条评论对应的时间中最早的那个时间。"),L().createElement("div",null,"「商品状态」可以区分为：正常、预售、链接下架、属性下架、无货。"),L().createElement("div",null,"「预售」是指商品被标识为预售。"),L().createElement("div",null,"「链接下架」是指访问链接时，链接显示类似“很抱歉，您查看的宝贝不存在，可能已下架或者被移出”之类的提示。"),L().createElement("div",null,"「属性下架」是指通过之前获得的链接访问商品详情页时，不会出现「链接下架」类似的提示，但实际该商品已经被删除或者下架了，也即无法购买了。"),L().createElement("div",null,"「缺货」是指商品有被标识为“缺货”之类的提示。"),L().createElement("div",null,"注：最多展示1000条数据。"),L().createElement("div",{style:{marginTop:14,textAlign:"right"}},L().createElement(c.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/f255c9b4-2b3a-4c9b-9b37-371717d0b99c?# 《商品状态说明》",target:"_blank"},"了解更多")))}var t=n(45697),a=n.n(t),h=n(71339),f=n(43036),c=n(61409),A=["60%","70%"],D={width:"100%",height:"110px"},y={NORMAL:"正常在售",PRE_SALE:"预售",OFF_SHELF:"链接下架",PROP_OFF_SHELF:"属性下架",NO_STOCK:"无货"},s={count1:"今日",count7:"7天",count15:"15天",count30:"30天"},u={count1:"「今日」是依据时间筛选范围的endtime所在的“天”。",count7:"「7天」是依据时间筛选范围的endtime往前推6天，共计7天，累加去重后的上新商品数。",count15:"「15天」是依据时间筛选范围的endtime往前推14天，共计15天，累加去重后的上新商品数。",count30:"「30天」是依据时间筛选范围的endtime往前推29天，共计30天，累加去重后的上新商品数。"},t=n(30381),T=n.n(t),t=function(e){function t(){var e=document.getElementById("new_detail_content");p(e.clientWidth)}var n=e.title,a=e.detailOverlay,r=e.key,l=e.data,o=e.total,i=e.pageSize,c=e.pageIndex,s=e.loading,u=e.onPageChange,d=e.onPageSizeChange,e=L().useState(0),m=e[0],p=e[1];L().useEffect(function(){return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}},[l]);var g;return L().createElement("div",{key:r},L().createElement(E.Z,{className:"yt_market_new_monitoring_wrapper",data:{},loading:!1,renderTitle:L().createElement(C.Z,{title:n,titleOverlay:a})},L().createElement("div",{id:"new_detail_content"},L().createElement(h.Z,{loading:s,total:o||0,data:l instanceof Array?l:[],columns:[{label:"",width:16},{label:"商品详情页标题",width:.35*(g=m-40-32),render:function(e){return L().createElement("div",{className:"list_item detail_title"},L().createElement(f.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:e.title},L().createElement("span",{onClick:function(){window.open(""+e.url)}},e.title)))}},{label:"SPU",width:.15*g,render:function(e){return L().createElement("div",{className:"list_item"},L().createElement(f.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:e.spu},L().createElement("span",null,e.spu)))}},{label:"店铺",width:.2*g,render:function(e){return L().createElement("div",{className:"list_item"},e.storeName)}},{label:"上新时间",width:.2*g,render:function(e){return L().createElement("div",{className:"list_item"},T()(e.newTime).format("YYYY-M-DD HH:mm"))}},{label:"商品状态",width:.1*g,render:function(e){return L().createElement("div",{className:"list_item"},y[e.itemStatus])}},{label:"",width:16}],pageSize:i,pageIndex:c,onPageChange:u,onPageSizeChange:d}))))};const B=t;t.propTypes={key:a().string,data:a().any,total:a().number,pageIndex:a().number,pageSize:a().number,loading:a().bool,onPageChange:a().func,onPageSizeChange:a().func};const d=function(e){var t=e.onFilterReady,n=e.onFilterChange,a=e.onFlavorChange,r=e.newLoading,l=e.count1,o=e.new7Loading,i=e.count7,c=e.new15Loading,s=e.count15,u=e.new30Loading,d=e.count30,m=e.topList,p=e.countTrend,g=e.trendLoading,h=e.timeTypeOpts,f=e.timeType,y=e.timeTypeFlavor,v=e.selectType,E=e.selectTypeFlavor,_=e.onRangeClick,C=e.clickedBarIndex,b=e.clickedLineIndex,w=e.total,x=e.detailList,S=e.pageSize,N=e.pageIndex,T=e.listLoading,k=e.onPageChange,e=e.onPageSizeChange;return L().createElement("div",{className:"yt_market_new_monitoring_wrapper"},L().createElement(I.Z,{pageType:"MARKET_NEW_MONITORING",values:[],onReady:t,onChange:n}),L().createElement("div",{className:"content",id:"new_monitoring_content"},L().createElement(O.Z,{orientation:"horizontal",colNumber:4,showList:["card_0","card_1","card_2","card_3"]},L().createElement(F.Z,{key:"card_0",loading:r,style:D,paragraph:A,data:Z(l,"count1"),tip:z("count1")}),L().createElement(F.Z,{key:"card_1",loading:o,style:D,paragraph:A,data:Z(i,"count7"),tip:z("count7")}),L().createElement(F.Z,{key:"card_2",loading:c,style:D,paragraph:A,data:Z(s,"count15"),tip:z("count15")}),L().createElement(F.Z,{key:"card_3",loading:u,style:D,paragraph:A,data:Z(d,"count30"),tip:z("count30")})),L().createElement(O.Z,{className:"new_product_count_wrap",orientation:"vertical",showList:["range","detail"]},L().createElement(P,{key:"range",title:"上新商品数排行",titleOverlay:L().createElement("span",null,"左图最左展示Top10；右图展示的是与左图对应的数据范围的时间走势"),data:m,trendData:p,loading:g,timeOptions:h,timeType:f,timeTypeFlavor:y,rangeType:v,rangeTypeFlavor:E,clickedBarIndex:C,clickedLineIndex:b,onClick:_,onFilterChange:n,onFlavorChange:a}),L().createElement(B,{key:"detail",title:"上新商品详情",detailOverlay:R,total:w,data:x,pageSize:S,pageIndex:N,loading:T,onPageChange:k,onPageSizeChange:e}))))};var k=n(87219),m=n(64396).Z.market.newMonitoring,n=function(t){function e(e){var h=t.call(this,e)||this;return h._handleOnRangeClick=function(e){var a,t=e.componentType,n=e.componentSubType,r=e.dataIndex,l=e.name,o=e.data,i=h.state,c=i.clickedBarIndex,s=i.clickedLineIndex,e=h.props,u=e.fetchSkuIdList,d=e.selectType,m=e.topList,i=e.countTrend,p=e.dateFilter,g=e.timeType;"series"===t&&("bar"===n?(h.setState({clickedBarIndex:r===c?-1:r},function(){u({pageIndex:1,selectTypes:r===c?null:d,selectValue:r===c?null:[l]})}),-1<s&&h.setState({clickedLineIndex:-1})):"line"===n&&(a=i.map(function(e){return e.date}),h.setState({clickedLineIndex:r===s?-1:r},function(){var e=v()({},(0,k.ZP)(p,function(e){var t,n;r===s?(n=e.from,t=e.to,e.from=n,e.to=t):(e.dateGroupType=g,t=(n=(0,w.LV)(o.name,g)).from,n=n.to,"DAY"!==g&&(String(o.name)===String(a[0])?t=e.from:String(o.name)===String(a[a.length-1])&&(n=e.to)),e.from=t,e.to=n)}));u({pageIndex:1,selectTypes:r===s?null:d,selectValue:r===s?null:m.map(function(e){return e.name}),selectDate:e})}),-1<c&&h.setState({clickedBarIndex:-1})))},h._handleOnFilterReady=function(e,t,n){h.props.fetchParams(v()({},e,{filterModel:e.filterValue,projectId:i.t.get(i.V.curProject).id,timeTypeOpts:n.dateOptions,defaultTimeType:n.defaultDateType,pageIndex:1}))},h._handleOnFilterChange=function(e,t,n){var a=h.state,r=a.clickedLineIndex,a=a.clickedBarIndex;-1<r&&h.setState({clickedLineIndex:-1}),-1<a&&h.setState({clickedBarIndex:-1}),e.dateFilter?h._handleOnFilterReady(e,t,n):(e.selectType||e.timeType)&&h.props.fetchTopList(e)},h._hanldeOnFlavorChange=function(e){h.props.updateFlavors(e)},h._handleOnPageChange=function(e){h.props.fetchDetailList({pageIndex:e})},h._handleOnPageSizeChange=function(e){h.props.fetchDetailList({pageIndex:1,pageSize:e})},h.state={clickedBarIndex:-1,clickedLineIndex:-1},h.event={onFilterReady:h._handleOnFilterReady,onFilterChange:h._handleOnFilterChange,onFlavorChange:h._hanldeOnFlavorChange,onPageChange:h._handleOnPageChange,onPageSizeChange:h._handleOnPageSizeChange,onRangeClick:h._handleOnRangeClick},h}return o()(e,t),e.prototype.render=function(){return L().createElement(d,v()({},this.props,this.state,this.event))},e}(L().PureComponent);const p=(0,l.connect)(function(e){var t=e.loading,e=r()(e,["loading"]);return v()({},e[m],{newLoading:t.effects[m+"/fetchNewCard"]||!1,new7Loading:t.effects[m+"/fetch7NewCard"]||!1,new15Loading:t.effects[m+"/fetch15NewCard"]||!1,new30Loading:t.effects[m+"/fetch30NewCard"]||!1,topLoading:t.effects[m+"/fetchTopList"]||!1,trendLoading:t.effects[m+"/fetchCountTrend"]||!1,listLoading:t.effects[m+"/fetchDetailList"]||!1})},function(t){return{save:function(e){return t({type:m+"/save",payload:e})},clean:function(){return t({type:m+"/clean"})},fetchParams:function(e){return t({type:m+"/fetchParams",payload:e})},fetchDatas:function(e){return t({type:m+"/fetchDatas",payload:e})},fetch7NewCard:function(e){return t({type:m+"/fetch7NewCard",payload:e})},fetch15NewCard:function(e){return t({type:m+"/fetch15NewCard",payload:e})},fetch30NewCard:function(e){return t({type:m+"/fetch30NewCard",payload:e})},fetchTopList:function(e){return t({type:m+"/fetchTopList",payload:e})},fetchSkuIdList:function(e){return t({type:m+"/fetchSkuIdList",payload:e})},fetchCountTrend:function(e){return t({type:m+"/fetchCountTrend",payload:e})},fetchDetailList:function(e){return t({type:m+"/fetchDetailList",payload:e})},updateFlavors:function(e){return t({type:m+"/updateFlavors",payload:e})}}})(n)},25022:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(67294),s=n.n(t),u=n(92360),d=n(35303),t=n(45697),t=n.n(t),m=[{label:"10项/页",value:10},{label:"20项/页",value:20},{label:"40项/页",value:40},{label:"100项/页",value:100}];const a=function(e){var t=e.onPageChange,n=e.onSizeChange,a=e.total,r=void 0===a?0:a,l=e.pageIndex,o=e.pageSize,i=e.layout,c=e.className,a=e.currLength,e=0===r?0:(l-1)*o+1,a=0===r?0:a?e+a-1:e+o-1;return 0===r?null:s().createElement("div",{className:"yt-awp-pagination "+(c||"")},s().createElement("span",{className:"total_num"},s().createElement("span",null,e+" - "+a+" "),"项，共",s().createElement("span",null," "+r+" "),"项"),s().createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},s().createElement(u.Pagination,{small:!0,pageSize:o,currentPage:l,pageCount:Math.ceil(r/o),layout:0===r?"":"prev, pager, next",onCurrentChange:t}),void 0===i||i.includes("sizes")?s().createElement(d.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:o||10,onChange:n},m.map(function(e,t){return s().createElement(d.Wx,{key:t,label:e.label,value:e.value},e.label)})):null))};t().propTypes={onPageChange:t().func,onSizeChange:t().func,total:t().number,pageIndex:t().number,pageSize:t().number,layout:t().string,className:t().string}},71339:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(67294),d=n.n(t),m=n(92360),p=n(25022),t=n(45697),n=n.n(t),t=function(e){var t=e.data,n=e.total,a=void 0===n?0:n,r=e.loading,l=e.pageIndex,o=e.columns,i=e.pageSize,c=e.onPageChange,n=e.onPageSizeChange,s=e.onSortChange,u=e.defaultSort,e=e.className,e=void 0===e?"":e;return d().useEffect(function(){var e=document.getElementsByClassName("is-sortable")[0];u&&e&&e.classList.add(u.order)},[u]),d().createElement("div",{className:"yt-awp-content-list "+e},d().createElement(m.Loading,{loading:r,className:"awp-content-loading"},d().createElement(m.Table,{defaultSort:u,columns:o,style:{width:"100%"},data:t,onSortChange:function(e){return s(e)}})),c&&d().createElement(p.Z,{onPageChange:c,onSizeChange:n,total:a,currLength:t.length,pageIndex:l,pageSize:i}))};t.propTypes={data:n().array,total:n().number,loading:n().bool,pageIndex:n().number,columns:n().array,pageSize:n().number,onPageChange:n().func,onPageSizeChange:n().func,onSortChange:n().func,defaultSort:n().any,className:n().string};const a=t},8833:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(67154),i=n.n(t),t=n(37316),c=n.n(t),t=n(67294),s=n.n(t),u=n(26198),d=n(97194),t=n(45697),n=n.n(t),t=function(e){var t=e.getFilterRef,n=e.className,a=e.hour,r=e.children,l=e.onReady,o=e.onChange,e=c()(e,["getFilterRef","className","hour","children","onReady","onChange"]);return s().createElement("div",{className:n},s().createElement(u.Z,i()({ref:t,onReady:function(){l.apply(null,[].concat(Array.prototype.slice.call(arguments),[(0,d.X)(arguments[0].dateFilter.numOfDays,a)]))},onChange:function(){o.apply(null,[].concat(Array.prototype.slice.call(arguments),[(0,d.X)(arguments[0].dateFilter.numOfDays,a)]))}},e)),r)};const a=t;t.propTypes={className:n().string,hour:n().bool,onReady:n().func,onChange:n().func,pageType:n().string,titles:n().shape({titel:n().string,url:n().string,state:n().object})}},27310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});function s(e){return e=e.height,u().createElement("div",{style:{background:"#fff",height:e,display:"flex",alignItems:"center",justifyContent:"center"}},"Template")}var t=n(85354),r=n.n(t),t=n(67294),u=n.n(t),t=n(45697),t=n.n(t),o=n(92360),n=function(a){function e(){for(var l,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(l=a.call.apply(a,[this].concat(t))||this).clientHeight=160,l.notShowList=[],l._handleOnCheckBoxChange=function(e,t){var n,a=l.props,r=a.onChange,a=a.showList;e?(n=a.slice()).push(t):n=a.filter(function(e){return e!==t}),r&&r(n)},l._renderEditableFrame=function(t,e){var n=l.props,a=n.editable,n=n.colNumber,n=void 0===n?1:n;return u().createElement("div",{id:t.key,key:t.key,style:{width:"calc("+100/n+"% - 12px)"},className:a?"child_editable":""},t,a&&u().createElement(o.Checkbox,{checked:e,className:"checkbox_style",onChange:function(e){return l._handleOnCheckBoxChange(e,t.key)}}))},l}r()(e,a);var t=e.prototype;return t.componentDidMount=function(){var e=this.props.children,e=e instanceof Array?e[0]:e,e=document.getElementById(e.key);e&&(this.childHeight=e.clientHeight)},t.render=function(){var l=this,e=this.props,t=e.className,n=void 0===t?"":t,a=e.editable,o=void 0!==a&&a,t=e.orientation,a=void 0===t?"horiziontal":t,t=e.children,e=e.showList,i=void 0===e?[]:e,c=t instanceof Array?t:[t];return this.notShowList=[],u().createElement("div",{className:"yt_drag_layout_wrapper yt_drag_layout_"+a+" "+n},c.reduce(function(e,t,n){var a=i.indexOf(t.key);if(-1<a?e[a]=l._renderEditableFrame(t,!0):l.notShowList.push(t.key),n!==c.length-1)return e;var r=e.filter(function(e){return e});return o&&0<l.notShowList.length&&l.notShowList.forEach(function(e){r.push(l._renderEditableFrame(u().createElement(s,{key:e,height:l.childHeight}),!1))}),r},[]))},e}(u().PureComponent);const a=n;n.propTypes={orientation:t().oneOf(["horizontal","vertical"]),colNumber:t().number,className:t().oneOfType([t().string,t().object]),editable:t().bool,showList:t().arrayOf(t().string),onChange:t().func}},60222:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});function l(e){var t=e.value,n=e.getValue,a=(t=g().useState(t))[0],r=t[1];return g().createElement("div",{className:"yt_modal_dashboard_edit_wrapper"},g().createElement("div",{className:"content_item"},g().createElement("span",null,"同比类型"),g().createElement("span",null,g().createElement(o(),{className:"content_item_select",value:(c.find(function(e){return e.value===a})||{}).label,onChange:function(e){var t;r(t=e),setTimeout(function(){return n&&n(t)},0)},inputIcon:g().createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},c.map(function(e){return g().createElement(o().Option,{value:e.value,key:e.value},e.label)})))))}var a=n(67154),m=n.n(a),t=n(37316),p=n.n(t),a=n(67294),g=n.n(a),t=n(45697),a=n.n(t),h=n(25713),f=n(43036),t=n(2258),o=n.n(t),i=n(57522),c=[{value:"WEEK",label:"周"},{value:"MONTH",label:"月"},{value:"QUATER",label:"季"},{value:"YEAR",label:"年"}],t=function(r){return new Promise(function(e,t){var n=r.value,a=m()({},r,{titleText:g().createElement("div",{className:"indicator_card_comfirm"},g().createElement("span",null,"同比设置"),g().createElement("span",{onClick:function(){return window.open("https://www.yuque.com/docs/share/5615d490-0056-4bb9-b208-bf747c9048c0")}},"查看更多")),content:g().createElement(l,m()({},r,{getValue:function(e){n=e}}))});a.onOk=function(){return e(n)},a.onCancel=t,(0,i.Z)(a)})};const y=t;t.propTypes={getValue:a().func,value:a().string};function v(e){return!["",null,void 0].includes(e)}function E(e){return e&&(5<e.length?String(e).substring(0,5)+"...":e)}function _(e,t,n){var r,l;"image"===e?(r=t,l=(0,s.UO)(n[0]&&n[0].name),new Promise(function(e){var t=r.offsetWidth,n=r.cloneNode(!0),a=document.createElement("canvas");a.width=12*t,a.height=1920,a.style.width=t+"px",a.style.height="160px",a.className="yt_trend_list_canvas",a.getContext("2d").scale(12,12),n.style.width=t+"px",n.style.height="160px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=-1,n.style.opacity=0,document.body.appendChild(n),u()(n,{allowTaint:!0,taintTest:!1,canvas:a,useCORS:!0,width:t,height:160,onrendered:function(e){document.body.appendChild(e);e=e.toDataURL("png");(0,d.saveAs)(e,l,"image/png"),setTimeout(function(){document.body.removeChild(n),document.body.removeChild(document.querySelector(".yt_trend_list_canvas"))},0)}})})):"data"===e&&(e=[n.reduce(function(e,t){return[].concat(e,[[t.name,t.count]])},[])],(0,s.aT)(e,n[0]&&n[0].name))}var C=n(8201),b=n(39432),s=n(94644),t=n(29531),u=n.n(t),d=n(93162),w=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],x=[{title:"设置同比",type:"compare"}];n=function(e){function a(e){return n&&n[e]?n[e]:{}}function t(e){if(a(e).name){if(v(a(e).count)){var t=a(e).count;switch(a(e).format){case"myriad":t=(0,b.hE)(t);break;case"percent":n=t,t=v(null)?null:0===n?"0.00%":Math.abs(100*n).toFixed(2)+"%"}return t}return"--"}var n;return""}var n=e.data,r=e.tip,l=e.compare,o=e.onSetting,i=e.loading,c=e.paragraph,s=p()(e,["data","tip","compare","onSetting","loading","paragraph"]),e=g().useState(),u=e[0],d=e[1],e=function(e){return"myriad"!==a(e).format?t(e):a(e).count.toLocaleString()};return g().createElement("div",m()({className:"indicator_card"},s,{ref:function(e){return d(e)}}),g().createElement(C.Z,{data:n,className:"section_com",loading:i,paragraph:c},g().createElement("div",{className:"title_wrap"},g().createElement("span",{className:"chart_title"},g().createElement("span",{className:"chart_title_name"},a(0).name,r&&g().createElement(f.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:r},g().createElement("i",{className:"icon-cem_file1","data-html2canvas-ignore":!0})))),g().createElement("span",{className:"chart_title_buttons","data-html2canvas-ignore":!0},g().createElement(h.Z,{onClick:function(e){"compare"===e?y({value:l}).then(function(e){o({compareValue:e})}):_(e,u,n)},options:w.concat(o?x:[])}))),g().createElement("div",{className:"section_mid"},g().createElement("p",null,g().createElement(f.Z,{placement:"top",overlay:e(0)},g().createElement("section",null,t(0)))),a(1).name||a(2).name?g().createElement("p",null,g().createElement("span",null,g().createElement("span",null,g().createElement(f.Z,{placement:"top",overlay:a(1).name},g().createElement("section",{className:"name"},a(1).name))),g().createElement("span",null,g().createElement(f.Z,{placement:"top",overlay:e(1)},g().createElement("section",null,t(1))),"boolean"==typeof a(1).rise&&g().createElement("i",{className:a(1).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"}))),g().createElement("span",null,g().createElement("span",null,g().createElement(f.Z,{placement:"top",overlay:a(2).name},g().createElement("section",{className:"name"},a(2).name))),g().createElement("span",null,g().createElement(f.Z,{placement:"top",overlay:e(2)},g().createElement("section",null,t(2))),"boolean"==typeof a(2).rise&&g().createElement("i",{className:a(2).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"})))):null),(a(3).name||a(4).name)&&g().createElement("div",{className:"section_bottom"},g().createElement("span",null,g().createElement("span",null,g().createElement(f.Z,{placement:"top",overlay:a(3).name},g().createElement("section",{className:"name"},E(a(3).name)))),g().createElement("span",null,g().createElement(f.Z,{placement:"top",overlay:e(3)},g().createElement("section",null,t(3))))),a(4).name?g().createElement("span",null,g().createElement("span",null,g().createElement(f.Z,{placement:"top",overlay:a(4).name},g().createElement("section",{className:"name"},E(a(4).name)))),g().createElement("span",null,g().createElement(f.Z,{placement:"top",overlay:e(4)},g().createElement("section",null,t(4))))):null)))};const r=n;n.propTypes={data:a().arrayOf(a().shape({name:a().string,count:a().oneOfType([a().string,a().number]),rise:a().bool,format:a().oneOfType(["myriad","percent",void 0])})),tip:a().oneOfType([a().string,a().node]),compare:a().string,onSetting:a().func,loading:a().bool,paragraph:a().arrayOf(a().string)}}}]);