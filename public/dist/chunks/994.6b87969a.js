(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[994],{40994:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ze});var a=n(37316),i=n.n(a),o=n(67154),l=n.n(o),r=n(85354),s=n.n(r),t=n(67294),N=n.n(t),a=n(55609),c=n(19586);const b=function(e){e.getRef;var t=e.onChange,n=e.title,a=e.showList,e=N().useState(void 0),i=e[0],o=e[1];return N().createElement(c.Z,{ref:function(e){o(e)},title:n,showList:a,onChange:t,onFilterReady:function(){return t(i.getValue())}})};function p(e){return 70<e?"卓越":50<e&&e<=70?"优秀":10<e&&e<=50?"良好":5<e&&e<=10?"糟糕":"糟糕透顶"}function u(e,t,n,a){var i,e={npsValue:+(100*e.npsValue).toFixed(0),lastWeek:+(100*e.lastWeekNpsValue).toFixed(0),incWeek:+(100*(e.thisWeekNpsValue-e.lastWeekNpsValue)).toFixed(0),lastMonth:+(100*e.lastMonthNpsValue).toFixed(0),incMonth:+(100*(e.thisMonthNpsValue-e.lastMonthNpsValue)).toFixed(0)};return{title:{text:t},tooltip:{formatter:function(e){var t=e.seriesName,n=e.data.value,e="";return n<-50?e=x[0]:-50<=n&&n<0?e=x[1]:0<=n&&n<50?e=x[2]:n<=100&&(e=x[3]),['<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+e+';"></span>'+'<span style="font-size: 16px; line-height: 30px">'+t+"</span>","NPS值："+n].join("<br/>")}},graphic:[{type:"text",left:"60%",top:0===n?"35%":"25%",silent:!0,style:{text:p(e.npsValue),fill:"#262626",font:"30px "+f.I8}},{type:"text",left:"60%",top:0===n?"50%":"38%",silent:!0,style:{text:"当前表现",fill:"#8C8C8C",font:"20px "+f.I8}}].concat((i=e,0===n?[]:[{type:"line",left:"60%",top:"50%",silent:!0,shape:{x1:0,y1:0,x2:160,y2:0},style:{fill:"#E5E5E5",stroke:"#E5E5E5"}}].concat(h.map(function(e,t){var n=i.lastWeek,a=i.incWeek;return 1===t&&(n=i.lastMonth,a=i.incMonth),C(t,n,a)})))),series:[{name:"NPS",type:"gauge",min:-100,max:100,center:["30%","52%"],splitNumber:4,radius:"60%",axisLine:{show:!0,lineStyle:{color:[[.25,"#D96969"],[.5,"#D07B49"],[.75,"#CDB446"],[1,"#15B374"]],width:20}},splitLine:{show:!0,length:20},axisTick:{show:!1},axisLabel:{color:"#262626",fontWeight:"bold"},detail:{offsetCenter:[0,"90%"],formatter:["{a|"+e.npsValue+"}","{b|NPS}"].join("\n"),rich:{a:{color:"#262626",fontSize:40,lineHeight:60,fontFamily:f.I8},b:{color:"#262626",fontSize:12,fontFamily:f.I8}}},title:{show:!1},pointer:{length:"80%",width:6},itemStyle:{color:"#1574B3"},data:[{value:e.npsValue}]}]}}function m(e){return+(100*e).toFixed(0)}var v=n(50976),g=n(25713),d=n(39432),y=n(43036),f=n(70715),h=["上周","上月"],x=["#D96969","#D07B49","#CDB446","#15B374"],E={true:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAAHgCR+lAAAAAXNSR0IArs4c6QAAAHxJREFUGBljYMAHRLeWJjAx/Ps/nwmkilHqTAPX7+dfvjIyMlwDaxPdXPIfrh+kGMRhFNtScvX/fwYtVkkebrAsTBnYFLAIkEDhMIJEJbZVav37++c0iM3EzGL6wqv9GsiwBUDD4kGCMAC0fyGMzQAyHGYBSBDFXLgqfBIASAUmOCx5HngAAAAASUVORK5CYII=",color:"#15B374"},false:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAAHgCR+lAAAAAXNSR0IArs4c6QAAAHVJREFUGBljYEAFt3NztRAiNzMz/zOBuEyMDAzfwOIgIRCD8VZm5gIgKx4sCiJgMmANMFEUDiNMCdC0hUxMLCzaIGPVpk9PgCkHGwJTBRJE0Q9XhU+C8VlDA9eXly9PAx0H9grQjms84uKmcN23srISQBgmAAAj0yYcgW4zAgAAAABJRU5ErkJggg==",color:"#D96969"}},C=function(e,t,n){return{type:"group",left:"60%",top:0===e?"58%":"66%",silent:!0,children:[{type:"text",style:{text:h[e],fill:"#8C8C8C",font:"14px "+f.I8}},{type:"line",shape:{x1:45,y1:2,x2:45,y2:12},style:{fill:"#E5E5E5",stroke:"#E5E5E5"}}].concat(T(t,n))}},T=function(e,t){var n=62+(0,d.jD)(e.toString())+16;return e?[{type:"text",left:62,style:{text:e,fill:"#262626",font:"14px "+f.I8}},{type:"image",left:n,top:2,style:{image:E[0<=t].image}},{type:"text",left:n+10,style:{text:Math.abs(t),fill:E[0<=t].color,font:"14px "+f.I8}}]:[{type:"text",left:62,style:{text:"无",fill:"#262626",font:"14px "+f.I8}}]},A=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],S=n(30133),o=n(94184),w=n.n(o),r=n(45697),o=n.n(r),k=n(92360);r=function(e){return N().createElement("div",{className:w()("yt_section_rate_component_wrapper",e.className),id:e.id},N().createElement("div",{className:"section_content"},function(e){var t=e.data,n=e.emptyHint,a=void 0===n?"暂无数据":n,i=void 0===(n=e.errorHint)?"加载失败":n,o=e.defTitle,r=void 0!==(n=e.loading)&&n;switch(t){case void 0:return N().createElement(S.Z,null);case"error":return N().createElement(N().Fragment,null,N().createElement("div",{className:"title empty-title",style:{fontWeight:"bold"}},o),N().createElement("div",{className:"error-block"},i));case null:case"empty":return N().createElement(N().Fragment,null,N().createElement("div",{className:"title empty-title",style:{fontWeight:"bold"}},o),N().createElement("div",{className:"empty-block"},a));default:return N().createElement(k.Loading,{loading:r,style:{height:"100%"}},e.children)}}(e)))};const D=r;r.propTypes={className:o().string,emptyHint:o().string,defTitle:o().string,loading:o().bool};var P="NPS值",W=void 0;function M(n,a,i,o,r){n&&a&&new Promise(function(e){var t=u(n,i,o,a.getWidth());r(a.getWidth()),e(t)}).then(function(e){a.clear(),a.setOption(e)})}const I=function(e){var l=e.data,s=e.onMoreClick,t=e.loading,n=e.chartType,c=void 0===n?0:n,a=e.resizeTime,n=N().useState(void 0),u=n[0],i=n[1],e=N().useState(0),n=e[0],o=e[1];return N().useEffect(function(){M(l,u,P,c,o)},[l,u]),N().useEffect(function(){W&&clearTimeout(W),W=setTimeout(function(){W=void 0,M(l,u,P,c,o)},500)},[a]),N().createElement(D,{className:"nc-npsvalue",data:l,defTitle:P,loading:t},N().createElement("div",{className:"title"},N().createElement("span",{style:{marginLeft:(0,d.jD)(P,14)+8}},N().createElement(y.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:N().createElement("div",null,N().createElement("div",null,"净推荐值(NPS)=(推荐者数/总样本数)x100%-(贬损者数/总样本数)x100%."),N().createElement("div",null,"NPS的得分值在50%以上被认为是不错的。如果NPS的得分值在70%-80%之间则证明您们公司拥有一批高忠诚度的好客户。调查显示大部分公司的NPS值在5%-10%之间徘徊。其中2005年左右统计分析：亚马逊的NPS值是73%；ebay是71%；苹果是66%；联邦快递是56%；戴尔是50%"))},N().createElement("i",{className:"icon-cem_file1"}))),N().createElement(g.Z,{onClick:function(e){return t=u,a=l,i=s,o=c,r=void 0,"image"===(n=e)?r=t:"data"===n&&(e=[["NPS值","当前表现"],[e=m(a.npsValue),p(e)]],1===o&&((o=e[0]).push.apply(o,["上周NPS值","本周NPS值","上月NPS值","本月NPS值"]),(o=e[1]).push.apply(o,[m(a.lastWeekNpsValue),m(a.thisWeekNpsValue),m(a.lastMonthNpsValue),m(a.thisMonthNpsValue)])),r=[e]),void i({type:n,obj:r,name:t.getOption().title[0].text});var t,n,a,i,o,r},options:A,style:{float:"right"}})),u&&N().createElement("span",{style:{position:"absolute",top:0===c?"50%":"38%",left:.6*n+84,transition:"all 0.3s",zIndex:1}},N().createElement(y.Z,{placement:"top",overlayClassName:"yt-nps-popover-layout-wrapper",overlay:N().createElement("div",{className:"overlay"},N().createElement("span",null,"当前表现"),N().createElement("div",null,N().createElement("span",null,"卓越"),N().createElement("span",null,"NPS值大于70%。如亚马逊，它拥有大量忠诚客户。")),N().createElement("div",null,N().createElement("span",null,"优秀"),N().createElement("span",null,"NPS的得分值在50%以上被认为是不错的。")),N().createElement("div",null,N().createElement("span",null,"良好"),N().createElement("span",null,"NPS值大于10%，此时已经开始脱离平庸公司的范畴")),N().createElement("div",null,N().createElement("span",null,"糟糕"),N().createElement("span",null,"大部分公司的NPS值还是在5%-10%之间徘徊。所以我们将处于这一区间的值定义为糟糕。")),N().createElement("div",null,N().createElement("span",null,"糟糕透顶"),N().createElement("span",null,"NPS值小于5%时，我们只能用这样的词来形容了。")))},N().createElement("i",{className:"icon-cem_file1"}))),N().createElement(v.Z,{theme:"yunting_pos_neu_neg",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return i(e)}}))};function R(r,l,s,c){r&&l&&new Promise(function(e){var t,n,a,i,o,a=(t=r,n=s,a=l.getWidth(),i=l.getHeight(),o=j[n],"client"===n?V(t,o,a,i):"score"===n?O(t,o,a):void 0);c(a.title.text),e(a)}).then(function(e){l.clear(),l.setOption(e)})}var j={client:"客户分类",score:"具体分值"},O=function(e,t,n){var a,i,o=0,r=0,l=0,s=0,c=0,e=e.scoreQuestionnaireCount.map(function(e,t){return c=Math.max(c,e),o+=e,t<7?s+=e:7===t||8===t?l+=e:9!==t&&10!==t||(r+=e),e}),u={total:o,posTotal:r,neuTotal:l,negTotal:s,maxCount:c,seriesData:[{data:e.slice(0,7).map(function(e,t){return{value:e,score:t,total:o,itemStyle:{color:"#D96969"}}}),name:"贬损者"},{data:e.slice(7,9).map(function(e,t){return{value:e,score:t+7,total:o,itemStyle:{color:"#1574B3"}}}),name:"被动者"},{data:e.slice(9).map(function(e,t){return{value:e,score:t+9,total:o,itemStyle:{color:"#15B374"}}}),name:"推荐者"}]},n=n/700;return{title:{text:t},grid:[{top:130,left:"6%",right:"38%"},{top:130,left:"62%",right:"22%"},{top:130,left:"78%",right:"6%"}],tooltip:{formatter:function(e){var t=e.marker,n=e.data,a=n.value,e=n.score,n=n.total;return[t+" 分值 "+e,"人次："+d.ZP.formatNumber(a),"占比："+(a/n*100).toFixed(2)+"%"].join("<br/>")}},legend:{itemWidth:12,itemHeight:12,top:50,left:16+98*n,itemGap:70*n,padding:0,data:[{name:"推荐者",icon:f.W4.square},{name:"被动者",icon:f.W4.square},{name:"贬损者",icon:f.W4.square}],textStyle:{fontSize:14,padding:[0,10]}},graphic:[{type:"text",silent:!0,top:50,left:16,style:{text:"共计",font:"14px "+f.I8}},{type:"line",left:16+70*n,top:56,silent:!0,shape:{x1:0,y1:0,x2:0,y2:18},style:{stroke:"#E5E5E5"}},(a=u,i=n,{type:"group",silent:!0,top:74,left:16,children:[{type:"text",style:{text:d.ZP.formatNumber(a.total),font:"12px "+f.I8}}].concat([a.posTotal,a.neuTotal,a.negTotal].map(function(e,t){var n=(0===a.total?0:(e/a.total*100).toFixed(2))+"%";return{type:"group",left:98*i+30*(t+1)+(52+70*i)*t,children:[{type:"text",style:{x:0,text:n,font:"12px "+f.I8}},{type:"text",style:{x:(0,d.jD)(n,12),text:"（"+d.ZP.formatNumber(e)+"）",font:"12px "+f.I8,fill:"#8c8c8c"}}]}}))})],xAxis:u.seriesData.map(function(e,n){e=e.data;return{type:"category",gridIndex:n,data:e.map(function(e,t){return 1===n?t+7:2===n?t+9:t})}}),yAxis:u.seriesData.map(function(e,t){return{type:"value",show:!1,min:0,max:u.maxCount,gridIndex:t}}),series:u.seriesData.map(function(e,t){var n=e.data;return{type:"bar",name:e.name,xAxisIndex:t,yAxisIndex:t,data:n}})}},V=function(e,t,n,a){var i,o,r,e={total:e.questionnaireTotal,neutralCount:e.passiveCount,positiveCount:e.promoterCount,negativeCount:e.detractorCount};return{title:{text:t},tooltip:{formatter:function(e){var t=e.marker,n=e.data,a=n.value,e=n.name,n=n.total;return("label"!==e?[t+" "+e,"声量："+a,"占比："+(0===n?0:(a/n*100).toFixed(2))+"%"]:["累计人数："+n.total,'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#00B76E;"></span> 推荐者：'+n.positiveCount+'<span style="color: #8c8c8c">（'+(0===n.total?0:(n.positiveCount/n.total*100).toFixed(2))+"%）</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#0074B8;"></span> 被动者：'+n.neutralCount+'<span style="color: #8c8c8c">（'+(0===n.total?0:(n.neutralCount/n.total*100).toFixed(2))+"%）</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#D96969;"></span> 贬损者：'+n.negativeCount+'<span style="color: #8c8c8c">（'+(0===n.total?0:(n.negativeCount/n.total*100).toFixed(2))+"%）</span>"]).join("<br>")}},legend:{itemWidth:12,itemHeight:12,left:"60%",top:"25%",orient:"vertical",itemGap:.15*a,data:[{name:"推荐者",icon:f.W4.square},{name:"被动者",icon:f.W4.square},{name:"贬损者",icon:f.W4.square}],textStyle:{fontSize:14,padding:[0,6]}},graphic:(o=n,r=a,[(i=e).positiveCount,i.neutralCount,i.negativeCount].map(function(e,t){var n=(0===i.total?0:(e/i.total*100).toFixed(2))+"%",a=(0,d.jD)(n,14)-2;return{type:"group",silent:!0,left:.6*o+30,top:(.3+.15*t)*r+16*(t+1),children:[{type:"text",style:{text:n}},{type:"text",left:a,style:{text:"（"+e+"）",fill:"#8C8C8C"}}]}})),series:[{type:"pie",center:["30%","52%"],radius:["48%","60%"],hoverOffset:4,label:{show:!0,position:"center",formatter:["{a|"+e.total+"}","{b|累计人数}"].join("\n"),rich:{a:{color:"#262626",fontSize:30,padding:[10,0,0,0],fontFamily:f.I8},b:{color:"#8C8C8C",fontSize:16,fontFamily:f.I8}}},data:[{value:e.positiveCount,name:"推荐者",total:e.total,itemStyle:{color:"#15B374"}},{value:e.neutralCount,name:"被动者",total:e.total,itemStyle:{color:"#1574B3"}},{value:e.negativeCount,name:"贬损者",total:e.total,itemStyle:{color:"#D96969"}},{value:0,name:"label",total:e,itemStyle:{color:"#ffffffff"}}]}]}},F=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],z=[{title:"客户分类",value:"client"},{title:"具体分值",value:"score"}],_=n(60496),Z=void 0;const B=function(e){var l=e.data,s=e.onMoreClick,t=e.loading,n=e.chartType,c=void 0===n?0:n,a=e.resizeTime,n=N().useState(void 0),u=n[0],i=n[1],e=N().useState("client"),o=e[0],r=e[1],n=N().useState(""),e=n[0],p=n[1];return N().useEffect(function(){R(l,u,o,p)},[l,u,o]),N().useEffect(function(){Z&&clearTimeout(Z),Z=setTimeout(function(){Z=void 0,R(l,u,o,p)},500)},[a]),N().createElement(D,{className:"nc-invest",defTitle:"客户分类",data:l,loading:t},N().createElement("div",{className:"title"},N().createElement("span",{style:{marginLeft:(0,d.jD)(e,14)+8}},N().createElement(y.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:N().createElement("div",null,N().createElement("div",null,"推荐者(Promoter)：具有狂热忠诚度，铁杆粉丝，反复光顾，向朋友推荐。"),N().createElement("div",null,"被动者(Passive)：总体满意但不忠诚，容易转向竞争对手。"),N().createElement("div",null,"贬损者(Detractors)：使用不满意不忠诚，不断抱怨或投诉。"))},N().createElement("i",{className:"icon-cem_file1"}))),N().createElement("span",null,1===c&&N().createElement(_.Z,{options:z,activeObj:o,objName:"valueType",onChange:function(e){e=e.valueType;return r(e)}}),N().createElement(g.Z,{onClick:function(e){return t=u,a=l,i=s,o=c,r=void 0,"image"===(n=e)?r=t:"data"===n&&(e=[["问卷回收总数","推荐者","被动者","贬损者"],[a.questionnaireTotal,a.promoterCount,a.passiveCount,a.detractorCount]],1===o&&((o=e[0]).push.apply(o,a.scoreQuestionnaireCount.map(function(e,t){return"分值"+t})),(o=e[1]).push.apply(o,a.scoreQuestionnaireCount)),r=[e]),void i({type:n,obj:r,name:t.getOption().title[0].text});var t,n,a,i,o,r},options:F,style:{float:"right"}}))),N().createElement(v.Z,{theme:"yunting_neg_neu_pos",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return i(e)}}))};function L(e,t,n,a){var i,o,r,l=[e.sendTotal,e.sendSuccessTotal,e.openedTotal,e.summitTotal,e.completeAnswerTotal],e=.13*(.8*a-32);return{title:{text:t},grid:[{show:!1,left:32,bottom:32,top:"20%",right:160}],tooltip:{formatter:function(e){var t=e.data,n=t.name,t=t.value;return""+e.marker+n+" "+t}},xAxis:{show:!1},yAxis:{type:"category",inverse:!0,axisLabel:{show:!1}},graphic:[].concat((i=l,o=n,r=a,Object.values(H).reduce(function(e,t,n){return 0===n?e:[].concat(e,[{type:"group",left:o-152,top:.2*(.8*r-32)*n+.2*r+.08*(.8*r-32),children:[{type:"text",silent:!0,style:{text:t.vName,font:"12px "+f.I8}},{type:"text",silent:!0,left:68,style:{text:"("+(0===i[n-1]?0:(i[n]/i[n-1]*100).toFixed(2))+"%)",font:"12px "+f.I8,fill:"#8c8c8c"}}]}])},[]))),series:[{type:"bar",barWidth:e,barCategoryGap:"20%",label:{show:!0,formatter:"{b}",position:"insideLeft"},data:l.map(function(e,t){return{value:e,name:H[t].name,itemStyle:{color:H[t].color}}})}]}}function q(n,a,i,o,r){n&&a&&new Promise(function(e){var t=n.find(function(e){return e.dispatchWay===i}).executiveEfficiencyVO,t=L(t,o,a.getWidth(),a.getHeight());r(a.getHeight()),e(t)}).then(function(e){a.clear(),a.setOption(e)})}var H=[{color:"#61799B",name:"发送问卷",vName:"",hint:""},{color:"#D07B49",name:"发送成功",vName:"成功率",hint:"成功率 = 发送成功数 ÷ 发送问卷数"},{color:"#CDB446",name:"打开问卷",vName:"打开率",hint:"打开率 = 打开问卷数 ÷ 发送成功数"},{color:"#1EA082",name:"提交问卷",vName:"提交率",hint:"提交率 = 提交问卷数 ÷ 打开问卷数"},{color:"#3D85FF",name:"完整答题",vName:"答题率",hint:"答题率 = 完整答题数 ÷ 提交问卷数"}],G=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],U=[{title:"全部",value:"全部"},{title:"短信",value:"短信"},{title:"邮件",value:"邮件"},{title:"分享",value:"分享"}],Y=void 0;const J=function(e){var n,a,i,s=e.data,c=e.onMoreClick,t=e.loading,o=e.chartType,u=void 0===o?0:o,r=e.resizeTime,l=e.title,o=N().useState(void 0),p=o[0],m=o[1],e=N().useState("全部"),d=e[0],f=e[1],o=N().useState(0),e=o[0],h=o[1];return N().useEffect(function(){q(s,p,d,l,h)},[s,p,d]),N().useEffect(function(){Y&&clearTimeout(Y),Y=setTimeout(function(){Y=void 0,q(s,p,d,l,h)},500)},[r]),N().createElement(D,{className:"yt-ratio-chart",data:s,defTitle:l,loading:t},N().createElement("div",{className:"title"},N().createElement("span",null,1===u&&N().createElement(_.Z,{options:U,activeObj:d,objName:"valueType",onChange:function(e){e=e.valueType;return f(e)}}),N().createElement(g.Z,{onClick:function(e){return t=p,a=s,i=c,o=u,l=void 0,"image"===(n=e)?l=t:"data"===n&&(r=[["分发渠道","发送问卷","发送成功","打开问卷","提交问卷","完整答题"]],0===o?(e=a.find(function(e){return"全部"===e.dispatchWay}).executiveEfficiencyVO,r.push(["全部",e.sendTotal,e.sendSuccessTotal,e.openedTotal,e.summitTotal,e.completeAnswerTotal])):1===o&&a.forEach(function(e){var t=e.executiveEfficiencyVO;r.push([e.dispatchWay,t.sendTotal,t.sendSuccessTotal,t.openedTotal,t.summitTotal,t.completeAnswerTotal])}),l=[r]),void i({type:n,obj:l,name:t.getOption().title[0].text});var t,n,a,i,o,r,l},options:G,style:{float:"right"}}))),p&&(n=e,a=.2,i=32,[0,1,2,3].map(function(e){var t=.2*(n*(1-a)-i)*(e+1)+a*n+.08*(n*(1-a)-i)-.5*e;return N().createElement(y.Z,{placement:"top",overlay:H[e+1].hint,key:e},N().createElement("span",{className:"hint-icon-wrapper",style:{top:t,transition:"all 0.3s"}},N().createElement("i",{className:"icon-cem_file1"})))})),N().createElement(v.Z,{theme:"yunting_pos_neu_neg",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return m(e)}}))};var K=["positive","negative"],Q=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],X=[{title:"比例",value:"ratio"},{title:"数量",value:"count"}],$="推荐者和贬损者关注点对比",ee=void 0;function te(n,t,o,r){n&&t&&new Promise(function(e){var t,a,i;e((t=n,e=r,i={positiveData:"count"===(a=o)?t.sort(function(e,t){return t.positiveCount-e.positiveCount}).slice(0,10).filter(function(e){return 0<e.positiveCount}):t.sort(function(e,t){return t.posRate-e.posRate}).slice(0,10).filter(function(e){return 0<e.posRate}),negativeData:"count"===a?t.sort(function(e,t){return t.negativeCount-e.negativeCount}).slice(0,10).filter(function(e){return 0<e.negativeCount}):t.sort(function(e,t){return t.negRate-e.negRate}).slice(0,10).filter(function(e){return 0<e.negRate})},{title:{text:e},grid:[{x:"5%",y:"20%",width:"90%",height:"25%"},{x:"5%",y2:"8%",width:"90%",height:"25%"}],tooltip:{formatter:function(e){var t=e.seriesName,n=e.marker,e=e.data;return[n+" "+e.name,("positive"===t?"推荐者":"贬损者")+"声量："+e[t+"Count"],"声量占比："+(100*e[t.substring(0,3)+"Rate"]).toFixed(2)+"%"].join("<br>")}},graphic:[{type:"group",top:"13%",silent:!0,children:[{type:"text",left:22,style:{text:"推荐者提及"+("count"===a?"数量":"比例")+"最多的词",font:"bolder 12px "+f.I8,fill:"#262626"}}]},{type:"group",top:"58%",silent:!0,children:[{type:"text",left:22,style:{text:"贬损者提及"+("count"===a?"数量":"比例")+"最多的词",font:"bolder 12px "+f.I8,fill:"#262626"}}]}],xAxis:K.map(function(e,t){return{gridIndex:t,axisTick:{show:!0,alignWithLabel:!0},axisLabel:{interval:0},data:i[e+"Data"].map(function(e){return e.name})}}),yAxis:K.map(function(e,t){return{gridIndex:t,axisLabel:{show:!1},axisLine:{show:!1}}}),series:K.map(function(t,e){var n="positive"===t?"PROMOTER":"DETRACTOR";return{type:"bar",name:t,barWidth:30,xAxisIndex:e,yAxisIndex:e,data:i[t+"Data"].map(function(e){return l()({},e,{value:"count"===a?e[t+"Count"]:e[t.substring(0,3)+"Rate"],selEmotion:[n],type:"bar",selName:e.name})})}})}))}).then(function(e){t.clear(),t.setOption(e)})}const ne=function(e){var o=e.data,r=e.onMoreClick,t=e.loading,n=e.resizeTime,e=N().useState("count"),a=e[0],i=e[1],e=N().useState(void 0),l=e[0],s=e[1];return N().useEffect(function(){te(o,l,a,$)},[o,a,l]),N().useEffect(function(){ee&&clearTimeout(ee),ee=setTimeout(function(){ee=void 0,te(o,l,a,$)},500)},[n]),N().createElement(D,{className:"yt-focus-chart",data:o,defTitle:$,loading:t},N().createElement("div",{className:"title"},N().createElement("span",null,"ratio"===a&&N().createElement(y.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:"一般而言，任何一个词都有可能被推荐者、中立者和贬损者提及。“比例”公式是计算具体词被推荐者或者贬损者提及的声量占该词全部声量比重。"},N().createElement("i",{className:"icon-cem_file1"})),N().createElement(_.Z,{options:X,activeObj:a,objName:"formula",onChange:function(e){return i(e.formula)}}),N().createElement(g.Z,{onClick:function(e){return t=l,n=o,a=r,i=void 0,"image"===(e=e)?i=t:"data"===e&&(i=[n.reduce(function(e,t){return[].concat(e,[[t.name,t.total,t.positiveCount,t.neutralCount,t.negativeCount]])},[["关键词","回收问卷总数","推荐者","被动者","贬损者"]])]),void a({type:e,obj:i,name:t.getOption().title[0].text});var t,n,a,i},options:Q,style:{float:"right"}}))),N().createElement(v.Z,{theme:"yunting_pos_neg",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return s(e)}}))};function ae(t,n,a,i,o,e,r){var l,s,c;t&&a&&(l=a.getHeight()-60,s=a.getWidth()-60,c=l<s?l:s,i&&le===e?new Promise(function(e){e((0,ie.p9)(t,n,i,c,r))}).then(function(e){a.clear(),a.setOption(e)}):(le=e,new Promise(function(e){e((0,ie.Oq)(t,c))}).then(function(e){a.clear(),a.setOption(e);e=a._zr.storage._displayList.map(function(e){return a.convertToPixel({seriesIndex:0},[e.transform[4]+30,e.transform[5]+30])});o(e)})))}var ie=n(98117),oe="客户综合关注点",re=void 0,le=0;const se=function(e){var t=e.data,n=e.onMoreClick,a=e.loading,i=e.onClick,o=e.selObj,r=e.resizeTime,e=N().useState(void 0),l=e[0],s=e[1],e=N().useState(void 0),c=e[0],u=e[1];return N().useEffect(function(){ae(t,oe,l,c,u,r,o)},[t,l,c,o]),N().useEffect(function(){re&&clearTimeout(re),re=setTimeout(function(){re=void 0,ae(t,oe,l,c,u,r,o)},500)},[r]),N().createElement(D,{className:"yt-focuspoint-chart",data:t,defTitle:oe,loading:a},N().createElement("div",{className:"title"},N().createElement(g.Z,{onClick:function(e){return(0,ie.kQ)(l,e,t,n)},options:ie.am,style:{float:"right"}})),N().createElement(v.Z,{theme:"yunting_pos_neu_neg",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return s(e)},onEvents:{click:i}}))};var ce={promoter:{name:"推荐者",marker:'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#15B374;"></span>',color:"#15B374"},passive:{name:"被动者",marker:'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#1574B3;"></span>',color:"#1574B3"},detractor:{name:"贬损者",marker:'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#D96969;"></span>',color:"#D96969"}};function ue(e,t){if("WEEK"!==t)return e;e=e.split("-");return e[0].substring(2)+"年第"+e[1]+"周"}var pe=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],me=[{title:"每天",value:"DAY"},{title:"每周",value:"WEEK"},{title:"每月",value:"MONTH"}],de="NPS值走势图",fe=void 0;function he(t,n,a,i){t&&n&&new Promise(function(e){var n,l;e((n=t,l=i,{title:{text:a},grid:[{left:32,right:32,top:"20%",bottom:"10%"},{left:32,right:32,top:"20%",bottom:"27.5%"}],xAxis:[0,1,2].map(function(e){return{type:"category",gridIndex:2===e?0:e,zlevel:1,axisLabel:{show:1!==e},axisTick:{show:2===e,alignWithLabel:!0},position:2===e&&"bottom",data:n.map(function(e){return ue(e.time,l)})}}),yAxis:[{min:-100,max:300,splitNumber:4,show:!1,gridIndex:0},{show:!1,gridIndex:1}],tooltip:{formatter:function(e){var t=e.componentSubType,n=e.data,a=n.value,i=n.name,o=n.totalData,n=e.marker,e=e.seriesName;if("line"===t)return[""+n+e,i+"："+a].join("<br/>");if("bar"===t){var r=o.questionnaireTotal,i='<span style="font-size: 16px">'+ue(o.time,l)+"</span>",a='<span style="font-size: 16px; line-height: 30px">答卷数量：'+r+"</span>",t=["promoter","passive","detractor"].map(function(e){var t=ce[e],n=t.name,t=t.marker,e=o[e+"Count"];return""+t+n+"："+(0===r?0:(e/r*100).toFixed(2)+"%")+" "+('<span style="color: #8c8c8c">('+e+")</span>")});return[i,a].concat(t).join("<br/>")}}},legend:{itemWidth:12,itemHeight:12,data:[{name:"推荐者",icon:f.W4.square},{name:"被动者",icon:f.W4.square},{name:"贬损者",icon:f.W4.square},{name:"NPS值",icon:f.W4.square}],top:50,left:16,textStyle:{padding:[0,8]}},series:[].concat(["detractor","passive","promoter"].map(function(t){return{type:"bar",name:ce[t].name,xAxisIndex:1,yAxisIndex:1,barMaxWidth:30,stack:"nps",itemStyle:{borderWidth:2,borderColor:"#fff"},data:n.map(function(e){return{value:e[t+"Count"],totalData:e,itemStyle:{color:ce[t].color}}})}}),[{type:"line",name:"NPS值",zlevel:1,symbol:"circle",xAxisIndex:0,yAxisIndex:0,smooth:0,itemStyle:{color:"#CDB446"},data:n.map(function(e){return{value:+(100*e.npsValue).toFixed(0),name:"NPS值"}})}])}))}).then(function(e){n.clear(),n.setOption(e)})}const ve=function(e){var r=e.data,l=e.onMoreClick,t=e.loading,s=e.dateGroupType,n=e.onDateTypeChange,a=e.resizeTime,e=N().useState(void 0),c=e[0],i=e[1];return N().useEffect(function(){he(r,c,de,s)},[r,c]),N().useEffect(function(){fe&&clearTimeout(fe),fe=setTimeout(function(){fe=void 0,he(r,c,de,s)},500)},[a]),N().createElement(D,{className:"yt-trend-chart",data:r,defTitle:de,loading:t},N().createElement("div",{className:"title"},N().createElement("span",null,N().createElement(_.Z,{options:me,activeObj:s,objName:"dateGroupType",onChange:n}),N().createElement(g.Z,{onClick:function(e){return t=c,n=r,a=l,i=s,o=void 0,"image"===(e=e)?o=t:"data"===e&&(o=[n.reduce(function(e,t){var n,a=t.time;return"WEEK"===i&&(a=(n=a.split("-"))[0].substring(2)+"年第"+n[1]+"周"),[].concat(e,[[a,(100*t.npsValue).toFixed(0),t.questionnaireTotal,t.promoterCount,t.passiveCount,t.detractorCount]])},[["时间","NPS值","问卷回收数","推荐者","被动者","贬损者"]])]),void a({type:e,obj:o,name:t.getOption().title[0].text});var t,n,a,i,o},options:pe,style:{float:"right"}}))),N().createElement(v.Z,{theme:"yunting_neg_neu_pos",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return i(e)}}))};var ge=["各省NPS值对比","各省答卷数量对比"],ye=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],xe=[{title:"各省NPS值对比",value:"npsValue"},{title:"各省答卷数量对比",value:"ansCount"}];n(98245);var Ee=void 0;function Ce(i,t,o,r){i&&t&&new Promise(function(e){var t,a,n,t=(t=i,a="npsValue"===o?0:1,n=Math.max.apply(Math,t.map(function(e){return e.questionnaireTotal})),{title:{text:ge[a]},tooltip:{formatter:function(e){var t=e.marker,n=e.data,e=n.name,n=n.value;return[t+'<span style="font-size: 16px; line-height: 30px">'+e+"</span>",(0===a?"NPS值：":"答卷数量：")+n].join("<br/>")}},visualMap:{left:"10%",bottom:20,min:0===a?-100:0,max:0===a?100:0===n?1:n,text:["高","低"],inRange:{color:0===a?["#D96969","#ffffff","#0847A6"]:["#ffffff","#0847A6"]},itemWidth:10,itemHeight:80},series:[{type:"map",map:"china",label:{normal:{show:!1},emphasis:{show:!1}},itemStyle:{emphasis:{areaColor:"#CDB446"}},data:t.map(function(e){return{name:e.province.replace("省",""),value:0===a?+(100*e.npsValue).toFixed(0):e.questionnaireTotal}})}]});r(t.title.text),e(t)}).then(function(e){t.clear(),t.setOption(e)})}const Ne=function(e){var o=e.data,r=e.onMoreClick,t=e.loading,n=e.resizeTime,a=N().useState(void 0),l=a[0],i=a[1],e=N().useState("npsValue"),s=e[0],c=e[1],a=N().useState(""),e=a[0],u=a[1];return N().useEffect(function(){Ce(o,l,s,u)},[o,l,s]),N().useEffect(function(){Ee&&clearTimeout(Ee),Ee=setTimeout(function(){Ee=void 0,Ce(o,l,s,u)},500)},[n]),N().createElement(D,{className:"nc-map",data:o,defTitle:"各省NPS值对比",loading:t},N().createElement("div",{className:"title"},N().createElement("span",{style:{marginLeft:(0,d.jD)(e,14)+4}},N().createElement(_.Z,{showTitle:!1,options:xe,activeObj:s,objName:"npsValueType",onChange:function(e){e=e.npsValueType;return c(e)}}),N().createElement(y.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:"每一个客户完成问卷时，系统可以获得其上网IP，基于IP可以推算出其地理位置信息。此图从地理位置的角度为你展示客户的"+("npsValue"===s?"NPS值":"答卷数量")+"对比情况。"},N().createElement("i",{className:"icon-cem_file1"}))),N().createElement(g.Z,{onClick:function(e){return t=l,n=o,a=r,i=void 0,"image"===(e=e)?i=t:"data"===e&&(i=[n.reduce(function(e,t){return[].concat(e,[[t.province,(100*t.npsValue).toFixed(0),t.questionnaireTotal,t.promoterCount,t.passiveCount,t.detractorCount]])},[["地区","NPS值","问卷回收数","推荐者","被动者","贬损者"]])]),void a({type:e,obj:i,name:t.getOption().title[0].text});var t,n,a,i},options:ye,style:{float:"right"}})),N().createElement(v.Z,{theme:"yunting_pos_neu_neg",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return i(e)}}))};var be={EMAIL:"邮件",SMS:"短信",SHARE:"链接分享"},Te=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],Ae="各分发方式答卷回收数量及NPS值",Se=void 0;function we(t,n,a){t&&n&&new Promise(function(e){var n;e((n=t,{title:{text:a},grid:[{left:18,right:18,top:"30%",bottom:"10%",show:!1},{left:18,right:18,top:"30%",bottom:"25%",show:!1}],xAxis:[0,1,2].map(function(e){return{type:"category",gridIndex:2===e?0:e,axisLabel:{show:1!==e},axisTick:{show:2===e,alignWithLabel:!0},position:2===e&&"bottom",data:["短信","邮件","链接分享"]}}),yAxis:[{min:-100,max:300,splitNumber:4,show:!1,gridIndex:0},{show:!1,gridIndex:1}],tooltip:{formatter:function(e){var t=e.seriesName,n=e.marker,a=e.data,e=a.value;return[n+" "+t,("nps"===a.type?"数值：":"数量：")+e].join("<br/>")}},legend:{itemWidth:12,itemHeight:12,data:[{name:"NPS值",icon:f.W4.square},{name:"答卷回收数量",icon:f.W4.square}],top:50,left:18,textStyle:{padding:[0,8]}},series:[].concat([0,1].map(function(e){return{type:"bar",name:"NPS值",xAxisIndex:0,yAxisIndex:0,barWidth:50,barGap:0,barCategoryGap:0===e?0:"-100%",data:1===e?0:["SMS","EMAIL","SHARE"].map(function(t){return{type:"nps",name:be[t],value:(100*n.find(function(e){return e.dispatchWay===t}).npsValue).toFixed(0)}})}}),[0,1].map(function(e){return{type:"bar",xAxisIndex:1,yAxisIndex:1,barWidth:50,barGap:0,barCategoryGap:0===e?"-100%":0,name:"答卷回收数量",data:0===e?0:["SMS","EMAIL","SHARE"].map(function(t){return{type:"nps",name:be[t],value:n.find(function(e){return e.dispatchWay===t}).questionnaireTotal}})}}))}))}).then(function(e){n.clear(),n.setOption(e)})}const ke=function(e){var o=e.data,r=e.onMoreClick,t=e.loading,n=e.resizeTime,e=N().useState(void 0),l=e[0],a=e[1];return N().useEffect(function(){we(o,l,Ae)},[o,l,n]),N().useEffect(function(){Se&&clearTimeout(Se),Se=setTimeout(function(){Se=void 0,we(o,l,Ae)},500)},[n]),N().createElement(D,{className:"nc-recycle",data:o,defTitle:Ae,loading:t},N().createElement("div",{className:"title"},N().createElement("span",{style:{marginLeft:(0,d.jD)(Ae,14)+8}},N().createElement(y.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:N().createElement("div",null,N().createElement("div",null,"系统除了提供邮件和短信分发的渠道之外，你还可以通过复制链接的方式回收问卷。"),N().createElement("div",null,"注：通过复制链接的方式获得回收问卷，无法统计分发和分发成功与否两种状态；且会使得一个问卷链接回收多个答卷的情况发生，在解读数据时需要注意。"))},N().createElement("i",{className:"icon-cem_file1"}))),N().createElement(g.Z,{onClick:function(e){return t=l,n=o,a=r,i=void 0,"image"===(e=e)?i=t:"data"===e&&(i=[n.reduce(function(e,t){var n="EMAIL"===t.dispatchWay?"邮件":"SMS"===t.dispatchWay?"短信":"链接分享";return[].concat(e,[[n,(100*t.npsValue).toFixed(0),t.questionnaireTotal,t.promoterCount,t.passiveCount,t.detractorCount]])},[["分发渠道","NPS值","问卷回收数","推荐者","被动者","贬损者"]])]),void a({type:e,obj:i,name:t.getOption().title[0].text});var t,n,a,i},options:Te,style:{float:"right"}})),N().createElement(v.Z,{theme:"yunting_blue_yellow",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return a(e)}}))};var De={MOBILE:"移动端",SHARE:"电脑端"},Pe={client:"客户使用的上网设备",browser:"客户使用的浏览器"},We=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],Me=[{title:"客户使用的上网设备",value:"client"},{title:"客户使用的浏览器",value:"browser"}],Ie=[{title:"NPS值",value:"nps"},{title:"答卷数量",value:"count"}],Re=void 0;function je(a,t,i,l,s){a&&t&&new Promise(function(e){var t,o,r,n,t=(o=l,r=a[t=i],n=r.map(function(e){var t=De[e.dispatchWay];return t||e.dispatchWay}),{title:{text:Pe[t]},grid:{left:18,right:18,top:"30%",bottom:"10%",show:!1},xAxis:[0,1].map(function(e){return{type:"category",axisLabel:{show:1===e},axisTick:{show:1===e,alignWithLabel:!0},position:1===e&&"bottom",data:n}}),yAxis:{min:"nps"===o?-100:0,max:"nps"===o?300:Math.max.apply(Math,r.map(function(e){return e.questionnaireTotal})),splitNumber:"nps"===o&&2,show:!1},tooltip:{formatter:function(e){var t=e.marker,n=e.data,e=n.name,n=n.value;return[t+" "+e,("nps"===o?"NPS值":"答卷数量")+"："+n].join("<br/>")}},legend:{itemWidth:12,itemHeight:12,data:n.map(function(e){return{name:e,icon:f.W4.square}}),top:50,left:18,textStyle:{padding:[0,8]}},series:r.map(function(n,a){var i=De[n.dispatchWay];return{type:"bar",name:i=i||n.dispatchWay,barMaxWidth:50,stack:"name",borderWidth:50,data:r.map(function(e,t){return{value:t===a?"nps"===o?+(100*n.npsValue).toFixed(0):n.questionnaireTotal:0,name:i}})}})});s(t.title.text),e(t)}).then(function(e){t.clear(),t.setOption(e)})}const Oe=function(e){var r=e.data,l=e.onMoreClick,t=e.loading,n=e.resizeTime,a=N().useState("nps"),i=a[0],o=a[1],e=N().useState("client"),s=e[0],c=e[1],a=N().useState(void 0),u=a[0],p=a[1],e=N().useState(""),a=e[0],m=e[1];return N().useEffect(function(){je(r,u,s,i,m)},[r,u,i,s]),N().useEffect(function(){Re&&clearTimeout(Re),Re=setTimeout(function(){Re=void 0,je(r,u,s,i,m)},500)},[n]),N().createElement(D,{className:"nc-device",data:r,defTitle:"客户使用的上网设备",loading:t},N().createElement("div",{className:"title"},N().createElement("span",{style:{marginLeft:(0,d.jD)(a,14)+4}},N().createElement(_.Z,{showTitle:!1,options:Me,activeObj:s,objName:"deviceType",onChange:function(e){e=e.deviceType;return c(e)}})),N().createElement("span",null,N().createElement(_.Z,{options:Ie,activeObj:i,objName:"npsValueType",onChange:function(e){e=e.npsValueType;return o(e)}}),N().createElement(g.Z,{onClick:function(e){return t=u,a=r,i=l,o=void 0,"image"===(n=e)?o=t:"data"===n&&(e=a.client.reduce(function(e,t){return[].concat(e,[[t.dispatchWay,(100*t.npsValue).toFixed(0),t.questionnaireTotal,t.promoterCount,t.passiveCount,t.detractorCount]])},[["设备","NPS值","问卷回收数","推荐者","被动者","贬损者"]]),a=a.browser.reduce(function(e,t){return[].concat(e,[[t.dispatchWay,(100*t.npsValue).toFixed(0),t.questionnaireTotal,t.promoterCount,t.passiveCount,t.detractorCount]])},[["浏览器","NPS值","问卷回收数","推荐者","被动者","贬损者"]]),o=[[].concat(e,[["","","","","",""]],a)]),void i({type:n,obj:o,name:t.getOption().title[0].text});var t,n,a,i,o},options:We,style:{float:"right"}}))),N().createElement(v.Z,{theme:"yunting_multi_color",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return p(e)}}))};const Ve=function(e){var t=e.npsValChartData,n=e.invRatChartData,a=e.npsRatChartData,i=e.fosDisChartData,o=e.fosPoiChartData,r=e.npsTreChartData,l=e.npsTrendDateGroupType,s=e.npsMapChartData,c=e.npsRecChartData,u=e.npsDevChartData,p=e.onMoreClick,m=e.onFilterChange,d=e.onChartParamChange,f=e.resizeTime,h=e.fetchingNpsValue,v=e.fetchingInvestRatio,g=e.fetchingNpsRatio,y=e.fetchingFocusData,x=e.fetchingNpsTrend,E=e.fetchingNpsMap,C=e.fetchingNpsRecycle,e=e.fetchingNpsDevices;return N().createElement("div",{className:"yt-npx-overview-wrapper"},N().createElement("div",{className:"top-header"},N().createElement(b,{title:"NPS看板",showList:["time"],onChange:m})),N().createElement("div",{className:"content"},N().createElement("div",{className:"no-col-3"},N().createElement(I,{data:t,onMoreClick:p,loading:h,chartType:0,resizeTime:f}),N().createElement("div",{className:"v-divider"}),N().createElement(B,{data:n,onMoreClick:p,loading:v,chartType:0,resizeTime:f}),N().createElement("div",{className:"v-divider"}),N().createElement(J,{data:a,onMoreClick:p,loading:g,chartType:0,resizeTime:f,title:"NPS执行效率"})),N().createElement("div",{className:"h-divider"}),N().createElement("div",{className:"no-col-2"},N().createElement(ne,{data:i,onMoreClick:p,loading:y,resizeTime:f}),N().createElement("div",{className:"v-divider"}),N().createElement(se,{data:o,onMoreClick:p,loading:y,resizeTime:f})),N().createElement("div",{className:"h-divider"}),N().createElement("div",{className:"no-col-2"},N().createElement(ve,{data:r,onMoreClick:p,loading:x,dateGroupType:l,onDateTypeChange:d,resizeTime:f}),N().createElement("div",{className:"v-divider"}),N().createElement(Ne,{data:s,onMoreClick:p,loading:E,resizeTime:f})),N().createElement("div",{className:"h-divider"}),N().createElement("div",{className:"no-col-2"},N().createElement(ke,{data:c,onMoreClick:p,loading:C,resizeTime:f}),N().createElement("div",{className:"v-divider"}),N().createElement(Oe,{data:u,onMoreClick:p,loading:e,resizeTime:f}))))};var Fe=n(35239),ze=n(94644),_e=n(64396).Z.research.npsOverview,t=function(n){function e(e){var t=n.call(this,e)||this;return t._handleWindowResize=function(){t.setState({resizeTime:(new Date).getTime()})},t._handleOnMoreClick=function(e){"image"===e.type?(0,ze._v)(e.obj,e.name):"data"===e.type&&(0,ze.aT)(e.obj,e.name)},t._handleOnFilterChange=function(e){e=e.dateFilter;t.props.fetchChartData({dateFilter:l()({},e,{remoteName:"updatedAt"}),timeOut:500,projectId:Fe.t.get(Fe.V.curProject).id})},t._handleOnChartParamChange=function(e){e.dateGroupType&&t.props.fetchNpsTrend(l()({},e,{timeOut:0}))},t.state={resizeTime:(new Date).getTime()},t.event={onMoreClick:t._handleOnMoreClick,onFilterChange:t._handleOnFilterChange,onChartParamChange:t._handleOnChartParamChange},t}s()(e,n);var t=e.prototype;return t.componentDidMount=function(){window.addEventListener("resize",this._handleWindowResize)},t.componentWillUnmount=function(){window.removeEventListener("resize",this._handleWindowResize)},t.render=function(){return N().createElement(Ve,l()({},this.props,this.state,this.event))},e}(t.Component);const Ze=(0,a.connect)(function(e){var t=e.loading,e=i()(e,["loading"]);return l()({},e[_e],{fetchingNpsValue:t.effects[_e+"/fetchNpsValue"]||!1,fetchingInvestRatio:t.effects[_e+"/fetchInvestRatio"]||!1,fetchingNpsRatio:t.effects[_e+"/fetchNpsRatio"]||!1,fetchingFocusData:t.effects[_e+"/fetchFocusData"]||!1,fetchingNpsTrend:t.effects[_e+"/fetchNpsTrend"]||!1,fetchingNpsMap:t.effects[_e+"/fetchNpsMap"]||!1,fetchingNpsRecycle:t.effects[_e+"/fetchNpsRecycle"]||!1,fetchingNpsDevices:t.effects[_e+"/fetchNpsDevices"]||!1})},function(t){return{fetchChartData:function(e){return t({type:_e+"/fetchChartData",payload:e})},fetchNpsTrend:function(e){return t({type:_e+"/fetchNpsTrend",payload:e})}}})(t)}}]);