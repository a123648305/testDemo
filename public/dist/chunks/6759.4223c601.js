(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6759],{56759:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var t=n(37316),a=n.n(t),t=n(67154),p=n.n(t),t=n(85354),r=n.n(t),t=n(67294),E=n.n(t),t=n(55609),o=n(35239),_=n(8833),C=n(27310),b=n(60222),T=n(8201),d=n(98191),f=n(60496),y=n(39432),h=n(70715),g=n(94644);function v(e,t){var n=e.map(function(e){return{date:(0,y.yV)(t,e.date),productSaleList:0<e.productSaleList.length?e.productSaleList:[{flag:!1,count:0,productCount:0},{flag:!0,count:0,productCount:0}]}}),a=[["动销销量",n.map(function(e){return e.productSaleList.filter(function(e){return e.flag}).reduce(function(e,t){return e+t.count},0)}).reduce(function(e,t){return e+t},0)],["非动销销量",n.map(function(e){return e.productSaleList.filter(function(e){return!e.flag}).reduce(function(e,t){return e+t.count},0)}).reduce(function(e,t){return e+t},0)]],r=n.map(function(e){return[e.date,e.productSaleList.filter(function(e){return e.flag}).reduce(function(e,t){return e+t.count},0),e.productSaleList.filter(function(e){return!e.flag}).reduce(function(e,t){return e+t.count},0)]}),e=n.map(function(e){return[e.date,e.productSaleList.filter(function(e){return e.flag}).reduce(function(e,t){return e+t.productCount},0)]});return{length:n.length,datasets:[{dimensions:["销量","数量"],source:a},{dimensions:["日期","动销商品数"],source:e},{dimensions:["日期","动销销量","非动销销量"],source:r}]}}var S=n(50976);const x=function(e){var t=e.key,r=e.title,o=e.data,n=e.loading,a=e.timeOptions,i=e.timeType,l=e.timeTypeFlavor,c=e.onFilterChange,u=e.onFlavorChange,e=E().useState(void 0),s=e[0],m=e[1];return E().useEffect(function(){var e;s&&((0,T.P)(o)?(e=function(e,t,n){n=v(e,n).datasets;return{title:{text:t},tooltip:{trigger:"axis",enterable:!0,hideDelay:500,formatter:function(e){var t=e[0].axisValue,e=e.map(function(e){var t=e.componentSubType,n=e.marker,a=e.seriesName,r=e.seriesIndex,e=e.data,e="line"===t?e[r-1]:e.value;return{name:n+" "+a+"："+y.ZP.getApproximateNum(e),value:e}});return(e=e.sort(function(e,t){return t.value-e.value}).map(function(e){return e.name})).splice(0,0,'<span class="yt_echart_tooltip_title"><span style="color: #262626">'+t+"</span></span>"),e.join("</br>")}},legend:{left:360,top:40,itemWidth:14,itemHeight:12,itemGap:16,selected:{"动销销量":!0,"非动销销量":!0,"动销商品数量":!1},data:[{name:"动销销量",icon:h.W4.lineRing},{name:"非动销销量",icon:h.W4.lineRing},{name:"动销商品数量",icon:h.W4.square}]},dataset:n.map(function(e){return p()({},e,{sourceHeader:!1})}),xAxis:{type:"category",axisTick:{show:!0}},yAxis:[].concat(Array.from({length:2}).map(function(e,t){return{type:"value",splitNumber:3,name:0===t?"销量":"商品数",axisLabel:{showMinLabel:!1,formatter:function(e){return y.ZP.getApproximateNum(e)}},nameTextStyle:{color:"#262626"},minInterval:1}})),series:[{type:"pie",datasetIndex:0,hoverOffset:0,center:[183,156],radius:77,tooltip:{trigger:"item",formatter:function(e){var t=e.marker,n=e.percent,a=e.data,e=a.value;return t+" "+a.name+"："+y.ZP.getApproximateNum(e)+"（"+n+"%）"}},label:{formatter:function(e){var t=e.data,e=t.value;return["{a|"+t.name+"}","{b|"+y.ZP.getApproximateNum(e)+"}"].join("\n")},rich:{a:{color:"#000000"},b:{color:"#8C8C8C",lineHeight:14,verticalAlign:"bottom"}}},labelLine:{smooth:!0,length:5,lineStyle:{color:"#BFBFBF"}},data:n[0].source.map(function(e,t){t=t<8;return{value:e[1],name:e[0],label:{show:t},labelLine:{show:t},emphasis:{label:{show:t},labelLine:{show:t}}}})},{type:"bar",name:"动销商品数量",barMaxWidth:24,yAxisIndex:1,itemStyle:{color:"#D96969"},data:n[1].source.map(function(e){return{value:e[1]}})}].concat(Array.from({length:2}).map(function(e,t){return{type:"line",yAxisIndex:0,datasetIndex:2,itemStyle:{color:h.Fq[t]}}})),dataZoom:{show:"slider",left:445,right:76,bottom:16,height:16,handleSize:"100%",showDetail:!1},grid:[{top:100,bottom:40,left:360,right:36,containLabel:!0}]}}(o,r,i),s.clear(),s.setOption(e)):m(void 0))},[o,i,s]),E().createElement("div",{key:t,className:"market_pie_bar_line_wrap"},E().createElement(T.Z,{data:o,loading:n,className:"market_pie_bar_line_chart",renderTitle:E().createElement(d.Z,{title:r,data:o,onMoreClick:function(e){var t,n,a;t=s,n=o,a=r,"image"===(e=e)?(0,g._v)(t,a):"data"===e&&(e=n.map(function(e){return[e.date,e.productSaleList.filter(function(e){return e.flag}).reduce(function(e,t){return e+t.count},0),e.productSaleList.filter(function(e){return!e.flag}).reduce(function(e,t){return e+t.count},0),e.productSaleList.filter(function(e){return e.flag}).reduce(function(e,t){return e+t.productCount},0)]}),n=[(n=v(n).datasets)[0].dimensions].concat(n[0].source),e=[["日期","动销销量","非动销销量","动销商品数量"]].concat(e),e=[].concat(n,[[""]],e),(0,g.aT)([e],a))}},i&&E().createElement(f.Z,{options:a,activeObj:i,flavor:l,onChange:function(e){return c({timeType:e})},onFlavorChange:function(e){return u({timeTypeFlavor:e})}}))},E().createElement(S.Z,{theme:"yunting_multi_color",className:"yt_echarts_style",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return m(e)}})))};var N=[{title:"到手价",value:"takePriceList"},{title:"挂牌价",value:"listPriceList"},{title:"优惠力度",value:"reducedPriceList"}];const w=function(e){var t=e.key,o=e.title,n=e.titleOverlay,i=e.data,a=e.loading,l=e.priceType,r=e.priceTypeFlavor,c=e.onFilterChange,u=e.onFlavorChange,e=E().useState(void 0),s=e[0],m=e[1];return E().useEffect(function(){var e,t,n,a,r;s&&((0,T.P)(i)?(e=i,t=o,n=l,a=s.getWidth(),r=.8*a/(63*e.map(function(e){return e.date}).length),a=N.some(function(e){return e.value===n})?N.find(function(e){return e.value===n}).title:"到手价",a={title:{text:t},color:["#1574B3","#D2ECE6","#D1B425","#F6E5DB"],grid:{top:100,left:36,right:36,bottom:r<1?40:16,containLabel:!0},dataZoom:{show:r<1,left:"5%",right:"5%",bottom:16,height:16,handleSize:"100%",showDetail:!1},dataset:[{dimensions:["日期","销量"],source:e.map(function(e){return[e.date,e.saleCount]})},{dimensions:["日期",a+"Q75"],source:e.map(function(e){return[e.date,e[n].find(function(e){return e.key.includes("75")}).value||"--"]})},{dimensions:["日期",a+"中位数"],source:e.map(function(e){return[e.date,e[n].find(function(e){return e.key.includes("50")}).value||"--"]})},{dimensions:["日期",a+"Q25"],source:e.map(function(e){return[e.date,e[n].find(function(e){return e.key.includes("25")}).value||"--"]})}].map(function(e){return p()({},e,{sourceHeader:!1})}),tooltip:{trigger:"axis",enterable:!0,hideDelay:500,formatter:function(e){var t=e[0].axisValue,e=e.map(function(e){var t=e.marker,n=e.seriesName,e=e.data[1];return{name:t+" "+n+"："+y.ZP.getApproximateNum(Number(e).toFixed(2)),value:e}});return(e=e.sort(function(e,t){return t.value-e.value}).map(function(e){return e.name})).splice(0,0,'<span class="yt_echart_tooltip_title">\n          <span style="color: #262626">'+t+"</span></span>"),e.join("</br>")}},legend:{top:40,left:36,itemWidth:14,itemHeight:12,itemGap:16,data:["销量",a+"Q25",a+"中位数",a+"Q75"],icon:h.W4.lineRing},series:[{type:"line",yAxisIndex:0,datasetIndex:0,itemStyle:{color:"#1574B3"}},{type:"line",yAxisIndex:1,datasetIndex:1,itemStyle:{color:"#F6E5DB"},areaStyle:{opacity:.5}},{type:"line",yAxisIndex:1,datasetIndex:2,itemStyle:{color:"#D1B425"}},{type:"line",yAxisIndex:1,datasetIndex:3,itemStyle:{color:"#D2ECE6"},areaStyle:{opacity:1,color:"#fff"}}],xAxis:{type:"category",boundaryGap:!1,axisTick:{show:!0}},yAxis:[].concat(Array.from({length:2}).map(function(e,t){return{type:"value",name:0===t?"销量":"价格",axisLabel:{showMinLabel:!1,formatter:function(e){return y.ZP.getApproximateNum(e)}},nameTextStyle:{color:"#262626"},min:0===t?void 0:"dataMin",minInterval:1,zlevel:2,splitNumber:3}}))},s.clear(),s.setOption(a),console.log("销量与到手价关系=",a)):m(void 0))},[i,l,s]),E().createElement("div",{key:t,className:"market_sales_line_wrap"},E().createElement(T.Z,{data:i,loading:a,className:"market_sales_line_chart",renderTitle:E().createElement(d.Z,{title:o,titleOverlay:n,data:i,onMoreClick:function(e){var t,n,a,r;t=s,n=i,a=o,r=l,"image"===(e=e)?(0,g._v)(t,a):"data"===e&&(e=["日期","销量",(e=N.some(function(e){return e.value===r})?N.find(function(e){return e.value===r}).title:"到手价")+"Q25",e+"中位数",e+"Q75"],n=n.map(function(e){return[e.date,e.saleCount,e[r].find(function(e){return e.key.includes("25")}).value||"--",e[r].find(function(e){return e.key.includes("50")}).value||"--",e[r].find(function(e){return e.key.includes("75")}).value||"--"]}),n=[e].concat(n),(0,g.aT)([n],a))}},l&&E().createElement(f.Z,{options:N,activeObj:l,flavor:r,onChange:function(e){return c({priceType:e})},onFlavorChange:function(e){return u({priceTypeFlavor:e})}}))},E().createElement(S.Z,{theme:"yunting_multi_color",className:"yt_echarts_style",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return m(e)}})))};function k(e){return 0===e||null===e?void 0:0<e}function R(e){switch(e){case"WEEK":return"周";case"MONTH":return"月";case"QUATER":return"季";case"YEAR":return"年";default:return""}}function A(){return E().createElement(E().Fragment,null,E().createElement("div",null,"选定的日期范围内，符合筛选条件的商品中，再基于「商品状态=正常在售或预售」过滤出商品列表，然后对商品列表做去重求和，得出的数值即为「在售商品数」。"),E().createElement("div",null,"SKU：这里的「SKU」区别与电商平台的所谓的spu有区别。市场洞察中的SKU是站在品牌方的立场的描述，与电商平台无关。"),E().createElement("div",null,"如：iPhone X 64G 银色 则是一个SKU。"),E().createElement("div",{style:{marginTop:14,textAlign:"right"}},E().createElement(i.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/f255c9b4-2b3a-4c9b-9b37-371717d0b99c?# 《商品状态说明》",target:"_blank"},"了解更多")))}function F(){return E().createElement(E().Fragment,null,E().createElement("div",null,"「动销商品数」：在指定的事件范围内，如果商品A有关联的促销活动，则在这段时间内该商品A称之为「动销商品」。"),E().createElement("div",null,"「动销率」 = 动销商品数÷在售商品数。"),E().createElement("div",null,"「活动数量」指定的时间范围内与商品相关的活动的数量。"))}function L(){return E().createElement(E().Fragment,null,E().createElement("div",null,"「销量」即当期销量。"),E().createElement("div",null,"如果商品A在具体的某一天有关联的促销活动，那么商品A在该天的销量称之为「动销销量」；否则为「非动销销量」。"))}var i=n(61409);const l=function(e){var t=e.onFilterReady,n=e.onFilterChange,a=e.onFlavorChange,r=e.saling,o=e.salingLoading,i=e.activeSaling,l=e.activeLoading,c=e.salesCount,u=e.salesLoading,s=e.setSameRate,m=e.saleData,p=e.saleLoading,d=e.timeTypeOpts,f=e.timeType,y=e.timeTypeFlavor,h=e.priceData,g=e.priceLoading,v=e.priceType,e=e.priceTypeFlavor;return E().createElement("div",{className:"yt_market_sales_wrapper"},E().createElement(_.Z,{pageType:"MARKET_SALE_ANALYSIS",values:[],onReady:t,onChange:n}),E().createElement("div",{className:"content",id:"sales_content"},E().createElement(C.Z,{orientation:"horizontal",colNumber:4,showList:["card_0","card_1","card_2"]},E().createElement(b.Z,{key:"card_0",loading:o,style:{width:"100%",height:"160px"},data:(o=r,(0,T.P)(o)?[{name:"在售商品数",count:o.onCount,format:"myriad"},{name:R(o.sameRateType)+"同比",count:o.sameRate,rise:k(o.sameRate),format:"percent"},{name:"环比",count:o.circleRate,rise:k(o.circleRate),format:"percent"},{name:"在售SKU",count:o.skuOnCount,format:"myriad"}]:o),compare:r&&r.sameRateType,onSetting:function(e){return s({cartType:"ON_COUNT_SKU_CARD_CHART",sameRateType:e.compareValue})},tip:A}),E().createElement(b.Z,{key:"card_1",loading:l,style:{width:"100%",height:"160px"},data:(l=i,(0,T.P)(l)?[{name:"动销商品数",count:l.activityItemCount,format:"myriad"},{name:R(l.sameRateType)+"同比",count:l.sameRate,rise:k(l.sameRate),format:"percent"},{name:"环比",count:l.circleRate,rise:k(l.circleRate),format:"percent"},{name:"动销率",count:l.activityItemRate,format:"percent"},{name:"活动数量",count:l.activityCount,format:"myriad"}]:l),compare:i&&i.sameRateType,onSetting:function(e){return s({cartType:"ACTIVITY_ITEM_COUNT_CARD_CHART",sameRateType:e.compareValue})},tip:F}),E().createElement(b.Z,{key:"card_2",loading:u,style:{width:"100%",height:"160px"},data:(u=c,(0,T.P)(u)?[{name:"销量",count:u.saleCount,format:"myriad"},{name:R(u.sameRateType)+"同比",count:u.sameRate,rise:k(u.sameRate),format:"percent"},{name:"环比",count:u.circleRate,rise:k(u.circleRate),format:"percent"},{name:"动销销量",count:u.activitySaleCount,format:"myriad"},{name:"非动销销量",count:u.nonActivitySaleCount,format:"myriad"}]:u),compare:c&&c.sameRateType,onSetting:function(e){return s({cartType:"SALE_COUNT_CARD_CHART",sameRateType:e.compareValue})},tip:L})),E().createElement(C.Z,{className:"chart_wrap",orientation:"vertical",showList:["chart_0","chart_1"]},E().createElement(x,{key:"chart_0",title:"动销与非动销销量分析",data:m,loading:p,timeOptions:d,timeType:f,timeTypeFlavor:y,onFilterChange:n,onFlavorChange:a}),E().createElement(w,{key:"chart_1",title:"销量与"+(N.some(function(e){return e.value===v})&&N.find(function(e){return e.value===v}).title)+"关系分析",titleOverlay:E().createElement("a",{href:"https://www.yuque.com/docs/share/06c5c889-b9c6-456d-b796-7aad257e8877?# 《价格和销量的走势关系说明》",target:"_blank",rel:"noopener noreferrer",style:{color:"#0847A6"}},"了解更多"),data:h,loading:g,priceType:v,priceTypeFlavor:e,onFilterChange:n,onFlavorChange:a}))))};var c=n(64396).Z.market.salesAnalysis,n=function(t){function e(e){var a=t.call(this,e)||this;return a._handleOnFilterReady=function(e,t,n){a.props.fetchParams(p()({},e,{filterModel:e.filterValue,projectId:o.t.get(o.V.curProject).id,timeTypeOpts:n.dateOptions,defaultTimeType:n.defaultDateType}))},a._handleOnFilterChange=function(e,t,n){e.dateFilter?a._handleOnFilterReady(e,t,n):e.timeType?a.props.fetchSaleData(e):e.priceType&&a.props.save({priceType:e.priceType})},a._handleOnFlavorChange=function(e){a.props.updateFlavors(e)},a.state={},a.event={onFilterReady:a._handleOnFilterReady,onFilterChange:a._handleOnFilterChange,onFlavorChange:a._handleOnFlavorChange},a}return r()(e,t),e.prototype.render=function(){return E().createElement(l,p()({},this.props,this.state,this.event))},e}(E().PureComponent);const u=(0,t.connect)(function(e){var t=e.loading,e=a()(e,["loading"]);return p()({},e[c],{salingLoading:t.effects[c+"/fetchSalingCard"]||!1,activeLoading:t.effects[c+"/fetchActiveCard"]||!1,salesLoading:t.effects[c+"/fetchSalesCountCard"]||!1,saleLoading:t.effects[c+"/fetchSaleData"]||!1,priceLoading:t.effects[c+"/fetchPriceData"]||!1})},function(t){return{save:function(e){return t({type:c+"/save",payload:e})},clean:function(){return t({type:c+"/clean"})},fetchParams:function(e){return t({type:c+"/fetchParams",payload:e})},fetchDatas:function(e){return t({type:c+"/fetchDatas",payload:e})},setSameRate:function(e){return t({type:c+"/setSameRate",payload:e})},fetchSalingCard:function(e){return t({type:c+"/fetchSalingCard",payload:e})},fetchActiveCard:function(e){return t({type:c+"/fetchActiveCard",payload:e})},fetchSalesCountCard:function(e){return t({type:c+"/fetchSalesCountCard",payload:e})},fetchSaleData:function(e){return t({type:c+"/fetchSaleData",payload:e})},fetchPriceData:function(e){return t({type:c+"/fetchPriceData",payload:e})},updateFlavors:function(e){return t({type:c+"/updateFlavors",payload:e})}}})(n)},8833:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(67154),l=n.n(t),t=n(37316),c=n.n(t),t=n(67294),u=n.n(t),s=n(26198),m=n(97194),t=n(45697),n=n.n(t),t=function(e){var t=e.getFilterRef,n=e.className,a=e.hour,r=e.children,o=e.onReady,i=e.onChange,e=c()(e,["getFilterRef","className","hour","children","onReady","onChange"]);return u().createElement("div",{className:n},u().createElement(s.Z,l()({ref:t,onReady:function(){o.apply(null,[].concat(Array.prototype.slice.call(arguments),[(0,m.X)(arguments[0].dateFilter.numOfDays,a)]))},onChange:function(){i.apply(null,[].concat(Array.prototype.slice.call(arguments),[(0,m.X)(arguments[0].dateFilter.numOfDays,a)]))}},e)),r)};const a=t;t.propTypes={className:n().string,hour:n().bool,onReady:n().func,onChange:n().func,pageType:n().string,titles:n().shape({titel:n().string,url:n().string,state:n().object})}},27310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});function u(e){return e=e.height,s().createElement("div",{style:{background:"#fff",height:e,display:"flex",alignItems:"center",justifyContent:"center"}},"Template")}var t=n(85354),r=n.n(t),t=n(67294),s=n.n(t),t=n(45697),t=n.n(t),i=n(92360),n=function(a){function e(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=a.call.apply(a,[this].concat(t))||this).clientHeight=160,o.notShowList=[],o._handleOnCheckBoxChange=function(e,t){var n,a=o.props,r=a.onChange,a=a.showList;e?(n=a.slice()).push(t):n=a.filter(function(e){return e!==t}),r&&r(n)},o._renderEditableFrame=function(t,e){var n=o.props,a=n.editable,n=n.colNumber,n=void 0===n?1:n;return s().createElement("div",{id:t.key,key:t.key,style:{width:"calc("+100/n+"% - 12px)"},className:a?"child_editable":""},t,a&&s().createElement(i.Checkbox,{checked:e,className:"checkbox_style",onChange:function(e){return o._handleOnCheckBoxChange(e,t.key)}}))},o}r()(e,a);var t=e.prototype;return t.componentDidMount=function(){var e=this.props.children,e=e instanceof Array?e[0]:e,e=document.getElementById(e.key);e&&(this.childHeight=e.clientHeight)},t.render=function(){var o=this,e=this.props,t=e.className,n=void 0===t?"":t,a=e.editable,i=void 0!==a&&a,t=e.orientation,a=void 0===t?"horiziontal":t,t=e.children,e=e.showList,l=void 0===e?[]:e,c=t instanceof Array?t:[t];return this.notShowList=[],s().createElement("div",{className:"yt_drag_layout_wrapper yt_drag_layout_"+a+" "+n},c.reduce(function(e,t,n){var a=l.indexOf(t.key);if(-1<a?e[a]=o._renderEditableFrame(t,!0):o.notShowList.push(t.key),n!==c.length-1)return e;var r=e.filter(function(e){return e});return i&&0<o.notShowList.length&&o.notShowList.forEach(function(e){r.push(o._renderEditableFrame(s().createElement(u,{key:e,height:o.childHeight}),!1))}),r},[]))},e}(s().PureComponent);const a=n;n.propTypes={orientation:t().oneOf(["horizontal","vertical"]),colNumber:t().number,className:t().oneOfType([t().string,t().object]),editable:t().bool,showList:t().arrayOf(t().string),onChange:t().func}},60222:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});function o(e){var t=e.value,n=e.getValue,a=(t=f().useState(t))[0],r=t[1];return f().createElement("div",{className:"yt_modal_dashboard_edit_wrapper"},f().createElement("div",{className:"content_item"},f().createElement("span",null,"同比类型"),f().createElement("span",null,f().createElement(i(),{className:"content_item_select",value:(c.find(function(e){return e.value===a})||{}).label,onChange:function(e){var t;r(t=e),setTimeout(function(){return n&&n(t)},0)},inputIcon:f().createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},c.map(function(e){return f().createElement(i().Option,{value:e.value,key:e.value},e.label)})))))}var a=n(67154),p=n.n(a),t=n(37316),d=n.n(t),a=n(67294),f=n.n(a),t=n(45697),a=n.n(t),y=n(25713),h=n(43036),t=n(2258),i=n.n(t),l=n(57522),c=[{value:"WEEK",label:"周"},{value:"MONTH",label:"月"},{value:"QUATER",label:"季"},{value:"YEAR",label:"年"}],t=function(r){return new Promise(function(e,t){var n=r.value,a=p()({},r,{titleText:f().createElement("div",{className:"indicator_card_comfirm"},f().createElement("span",null,"同比设置"),f().createElement("span",{onClick:function(){return window.open("https://www.yuque.com/docs/share/5615d490-0056-4bb9-b208-bf747c9048c0")}},"查看更多")),content:f().createElement(o,p()({},r,{getValue:function(e){n=e}}))});a.onOk=function(){return e(n)},a.onCancel=t,(0,l.Z)(a)})};const g=t;t.propTypes={getValue:a().func,value:a().string};function v(e){return!["",null,void 0].includes(e)}function E(e){return e&&(5<e.length?String(e).substring(0,5)+"...":e)}function _(e,t,n){var r,o;"image"===e?(r=t,o=(0,u.UO)(n[0]&&n[0].name),new Promise(function(e){var t=r.offsetWidth,n=r.cloneNode(!0),a=document.createElement("canvas");a.width=12*t,a.height=1920,a.style.width=t+"px",a.style.height="160px",a.className="yt_trend_list_canvas",a.getContext("2d").scale(12,12),n.style.width=t+"px",n.style.height="160px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=-1,n.style.opacity=0,document.body.appendChild(n),s()(n,{allowTaint:!0,taintTest:!1,canvas:a,useCORS:!0,width:t,height:160,onrendered:function(e){document.body.appendChild(e);e=e.toDataURL("png");(0,m.saveAs)(e,o,"image/png"),setTimeout(function(){document.body.removeChild(n),document.body.removeChild(document.querySelector(".yt_trend_list_canvas"))},0)}})})):"data"===e&&(e=[n.reduce(function(e,t){return[].concat(e,[[t.name,t.count]])},[])],(0,u.aT)(e,n[0]&&n[0].name))}var C=n(8201),b=n(39432),u=n(94644),t=n(29531),s=n.n(t),m=n(93162),T=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],S=[{title:"设置同比",type:"compare"}];n=function(e){function a(e){return n&&n[e]?n[e]:{}}function t(e){if(a(e).name){if(v(a(e).count)){var t=a(e).count;switch(a(e).format){case"myriad":t=(0,b.hE)(t);break;case"percent":n=t,t=v(null)?null:0===n?"0.00%":Math.abs(100*n).toFixed(2)+"%"}return t}return"--"}var n;return""}var n=e.data,r=e.tip,o=e.compare,i=e.onSetting,l=e.loading,c=e.paragraph,u=d()(e,["data","tip","compare","onSetting","loading","paragraph"]),e=f().useState(),s=e[0],m=e[1],e=function(e){return"myriad"!==a(e).format?t(e):a(e).count.toLocaleString()};return f().createElement("div",p()({className:"indicator_card"},u,{ref:function(e){return m(e)}}),f().createElement(C.Z,{data:n,className:"section_com",loading:l,paragraph:c},f().createElement("div",{className:"title_wrap"},f().createElement("span",{className:"chart_title"},f().createElement("span",{className:"chart_title_name"},a(0).name,r&&f().createElement(h.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:r},f().createElement("i",{className:"icon-cem_file1","data-html2canvas-ignore":!0})))),f().createElement("span",{className:"chart_title_buttons","data-html2canvas-ignore":!0},f().createElement(y.Z,{onClick:function(e){"compare"===e?g({value:o}).then(function(e){i({compareValue:e})}):_(e,s,n)},options:T.concat(i?S:[])}))),f().createElement("div",{className:"section_mid"},f().createElement("p",null,f().createElement(h.Z,{placement:"top",overlay:e(0)},f().createElement("section",null,t(0)))),a(1).name||a(2).name?f().createElement("p",null,f().createElement("span",null,f().createElement("span",null,f().createElement(h.Z,{placement:"top",overlay:a(1).name},f().createElement("section",{className:"name"},a(1).name))),f().createElement("span",null,f().createElement(h.Z,{placement:"top",overlay:e(1)},f().createElement("section",null,t(1))),"boolean"==typeof a(1).rise&&f().createElement("i",{className:a(1).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"}))),f().createElement("span",null,f().createElement("span",null,f().createElement(h.Z,{placement:"top",overlay:a(2).name},f().createElement("section",{className:"name"},a(2).name))),f().createElement("span",null,f().createElement(h.Z,{placement:"top",overlay:e(2)},f().createElement("section",null,t(2))),"boolean"==typeof a(2).rise&&f().createElement("i",{className:a(2).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"})))):null),(a(3).name||a(4).name)&&f().createElement("div",{className:"section_bottom"},f().createElement("span",null,f().createElement("span",null,f().createElement(h.Z,{placement:"top",overlay:a(3).name},f().createElement("section",{className:"name"},E(a(3).name)))),f().createElement("span",null,f().createElement(h.Z,{placement:"top",overlay:e(3)},f().createElement("section",null,t(3))))),a(4).name?f().createElement("span",null,f().createElement("span",null,f().createElement(h.Z,{placement:"top",overlay:a(4).name},f().createElement("section",{className:"name"},E(a(4).name)))),f().createElement("span",null,f().createElement(h.Z,{placement:"top",overlay:e(4)},f().createElement("section",null,t(4))))):null)))};const r=n;n.propTypes={data:a().arrayOf(a().shape({name:a().string,count:a().oneOfType([a().string,a().number]),rise:a().bool,format:a().oneOfType(["myriad","percent",void 0])})),tip:a().oneOfType([a().string,a().node]),compare:a().string,onSetting:a().func,loading:a().bool,paragraph:a().arrayOf(a().string)}}}]);