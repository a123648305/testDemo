(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1574],{76180:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});const n=a.p+"html-459a43"},78436:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var e=n(85354),i=n.n(e),e=n(67294),o=n.n(e),r=n(94644),a=function(t){function e(){var o=t.call(this)||this;return o.isEmpty=!0,o.group=function(t){o.myChart.group=t,o.echarts.connect(t)},o.refreshChart=function(t){o.setState(t)},o.setWidth=function(t){o.refs.chart.style.width=t,o.init()},o.loading=function(){o.myChart.clear(),o.myChart.showLoading({text:"拼命加载中",color:"#20a0ff",maskColor:"rgba(255, 255, 255, 0.9)",zlevel:0})},o.setOption=function(t){if(t.textStyle={fontFamily:"'PingFang SC','Microsoft Yahei', 'Helvetica Neue', Helvetica, Tahoma, Arial, 'Hiragino Sans GB', 'WenQuanYi Micro Hei', sans-serif"},t.legend&&(t.legend.data=t.legend.data.map(function(t){return{name:t,icon:"circle"}}),t.legend.itemWidth=10,t.legend.itemHeight=10),t.tooltip&&!t.tooltip.extraCssText?(t.tooltip.backgroundColor="rgba(255,255,255,0.9)",t.tooltip.textStyle={color:"#262626"},t.tooltip.extraCssText="box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);"):t.tooltip&&(t.tooltip=t.tooltip),t.series.forEach(function(t){"line"===t.type&&(t.showAllSymbol=!0,t.symbol="circle",t.symbolSize=2,t.itemStyle={normal:{borderColor:"rgba(255,255,255,0)",borderWidth:5}})}),t.hoverLayerThreshold=500,t.progressiveThreshold=500,t.animationThreshold=500,o.myChart){var e;o.myChart.clear(),o.myChart.hideLoading();for(var a=arguments.length,n=new Array(1<a?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];(e=o.myChart).setOption.apply(e,[t].concat(n)),o.isEmpty=!1}},o.setEmptyOption=function(t){var e=o.myChart.getHeight(),a=o.myChart.getWidth(),a=Math.min(e/2,a/2,20),a={type:"pie",radius:[0,0],center:["50%","50%"],silent:!0,data:[{value:0,name:"",label:{normal:{show:!0,position:"center",backgroundColor:{image:n(76180)},padding:a,formatter:function(){return""}}}},{value:0,name:"",label:{normal:{show:!0,position:"center",formatter:function(){return"{a|\n}{b|"+t+"}"},rich:{a:{height:a+60},b:{fontSize:20,color:"#999"}}}}}]};o.myChart&&(o.myChart.clear(),o.myChart.hideLoading(),o.myChart.setOption({series:a,animation:!1},!0),o.isEmpty=!0)},o.init=function(){o.echarts.getInstanceByDom(o.refs.chart)&&o.echarts.dispose(o.refs.chart);var t=o.echarts.init(o.refs.chart);o.myChart=t,o.props.myChartClick&&t.on("click",function(t){o.isEmpty||o.props.myChartClick(t)}),o.props.dataZoomChange&&t.on("dataZoom",function(t){o.isEmpty||o.props.dataZoomChange(t)})},o.downloadExcel=function(t,e){(0,r.aT)([[e].concat(t)],"")},o.echarts=n(70596),o}i()(e,t);var a=e.prototype;return a.componentDidMount=function(){this.init()},a.componentWillUnmount=function(){this.myChart.dispose()},a.render=function(){var t=this.props.minHeight,t=Object.assign({},t?{minHeight:t}:{});return o().createElement("div",{ref:"chart",className:"widget-chart",style:t})},e}(e.Component)},81574:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});var e=a(67154),i=a.n(e),e=a(85354),o=a.n(e),e=a(67294),r=a.n(e),s=a(78436),c=a(36144),l=a(12518),n=function(n){function t(){for(var i,t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return(i=n.call.apply(n,[this].concat(e))||this).state={count:0,data:"",type:"cTime"},i.getData=function(){var t=i.state,e=t.id,a=t.name,n=t.projectId,t=t.type;c.h.post("/projects/connection/count",{id:e,name:a,projectId:n,countDateType:t}).then(function(t){i.setState({count:t.data.result.total||0,data:t.data.result.list||"没有数据可用"},function(){i.buildChart()})})},i.changeGroupTime=function(t){i.setState({type:t},function(){i.getData()})},i.buildChart=function(){var t=i.state.data;if("string"==typeof t||0==t.length)return i.refs.chart.setEmptyOption(t="没有可用数据"),!1;if(!t||!t.length)return null;var e=[],a=[];t.map(function(t){e.push(t.date),a.push(t.count)});var n=30/t.length,n={tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{width:0}}},dataZoom:30<t.length?{bottom:0,start:100*(1-n),realtime:!0}:{show:!1},grid:{left:"3%",right:"4%",top:30,bottom:40,containLabel:!0},color:"#5697F6",xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:((n={type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}).splitLine={show:!0,lineStyle:{type:"dashed",color:["#E5E5E5"]}},n),series:[{data:a,type:"line",areaStyle:{color:"#5697F6",opacity:1}}]};i.refs.chart.setOption(n)},i}o()(t,n);var e=t.prototype;return e.componentWillMount=function(){var t=this,e=JSON.parse(decodeURIComponent(window.location.search.split("?")[1]));this.setState(i()({},e),function(){t.getData()})},e.componentDidMount=function(){this.width=this.refs.widget.offsetWidth,this.height=this.refs.widget.offsetHeight},e.render=function(){var t=this.state,e=t.name,a=t.syncKey,n=t.count,i=(t.data,t.type),t=t.sourceId;return r().createElement("div",{ref:"widget",className:"connection-detailData-wrapper",style:{height:"100%",width:"100%"}},r().createElement(l.Z,{title:"链接："+e+" "+("11"===t?"":"（"+a+"）")}),r().createElement("div",{className:"widget-top"},r().createElement("div",null,r().createElement("span",null,"数据总量："),r().createElement("span",null,n))),r().createElement("div",{className:"widget-tool"},r().createElement("div",{className:"widget-btn"},r().createElement("span",{className:"createdAt"==i?"active":"",onClick:this.changeGroupTime.bind(this,"createdAt")},"采集时间"),r().createElement("span",{className:"cTime"==i?"active":"",onClick:this.changeGroupTime.bind(this,"cTime")},"消息时间"))),r().createElement("div",{className:"widget-body"},r().createElement(s.Z,{ref:"chart",className:"widget-chart",myChartClick:this.myChartClick,dataZoomChange:this.dataZoomChange,minHeight:400})))},t}(e.Component)}}]);