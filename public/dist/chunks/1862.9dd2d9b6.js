(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1862],{10723:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var a=n(37316),r=n.n(a),c=n(67154),i=n.n(c),t=n(85354),o=n.n(t),a=n(67294),P=n.n(a),S=n(61918),I=n(37841),L=n(43036),j=n(61409),k=n(92360),z=n(35535),D=n(1145),l={"全部":"ALL","云听":"YT","当前项目":"CURRENT"},V=Object.keys(l).map(function(e){return{key:e,value:l[e]}});const s=function(e){var t=e.drawerVisible,n=e.spuId,a=e.loading,r=e.name,c=e.onFilterChange,i=e.type,o=e.entryList,l=e.total,s=e.pageIndex,p=e.pageSize,u=e.onDelete,d=e.onPageChange,h=e.onPageSizeChange,g=P().useState("ALL"),f=g[0],m=g[1],y=P().useState(void 0),v=y[0],C=y[1],e=P().useState(!1),g=e[0],b=e[1],y=P().useState(""),e=y[0],_=y[1],y=P().useState(""),E=y[0],w=y[1];return P().useEffect(function(){v&&t&&v.wrappedInstance.show({spuId:n,type:i})},[v,t]),P().createElement("div",{className:"project_base_spu"},P().createElement("div",{className:"yt_product_setting_subscribe_base_list_wrapper"},P().createElement("div",{className:"top_zone"},P().createElement("div",{className:"left_zone"},P().createElement(S.Z,{onSearch:function(e){return c({name:e})},onClear:function(e){return c({name:e})},placeholder:"搜索词条",defValue:r,style:{width:168}}),P().createElement(I.Z,{options:V,activeKey:f,onTabClick:function(e){m(e),c({tabType:e})}})),P().createElement("div",{className:"right_zone"},P().createElement(L.Z,{overlay:P().createElement("div",null,"关于词条库，",P().createElement(j.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/b6548b05-b10c-4c4a-a55c-be008b5672fa?# 《行业词条结构功能说明》",target:"_blank"},"了解更多")),placement:"top"},P().createElement("i",{className:"icon-cem_file1",style:{marginRight:10,fontSize:14,color:"#979797"}})),P().createElement(k.Button,{type:"primary",onClick:function(){v.wrappedInstance.show({spuId:n,type:i})}},"申请"+i+"词条"))),i&&P().createElement(D.Z,{loading:a,data:o,total:l,pageIndex:s,pageSize:p,onPageChange:d,onPageSizeChange:h,onEdit:function(e,t){v&&v.wrappedInstance.show({id:e.id,copy:"copy"===t,type:i})},onDelete:function(){u(E),b(!1)},onClickDelete:function(e){b(!0),_(e.name),w(e.id)},entryVisible:g,entryName:e,onCancel:function(){b(!1),_(""),w("")},type:i}),P().createElement(z.Z,{ref:C,type:i})))};var p=n(35239),c=n(55609),t=n(64396),u=n(55815),d=n(13713),h=t.Z.product.setting.public,g=t.Z.product.setting.base.spu,a=function(a){function e(e){var t=a.call(this,e)||this;t._handleOnFilterChange=function(e){void 0!==e.name?t.props.fetchList({name:e.name,pageIndex:1}):e.tabType&&t.props.fetchList({projectIds:"ALL"===e.tabType?["yt",p.t.get(p.V.curProject).id]:"YT"===e.tabType?["yt"]:[p.t.get(p.V.curProject).id],name:t.props.name,pageIndex:1})},t._handleOnPageChange=function(e){t.props.fetchList({pageIndex:e,name:t.props.name})},t._handleOnPageSizeChange=function(e){t.props.fetchList({pageIndex:1,pageSize:e,name:t.props.name})},t._handleOnDelete=function(e){t.props.fetchDelete({ids:[e]})};var n=e.location;return t.state={},t.event={onFilterChange:t._handleOnFilterChange,onPageChange:t._handleOnPageChange,onPageSizeChange:t._handleOnPageSizeChange,onDelete:t._handleOnDelete},e.save({drawerVisible:n.query&&n.query.drawerVisible}),e.titleChange([{title:"知识库",state:{type:""}}]),t}o()(e,a);var t=e.prototype;return t.componentDidMount=function(){this.props.location;this.props.fetchList({projectId:p.t.get(p.V.curProject).id,type:"SPU",projectIds:["yt",p.t.get(p.V.curProject).id]})},t.componentWillUnmount=function(){this.props.clean()},t.render=function(){return P().createElement("div",{style:{height:"100%"}},P().createElement(u.Z,{title:(0,d.u)({title:"知识库"})}),P().createElement(s,i()({},this.props,this.state,this.event)))},e}(a.PureComponent);const f=(0,c.connect)(function(e){var t=e.loading,e=r()(e,["loading"]);return i()({},e[g],{loading:t.effects[g+"/fetchList"]||!1})},function(t){return{save:function(e){return t({type:g+"/save",payload:e})},clean:function(e){return t({type:g+"/clean",payload:e})},fetchList:function(e){return t({type:g+"/fetchList",payload:e})},fetchDelete:function(e){return t({type:g+"/fetchDelete",payload:e})},titleChange:function(e){return t({type:h+"/titleChange",payload:e})}}})(a)},13713:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var a=n(35239),r=function(e){var t=e.title,e=e.url;return[{title:"所有项目",url:"/account/project"},{title:a.t.get(a.V.backProjectConfig).name,url:"/account/project/preview"},{title:t,url:e}]}}}]);