(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6883],{66883:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});function s(e){if("string"==typeof e)switch(!0){case"BBS"===e:return"论坛";case"QUE_ANS"===e:return"问答";case"SOCIAL"===e:return"社交媒体";case"SELF"===e:return"自媒体";case"NEWS"===e:return"新闻媒体";case"LEGAL"===e:return"法律维权"}}var a=n(37316),o=n.n(a),r=n(67154),c=n.n(r),t=n(85354),i=n.n(t),G=n(67294),z=n.n(G),a=n(55609),J=n(19586),p=n(50976),r=n(45697),t=n.n(r),Y=n(43036),u=n(8201),f=n(39432),m=n(70715),h=n(98191),r=function(e){var r=e.data,n=e.title,t=e.inteCount,a=e.titleOverlay,i=e.onMoreClick,o=e.loading,e=z().useState(void 0),l=e[0],c=e[1];return z().useEffect(function(){var e,t;l&&((0,u.P)(r)?(e=r,t=n,l.getWidth(),e={title:{text:t},tooltip:{triger:"item",formatter:function(e){return e.marker+" "+e.name+"："+e.value+"（"+e.percent+"%）"}},series:[{type:"pie",radius:74,hoverAnimation:!1,center:["75%","55%"],data:e.map(function(e){var t=e.type,e=e.count;return{name:0===e?null:s(t),value:0===e?null:e}}),label:{position:"outside",color:"#000",formatter:function(e){var t=e.data,e=t.name,t=t.value;return[""+e,"{value|"+f.ZP.getApproximateNum(t)+"}"].join("\n")},rich:{value:{fontSize:12,lineHeight:18,color:"#8c8c8c",align:"left"}}},labelLine:{smooth:!0,length:5,lineStyle:{color:"#bfbfbf"}}}],graphic:{type:"text",left:"15%",top:114,silent:!0,style:{text:""+f.ZP.getApproximateNum(e.reduce(function(e,t){return e+t.count},0)),fill:"#000",font:"48px "+m.I8}}},l.clear(),l.setOption(e)):c(void 0))},[r,l]),z().createElement(u.Z,{className:"interation-chart-wrapper",data:r,renderTitle:z().createElement(h.Z,{title:n,data:r,titleOverlay:a,onMoreClick:function(e){return t=l,n=r,a=i,o=void 0,"image"===(e=e)?o=t:"data"===e&&((n=n.map(function(e){var t=e.type,e=e.count;return[s(t),e]})).splice(0,0,["互动渠道","互动量"]),o=[n]),void a({type:e,obj:o,name:t.getOption().title[0].text});var t,n,a,o}})},l&&z().createElement(Y.Z,{placement:"top",overlay:r&&t},z().createElement("span",{style:{position:"absolute",width:(0,f.jD)(t)+"px",height:"67px",top:"36%",left:"17%",transition:"all 0.3s",zIndex:1}})),z().createElement(p.Z,{theme:"yunting_multi_color",showloading:o,style:{width:"100%",height:"100%"},option:{},onChartReady:function(e){return c(e)}}))};r.propTypes={title:t().string,data:t().arrayOf(t().shape({type:t().string,count:t().number})),loading:t().bool.isRequired};const q=r;var g=n(10329),r=function(e){var t=e.data,n=e.count,a=e.title,o=e.titleOverlay,r=e.onMoreClick,i=e.onClick,l=e.loading,c=e.bottomContent,s=e.bottomOverlay,e=z().useState(void 0),m=e[0],d=e[1];return z().useEffect(function(){var e;m&&((0,u.P)(t)?(e=(0,g.Rl)(t,a,m.getWidth(),c),m.clear(),m.setOption(e)):d(void 0))},[t,m]),z().createElement(u.Z,{className:"volume-chart-wrapper",data:t,renderTitle:z().createElement(h.Z,{title:a,data:t,titleOverlay:o,onMoreClick:function(e){return(0,g.kQ)(m,e,t,r)}})},m&&z().createElement(Y.Z,{placement:"top",overlay:n},z().createElement("span",{style:{position:"absolute",width:(0,f.jD)(t&&t.totalCount)+"px",height:"67px",top:"36%",left:"13%",transition:"all 0.3s",zIndex:1}})),m&&z().createElement("span",{style:{position:"absolute",bottom:14,left:"30.5%",zIndex:1}},z().createElement(Y.Z,{overlay:s,placement:"top",overlayClassName:"restricted-pop"},z().createElement("i",{className:"icon-cem_file1"}))),z().createElement(p.Z,{theme:"yunting_multi_color",showloading:l,style:{width:"100%",height:"100%"},option:{},onChartReady:function(e){return d(e)},onEvents:{click:i}}))};r.propTypes={title:t().string,data:t().object,loading:t().bool.isRequired};const X=r;var K=n(7802),$=n(53754),ee=n(40086),d=n(53946),y=n(60496),r=function(e){var t=e.data,n=e.loading,a=e.chartType,o=e.title,r=(e.onMoreClick,e.onClick),i=z().useState(void 0),l=i[0],c=i[1],e=z().useState(a),i=e[0],s=e[1];return z().useEffect(function(){var e;l&&((0,u.P)(t)?(e=(0,d.Rl)(t,o,a),l.clear(),l.setOption(e)):c(void 0))},[t,i,l]),z().createElement(u.Z,{data:t,className:"yt_pie_bar_chart_wrapper",loading:n,renderTitle:z().createElement(h.Z,{title:o,data:t,onMoreClick:function(e){return(0,d.kQ)(l,e,t,o)}},z().createElement(y.Z,{options:d.nF,activeObj:i,objName:"dataType",onChange:function(e){e=e.dataType;return s(e)}}))},z().createElement(p.Z,{theme:"yunting_pos_neu_neg",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return c(e)},onEvents:{click:r}}))};const te=r;r.propTypes={data:t().oneOfType([t().string,t().object]),timeType:t().object,title:t().string,onMoreClick:t().func};var t=n(97189),ne=n.n(t);const l=function(e){var t,n,a=e.isInitial,o=e.filterParams,r=e.curDimensionName,i=e.curDimensionValName,l=e.onMoreClick,c=e.dateRange,s=e.onVolumeClick,m=e.count,d=e.volLoading,p=e.volData,u=e.volRate,f=e.menuName,h=e.inteNumCount,g=e.inteLoading,y=e.inteData,v=e.totalTrendLoading,T=e.comparisionOptions,C=e.comparisionValue,E=e.channelTypeOptions,D=e.channelTypeValue,S=e.totalTrendDateDimension,N=e.totalTrendChartType,O=e.totalTrendData,_=e.totalTrendDiffData,k=e.onVolTrendClick,b=e.volTrendLoading,w=e.volTrendDateDimension,V=e.volTrendChartType,I=e.volTrendData,L=e.volTrendDiffData,M=e.emoTrendLoading,P=e.emoTrendEmoType,R=e.emoTrendValType,A=e.emoTrendDateDimension,Z=e.emoTrendChartType,F=e.emoTrendChartData,x=e.emoTrendChartDiffData,j=e.onFilterChange,U=e.fetchTotalTrendData,W=e.fetchVolTrendChartData,Q=e.fetchEmoTrendChartData,B=e.saveState,H=e.emotionAnalyzeData,e=e.getFilterRef;return z().createElement("div",{className:"yt_brand_analyzing_channel_wrapper"},z().createElement(J.Z,{ref:e,values:o,model:"BRAND_CHANNEL_ANALYSIS",showList:["condition","time","save"],filterCondition:{filter:["TAG","MESSAGE_RELATION","DIMENSION"],dimension:ne().getQuery("id")},onFilterReady:j,onChange:j}),z().createElement("div",{className:"ao_content"},z().createElement("div",{className:"ao_content_top"},z().createElement(X,{data:p,count:m,title:i+"声量",titleOverlay:"声量：声量是针对外部开放平台用户声音的一种统计描述。具体而言，一个博文、一篇媒体文章（标题+正文）、一个帖子、一个问题、一个回答、一个投诉等均记为1个声量。",loading:d,onMoreClick:l,onClick:s,bottomContent:u,bottomOverlay:"关注度："+i+"的声量占全部"+f+"声量的比重"}),z().createElement("div",{className:"v-divider"}),z().createElement(q,{data:y,inteCount:h,title:i+"互动量",titleOverlay:"互动量：微博和媒体文章在传播的过程中其他用户的“浏览”、“转发”、“点赞”和“评论”等行为即“互动”。互动量是基于各平台对这些行为的给出的具体数值累加而来。",loading:g,onMoreClick:l})),z().createElement("div",{className:"ao_content_chart"},z().createElement(K.Z,{title:i+"渠道总走势图",tooltipTitle:"声量",isInitial:a,loading:v,data:O,diffData:_,getTotalChartAppendix:!0,dateRange:c,dateDimension:S,onDateDimensionChange:function(e){return U({totalTrendDateDimension:e})},chartType:N,chartTypeOptions:["stack","bar","area"],onChartTypeChange:function(e){return B({totalTrendChartType:e})},appendix:(E=E,D=D,T=T,C=C,n=U,z().createElement(G.Fragment,null,z().createElement($.Z,{type:1,title:"渠道",options:E,value:D,onChange:function(e){return n({channelTypeValue:e})}}),z().createElement($.Z,{type:1,title:"对比",options:T,value:C,maxLength:2,onChange:function(e){return n({comparisionValue:e})}}))),dimensionName:r,onClick:k})),z().createElement("div",{className:"ao_content_chart"},z().createElement(K.Z,{title:i+"渠道声量走势分析",tooltipTitle:"声量",isInitial:a,loading:b,data:I,diffData:L,dateRange:c,dateDimension:w,onDateDimensionChange:function(e){return W({volTrendDateDimension:e})},chartType:V,chartTypeOptions:["area","stack"],onChartTypeChange:function(e){return B({volTrendChartType:e})},dimensionName:"渠道类型",onClick:s})),z().createElement("div",{className:"ao_content_chart",style:{height:284}},z().createElement(te,{data:H,title:i+"各渠道情感分析",chartType:"NUMBER",onClick:s})),z().createElement("div",{className:"ao_content_chart"},z().createElement(K.Z,{isPercentage:"PERCENTAGE"===R.id,title:i+"各渠道情感走势",tooltipTitle:P.name+"声量"+("PERCENTAGE"===R.id?"占比":""),isInitial:a,loading:M,data:F,diffData:x,dateRange:c,dateDimension:A,onDateDimensionChange:function(e){return Q({emoTrendDateDimension:e})},chartType:Z,chartTypeOptions:["area","stack"],onChartTypeChange:function(e){return B({emoTrendChartType:e})},appendix:(R=R,P=P,t=Q,z().createElement(G.Fragment,null,z().createElement("div",{className:"chart-select-wrapper"},z().createElement(ee.Z,{value:R,placeholder:R.name,list:[{id:"PERCENTAGE",name:"比例"},{id:"COUNT",name:"数量"}],onChange:function(e){return t({emoTrendValType:e})}}),z().createElement(Y.Z,{placement:"top",overlay:"比例=具体渠道中某种情感的消息量÷该渠道的所有情感的消息量",overlayClassName:"title_desc_popup"},z().createElement("i",{className:"icon-cem_file1"}))),z().createElement(ee.Z,{value:P,placeholder:P.name,list:[{id:"1",name:"正面"},{id:"0",name:"中性"},{id:"-1",name:"负面"}],onChange:function(e){return t({emoTrendEmoType:e})}}))),dimensionName:"渠道类型"}))))};var v=n(35239),T=n(94644),C=n(87219),n=n(64396),E=n.Z.brand.brandAnalysis,D=n.Z.brand.brandAnalysisSub.channel,n=function(t){function e(e){var p=t.call(this,e)||this;return p._handleOnMoreClick=function(e){"image"===e.type?(0,T._v)(e.obj,e.name):"data"===e.type&&(0,T.aT)(e.obj,e.name)},p.getVolParams=function(e,r,t){var n=p.props,a=n.filterParams,i=n.volTrendDateDimension,l=n.volTrendData,n=JSON.parse(JSON.stringify(a));return n.projectId=p.props.projectId,n.filterModel.messageType||(n.filterModel.messageType=["QUE_ANS_QUESTION","QUE_ANS_ANSWER","WEIBO","WEIBO_REPORT","COMMON_POST","NEWS_TEXT"]),e&&(n.filterModel.messageCategory=["社交媒体"===e?"SOCIAL":"问答"===e?"QUE_ANS":"论坛"===e?"BBS":"新闻媒体"===e?"NEWS":"自媒体"===e?"SELF":"LEGAL"]),r&&(n.dateFilter=c()({},(0,C.ZP)(a.dateFilter,function(e){var t=i,n=l[0].slice(1),a=(0,f.LV)(r,t),o=a.from,a=a.to;"DAY"!==t&&"HOUR"!==t&&(String(r)===String(n[0])?o=e.from:String(r)===String(n[n.length-1])&&(a=e.to)),e.from=o,e.to=a}))),t&&(n.filterModel.escore=["正面"===t?"1":"负面"===t?"-1":"0"]),n},p._handleOnVolumeChartClick=function(e){var t,n,a,o;e&&(t=e.componentType,n=e.componentSubType,a=e.seriesName,o=e.name,e={},"series"===t&&(e="pie"===n?"互动渠道"===a?p.getVolParams(o,null,null):p.getVolParams(null,null,o):"line"===n?p.getVolParams(a,o,null):p.getVolParams(o,null,a)),window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(e))))},p.getVolTrendParams=function(r,e,t){var n=p.props,a=n.filterParams,i=n.totalTrendDateDimension,l=n.totalTrendData,n=JSON.parse(JSON.stringify(a));return n.projectId=p.props.projectId,n.filterModel.messageType||(n.filterModel.messageType=["QUE_ANS_QUESTION","QUE_ANS_ANSWER","WEIBO","WEIBO_REPORT","COMMON_POST","NEWS_TEXT"]),r&&(n.dateFilter=c()({},(0,C.ZP)(a.dateFilter,function(e){var t=i,n=l[0].slice(1),a=(0,f.LV)(r,t),o=a.from,a=a.to;"DAY"!==t&&"HOUR"!==t&&(String(r)===String(n[0])?o=e.from:String(r)===String(n[n.length-1])&&(a=e.to)),e.from=o,e.to=a}))),e&&(n.filterModel.messageCategory=e),t&&(n.filterModel.dimension[0].values=[t]),n},p._handleOnVolTrendClick=function(e){var t=e.componentType,n=e.name,a=e.seriesName;"series"===t&&(t={},t=a===p.props.curDimensionValName?p.getVolTrendParams(n,p.props.channelTypeValue,null):p.getVolTrendParams(n,p.props.channelTypeValue,p.props.comparisionOptions.find(function(e){return e.name===a}).id),window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(t))))},p.handleFilterChange=function(e){var t=e.dateFilter.numOfDays;p.props.cleanChannelState(),p.getComparisionOptions(),p.props.fetchChannelDatas({menuDimension:p.state.dimensionId,filterParams:e,projectId:v.t.get(v.V.curProject).id,dateRange:t+Math.random()})},p.getComparisionOptions=function(){var e=p.props.saveState,t=[],n=[],a=[],o="",r="",i=p.filter.refs.FilterCondition.getValue(),l=p.filter.refs.FilterCondition.getFilterList(),c=i.filter(function(e){return"dimension"===e.special})[0].values[0];if(l&&0<l.length){for(var s=0;s<l.length;s++){var m=l[s],d=m.values,m=m.name;"dimension"===l[s].special&&(t=d.filter(function(e){return String(e.id)!==String(c)}),o=m,r=d.filter(function(e){return String(e.id)===String(c)})[0].name),"messageCategory"===l[s].special&&(n=d.map(function(e){return{id:e.id,name:e.name}}),a=d.map(function(e){return e.id}))}e({comparisionOptions:t,curDimensionName:o,curDimensionValName:r,channelTypeOptions:n,channelTypeValue:a})}},p.state={dimensionId:ne().getQuery("id")},p.event={onMoreClick:p._handleOnMoreClick,onFilterChange:p.handleFilterChange,onVolumeClick:p._handleOnVolumeChartClick,onVolTrendClick:p._handleOnVolTrendClick,getFilterRef:function(e){return p.filter=e}},p}i()(e,t);var n=e.prototype;return n.componentDidMount=function(){},n.componentWillUnmount=function(){var e=this.props.cleanChannelState;e&&e()},n.render=function(){return z().createElement(l,c()({},this.props,this.event))},e}(z().PureComponent);const S=(0,a.connect)(function(e){var t=e.loading,e=o()(e,["loading"]);return c()({},e[E][D],{volLoading:t.effects[E+"/fetchVolumeTypeData"]||!1,inteLoading:t.effects[E+"/fetchInterCategoryData"]||!1,totalTrendLoading:t.effects[E+"/fetchTotalTrendData"],volTrendLoading:t.effects[E+"/fetchVolTrendChartData"],emoTrendLoading:t.effects[E+"/fetchEmoTrendChartData"]})},function(t){return{saveState:function(e){return t({type:E+"/saveChannelState",payload:e})},cleanChannelState:function(e){return t({type:E+"/cleanChannelState",payload:e})},fetchChannelDatas:function(e){return t({type:E+"/fetchChannelDatas",payload:e})},fetchVolumeTypeData:function(e){return t({type:E+"/fetchVolumeTypeData",payload:e})},fetchInterCountData:function(e){return t({type:E+"/fetchInterCountData",payload:e})},fetchInterCategoryData:function(e){return t({type:E+"/fetchInterCategoryData",payload:e})},fetchTotalTrendData:function(e){return t({type:E+"/fetchTotalTrendData",payload:e})},fetchVolTrendChartData:function(e){return t({type:E+"/fetchVolTrendChartData",payload:e})},fetchEmoTrendChartData:function(e){return t({type:E+"/fetchEmoTrendChartData",payload:e})}}})(n)},40086:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(67154),s=n.n(a),t=n(85354),o=n.n(t),a=n(67294),m=n.n(a),t=n(45697),t=n.n(t),r=function(n){function e(e){var t=n.call(this,e)||this;return t.stop=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},t._setEvent=function(e){return 0===e?{onMouseEnter:function(){t.setState({firstLiHover:!0})},onMouseLeave:function(){t.setState({firstLiHover:!1})}}:{}},t.setShowSelFalse=function(){t.setState({show:!1})},t.state={show:!1,firstSelected:!1},t}o()(e,n);var t=e.prototype;return t.changeShow=function(e){var t=this;this.state.show&&this.stop(e),setTimeout(function(){t.setState({show:!t.state.show})},0)},t.componentDidMount=function(){window.addEventListener("click",this.setShowSelFalse)},t.componentWillUnmount=function(){window.removeEventListener("click",this.setShowSelFalse)},t.render=function(){var n=this,e=this.state.show,t=this.props,a=t.placeholder,o=t.list,r=t.value,i=t.onChange,l=t.style,c=t.partingLine,t=o[0]&&o[0].id===r.id;return m().createElement("div",{className:"chart-select",style:l||{}},m().createElement("div",{className:"select "+(c?"line":""),onClick:function(e){return n.changeShow(e)}},m().createElement("div",{className:"infor "+(e?"sel":"")},m().createElement("span",{className:"placeholder"},a),m().createElement("i",{className:"icon icon-cem_arrow-launches",style:{transform:e?"rotate(-180deg)":"",top:e?"3px":""}}))),e&&m().createElement("div",{className:"position-wrap"},m().createElement("div",{className:"selItem "+(this.state.firstLiHover||t?"selPadHover":""),onClick:function(e){return n.stop(e)}},m().createElement("div",{className:"wrap"},m().createElement("ul",null,0<o.length?o.map(function(e,t){return m().createElement("li",s()({className:e.id===r.id?"sel":"",key:t,onClick:function(){n.setShowSelFalse(),i&&i(e,t)}},n._setEvent(t)),m().createElement("span",null,e.name))}):m().createElement("div",{className:"noData"},"无数据"))))))},e}(a.Component);r.defaultProps={placeholder:"请选择",list:[{name:"周",id:"week"},{name:"月",id:"month"}],value:{}},r.propTypes={placeholder:t().oneOfType([t().string,t().element]),list:t().array,value:t().object,onChange:t().func,style:t().object,partingLine:t().bool}}}]);