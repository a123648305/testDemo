(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9350],{33299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});const s=n.p+"html-bec210"},69350:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var t=a(67154),l=a.n(t),t=a(93913),s=a.n(t),t=a(85354),r=a.n(t),t=a(67294),i=a.n(t),c=a(92360),o=a(5133),u=a(29383),p=a(95814),m=a(36144),f=a(61409),d=a(84267),h=a(83425),g=a(35239),n=function(t){function e(e){var s=t.call(this,e)||this;return s.selCompareWay=function(e){var t=s.state.steps;t[0].value=e,s.setState({steps:t})},s.onFilterChange=function(e){var t=s.state.steps;t[1].value=e,t[1].fullValue=s.refs.FilterCondition.getFullValue(),t[2].priceList=[],s.clearTableData(),s.setState({steps:t},function(e){return s.getStep2List()})},s.refreshColumns=function(t,e){e=s.refs["SelectableColumns"+t].competeSelectMenuItem(e);2===t&&s.setState({selectMenuItem2:e},function(e){s.refs["SelectableColumns"+t].resize()}),3===t&&s.setState({selectMenuItem3:e},function(e){s.refs["SelectableColumns"+t].resize()})},s.changeSelModel=function(e){var t=s.state.steps;t[2].selModel=e,s.setState({steps:t})},s.addFilter=function(t){var n=s.state.steps;n[2].priceList.filter(function(e){return e.sel})[0].values.filter(function(e){return e.id===t})[0].sel=n[2].selModel,n[2]["currentPage"+n[2].selModel]=1,s.setState({steps:n},function(e){return s.getStep3List(n[2].selModel)})},s.clearAllSel=function(t){var e=s.state.steps;e[2].priceList.filter(function(e){return e.sel})[0].values.forEach(function(e){e.sel===t&&(e.sel=null)}),s.clearTableData(t),s.setState({steps:e})},s.selPriceCompareWay=function(t){var e=s.state.steps;e[3].priceCompareList.forEach(function(e){return e.sel=e.id===t}),s.setState({steps:e,loading:!1})},s.handleChangeUserGroup=function(e){var t=s.state.steps;t[4].value=e,s.setState({steps:t})},s.step1=function(e){var t=s.state.steps;return i().createElement("div",{className:"step1"},i().createElement("ul",null,i().createElement("li",{onClick:function(e){return s.selCompareWay(1)},className:1===t[0].value?"sel":""},i().createElement("p",{className:"title"},"同类商品之间价格差价",i().createElement("span",{className:"rule"},"比价条件：A")),i().createElement("div",{className:"circle"},i().createElement("div",{className:"left"},i().createElement("p",null,"符合条件"),i().createElement("p",null,"A=A1"),i().createElement("p",null,"的商品价格")),i().createElement("div",{className:"vs"},"vs"),i().createElement("div",{className:"right"},i().createElement("p",null,"不符合条件"),i().createElement("p",null,"A=A1"),i().createElement("p",null,"的其他价格"))),i().createElement("p",{className:"title2"},"同类商品之间比价")),i().createElement("li",{onClick:function(e){return s.selCompareWay(2)},className:2===t[0].value?"sel":""},i().createElement("p",{className:"title"},"商品与固定金额之间的差价"),i().createElement("div",{className:"circle"},i().createElement("div",{className:"left"},i().createElement("p",null,"全部符合条件"),i().createElement("p",null,"的商品价格")),i().createElement("div",{className:"vs"},"vs"),i().createElement("div",{className:"right"},i().createElement("br",null),i().createElement("p",null,"固定金额"))),i().createElement("p",{className:"title2 "},"商品与固定金额比价"))))},s.step2=function(e){s.state.steps;return null},s.step3=function(e){var n=s.state.steps;return i().createElement("div",{className:"step3"},0<n[1].fullValue.length&&i().createElement("ul",{className:"info bottom-line"},n[1].fullValue.map(function(n){return i().createElement("li",{key:n.id},i().createElement("p",null,n.name+"："),i().createElement("span",null,n.values.map(function(e,t){return i().createElement("span",{key:e.id},e.name+(t===n.values.length-1?"":"，"))})))})),i().createElement("div",{className:"more-filter bottom-line"},i().createElement("span",{className:"title"},"添加比价条件"),n[2].priceList.some(function(e){return e.sel})?n[2].priceList.filter(function(e){return e.sel}).map(function(t,e){return i().createElement("span",{className:"filter-card sel",onClick:function(e){return s.clearSelPriceModel(t.id)},key:t.id},t.name," ×")}):n[2].priceList.map(function(t,e){return i().createElement("span",{className:"filter-card "+(t.sel?"sel":""),onClick:function(e){return s.selPriceModel(t.id)},key:t.id},t.name)})),n[2].selPriceListValues()&&i().createElement("div",{className:"shopSel"},i().createElement("div",{className:"all-shop"},i().createElement("p",{className:"shop"},n[2].priceList.filter(function(e){return e.sel})[0].name),i().createElement("p",{className:"right"},n[2].selPriceListValues().filter(function(e){return!e.sel}).map(function(t,e){return i().createElement("span",{style:{borderColor:2===n[2].selModel?"#D6A9A5":"#93C791"},onClick:function(e){return s.addFilter(t.id)},className:"filter-card",key:t.id},t.name)}))),i().createElement("div",{className:"vs"},i().createElement("div",{className:"left "+(1===n[2].selModel?"sel":""),onClick:function(e){return 1===n[2].selModel?"":s.changeSelModel(1)}},n[2].selPriceListValues().filter(function(e){return 1===e.sel}).map(function(t,e){return i().createElement("span",{className:"filter-card",onClick:function(e){return s.delFilter(t.id)},key:t.id},t.name)}),n[2].selPriceListValues().filter(function(e){return 1===e.sel}).length<1?i().createElement("p",{className:"click"},"点击面板进行切换"):i().createElement("p",{className:"clear",onClick:function(e){return s.clearAllSel(1)}},"清空全部选择")),i().createElement("p",null,i().createElement("span",null,"vs")),i().createElement("div",{className:"right "+(2===n[2].selModel?"sel":""),onClick:function(e){return 2===n[2].selModel?"":s.changeSelModel(2)}},n[2].selPriceListValues().filter(function(e){return 2===e.sel}).map(function(t,e){return i().createElement("span",{className:"filter-card",onClick:function(e){return s.delFilter(t.id)},key:t.id},t.name)}),n[2].selPriceListValues().filter(function(e){return 2===e.sel}).length<1?i().createElement("p",{className:"click"},"点击面板进行切换"):i().createElement("p",{className:"clear",onClick:function(e){return s.clearAllSel(2)}},"清空全部选择")))))},s.step4=function(e){var t=s.state.steps;return i().createElement("div",{className:"step4"},i().createElement("div",{className:"price bottom-line"},i().createElement("span",{className:"title"},"金额"),i().createElement(c.Input,{className:"input",placeholder:"请填写金额",value:t[3].value,onChange:function(e){t[3].value=e,s.setState({steps:t})},append:"元"})),i().createElement("div",{className:"compareWay bottom-line"},i().createElement("span",{className:"title"},"比价方式"),t[3].priceCompareList.filter(function(e){return 1!==t[0].value?"LT_OR_GT"!==e.id:"GT"!==e.id&&"LT"!==e.id}).map(function(t){return i().createElement("span",{key:t.id,className:"filter-card "+(t.sel?"sel":""),onClick:function(e){return s.selPriceCompareWay(t.id)}},t.name)})))},s.step5=function(e){var t=s.state.steps;return i().createElement("div",{className:"step5"},i().createElement("div",{className:"way bottom-line"},i().createElement("span",{className:"title"},"通知方式"),i().createElement("span",null,i().createElement("img",{src:a(33299),alt:""})," 微信通知")),i().createElement("div",{className:"user-group "},i().createElement("p",{className:"sel-user"},"选择通知用户组"),i().createElement(p.Z,{checkedList:t[4].value,data:t[4].userList,changeState:s.handleChangeUserGroup})))},s.step6=function(e){var t=s.state.steps;return i().createElement("div",{className:"step6"},i().createElement("div",{className:"warning bottom-line"},i().createElement("span",{className:"title"},"预警名称"),i().createElement(c.Input,{className:"input",placeholder:"请填名称",value:t[5].value,onChange:function(e){t[5].value=e,s.setState({steps:t})}})))},s.changeStep=function(n){var e=s.state.steps;e.forEach(function(e,t){n<t&&(e.checkNow=!1)}),s.setState({steps:e})},s.routerWillLeave=function(e){return"{}"===JSON.stringify(s.state.steps[1].value)||!s.state.checkDone||"信息还未保存，确认要离开？"},s.getShowColumns2=function(e){s.setState({selectMenuItem2:e})},s.getShowColumns3=function(e){s.setState({selectMenuItem3:e})},s.state={checkDone:!0,steps:[{title:"选择比价方式",checkNow:!0,value:e.location&&e.location.state?Number(e.location.state.type):1},{title:"筛选比价商品范围",checkNow:!0,value:{},getArrayValue:function(){return[].concat(s.state.steps[1].value.connConfig||[]).concat(s.state.steps[1].value.source?{values:s.state.steps[1].value.source,id:"source"}:[])},fullValue:[],list:[],currentPage:1,count:0,check:function(){return"{}"===JSON.stringify(s.state.steps[1].value)?"请选择筛选条件":1===s.state.steps[0].value?1<s.state.steps[1].list.length||"该比价商品范围内没有数据或数据量小于2条，无法比较！":0<s.state.steps[1].list.length||"该比价商品范围内没有数据！"}},{title:"设置对比条件",checkNow:!1,value:[],selModel:1,priceList:[],selPriceListValues:function(){return s.state.steps[2].priceList.some(function(e){return e.sel})?s.state.steps[2].priceList.filter(function(e){return e.sel})[0].values:null},getValueLeft:function(){return s.state.steps[2].selPriceListValues().filter(function(e){return 1===e.sel})},getValueRight:function(){return s.state.steps[2].selPriceListValues().filter(function(e){return 2===e.sel})},list1:[],list2:[],currentPage1:1,currentPage2:1,pageSize:4,count1:0,count2:0,check:function(){return 0<s.state.steps[2].list1.length&&0<s.state.steps[2].list2.length||"缺少比较对象或者比较对象没有数据！"}},{title:"设置预警值",checkNow:!1,priceCompareList:[{name:"低于",id:"LT"},{name:"高于",id:"GT"},{name:"差价高于",id:"LT_OR_GT"}],value:"",check:function(){return/^[1-9]\d*(.\d{1,2})?$/.test(s.state.steps[3].value)?!!s.state.steps[3].priceCompareList.some(function(e){return e.sel})||"请选择比价方式!":"请正确填写金额！"}},{title:"通知策略",checkNow:!1,userList:[],value:[],remindType:"",check:function(){return 0<s.state.steps[4].value.length||"请选择通知用户组！"}},{title:"预警名称（完成）",checkNow:!1,value:"",check:function(){return""!==s.state.steps[5].value.trim()||"请填写名称！"}}],columns:[{label:"链接唯一标志",prop:"syncKey"},{label:"链接名",prop:"url",minWidth:"200"},{label:"商品标题",prop:"name",minWidth:"200",render:function(e,t,n){return i().createElement("div",{style:{paddingLeft:"32px"}},e.name)}}],selectMenuItem2:[],selectMenuItem3:[],loading:!1,pageSize:20,projectId:g.t.get(g.V.curProject).id,filter:[]},s}r()(e,t);var n=e.prototype;return n.getStep2List=function(){var t=this,n=this.state.steps;m.h.post("/price/warning/connection/list",{filterModel:l()({project:[this.state.projectId]},n[1].value),pageIndex:n[1].currentPage,pageSize:this.state.pageSize}).then(function(e){e=e.data.result;n[1].list=e.result,n[1].count=e.count,t.refreshColumns(2,e.result[0]?e.result[0].configDetails:[])})},n.getPriceList=function(){var t=this,n=this.state.steps;return this.setState({loading:!0}),m.h.post("/price/warning/filter/list",l()({project:[this.state.projectId]},n[1].value)).then(function(e){n[2].priceList=e.data.result.filter(function(e){return 1<e.values.length}),t.setState({steps:n,loading:!1})})},n.getStep3List=function(t){var e,n=this,s=this.state.steps,a=JSON.parse(JSON.stringify(s[2].priceList.filter(function(e){return e.sel})[0]));a.values=a.values.filter(function(e){return e.sel===t}).map(function(e){return e.id}),0!==a.values.length?((e=JSON.parse(JSON.stringify(s[1].value))).connConfig?e.connConfig.push(a):e.connConfig=[a],m.h.post("/price/warning/connection/list",{filterModel:l()({project:[this.state.projectId]},e),pageIndex:s[2]["currentPage"+t],pageSize:s[2].pageSize}).then(function(e){e=e.data.result;s[2]["list"+t]=e.result,s[2]["count"+t]=e.count,n.refreshColumns(3,e.result[0]?e.result[0].configDetails:[])})):this.clearTableData(t)},n.selPriceModel=function(t){var e=this.state.steps;e[2].priceList.forEach(function(e){return e.sel=e.id===t}),this.setState({steps:e})},n.clearSelPriceModel=function(t){function n(){s[2].priceList.forEach(function(e){e.id===t&&(e.sel=!1,e.values.forEach(function(e){return e.sel=null}))}),e.clearTableData(),e.setState({steps:s})}var e=this,s=this.state.steps;0<s[2].selPriceListValues().some(function(e){return 1===e.sel||2===e.sel})?c.MessageBox.confirm("此操作将使当前的数据丢失，是否继续?","提示",{type:"warning"}).then(function(e){n()}):n()},n.delFilter=function(t){var n=this,s=this.state.steps;s[2].priceList.filter(function(e){return e.sel})[0].values.filter(function(e){return e.id===t})[0].sel=null,s[2]["currentPage"+s[2].selModel]=1,this.setState({steps:s},function(e){return n.getStep3List(s[2].selModel)})},n.clearTableData=function(e){function t(e){s[2].list1=[],s[2].count1=0,s[2].currentPage1=1}function n(e){s[2].list2=[],s[2].count2=0,s[2].currentPage2=1}var s=this.state.steps;switch(e){case 1:t();break;case 2:n();break;default:t(),n()}this.setState({steps:s})},n.getUserList=function(){var t=this,n=this.state.steps;this.setState({loading:!0}),m.h.get("team/list").then(function(e){n[4].userList=e.data.result.list,t.setState({steps:n,loading:!1})})},n.prev=function(){var e=this.state.steps;4===this.stepNow&&2===e[0].value?(e[2].checkNow=!1,e[3].checkNow=!1):e[this.stepNow-1].checkNow=!1,this.setState({steps:e})},n.next=function(){var t=this,n=this.state.steps;!0!==(n[this.stepNow-1].check&&n[this.stepNow-1].check())&&n[this.stepNow-1].check?o.Z.warning(n[this.stepNow-1].check()||"请正确填写必要信息后，才可以进入下一步！"):5<this.stepNow?this.finish():(2===this.stepNow&&2===n[0].value?(n[2].checkNow=!0,n[3].checkNow=!0):n[this.stepNow].checkNow=!0,this.setState({steps:n},function(e){switch(t.stepNow){case 2:0===n[1].list.length&&t.getStep2List(),0===n[1].fullValue.length&&setTimeout(function(e){return n[1].fullValue=t.refs.FilterCondition.getFullValue()},1e3);break;case 3:0===n[2].priceList.length&&t.getPriceList();break;case 5:t.getUserList()}}))},n.finish=function(){var t=this,e=this.state.steps,n=this.props.location.state,s={projectId:this.state.projectId,compareType:1===e[0].value?"PRODUCT":"PRICE",filter:e[1].value,warningPrice:e[3].value,priceCompareType:e[3].priceCompareList.filter(function(e){return e.sel})[0].id,remindType:"WEIXIN",teamId:e[4].value,name:e[5].value};1===e[0].value&&(e={compareConditionType:"source"===e[2].priceList.filter(function(e){return e.sel})[0].id?"SOURCE":"TOPIC",topicId:"source"===e[2].priceList.filter(function(e){return e.sel})[0].id?"":e[2].priceList.filter(function(e){return e.sel})[0].id,to:e[2].selPriceListValues().filter(function(e){return 1===e.sel}).map(function(e){return e.id}),be:e[2].selPriceListValues().filter(function(e){return 2===e.sel}).map(function(e){return e.id})},Object.assign(s,e)),n&&n.id&&!n.copy&&(s.id=n.id),this.setState({loading:!0}),m.h.post(n&&n.id&&!n.copy?"/price/warning/update":"/price/warning/add",l()({},s)).then(function(e){t.setState({loading:!1,checkDone:!1},function(e){return f.mW.push("/priceWarning")})}).catch(function(e){t.setState({loading:!1})})},n.getUserData=function(e){var n=this,s=this.state.steps,a=this.props.location.state;m.h.post("/price/warning/find",{id:e}).then(function(e){var t=e.data.result;s[0].value="PRODUCT"===t.compareType?1:2,t.filter.forEach(function(e){return e.values=e.values.map(function(e){return e.id})}),s[1].value.connConfig=t.filter.map(function(e){return l()({},e,{special:"connConfig"})}),s[3].value=t.warningPrice,s[3].priceCompareList=s[3].priceCompareList.map(function(e){return e.sel=e.id===t.priceCompareType,e}),s[4].value=t.teamVOS.map(function(e){return e.id}),s[5].value=a&&a.copy?t.name+"-副本":t.name,n.setState({steps:s,filter:t.filter||[]},function(e){n.getStep2List(),"NONE"!==t.compareConditionType&&n.getPriceList().then(function(e){s[2].priceList.forEach(function(e){e.values.forEach(function(e){-1!==t.to.indexOf(e.id)&&(e.sel=1),-1!==t.be.indexOf(e.id)&&(e.sel=2)}),e.id===t.topic.id&&(e.sel=!0)}),n.setState({steps:s},function(e){n.getStep3List(1),n.getStep3List(2)})})})})},n.componentDidMount=function(){this.state.steps;var e=this.props.location.state;e&&e.id?this.getUserData(e.id):this.getStep2List(),this.props.router.setRouteLeaveHook(this.props.route,this.routerWillLeave)},n.render=function(){var n=this,e=this.state,t=e.columns,s=e.steps,a=e.pageSize,l=e.selectMenuItem2,r=e.selectMenuItem3,e=e.filter;return i().createElement("div",{className:"price-warning-add"},i().createElement("ul",{className:"bread"},s.filter(function(e,t){return e.checkNow&&t}).map(function(e,t){return i().createElement("li",{key:t,onClick:function(e){2===s[0].value&&2===t||n.changeStep(t+1)}},i().createElement("i",null,t+1),i().createElement("span",{className:"title"},e.title),i().createElement("span",{className:"icon"}," >"))})),i().createElement(c.Loading,{loading:this.state.loading},i().createElement("div",{className:"step2",style:{display:2===this.stepNow?"block":"none"}},i().createElement(h.Z,{ref:"FilterCondition",value:s[1].getArrayValue(),filterValue:e,type:"PRICE_WARNING",filter:["CONN_CONFIG"],onFilterChange:this.onFilterChange,noBottom:!0,hideAdvanced:!0,noFresh:!0})),i().createElement("div",{className:"step-wrap"},this["step"+this.stepNow]()),i().createElement("div",{className:"next"},i().createElement(c.Button,{onClick:function(e){return 2===n.stepNow?f.mW.go(-1):n.prev()}},2===this.stepNow?"返回":"上一步"),i().createElement(c.Button,{type:"primary",onClick:function(e){return n.next()}},5<this.stepNow?"完成":"下一步")),i().createElement("div",{className:"table",style:{display:2===this.stepNow?"block":"none"}},i().createElement(d.Z,{ref:"SelectableColumns2",multiSave:{name:"addWarning_step2"},columns:0<l.length?l:[],getShowColumns:this.getShowColumns2}),i().createElement(u.Z,{key:"table",columns:t.concat(this.selColumns2),data:s[1].list,pageSize:a,total:s[1].count,currentPage:s[1].currentPage,onPage:function(e){s[1].currentPage=e,n.setState({steps:s},function(e){n.getStep2List()})}})),i().createElement("div",{className:"table",style:{display:3===this.stepNow?"block":"none"}},0<s[2].count1&&i().createElement("span",{className:"title"},"监测商品包含 ",i().createElement("span",null,s[2].count1)," 个商品"),i().createElement(d.Z,{ref:"SelectableColumns3",multiSave:{name:"addWarning_step3"},columns:0<r.length?r:[],getShowColumns:this.getShowColumns3}),i().createElement(u.Z,{key:"table1",columns:t.concat(this.selColumns3),data:s[2].list1,pageSize:s[2].pageSize,total:s[2].count1,currentPage:s[2].currentPage1,onPage:function(e){s[2].currentPage1=e,n.setState({steps:s},function(e){n.getStep3List(1)})}})),i().createElement("div",{className:"table",style:{display:3===this.stepNow?"block":"none"}},0<s[2].count2&&i().createElement("span",{className:"title"},"比价商品包含 ",i().createElement("span",null,s[2].count2)," 个商品"),i().createElement(u.Z,{key:"table2",columns:t.concat(this.selColumns3),data:s[2].list2,pageSize:s[2].pageSize,total:s[2].count2,currentPage:s[2].currentPage2,onPage:function(e){s[2].currentPage2=e,n.setState({steps:s},function(e){n.getStep3List(2)})}}))))},s()(e,[{key:"stepNow",get:function(){for(var e=0,t=0;t<this.state.steps.length&&this.state.steps[t].checkNow;t++)e++;return e}},{key:"selColumns2",get:function(){return this.state.selectMenuItem2?this.state.selectMenuItem2.filter(function(e){return e.checked}):[]}},{key:"selColumns3",get:function(){return this.state.selectMenuItem3?this.state.selectMenuItem3.filter(function(e){return e.checked}):[]}}]),e}(t.Component)},24473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(67154),p=n.n(s),a=n(37316),m=n.n(a),t=n(85354),l=n.n(t),s=n(67294),f=n.n(s),a=n(45697),t=n.n(a),a=n(94184),d=n.n(a),s=function(e){function t(){return e.apply(this,arguments)||this}return l()(t,e),t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.children,s=e.className,a=e.block,l=e.indeterminate,r=e.value,i=e.checked,c=e.defaultChecked,o=e.onChange,u=e.disabled,e=m()(e,["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"]),o={value:r,checked:i,defaultChecked:c,onChange:o,disabled:u},s=d()(t,((u={})[t+"-disabled"]=o.disabled,u[t+"-block"]=a,u[t+"-indeterminate"]=l,u),s);return f().createElement("label",p()({tabIndex:o.disabled?-1:0,className:s},e),f().createElement("input",p()({type:"checkbox",className:t+"-input"},o)),f().createElement("span",{className:t+"-status"}),n&&f().createElement("span",{className:t+"-text",title:n},n))},t}(s.Component);s.propTypes={prefixCls:t().string,value:t().oneOfType([t().string,t().number]),checked:t().bool,defaultChecked:t().bool,onChange:t().func,indeterminate:t().bool,disabled:t().bool,block:t().bool},s.defaultProps={prefixCls:"wt-checkbox"};const r=s},85151:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>s.Z,CS:()=>i});var s=n(24473),a=n(67154),c=n.n(a),l=n(37316),o=n.n(l),t=n(85354),r=n.n(t),a=n(67294),u=n.n(a),l=n(45697),t=n.n(l),l=n(94184),p=n.n(l),l=function(a){function e(){for(var n,e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(n=a.call.apply(a,[this].concat(t))||this).handleCheckBoxChange=function(e){var t=n.props.onChange;t&&t(e)},n}return r()(e,a),e.prototype.render=function(){var a=this,e=this.props,t=e.prefixCls,n=e.children,s=e.className,l=(e.onChange,e.values),r=e.checkedList,i=e.block,e=o()(e,["prefixCls","children","className","onChange","values","checkedList","block"]),n=l?l.map(function(e,t){var n=0!==r.length&&-1!==r.indexOf(e);return u().createElement(Checkbox,{key:t,value:e,checked:n,onChange:function(e){return a.handleCheckBoxChange(e)},block:i},e)}):u().Children.map(n,function(e,t){if(e){var n=e.props,s=n.value,s=0!==r.length&&-1!==r.indexOf(s);return u().cloneElement(e,{checked:s,key:t,block:n.block||i,onChange:function(){var e=n.value;a.handleCheckBoxChange(e)}})}});return u().createElement("div",c()({className:p()(t,s)},e),n)},e}(a.Component);l.defaultProps={prefixCls:"wt-checkbox-group"},l.propTypes={onChange:t().func,values:t().array,block:t().bool};const i=l;var m=function(t){var n={};return Object.keys(t).forEach(function(e){/^data\-.+$/.test(e)&&(n[e]=t[e])}),n},a=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){var e=this.props,t=m(e);return u().createElement("label",{className:e.className,title:e.children},u().createElement("div",{className:"checkbox"},u().createElement("input",c()({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),u().createElement("div",{className:"checkbox-body"}))," ",u().createElement("span",null,e.children))},t}(a.Component);a.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}},84267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var t=n(67154),s=n.n(t),t=n(85354),a=n.n(t),t=n(67294),r=n.n(t),l=n(85151),i=n(35239),c=function(t){function e(e){var l=t.call(this,e)||this;return l.openMenu=function(){l.setState({menuState:!l.state.menuState})},l.onChange=function(e){var t,n=l.props,s=n.columns,a=n.getShowColumns,n=n.multiSave;s&&s[e]&&((t=s.slice(0))[e].checked=!t[e].checked);e=n?n.name:"",n=i.t.get(i.V.storageColumns)?i.t.get(i.V.storageColumns):{};n[e]=t,i.t.set(i.V.storageColumns,n),a&&a(t),l.resize(),l.setState({columns:t})},l.competeSelectMenuItem=function(e){var t,n=l.props.multiSave,s=n?n.name:"",a=l.props.columns,n=i.t.get(i.V.storageColumns)?i.t.get(i.V.storageColumns)[s]:[];return a=n&&0!==n.length?("price_check"===s?n.map(function(s,e){return s.render=0<a.filter(function(e){return e.label===s.label}).length?a.filter(function(e){return e.label===s.label})[0].render:function(e,t,n){return r().createElement("span",null,e[s.prop])}}):n.map(function(e,s){return e.render=function(e,t,n){return r().createElement("span",null,e.configDetails[s]&&e.configDetails[s].topicValue)}}),n.slice(0)):e&&e.every(function(e){return e.label&&e.prop})?e:(t=[],e&&e.forEach(function(e,s){t.push({label:e.topicTypeValue,checked:!1,render:function(e,t,n){return r().createElement("span",null,e.configDetails[s].topicValue)}})}),t.slice(0)),l.setState({columns:a}),a},l.resize=function(){var e=document.querySelector(".connection-table .is-sortable");if(e){var t=l.getStyle(e,"width"),e=document.body.offsetWidth,n=l.state.columns;if(800<e&&2<n.length&&parseInt(t)<275)for(var s=0;s<n.length-2;s++)if(n[s].checked)return void l.onChange(s)}},l.close=function(e){l.state.menuState&&l.setState({menuState:!1})},l.state={menuState:!1,multiSave:null,columns:e.columns.map(function(e){return e.checked||(e.checked=!1),e})},l}a()(e,t);var n=e.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){this.setState(s()({},e))},n.getStyle=function(e,t){return e.style[t]||(e.currentStyle||getComputedStyle(e,null))[t]},n.componentDidMount=function(){window.addEventListener("click",this.close),window.addEventListener("resize",this.resize,!1)},n.componentWillUnmount=function(){window.removeEventListener("resize",this.resize,!1),window.removeEventListener("click",this.close)},n.render=function(){var n=this,e=this.state.columns;return r().createElement("div",{className:"menu-wrapper",onClick:function(e){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()}},r().createElement("span",{className:"el-dropdown-link "+(this.state.menuState?"sel":""),onClick:this.openMenu},"列",r().createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:this.state.menuState?"rotate(-180deg)":""}})),this.state.menuState&&r().createElement("div",{className:"menuList"},r().createElement("ul",null,0===e.length?r().createElement("li",{style:{color:"#8c8c8c"}},"无可选择内容"):e.map(function(e,t){return r().createElement("li",{key:t},r().createElement(l.Jg,{key:t,value:e.label,checked:e.checked,onChange:n.onChange.bind(n,t),block:!0},e.label))}))))},e}(t.Component)}}]);