(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[3280],{3280:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var n=a(37316),r=a.n(n),l=a(67154),i=a.n(l),t=a(85354),o=a.n(t),n=a(67294),g=a.n(n),y=a(26198),v=a(27310),E=a(60222),m=a(39432),c=a(70715),l=function(n){function e(){for(var l,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(l=n.call.apply(n,[this].concat(t))||this).chartRef=void 0,l.source=void 0,l.spuNames=void 0,l.getChartRef=function(e){return l.chartRef=e},l.setValue=function(n){var r=0;l.spuNames=[],l.source=n.sort(function(e,t){return t.cumulativeSales-e.cumulativeSales}).reduce(function(e,t,a){return l.spuNames.push(t.name),r+=t.cumulativeSales,e.push([t.name,t.cumulativeSales,r]),a===n.length-1&&e.forEach(function(e,t){0!==t&&(e[2]=e[2]/r)}),e},[["SPU","历史累计销量","累计占比"]])},l.getOption=function(e){var t=l.chartRef.getWidth(),a=.8*t/(70*l.spuNames.length),n=1<(0,m.jD)(l.spuNames.join(""),12)/(.6*t);return{title:{text:e},dataset:[{source:l.source}],grid:{top:100,bottom:n||a<1?40:20,left:36,right:36,containLabel:!0},legend:{left:20,top:40,itemWidth:12,itemHeight:12,data:[{name:l.source[0][1],icon:c.W4.square},{name:l.source[0][2],icon:c.W4.lineRing}]},dataZoom:[{show:a<1,bottom:20,xAxisIndex:[0,1],height:16,start:0,end:30/(l.source.length-1)*100,showDetail:!1}],tooltip:{trigger:"axis",formatter:function(e){return e.reduce(function(e,t){var a=t.marker,n=t.data,r=t.dimensionNames,l=t.seriesIndex,t=t.seriesType,n=n[l+1];return e.push(a+" "+r[l+1]+"："+("line"===t?(100*n).toFixed(2)+"%":(0,m.hE)(n))),e},[(0,c.Zi)(e[0].name)]).join("</br>")}},xAxis:[0,1].map(function(e){return{type:"category",show:!e,position:"bottom",axisLabel:{rotate:n?45:0,margin:n?15:8,formatter:function(e){return 6<e.length?e.substring(0,5)+"...":e}},data:e?[]:l.spuNames}}),yAxis:[0,1].map(function(t){return{type:"value",position:t?"right":"left",max:"dataMax",splitNumber:3,name:l.source[0][t+1],nameTextStyle:{color:"#262626"},axisLabel:{formatter:function(e){return t?(100*e).toFixed(0)+"%":(0,m.hE)(e)}}}}),series:[{type:"bar",name:l.source[0][1],yAxisIndex:0,barMaxWidth:24,encode:{x:0,y:1}},{type:"line",name:l.source[0][2],yAxisIndex:1,encode:{x:0,y:2}}]}},l}return o()(e,n),e.prototype.renderChart=function(e,t){this.setValue(e),this.chartRef.clear(),this.chartRef.setOption(this.getOption(t))},e}(g().PureComponent),s=a(8201),u=a(98191),d=a(50976),h=a(94644),t=a(45697),n=a.n(t),t=function(r){function e(){for(var n,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=r.call.apply(r,[this].concat(t))||this).handleOnMoreClick=function(e){var t=n.props,a=t.title,t=t.data;"image"===e&&n.chartRef?(0,h._v)(n.chartRef,a):"data"===e&&(0,s.P)(t)&&(0,h.aT)([n.source.map(function(e){return e.map(function(e){return e%1?(100*e).toFixed(2)+"%":e})})],a)},n}o()(e,r);var t=e.prototype;return t.componentDidMount=function(){this.renderChart()},t.componentDidUpdate=function(e,t){var a=e.data,e=this.props.data;(0,s.P)(e)&&JSON.stringify(a)!==JSON.stringify(e)&&this.renderChart(),!(0,s.P)(e)&&this.chartRef&&(this.chartRef=void 0)},t.renderChart=function(){var e=this.props,t=e.data,e=e.title;(0,s.P)(t)&&this.chartRef&&r.prototype.renderChart.call(this,t,e)},t.render=function(){var e=this.props,t=e.data,a=e.loading,n=e.title,e=e.titleOverlay;return g().createElement(s.Z,{className:"yt_market_hot_discovery_bar_line_chart",data:t,loading:a,renderTitle:g().createElement(u.Z,{title:n,titleOverlay:e,data:t,onMoreClick:this.handleOnMoreClick})},g().createElement(d.Z,{onChartReady:this.getChartRef,theme:"yunting_multi_color",option:{},style:{height:"100%"}}))},e}(l);t.propTypes={data:n().any,titleOverlay:n().oneOf([n().string,n().node]),title:n().string,loading:n().bool};const b=t;l=function(r){function e(){for(var n,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=r.call.apply(r,[this].concat(t))||this).handleOnMoreClick=function(e){var t=n.props,a=t.title,t=t.data;"image"===e&&n.chartRef?(0,h._v)(n.chartRef,a):"data"===e&&(0,s.P)(t)&&(0,h.aT)([n.source.map(function(e){return e.map(function(e){return e%1?(100*e).toFixed(2)+"%":e})})],a)},n}o()(e,r);var t=e.prototype;return t.componentDidMount=function(){this.renderChart()},t.componentDidUpdate=function(e,t){var a=e.data,e=this.props.data;(0,s.P)(e)&&JSON.stringify(a)!==JSON.stringify(e)&&this.renderChart(),!(0,s.P)(e)&&this.chartRef&&(this.chartRef=void 0)},t.renderChart=function(){var e=this.props,t=e.data,e=e.title;(0,s.P)(t)&&this.chartRef&&r.prototype.renderChart.call(this,t,e)},t.render=function(){var e=this.props,t=e.data,a=e.loading,n=e.title,e=e.titleOverlay;return g().createElement(s.Z,{className:"yt_market_hot_discovery_double_bar_chart",data:t,loading:a,renderTitle:g().createElement(u.Z,{title:n,titleOverlay:e,data:t,onMoreClick:this.handleOnMoreClick})},g().createElement(d.Z,{onChartReady:this.getChartRef,theme:"yunting_multi_color",option:{},style:{height:"100%"}}))},e}(function(n){function e(){for(var r,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(r=n.call.apply(n,[this].concat(t))||this).chartRef=void 0,r.source=void 0,r.spuNames=void 0,r.getChartRef=function(e){return r.chartRef=e},r.setValue=function(e){r.spuNames=[],r.source=e.sort(function(e,t){return t.currentSales-e.currentSales}).reduce(function(e,t){return r.spuNames.push(t.name),e.push([t.name,t.currentSales,t.circulationSales]),e},[["SPU","当期销量","上期销量"]])},r.getOption=function(e){var t=r.chartRef.getWidth(),a=.8*t/(70*r.spuNames.length),n=1<(0,m.jD)(r.spuNames.join(""),12)/(.6*t);return{title:{text:e},dataset:[{source:r.source}],grid:{top:80,bottom:n||a<1?40:20,left:36,right:36,containLabel:!0},legend:{left:20,top:40,itemWidth:12,itemHeight:12,data:[{name:r.source[0][1],icon:c.W4.square},{name:r.source[0][2],icon:c.W4.square}]},dataZoom:[{show:a<1,xAxisIndex:[0,1],bottom:20,height:16,start:0,end:30/(r.source.length-1)*100,showDetail:!1}],tooltip:{trigger:"axis",formatter:function(e){return e.reduce(function(e,t){var a=t.marker,n=t.data,r=t.dimensionNames,t=t.seriesIndex,n=n[t+1];return e.push(a+" "+r[t+1]+"："+(0,m.hE)(n)),e},[(0,c.Zi)(e[0].name)]).join("</br>")}},xAxis:[0,1].map(function(e){return{type:"category",show:!e,position:"bottom",axisLabel:{rotate:n?45:0,margin:n?15:8,formatter:function(e){return 6<e.length?e.substring(0,5)+"...":e}},data:e?[]:r.spuNames}}),yAxis:{type:"value",splitNumber:3,minInterval:1,nameTextStyle:{color:"#262626"},axisLabel:{formatter:function(e){return(0,m.hE)(e)}}},series:[0,1].map(function(e){return{type:"bar",name:r.source[0][e+1],barMaxWidth:24,encode:{x:0,y:e+1},barGap:"10%"}})}},r}return o()(e,n),e.prototype.renderChart=function(e,t){this.setValue(e),this.chartRef.clear(),this.chartRef.setOption(this.getOption(t))},e}(g().PureComponent));l.propTypes={data:n().any,titleOverlay:n().oneOf([n().string,n().node]),title:n().string,loading:n().bool};const _=l;var t=function(r){function e(){for(var a,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(a=r.call.apply(r,[this].concat(t))||this).chartRef=void 0,a.source=void 0,a.totalMax=void 0,a.state={tableTitles:[],tableData:[]},a.getChartRef=function(e){return a.chartRef=e},a.setValue=function(e){a.totalMax=0,a.source=e.reduce(function(e,t){return a.totalMax=Math.max(a.totalMax,t.cumulativeSales),e.push([t.name,t.currentSales,t.circulationSales,t.cumulativeSales,t.circulationSales?(t.currentSales-t.circulationSales)/t.circulationSales:0]),e},[["SPU","当期销量","上期销量","历史累计销量","环比"]]),a.setState({tableTitles:a.source[0],tableData:a.source.slice(1)})},a.getOption=function(e){return{title:{text:e},dataset:[{source:a.source}],tooltip:{formatter:function(e){var t=e.marker,a=e.value,e=e.dimensionNames;return[t+" "+(0,c.Zi)(a[0]),e[1]+"："+(0,m.hE)(a[1]),e[2]+"："+(0,m.hE)(a[2]),e[3]+"："+(0,m.hE)(a[3])].join("</br>")}},grid:{left:46,right:80,top:90,bottom:55,containLabel:1},visualMap:[{text:["历史累计销量"],right:10,top:60,itemHeight:80,dimension:3,type:"continuous",max:a.totalMax,calculable:!0,inRange:{color:"#1574B3",symbolSize:[5,80]}}],dataZoom:[{type:"slider",bottom:20,start:0,end:100,height:16,handleSize:"100%",showDelay:!1,xAxisIndex:0,labelFormatter:function(){return""}},{type:"slider",start:0,end:100,left:20,yAxisIndex:0,width:16,handleSize:"100%",showDelay:!1,labelFormatter:function(){return""}}],xAxis:{type:"value",name:"上期销量",minInterval:1,nameTextStyle:{color:"#262626"},axisLabel:{formatter:function(e){return(0,m.hE)(e)}}},yAxis:{type:"value",name:"当期销量",minInterval:1,splitNumber:3,nameTextStyle:{color:"#262626",padding:[0,0,10,0]},axisLabel:{formatter:function(e){return(0,m.hE)(e)}}},series:[{type:"scatter",hoverAnimation:!1,encode:{x:2,y:1},emphasis:{itemStyle:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:10,borderWidth:3,borderColor:"#fff"}}}]}},a}return o()(e,r),e.prototype.renderChart=function(e,t){this.setValue(e),this.chartRef.clear(),this.chartRef.setOption(this.getOption(t))},e}(g().PureComponent),p=a(43036),f=a(25022),l=function(e){var t=e.option,a=void 0===t?{}:t,n=e.titles,r=void 0===n?[]:n,l=e.data,i=void 0===l?[]:l,t=e.overlays,o=void 0===t?[]:t,n=e.className,l=void 0===n?"":n,t=g().useState(1),e=t[0],c=t[1],n=g().useState([]),t=n[0],s=n[1],u=[6,4,4,6,4];return g().useEffect(function(){s(i.slice(0,10))},[i]),g().createElement("div",{className:"yt_hot_discovery_simple_talbe_wrapper "+l,style:{height:a.height||void 0}},g().createElement("div",{className:"st_title"},r.map(function(e,t){return g().createElement("span",{key:e,style:{flex:u[t]}},e,o[t]&&g().createElement(p.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:o[t]},g().createElement("i",{className:"icon-cem_file1",style:{marginLeft:2,fontSize:14}})))})),g().createElement("div",{className:"st_content"},t.map(function(e,t){return g().createElement("div",{key:"row_"+t,className:"st_row"},e.map(function(e,t){var a=e;return 1===t||2===t||3===t?a=(0,m.hE)(e):4===t&&(a=(100*e).toFixed(2)+"%"),g().createElement("span",{key:"col_"+t,className:"st_col",style:{flex:u[t]}},g().createElement(p.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:a},g().createElement("span",null,a)))}))})),g().createElement(f.Z,{className:"st_bottom",total:i.length,currLength:t.length,pageIndex:e,pageSize:10,onPageChange:function(e){c(e),s(i.slice(10*(e-1),10*e))},layout:"prev, pager, next"}))};const x=l;l.propTypes={className:n().string,titles:n().array.isRequired,data:n().array.isRequired,overlays:n().array.isRequired,option:n().shape({height:n().oneOfType([n().string,n().number])})};t=function(r){function e(){for(var n,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=r.call.apply(r,[this].concat(t))||this).handleOnMoreClick=function(e){var t=n.props,a=t.title,t=t.data;"image"===e&&n.chartRef?(0,h._v)(n.chartRef,a):"data"===e&&(0,s.P)(t)&&(0,h.aT)([n.source.map(function(e){return e.map(function(e){return e%1?(100*e).toFixed(2)+"%":e})})],a)},n}o()(e,r);var t=e.prototype;return t.componentDidMount=function(){this.renderChart()},t.componentDidUpdate=function(e,t){var a=e.data,e=this.props.data;(0,s.P)(e)&&JSON.stringify(a)!==JSON.stringify(e)&&this.renderChart(),!(0,s.P)(e)&&this.chartRef&&(this.chartRef=void 0)},t.renderChart=function(){var e=this.props,t=e.data,e=e.title;(0,s.P)(t)&&this.chartRef&&r.prototype.renderChart.call(this,t,e)},t.render=function(){var e=this.props,t=e.data,a=e.loading,n=e.title,r=e.titleOverlay,l=this.state,e=l.tableTitles,l=l.tableData;return g().createElement(s.Z,{className:"yt_market_hot_discovery_scatter_table_chart",data:t,loading:a,renderTitle:g().createElement(u.Z,{title:n,titleOverlay:r,data:t,onMoreClick:this.handleOnMoreClick})},g().createElement("div",{className:"scatter_content"},g().createElement(d.Z,{onChartReady:this.getChartRef,theme:"yunting_multi_color",className:"content_chart",option:{},style:{height:"100%"}}),(0,s.P)(t)&&g().createElement(x,{className:"content_table",data:l,titles:e})))},e}(t);t.propTypes={data:n().any,titleOverlay:n().oneOf([n().string,n().node]),title:n().string,loading:n().bool};const S=t;var t=a(61409),N=g().createElement("div",null,g().createElement("div",null,"选定的日期范围内，符合筛选条件的商品中，再基于「商品状态=正常在售或预售」过滤出商品列表，然后对商品列表做去重求和，得出的数值即为「在售商品数」。"),g().createElement("div",null,"相关的销量均是基于「在售商品」展开的。"),g().createElement("div",{style:{marginTop:14,textAlign:"right"}},g().createElement(t.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/f255c9b4-2b3a-4c9b-9b37-371717d0b99c?# 《商品状态说明》",target:"_blank"},"了解更多"))),C=g().createElement("div",null,g().createElement("div",null,"「累计销量」与选定的时间范围无关，对于具体的「商品」而言，是销量的一个累计值"),g().createElement("div",null,"意义：此度量事实描述「商品」在整个生命周期里“卖得好不好”。"),g().createElement("div",{style:{marginTop:14,textAlign:"right"}},g().createElement(t.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/15dc2d26-a232-4017-95f6-bc3669057751?# 《爆款发现》",target:"_blank"},"了解更多"))),w=g().createElement("div",null,g().createElement("div",null,"「销量」即当期销量，选定的时间范围内的商品的销量的求和"),g().createElement("div",null,"意义：此度量事实描述产品在当期“卖得好不好”。"),g().createElement("div",{style:{marginTop:14,textAlign:"right"}},g().createElement(t.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/15dc2d26-a232-4017-95f6-bc3669057751?# 《爆款发现》",target:"_blank"},"了解更多"))),R=g().createElement("div",null,g().createElement("div",null,"「上期销量」即相对于选定的时间段的上一个时间段内的商品销量的求和"),g().createElement("div",null,"意义：此度量事实与「销量」做比较，可以描述「商品」在当期“卖得快不快”。"),g().createElement("div",{style:{marginTop:14,textAlign:"right"}},g().createElement(t.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/15dc2d26-a232-4017-95f6-bc3669057751?# 《爆款发现》",target:"_blank"},"了解更多"))),k=g().createElement("div",null,g().createElement("div",null,"此图各点标识的是SPU的各销量统计情况。"),g().createElement("div",null,"「累计销量」与选定的时间范围无关，对于具体的「商品」而言，是销量的一个累计值 意义：此度量事实描述「商品」在整个生命周期里“卖得好不好”。"),g().createElement("div",{style:{marginTop:14,textAlign:"right"}},g().createElement(t.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/15dc2d26-a232-4017-95f6-bc3669057751?# 《爆款发现》",target:"_blank"},"了解更多"))),O=g().createElement("div",null,g().createElement("div",null,"此图各点标识的是SPU的各销量统计情况。"),g().createElement("div",null,"「销量」即当期销量，选定的时间范围内的商品的销量的求和"),g().createElement("div",null,"「环比销量」 = 当期销量 - 上期销量"),g().createElement("div",null,"意义：此度量事实描述产品在当期“卖得好不好”。"),g().createElement("div",{style:{marginTop:14,textAlign:"right"}},g().createElement(t.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/15dc2d26-a232-4017-95f6-bc3669057751?# 《爆款发现》",target:"_blank"},"了解更多"))),D=g().createElement("div",null,g().createElement("div",null,"此图各点标识的是SPU的各销量统计情况，"),g().createElement("div",null,"其中："),g().createElement("div",null," x轴表示「上期销量」"),g().createElement("div",null,"y轴表示「当期销量」"),g().createElement("div",null,"半径表示「历史累计销量」"),g().createElement("div",null,"同时「环比」 = （当期销量 - 上期销量）÷ 上期销量")),T=["60%","70%"],Z={width:"100%",height:"110px"};const P=function(e){var t=e.onSaleData,a=e.fetchingOnSaleData,n=e.historySaleData,r=e.fetchingHistorySaleData,l=e.saleData,i=e.fetchingSaleData,o=e.compareSaleData,c=e.fetchingCompareSaleData,s=e.historySaleRangeData,u=e.fetchingHistorySaleRangeData,m=e.saleRangeData,d=e.fetchingSaleRangeData,h=e.saleAnalysisData,p=e.fetchingSaleAnalysisData,f=e.onFilterReady,e=e.onFilterChange;return g().createElement("div",{className:"yt_market_hot_discovery_wrapper"},g().createElement(y.Z,{pageType:"MARKET_HOT_DISCOVERY",onReady:f,onChange:e}),g().createElement("div",{className:"content"},g().createElement(v.Z,{orientation:"horizontal",colNumber:4,showList:["card_0","card_1","card_2","card_3"]},g().createElement(E.Z,{key:"card_0",tip:N,paragraph:T,loading:a,style:Z,data:t,compare:"WEEK"}),g().createElement(E.Z,{key:"card_1",tip:C,paragraph:T,loading:r,style:Z,data:n,compare:"WEEK"}),g().createElement(E.Z,{key:"card_2",tip:w,paragraph:T,loading:i,style:Z,data:l,compare:"WEEK"}),g().createElement(E.Z,{key:"card_3",tip:R,paragraph:T,loading:c,style:Z,data:o,compare:"WEEK"})),g().createElement(v.Z,{orientation:"vertical",showList:["chart_0","chart_1","chart_2"]},g().createElement(b,{key:"chart_0",title:"各SPU累计销量排行",data:s,loading:u,titleOverlay:k}),g().createElement(_,{key:"chart_1",title:"各SPU销量排行",data:m,loading:d,titleOverlay:O}),g().createElement(S,{key:"chart_2",title:"SPU销量矩阵分析",data:h,loading:p,titleOverlay:D}))))};var A=a(35239),t=a(55609),M=a(64396).Z.market.hotDiscovery,a=function(a){function e(e){var t=a.call(this,e)||this;return t._handleOnFilterReady=function(e){t.props.fetchParams(i()({},e,{filterModel:e.filterValue,projectId:A.t.get(A.V.curProject).id}))},t._handleOnFilterChange=function(e){e.dateFilter&&t._handleOnFilterReady(e)},t.event={onFilterReady:t._handleOnFilterReady,onFilterChange:t._handleOnFilterChange},t}return o()(e,a),e.prototype.render=function(){return g().createElement(P,i()({},this.props,this.state,this.event))},e}(g().PureComponent);const L=(0,t.connect)(function(e){var t=e.loading,e=r()(e,["loading"]);return i()({},e[M],{fetchingOnSaleData:t.effects[M+"/fetchOnSaleData"]||!1,fetchingHistorySaleData:t.effects[M+"/fetchHistorySaleData,"]||!1,fetchingSaleData:t.effects[M+"/fetchSaleData"]||!1,fetchingCompareSaleData:t.effects[M+"/fetchCompareSaleData"]||!1,fetchingHistorySaleRangeData:t.effects[M+"/fetchHistorySaleRangeData"]||!1,fetchingSaleRangeData:t.effects[M+"/fetchSaleRangeData"]||!1,fetchingSaleAnalysisData:t.effects[M+"/fetchSaleAnalysisData"]||!1})},function(t){return{fetchParams:function(e){return t({type:M+"/fetchParams",payload:e})}}})(a)},25022:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var t=a(67294),s=a.n(t),u=a(92360),m=a(35303),t=a(45697),t=a.n(t),d=[{label:"10项/页",value:10},{label:"20项/页",value:20},{label:"40项/页",value:40},{label:"100项/页",value:100}];const n=function(e){var t=e.onPageChange,a=e.onSizeChange,n=e.total,r=void 0===n?0:n,l=e.pageIndex,i=e.pageSize,o=e.layout,c=e.className,n=e.currLength,e=0===r?0:(l-1)*i+1,n=0===r?0:n?e+n-1:e+i-1;return 0===r?null:s().createElement("div",{className:"yt-awp-pagination "+(c||"")},s().createElement("span",{className:"total_num"},s().createElement("span",null,e+" - "+n+" "),"项，共",s().createElement("span",null," "+r+" "),"项"),s().createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},s().createElement(u.Pagination,{small:!0,pageSize:i,currentPage:l,pageCount:Math.ceil(r/i),layout:0===r?"":"prev, pager, next",onCurrentChange:t}),void 0===o||o.includes("sizes")?s().createElement(m.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:i||10,onChange:a},d.map(function(e,t){return s().createElement(m.Wx,{key:t,label:e.label,value:e.value},e.label)})):null))};t().propTypes={onPageChange:t().func,onSizeChange:t().func,total:t().number,pageIndex:t().number,pageSize:t().number,layout:t().string,className:t().string}},27310:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});function s(e){return e=e.height,u().createElement("div",{style:{background:"#fff",height:e,display:"flex",alignItems:"center",justifyContent:"center"}},"Template")}var t=a(85354),r=a.n(t),t=a(67294),u=a.n(t),t=a(45697),t=a.n(t),i=a(92360),a=function(n){function e(){for(var l,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(l=n.call.apply(n,[this].concat(t))||this).clientHeight=160,l.notShowList=[],l._handleOnCheckBoxChange=function(e,t){var a,n=l.props,r=n.onChange,n=n.showList;e?(a=n.slice()).push(t):a=n.filter(function(e){return e!==t}),r&&r(a)},l._renderEditableFrame=function(t,e){var a=l.props,n=a.editable,a=a.colNumber,a=void 0===a?1:a;return u().createElement("div",{id:t.key,key:t.key,style:{width:"calc("+100/a+"% - 12px)"},className:n?"child_editable":""},t,n&&u().createElement(i.Checkbox,{checked:e,className:"checkbox_style",onChange:function(e){return l._handleOnCheckBoxChange(e,t.key)}}))},l}r()(e,n);var t=e.prototype;return t.componentDidMount=function(){var e=this.props.children,e=e instanceof Array?e[0]:e,e=document.getElementById(e.key);e&&(this.childHeight=e.clientHeight)},t.render=function(){var l=this,e=this.props,t=e.className,a=void 0===t?"":t,n=e.editable,i=void 0!==n&&n,t=e.orientation,n=void 0===t?"horiziontal":t,t=e.children,e=e.showList,o=void 0===e?[]:e,c=t instanceof Array?t:[t];return this.notShowList=[],u().createElement("div",{className:"yt_drag_layout_wrapper yt_drag_layout_"+n+" "+a},c.reduce(function(e,t,a){var n=o.indexOf(t.key);if(-1<n?e[n]=l._renderEditableFrame(t,!0):l.notShowList.push(t.key),a!==c.length-1)return e;var r=e.filter(function(e){return e});return i&&0<l.notShowList.length&&l.notShowList.forEach(function(e){r.push(l._renderEditableFrame(u().createElement(s,{key:e,height:l.childHeight}),!1))}),r},[]))},e}(u().PureComponent);const n=a;a.propTypes={orientation:t().oneOf(["horizontal","vertical"]),colNumber:t().number,className:t().oneOfType([t().string,t().object]),editable:t().bool,showList:t().arrayOf(t().string),onChange:t().func}},60222:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});function l(e){var t=e.value,a=e.getValue,n=(t=p().useState(t))[0],r=t[1];return p().createElement("div",{className:"yt_modal_dashboard_edit_wrapper"},p().createElement("div",{className:"content_item"},p().createElement("span",null,"同比类型"),p().createElement("span",null,p().createElement(i(),{className:"content_item_select",value:(c.find(function(e){return e.value===n})||{}).label,onChange:function(e){var t;r(t=e),setTimeout(function(){return a&&a(t)},0)},inputIcon:p().createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},c.map(function(e){return p().createElement(i().Option,{value:e.value,key:e.value},e.label)})))))}var n=a(67154),d=a.n(n),t=a(37316),h=a.n(t),n=a(67294),p=a.n(n),t=a(45697),n=a.n(t),f=a(25713),g=a(43036),t=a(2258),i=a.n(t),o=a(57522),c=[{value:"WEEK",label:"周"},{value:"MONTH",label:"月"},{value:"QUATER",label:"季"},{value:"YEAR",label:"年"}],t=function(r){return new Promise(function(e,t){var a=r.value,n=d()({},r,{titleText:p().createElement("div",{className:"indicator_card_comfirm"},p().createElement("span",null,"同比设置"),p().createElement("span",{onClick:function(){return window.open("https://www.yuque.com/docs/share/5615d490-0056-4bb9-b208-bf747c9048c0")}},"查看更多")),content:p().createElement(l,d()({},r,{getValue:function(e){a=e}}))});n.onOk=function(){return e(a)},n.onCancel=t,(0,o.Z)(n)})};const y=t;t.propTypes={getValue:n().func,value:n().string};function v(e){return!["",null,void 0].includes(e)}function E(e){return e&&(5<e.length?String(e).substring(0,5)+"...":e)}function b(e,t,a){var r,l;"image"===e?(r=t,l=(0,s.UO)(a[0]&&a[0].name),new Promise(function(e){var t=r.offsetWidth,a=r.cloneNode(!0),n=document.createElement("canvas");n.width=12*t,n.height=1920,n.style.width=t+"px",n.style.height="160px",n.className="yt_trend_list_canvas",n.getContext("2d").scale(12,12),a.style.width=t+"px",a.style.height="160px",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.zIndex=-1,a.style.opacity=0,document.body.appendChild(a),u()(a,{allowTaint:!0,taintTest:!1,canvas:n,useCORS:!0,width:t,height:160,onrendered:function(e){document.body.appendChild(e);e=e.toDataURL("png");(0,m.saveAs)(e,l,"image/png"),setTimeout(function(){document.body.removeChild(a),document.body.removeChild(document.querySelector(".yt_trend_list_canvas"))},0)}})})):"data"===e&&(e=[a.reduce(function(e,t){return[].concat(e,[[t.name,t.count]])},[])],(0,s.aT)(e,a[0]&&a[0].name))}var _=a(8201),x=a(39432),s=a(94644),t=a(29531),u=a.n(t),m=a(93162),S=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],N=[{title:"设置同比",type:"compare"}];a=function(e){function n(e){return a&&a[e]?a[e]:{}}function t(e){if(n(e).name){if(v(n(e).count)){var t=n(e).count;switch(n(e).format){case"myriad":t=(0,x.hE)(t);break;case"percent":a=t,t=v(null)?null:0===a?"0.00%":Math.abs(100*a).toFixed(2)+"%"}return t}return"--"}var a;return""}var a=e.data,r=e.tip,l=e.compare,i=e.onSetting,o=e.loading,c=e.paragraph,s=h()(e,["data","tip","compare","onSetting","loading","paragraph"]),e=p().useState(),u=e[0],m=e[1],e=function(e){return"myriad"!==n(e).format?t(e):n(e).count.toLocaleString()};return p().createElement("div",d()({className:"indicator_card"},s,{ref:function(e){return m(e)}}),p().createElement(_.Z,{data:a,className:"section_com",loading:o,paragraph:c},p().createElement("div",{className:"title_wrap"},p().createElement("span",{className:"chart_title"},p().createElement("span",{className:"chart_title_name"},n(0).name,r&&p().createElement(g.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:r},p().createElement("i",{className:"icon-cem_file1","data-html2canvas-ignore":!0})))),p().createElement("span",{className:"chart_title_buttons","data-html2canvas-ignore":!0},p().createElement(f.Z,{onClick:function(e){"compare"===e?y({value:l}).then(function(e){i({compareValue:e})}):b(e,u,a)},options:S.concat(i?N:[])}))),p().createElement("div",{className:"section_mid"},p().createElement("p",null,p().createElement(g.Z,{placement:"top",overlay:e(0)},p().createElement("section",null,t(0)))),n(1).name||n(2).name?p().createElement("p",null,p().createElement("span",null,p().createElement("span",null,p().createElement(g.Z,{placement:"top",overlay:n(1).name},p().createElement("section",{className:"name"},n(1).name))),p().createElement("span",null,p().createElement(g.Z,{placement:"top",overlay:e(1)},p().createElement("section",null,t(1))),"boolean"==typeof n(1).rise&&p().createElement("i",{className:n(1).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"}))),p().createElement("span",null,p().createElement("span",null,p().createElement(g.Z,{placement:"top",overlay:n(2).name},p().createElement("section",{className:"name"},n(2).name))),p().createElement("span",null,p().createElement(g.Z,{placement:"top",overlay:e(2)},p().createElement("section",null,t(2))),"boolean"==typeof n(2).rise&&p().createElement("i",{className:n(2).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"})))):null),(n(3).name||n(4).name)&&p().createElement("div",{className:"section_bottom"},p().createElement("span",null,p().createElement("span",null,p().createElement(g.Z,{placement:"top",overlay:n(3).name},p().createElement("section",{className:"name"},E(n(3).name)))),p().createElement("span",null,p().createElement(g.Z,{placement:"top",overlay:e(3)},p().createElement("section",null,t(3))))),n(4).name?p().createElement("span",null,p().createElement("span",null,p().createElement(g.Z,{placement:"top",overlay:n(4).name},p().createElement("section",{className:"name"},E(n(4).name)))),p().createElement("span",null,p().createElement(g.Z,{placement:"top",overlay:e(4)},p().createElement("section",null,t(4))))):null)))};const r=a;a.propTypes={data:n().arrayOf(n().shape({name:n().string,count:n().oneOfType([n().string,n().number]),rise:n().bool,format:n().oneOfType(["myriad","percent",void 0])})),tip:n().oneOfType([n().string,n().node]),compare:n().string,onSetting:n().func,loading:n().bool,paragraph:n().arrayOf(n().string)}}}]);