(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1703],{33795:(e,t,n)=>{var a={"./af":43429,"./af.js":43429,"./ar":35883,"./ar-dz":25534,"./ar-dz.js":25534,"./ar-kw":81055,"./ar-kw.js":81055,"./ar-ly":11253,"./ar-ly.js":11253,"./ar-ma":94073,"./ar-ma.js":94073,"./ar-sa":53797,"./ar-sa.js":53797,"./ar-tn":86338,"./ar-tn.js":86338,"./ar.js":35883,"./az":55908,"./az.js":55908,"./be":80887,"./be.js":80887,"./bg":57116,"./bg.js":57116,"./bm":18346,"./bm.js":18346,"./bn":98593,"./bn-bd":12267,"./bn-bd.js":12267,"./bn.js":98593,"./bo":88070,"./bo.js":88070,"./br":87699,"./br.js":87699,"./bs":17946,"./bs.js":17946,"./ca":47555,"./ca.js":47555,"./cs":95167,"./cs.js":95167,"./cv":93267,"./cv.js":93267,"./cy":83801,"./cy.js":83801,"./da":8322,"./da.js":8322,"./de":12846,"./de-at":71186,"./de-at.js":71186,"./de-ch":15119,"./de-ch.js":15119,"./de.js":12846,"./dv":25027,"./dv.js":25027,"./el":70999,"./el.js":70999,"./en-au":53070,"./en-au.js":53070,"./en-ca":38791,"./en-ca.js":38791,"./en-gb":44852,"./en-gb.js":44852,"./en-ie":12379,"./en-ie.js":12379,"./en-il":41282,"./en-il.js":41282,"./en-in":44932,"./en-in.js":44932,"./en-nz":66842,"./en-nz.js":66842,"./en-sg":74548,"./en-sg.js":74548,"./eo":6454,"./eo.js":6454,"./es":10821,"./es-do":60525,"./es-do.js":60525,"./es-mx":68276,"./es-mx.js":68276,"./es-us":37155,"./es-us.js":37155,"./es.js":10821,"./et":79073,"./et.js":79073,"./eu":45334,"./eu.js":45334,"./fa":78557,"./fa.js":78557,"./fi":18257,"./fi.js":18257,"./fil":5345,"./fil.js":5345,"./fo":37758,"./fo.js":37758,"./fr":46980,"./fr-ca":88970,"./fr-ca.js":88970,"./fr-ch":81703,"./fr-ch.js":81703,"./fr.js":46980,"./fy":31005,"./fy.js":31005,"./ga":19977,"./ga.js":19977,"./gd":5135,"./gd.js":5135,"./gl":96095,"./gl.js":96095,"./gom-deva":68584,"./gom-deva.js":68584,"./gom-latn":78454,"./gom-latn.js":78454,"./gu":15567,"./gu.js":15567,"./he":92519,"./he.js":92519,"./hi":51767,"./hi.js":51767,"./hr":47644,"./hr.js":47644,"./hu":35169,"./hu.js":35169,"./hy-am":35676,"./hy-am.js":35676,"./id":28564,"./id.js":28564,"./is":30593,"./is.js":30593,"./it":27292,"./it-ch":9502,"./it-ch.js":9502,"./it.js":27292,"./ja":86890,"./ja.js":86890,"./jv":11293,"./jv.js":11293,"./ka":39616,"./ka.js":39616,"./kk":72086,"./kk.js":72086,"./km":28191,"./km.js":28191,"./kn":77751,"./kn.js":77751,"./ko":7919,"./ko.js":7919,"./ku":57107,"./ku.js":57107,"./ky":69400,"./ky.js":69400,"./lb":92178,"./lb.js":92178,"./lo":84342,"./lo.js":84342,"./lt":92697,"./lt.js":92697,"./lv":85340,"./lv.js":85340,"./me":4971,"./me.js":4971,"./mi":6745,"./mi.js":6745,"./mk":2620,"./mk.js":2620,"./ml":7452,"./ml.js":7452,"./mn":26635,"./mn.js":26635,"./mr":72473,"./mr.js":72473,"./ms":27473,"./ms-my":71299,"./ms-my.js":71299,"./ms.js":27473,"./mt":57379,"./mt.js":57379,"./my":29755,"./my.js":29755,"./nb":94051,"./nb.js":94051,"./ne":79868,"./ne.js":79868,"./nl":17700,"./nl-be":86423,"./nl-be.js":86423,"./nl.js":17700,"./nn":50140,"./nn.js":50140,"./oc-lnc":56242,"./oc-lnc.js":56242,"./pa-in":49993,"./pa-in.js":49993,"./pl":33277,"./pl.js":33277,"./pt":91179,"./pt-br":83021,"./pt-br.js":83021,"./pt.js":91179,"./ro":12775,"./ro.js":12775,"./ru":98652,"./ru.js":98652,"./sd":797,"./sd.js":797,"./se":54106,"./se.js":54106,"./si":12942,"./si.js":12942,"./sk":83673,"./sk.js":83673,"./sl":5828,"./sl.js":5828,"./sq":2782,"./sq.js":2782,"./sr":1249,"./sr-cyrl":758,"./sr-cyrl.js":758,"./sr.js":1249,"./ss":92529,"./ss.js":92529,"./sv":80623,"./sv.js":80623,"./sw":19024,"./sw.js":19024,"./ta":31034,"./ta.js":31034,"./te":94619,"./te.js":94619,"./tet":75031,"./tet.js":75031,"./tg":73869,"./tg.js":73869,"./th":15849,"./th.js":15849,"./tk":35316,"./tk.js":35316,"./tl-ph":59149,"./tl-ph.js":59149,"./tlh":26842,"./tlh.js":26842,"./tr":84012,"./tr.js":84012,"./tzl":40925,"./tzl.js":40925,"./tzm":47920,"./tzm-latn":78732,"./tzm-latn.js":78732,"./tzm.js":47920,"./ug-cn":23252,"./ug-cn.js":23252,"./uk":79687,"./uk.js":79687,"./ur":54951,"./ur.js":54951,"./uz":74893,"./uz-latn":4174,"./uz-latn.js":4174,"./uz.js":74893,"./vi":92770,"./vi.js":92770,"./x-pseudo":77542,"./x-pseudo.js":77542,"./yo":74894,"./yo.js":74894,"./zh-cn":87579,"./zh-cn.js":87579,"./zh-hk":1244,"./zh-hk.js":1244,"./zh-mo":48640,"./zh-mo.js":48640,"./zh-tw":25537,"./zh-tw.js":25537};function r(e){e=o(e);return n(e)}function o(e){if(n.o(a,e))return a[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}r.keys=function(){return Object.keys(a)},r.resolve=o,(e.exports=r).id=33795},81483:(e,t,n)=>{var a={"./af":49273,"./af.js":49273,"./ar":5158,"./ar-dz":93262,"./ar-dz.js":93262,"./ar-kw":81562,"./ar-kw.js":81562,"./ar-ly":71154,"./ar-ly.js":71154,"./ar-ma":46608,"./ar-ma.js":46608,"./ar-sa":49278,"./ar-sa.js":49278,"./ar-tn":97920,"./ar-tn.js":97920,"./ar.js":5158,"./az":83439,"./az.js":83439,"./be":63393,"./be.js":63393,"./bg":29557,"./bg.js":29557,"./bm":43555,"./bm.js":43555,"./bn":11415,"./bn-bd":214,"./bn-bd.js":214,"./bn.js":11415,"./bo":6485,"./bo.js":6485,"./br":97073,"./br.js":97073,"./bs":70402,"./bs.js":70402,"./ca":60839,"./ca.js":60839,"./cs":54736,"./cs.js":54736,"./cv":99820,"./cv.js":99820,"./cy":5286,"./cy.js":5286,"./da":23164,"./da.js":23164,"./de":84318,"./de-at":19535,"./de-at.js":19535,"./de-ch":49961,"./de-ch.js":49961,"./de.js":84318,"./dv":87055,"./dv.js":87055,"./el":79855,"./el.js":79855,"./en-au":51090,"./en-au.js":51090,"./en-ca":21916,"./en-ca.js":21916,"./en-gb":97919,"./en-gb.js":97919,"./en-ie":54469,"./en-ie.js":54469,"./en-il":60491,"./en-il.js":60491,"./en-in":97532,"./en-in.js":97532,"./en-nz":34392,"./en-nz.js":34392,"./en-sg":12668,"./en-sg.js":12668,"./eo":4077,"./eo.js":4077,"./es":34126,"./es-do":71098,"./es-do.js":71098,"./es-mx":39636,"./es-mx.js":39636,"./es-us":95269,"./es-us.js":95269,"./es.js":34126,"./et":25710,"./et.js":25710,"./eu":56102,"./eu.js":56102,"./fa":68495,"./fa.js":68495,"./fi":17895,"./fi.js":17895,"./fil":56494,"./fil.js":56494,"./fo":89803,"./fo.js":89803,"./fr":889,"./fr-ca":80124,"./fr-ca.js":80124,"./fr-ch":74504,"./fr-ch.js":74504,"./fr.js":889,"./fy":35202,"./fy.js":35202,"./ga":20979,"./ga.js":20979,"./gd":89117,"./gd.js":89117,"./gl":43675,"./gl.js":43675,"./gom-deva":53080,"./gom-deva.js":53080,"./gom-latn":44723,"./gom-latn.js":44723,"./gu":7247,"./gu.js":7247,"./he":55098,"./he.js":55098,"./hi":34374,"./hi.js":34374,"./hr":37358,"./hr.js":37358,"./hu":3535,"./hu.js":3535,"./hy-am":99615,"./hy-am.js":99615,"./id":43480,"./id.js":43480,"./is":36894,"./is.js":36894,"./it":53881,"./it-ch":40192,"./it-ch.js":40192,"./it.js":53881,"./ja":81370,"./ja.js":81370,"./jv":27631,"./jv.js":27631,"./ka":30816,"./ka.js":30816,"./kk":39638,"./kk.js":39638,"./km":90097,"./km.js":90097,"./kn":83865,"./kn.js":83865,"./ko":62729,"./ko.js":62729,"./ku":20610,"./ku.js":20610,"./ky":56691,"./ky.js":56691,"./lb":19484,"./lb.js":19484,"./lo":39602,"./lo.js":39602,"./lt":84874,"./lt.js":84874,"./lv":48902,"./lv.js":48902,"./me":51738,"./me.js":51738,"./mi":20717,"./mi.js":20717,"./mk":64320,"./mk.js":64320,"./ml":62802,"./ml.js":62802,"./mn":99374,"./mn.js":99374,"./mr":5485,"./mr.js":5485,"./ms":52961,"./ms-my":89867,"./ms-my.js":89867,"./ms.js":52961,"./mt":46368,"./mt.js":46368,"./my":95469,"./my.js":95469,"./nb":75286,"./nb.js":75286,"./ne":70965,"./ne.js":70965,"./nl":8350,"./nl-be":39493,"./nl-be.js":39493,"./nl.js":8350,"./nn":13643,"./nn.js":13643,"./oc-lnc":86112,"./oc-lnc.js":86112,"./pa-in":41166,"./pa-in.js":41166,"./pl":31231,"./pl.js":31231,"./pt":15178,"./pt-br":37134,"./pt-br.js":37134,"./pt.js":15178,"./ro":10214,"./ro.js":10214,"./ru":68566,"./ru.js":68566,"./sd":16740,"./sd.js":16740,"./se":43127,"./se.js":43127,"./si":23710,"./si.js":23710,"./sk":10717,"./sk.js":10717,"./sl":66035,"./sl.js":66035,"./sq":17842,"./sq.js":17842,"./sr":26687,"./sr-cyrl":96931,"./sr-cyrl.js":96931,"./sr.js":26687,"./ss":61254,"./ss.js":61254,"./sv":46994,"./sv.js":46994,"./sw":79762,"./sw.js":79762,"./ta":35771,"./ta.js":35771,"./te":94612,"./te.js":94612,"./tet":73322,"./tet.js":73322,"./tg":80057,"./tg.js":80057,"./th":88395,"./th.js":88395,"./tk":83975,"./tk.js":83975,"./tl-ph":63188,"./tl-ph.js":63188,"./tlh":3656,"./tlh.js":3656,"./tr":82541,"./tr.js":82541,"./tzl":30571,"./tzl.js":30571,"./tzm":29441,"./tzm-latn":22536,"./tzm-latn.js":22536,"./tzm.js":29441,"./ug-cn":51049,"./ug-cn.js":51049,"./uk":44518,"./uk.js":44518,"./ur":12354,"./ur.js":12354,"./uz":94029,"./uz-latn":48181,"./uz-latn.js":48181,"./uz.js":94029,"./vi":58834,"./vi.js":58834,"./x-pseudo":99151,"./x-pseudo.js":99151,"./yo":74290,"./yo.js":74290,"./zh-cn":87444,"./zh-cn.js":87444,"./zh-hk":62399,"./zh-hk.js":62399,"./zh-mo":68058,"./zh-mo.js":68058,"./zh-tw":17284,"./zh-tw.js":17284};function r(e){e=o(e);return n(e)}function o(e){if(n.o(a,e))return a[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}r.keys=function(){return Object.keys(a)},r.resolve=o,(e.exports=r).id=81483},76893:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});n(43378);var v=n(62443),t=n(67154),E=n.n(t),t=n(85354),a=n.n(t),t=n(67294),k=n.n(t),S=n(8201),_=n(98191),w=n(39432),N=n(89212);const O=function(e){var n=e.data,a=e.title,r=e.onChange,o=e.onMsgClick,s=n?n.reduce(function(e,t){return e+t.count},0):0,t=n?n.reduce(function(e,t){return e+t.preCount},0):0,e=a.includes("关注点")?[{name:"全部",count:s,preCount:t}].concat(n):n,t=k().useState(a.includes("关注点")?"全部":"咨询/求助"),i=t[0],c=t[1];return k().useEffect(function(){c(a.includes("关注点")?"全部":"咨询/求助")},[n]),k().createElement("div",{className:"yt_service_card",style:{padding:a.includes("关注点")?"68px 0 0 16px":"56px 0 0 16px"}},a.includes("关注点")&&k().createElement("p",null,"一级关注点"),k().createElement("div",{className:"card_wrap"},e&&e.map(function(t,e){return k().createElement("div",{key:t.name,className:"card_item "+(t.name===i?"card_item_checked":""),onClick:function(){var e;t.name!==i&&(e=t.name,c(e),r("全部"===e?null==n?void 0:n.map(function(e){return e.name}):[e],"name",a))}},k().createElement("div",{className:"top"},k().createElement("span",{className:"name"},t.name),k().createElement("span",{className:"toMsg",onClick:function(){return o("全部"===t.name?null==n?void 0:n.map(function(e){return e.name}):[t.name],"card",a)}},"查看消息")),k().createElement("div",{className:"middle"},1e4<t.count?k().createElement(v.default,{placement:"top",content:k().createElement("div",{style:{fontSize:12}},(0,w.uf)(t.count)),mouseEnterDelay:.4,getPopupContainer:function(){return document.querySelector(".yt_service_card_bar_table")}},k().createElement("span",{className:"count"},(0,w.hE)(t.count))):k().createElement("span",{className:"count"},(0,w.hE)(t.count)),"全部"!==t.name&&k().createElement("span",{className:"percent"},"占比 ",k().createElement("span",null,(0===s?"--":(t.count/s*100).toFixed(2))+"%"))),k().createElement("div",{className:"bottom"},k().createElement("span",{className:"chain"},"环比"),t.count-t.preCount!=0&&0!==t.preCount?k().createElement("span",null,k().createElement("span",null,Math.abs(100*(t.count-t.preCount)/t.preCount).toFixed(2)+"%"),(0,N.Sv)(t.count-t.preCount)):"--"))})))};function T(e,t){var n=0;"WAITER_SESSION_PRODUCT_COMPARE"===t?e.forEach(function(e){e.forEach(function(e){e=parseFloat(e);n<e&&(n=e)})}):e.forEach(function(e){e=parseFloat(e);n<e&&(n=e)});for(var n=Math.ceil(n),a=0;a<4;a++)n%4!=0&&n++;return{intVal:(n=0===n?4:n)/4,maxVal:n}}var r=n(50976),D=n(70715),I=n(87300);const z=function(t){function e(e){var y=t.call(this,e)||this;return y.chartRef=k().createRef(),y.chartLeaveTimeout=void 0,y.renderChart=function(){var e,s,t,r,o,i,c,l,u,p,n=y.props,a=n.title,m=n.dataSource,d=n.showLabel,f=n.totalCount,h=n.totalPreCount,j=n.pageType,g=n.compareData,b=n.onMsgClick,x=y.state,C=x.clickedIndex,n=x.clickedSeriesName;x.clickedName;(0,S.P)(m)&&y.chartRef&&(e=m,s=a,t=d,r=C,o=n,i=f,c=h,u=g,p=b,j="WAITER_SESSION_PRODUCT_COMPARE"===(l=j)?u.map(function(e){return e.name}):["当期","往期"],j={title:{text:s,subtext:s.includes("关注点")?"一级关注点":null,subtextStyle:{color:"#262626",fontSize:14,fontWeight:600,lineHeight:66}},tooltip:{trigger:"axis",showDelay:250,hideDelay:0,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",axisPointer:{type:"none",label:{show:!1}},formatter:function(n,a,r){if(n.length)return setTimeout(function(){var e=n.map(function(e){var t=e.marker,n=e.seriesName;e.data;return{name:"<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+t+"</span>"+n+(s.includes("关注点")?"关注点声量":"话题量")+"</div><div style='color: #262626;font-weight: 500;margin-left: 16px;'>"+(0,w.hE)(e.value)+"</div>"+("WAITER_SESSION_PRODUCT_COMPARE"===l?"":"<div style='color: #8C8C8C;margin-left: 8px;'>"+("往期"===n?0===c?"--":(100*e.value/c).toFixed(2)+"%":0===i?"--":(100*e.value/i).toFixed(2)+"%")+"</div>")+"</div>"}}).map(function(e){return e.name}),t='<span style="font-size: 12px; color: #262626; font-weight: 400">'+n[0].name+"</span>";r(a,(0,I.r)(t,e))},0)}},legend:{left:16,top:s.includes("关注点")?96:66,itemWidth:10,itemHeight:10,itemGap:16,data:j.map(function(e){return{name:e,icon:"circle"}})},grid:{left:60,right:40,top:s.includes("关注点")?140:110,bottom:6<e.length?52:24},dataZoom:{show:6<e.length,bottom:0,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)",startValue:0,endValue:5},xAxis:[{type:"category",axisTick:{show:!1},data:"WAITER_SESSION_PRODUCT_COMPARE"===l?["咨询/求助","赞扬","不满/辱骂"]:e.map(function(e){return e.name}),axisLabel:{color:"#626262",formatter:function(e){return 6<e.length?e.substring(0,6)+"...":e}}}],yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return(0,w.hE)(e)}},interval:T("WAITER_SESSION_PRODUCT_COMPARE"===l?e.map(function(e){return e.list}).map(function(e){return e.map(function(e){return e.count})}):[].concat(e.map(function(e){return e.count}),e.map(function(e){return e.preCount})),l).intVal,max:T("WAITER_SESSION_PRODUCT_COMPARE"===l?e.map(function(e){return e.list}).map(function(e){return e.map(function(e){return e.count})}):[].concat(e.map(function(e){return e.count}),e.map(function(e){return e.preCount})),l).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},series:"WAITER_SESSION_PRODUCT_COMPARE"===l?u.map(function(n,a){return{name:n.name,type:"bar",barGap:0,barMaxWidth:24,label:{show:t,position:"top",color:"#262626",offset:0===a&&1<u.length||4===u.length&&1===a?[-5,0]:a===u.length-1&&1<u.length||4===u.length&&2===a?[5,0]:[0,0]},emphasis:{focus:"series"},z:3===u.length&&1===a||4===u.length&&1===a||4===u.length&&2===a?3:2,data:e&&e.some(function(e){return e.name===n.name})?e.find(function(e){return e.name===n.name}).list.map(function(e,t){return{value:e.count,itemStyle:{color:-1===r||r===t&&o===n.name?D.OW[a]:"#bfbfbf"},tooltip:{trigger:"item",hideDelay:150,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,n,a,r){var o=r.contentSize,s=r.viewSize,i=e[0]<s[0]/2?0:-1,r=e[1]<s[1]/2?-.5:-1,s=e[0]<s[0]/2?12:-12;return[e[0]+i*o[0]+s,e[1]+r*o[1]]},formatter:function(a,r,o){return setTimeout(function(){var e=a.seriesName,t=a.name,n=a.value,t="\n                <span style='font-size: 12px;font-weight: 400;color:#262626;'>\n                  "+t+"\n                </span>\n                ",n=[a.marker+" "+e+'话题量\n                        <span style="float: right; font-weight: 500; color: #262626; margin-left: 16px;">\n                  '+(0,w.hE)(n)+"</span>"];o(r,(0,I.r)(t,n,[{title:"消息",icon:"icon-cem_jump-message",callback:function(){return p(a,"bar",s)}}],"yt_new_tooltip_wrapper"))},0)}}}}):[]}}):[{name:"当期",type:"bar",barGap:0,barMaxWidth:24,label:{show:t,position:"top",color:"#262626",offset:[-5,0]},emphasis:{focus:"series"},data:e.map(function(e,t){return{value:e.count,itemStyle:{color:-1===r||r===t&&"当期"===o?"#1890ff":"#bfbfbf"},tooltip:{trigger:"item",hideDelay:200,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,n,a,r){var o=r.contentSize,s=r.viewSize,i=e[0]<s[0]/2?0:-1,r=e[1]<s[1]/2?-.5:-1,s=e[0]<s[0]/2?12:-12;return[e[0]+i*o[0]+s,e[1]+r*o[1]]},formatter:function(a,r,o){return setTimeout(function(){var e=a.seriesName,t=a.name,n=a.value,t="\n                <span style='font-size: 12px;font-weight: 400;color:#262626;'>\n                  "+t+"\n                </span>\n                ",n=[a.marker+" "+e+(s.includes("关注点")?"关注点声量":"话题量")+'<span style="float: right; font-weight: 500; color: #262626; margin-left: 16px;">\n                  '+(0,w.hE)(n)+'<span style="color: #8C8C8C; margin-left: 8px;">\n                  '+(0===i?"--":(n/i*100).toFixed(2)+"%")+"</span></span>"];o(r,(0,I.r)(t,n,[{title:"消息",icon:"icon-cem_jump-message",callback:function(){return p(a,"bar",s)}}],"yt_new_tooltip_wrapper"))},0)}}}})},{name:"往期",type:"bar",label:{show:t,position:"top",color:"#262626",offset:[5,0]},barMaxWidth:24,emphasis:{focus:"series"},data:e.map(function(e,t){return{value:e.preCount,itemStyle:{color:-1===r||r===t&&"往期"===o?"#60DDA9":"#bfbfbf"},tooltip:{trigger:"item",hideDelay:200,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,n,a,r){var o=r.contentSize,s=r.viewSize,i=e[0]<s[0]/2?0:-1,r=e[1]<s[1]/2?-.5:-1,s=e[0]<s[0]/2?12:-12;return[e[0]+i*o[0]+s,e[1]+r*o[1]]},formatter:function(a,r,o){return setTimeout(function(){var e=a.seriesName,t=a.name,n=a.value,t="\n                <span style='font-size: 12px;font-weight: 400;color:#262626;'>\n                  "+t+"\n                </span>\n                ",n=[a.marker+" "+e+(s.includes("关注点")?"关注点声量":"话题量")+'<span style="float: right; font-weight: 500; color: #262626; margin-left: 16px;">\n                  '+(0,w.hE)(n)+'<span style="color: #8C8C8C; margin-left: 8px;">\n                  '+(0===c?"--":(n/c*100).toFixed(2)+"%")+"</span></span>"];o(r,(0,I.r)(t,n,[{title:"消息",icon:"icon-cem_jump-message",callback:function(){return p(a,"bar",s)}}],"yt_new_tooltip_wrapper"))},0)}}}})}]},y.chartRef.clear(),y.chartRef.setOption(j))},y._handleOnChartClick=function(e){var t=y.props,n=t.dataSource,a=t.onChange,r=t.onBarTypeChange,o=t.title,s=t.pageType,i=t.compareData,c=t.oriCompareData,l=e.seriesName,u=(e.value,e.dataIndex),p=e.name,m=e.seriesIndex,t=y.state,d=t.clickedName,e=t.clickedIndex,f=t.clickedSeriesName;y.setState({clickedSeriesName:u===e&&l===f?"":l,clickedIndex:u===e&&l===f?-1:u,clickedName:p},function(){var e;"WAITER_SESSION_PRODUCT_COMPARE"===s?(e=!c||!i||null!=c&&c.some(function(e){return e.name===l})?l:c[null==i?void 0:i.findIndex(function(e){return e.name===l})],p===d&&y.state.clickedSeriesName?a([p],"name",o,m,y.state.clickedSeriesName?l:null):a(y.state.clickedSeriesName?[p]:["咨询/求助","赞扬","不满/辱骂"],"name",o,y.state.clickedSeriesName?m:0,y.state.clickedSeriesName?e:null)):(p===d&&y.state.clickedSeriesName?p!==d||f||a([p],"name",o):a(y.state.clickedSeriesName?[p]:null==n?void 0:n.map(function(e){return e.name}),"name",o),r("当期"!==l&&y.state.clickedSeriesName?"preCount":"count"))})},y.state={clickedIndex:-1,clickedSeriesName:"",clickedName:e.data&&e.data[0].name},y}a()(e,t);var n=e.prototype;return n.componentDidMount=function(){var e,t,n,a=this;this.chartRef&&(this.renderChart(),t=(e=this.chartRef._dom.children)[0],n=e[1],t.addEventListener("mouseleave",function(e){a.chartLeaveTimeout=setTimeout(function(){a.chartLeaveTimeout&&(n.style.display="none")},2e3)}),n&&n.addEventListener("mouseenter",function(e){a.chartLeaveTimeout=void 0}))},n.componentDidUpdate=function(e,t){var n=e.dataSource,a=e.showLabel,r=e.compareData,o=this.props,s=o.dataSource,i=o.showLabel,c=o.compareData,l=t.clickedIndex,e=t.clickedSeriesName,o=this.state,t=o.clickedIndex,o=o.clickedSeriesName;(0,S.P)(s)&&JSON.stringify(n)!==JSON.stringify(s)&&(this.renderChart(),this.setState({clickedName:s[0].name,clickedIndex:-1,clickedSeriesName:""})),a===i&&l===t&&e===o&&JSON.stringify(r)===JSON.stringify(c)||this.renderChart(),!(0,S.P)(s)&&this.chartRef&&(this.chartRef=void 0)},n.render=function(){var t=this,e=this.props;e.title,e.showLabel;return k().createElement("div",{className:"yt_service_bar_chart"},k().createElement(r.Z,{theme:"yt_multi_color_10",option:{},style:{width:"100%",height:"100%"},onEvents:{click:this._handleOnChartClick},onChartReady:function(e){return t.chartRef=e}}))},e}(k().Component);n(54067);var P=n(64713),R=(n(35797),n(64749)),M=n(8733),A=n(43036),F=[{label:"环比（按数量）",value:"Count"},{label:"环比（按占比）",value:"Percent"}],Y=[{label:"环比（按声量）",value:"Count"},{label:"环比（按占比）",value:"Percent"}],L=[{title:"图表",value:"c0",icon:"icon-zhuzhuangtu"},{title:"表格",value:"c1",icon:"icon-biaoge1"}],t=[{name:"赠品",count:15456,preCount:14924},{name:"返现",count:1904,preCount:3198},{name:"预定",count:1721,preCount:2158},{name:"晒单",count:1625,preCount:1847},{name:"红包",count:1424,preCount:2156},{name:"优惠券",count:1352,preCount:1039},{name:"首发",count:838,preCount:944},{name:"保价",count:674,preCount:548},{name:"中奖",count:433,preCount:457},{name:"分期免息",count:398,preCount:363},{name:"满减送",count:288,preCount:330},{name:"会员",count:239,preCount:221},{name:"包邮",count:222,preCount:244},{name:"开售",count:123,preCount:101},{name:"秒杀",count:112,preCount:92}];t.reduce(function(e,t){return e+t.count},0),t.reduce(function(e,t){return e+t.preCount},0);const W=function(e){function n(e){b(E()({},e,{barType:"count"===f?"当期":"往期",compareIndex:null==m?void 0:m.findIndex(function(e){return e.name===C})}),"table",a)}var t=e.pageType,a=e.title,r=e.data,o=e.totalCount,s=e.totalPreCount,i=e.loading,c=e.onChange,l=e.chainValue,u=e.onChainValueChange,p=e.compareSpu,m=e.compareData,d=e.oriCompareData,f=e.barType,h=e.pageIndex,j=e.pageSize,g=e.onPageChange,b=e.onMsgClick,x=k().useState(p||m&&m.length?m[0].name:void 0),C=x[0],y=x[1],e=function(e){u(e)};k().useEffect(function(){void 0!==p&&y(p||m[0].name)},[p]),k().useEffect(function(){m&&y(m[0].name)},[d]);x="WAITER_SESSION_PRODUCT_COMPARE"===t?[{title:"",width:"0.1%"},{title:"序号",dataIndex:"num",width:"15%",render:function(e,t,n){return t.index}},{title:"话题内容",dataIndex:"name",width:"50%",render:function(e,t){return k().createElement("span",{className:"allipsis"},t.name)}},{title:"话题量",dataIndex:"count",width:"20%",render:function(e,t){return(0,w.uf)(t[f])}},{title:"操作",width:"15%",dataIndex:"operate",render:function(e,t){return k().createElement("span",{onClick:function(){return n(t)},className:"toMsg"},"查看消息")}}]:a.includes("关注点")?[{title:"",width:"0.1%"},{title:"序号",dataIndex:"num",width:"10%",render:function(e,t,n){return t.index}},{title:"关注点",width:"20%",dataIndex:"name"},{title:"声量",width:"20%",dataIndex:"count",render:function(e,t){return(0,w.uf)(t[f])}},{title:k().createElement("span",null,"占比",k().createElement(A.Z,{placement:"top",overlay:"占比 = 单个关注点的关注点声量÷所有关注点的关注点声量总和"},k().createElement("i",{className:"icon-cem_file1",style:{marginLeft:8}}))),dataIndex:"percent",width:"20%",render:function(e,t){return k().createElement("span",{style:{display:"inline-block",textAlign:"right"}},"preCount"===f?0===t.prePercent?"--":1===t.prePercent?"100%":(100*t.prePercent).toFixed(2)+"%":0===t.percent?"--":1===t.percent?"100%":(100*t.percent).toFixed(2)+"%")}},{title:k().createElement(R.default,{dropdownClassName:"chain_ratio_dropdown",bordered:!1,value:l,onChange:e,suffixIcon:k().createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{fontSize:"16px",color:"#8c8c8c"}})},Y.map(function(e){return k().createElement(R.default.Option,{value:e.value,key:e.value},e.label)})),dataIndex:"chainRatio",width:"20%",render:function(e,t){return k().createElement("span",null,"preCount"===f||0===Number(t["pre"+l].toFixed(4))||Number(t[""+l.toLowerCase()].toFixed(4))-Number(t["pre"+l].toFixed(4))==0?k().createElement("span",{style:{display:"inline-block",width:102,textAlign:"center"}},"--"):k().createElement("span",null,k().createElement("span",{style:{display:"inline-block",width:68,textAlign:"right"}},Math.abs(100*(t[""+l.toLowerCase()].toFixed(4)-t["pre"+l].toFixed(4))/t["pre"+l].toFixed(4)).toFixed(2)+"%"),(0,N.Sv)(t[""+l.toLowerCase()]-t["pre"+l])))}},{title:"操作",width:"15%",dataIndex:"operate",render:function(e,t){return k().createElement("span",{onClick:function(){return n(t)},className:"toMsg"},"查看消息")}}]:a.includes("话题")?[{title:"",width:"0.1%"},{title:"序号",width:"10%",dataIndex:"num",render:function(e,t,n){return t.index}},{title:"话题",width:"30%",dataIndex:"name",render:function(e,t){return k().createElement("span",{className:"topic_content ellipsis"},t.name)}},{title:"数量",width:"15%",dataIndex:"count",render:function(e,t){return(0,w.uf)(t[f])}},{title:k().createElement("span",null,"占比",k().createElement(A.Z,{placement:"top",overlay:"占比 = 单个话题的话题量÷所有话题的话题量总和"},k().createElement("i",{className:"icon-cem_file1",style:{marginLeft:8}}))),dataIndex:"percent",width:"15%",render:function(e,t){return k().createElement("span",{style:{display:"inline-block",textAlign:"right"}},"preCount"===f?0===t.prePercent?"--":1===t.prePercent?"100%":(100*t.prePercent).toFixed(2)+"%":0===t.percent?"--":1===t.percent?"100%":(100*t.percent).toFixed(2)+"%")}},{title:k().createElement(R.default,{dropdownClassName:"chain_ratio_dropdown",bordered:!1,value:l,onChange:e,suffixIcon:k().createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{fontSize:"16px",color:"#8c8c8c"}})},F.map(function(e){return k().createElement(R.default.Option,{value:e.value,key:e.value},e.label)})),dataIndex:"chainRatio",width:"15%",render:function(e,t){return k().createElement("span",null,"preCount"===f||0===Number(t["pre"+l].toFixed(4))||Number(t[""+l.toLowerCase()].toFixed(4))-Number(t["pre"+l].toFixed(4))==0?k().createElement("span",{style:{display:"inline-block",width:102,textAlign:"center"}},"--"):k().createElement("span",null,k().createElement("span",{style:{display:"inline-block",width:68,textAlign:"right"}},Math.abs(100*(t[""+l.toLowerCase()].toFixed(4)-t["pre"+l].toFixed(4))/t["pre"+l].toFixed(4)).toFixed(2)+"%"),(0,N.Sv)(t[""+l.toLowerCase()]-t["pre"+l])))}},{title:"操作",dataIndex:"operate",width:"15%",render:function(e,t){return k().createElement("span",{className:"toMsg",onClick:function(){return n(t)}},"查看消息")}}]:[],e=a.includes("关注点")?r&&r.sort(function(e,t){return t[f]-e[f]}).map(function(e,t){return E()({},e,{index:t+1,percent:0!==o&&o?e.count/o:0,prePercent:0!==s&&s?e.preCount/s:0})}):r&&r.map(function(e,t){return E()({},e,{index:t+1,percent:0!==o&&o?e.count/o:0,prePercent:0!==s&&s?e.preCount/s:0})});return k().createElement(M.ZP,{columns:x,loading:i,rowKey:"name",className:"yt_service_common_table_wrapper "+("WAITER_SESSION_PRODUCT_COMPARE"===t?"service_compare_table":"")+" "+(null!=e&&e.length&&void 0!==e?"":"empty_data"),pagination:{pageSizeOptions:["10","20","50"],defaultPageSize:j,total:r instanceof Array?r.length:0,onChange:g,current:h,pageSize:j},dataSource:e,search:!1,style:{wordBreak:"break-all"},scroll:{y:470},headerTitle:k().createElement(k().Fragment,null,a.includes("关注点")&&k().createElement("p",{className:"aspect_title"},"二级关注点"),"WAITER_SESSION_PRODUCT_COMPARE"===t&&m&&k().createElement(P.default.Group,{value:C,onChange:function(e){var t=e.target.value;setTimeout(function(){y(t)},0),d&&m&&c(d[null==m?void 0:m.findIndex(function(e){return e.name===t})],"sku",a)}},m.map(function(e){return k().createElement(P.default.Button,{value:e.name,key:e.name,disabled:p&&e.name!==p},e.name)}))),options:!1})};var U=n(60496),f=n(94644);const o=function(o){function e(e){var d=o.call(this,e)||this;d.barChartRef=k().createRef(),d.onExportExcel=function(){var n,e=d.state,t=e.newData,a=(e.chainValue,e.barType),r=e.chartType,o=e.compareSpu,s=d.props,i=s.data,c=s.pageType,l=s.title,u=s.totalCount,p=s.totalPreCount,m=s.compareData;(0,S.P)(i)&&(e="WAITER_SESSION_PRODUCT_COMPARE"===c?["商品","话题分类","话题量"]:l.includes("关注点")?"c1"===r?["关注点","声量","环比","占比","趋势"]:["关注点","当期声量","往期声量"]:l.includes("话题")?"c1"===r?["话题分类","数量","环比","占比","趋势"]:["话题分类","当期数量","往期数量"]:[],i="WAITER_SESSION_PRODUCT_COMPARE"===c?i&&(n=[],((s=i)&&s instanceof Array?(s.forEach(function(t){t.list.forEach(function(e){n.push(E()({spu:t.name},e))})}),n):s).reduce(function(e,t){return[].concat(e,[[t.spu,t.aspect1,t.count]])},[e])):"c1"===r&&l.includes("关注点")?i&&[{name:"全部",count:u,preCount:p}].concat(i).reduce(function(e,t){return[].concat(e,[[t.name,t.count,0===t.preCount?"--":(100*(t.count-t.preCount)/t.preCount).toFixed(2)+"%",0!==u&&u?"全部"===t.name?"":(100*t.count/u).toFixed(2)+"%":"--",0===t.preCount?"--":t.count>t.preCount?"上升":"下降"]])},[e]):i&&i.reduce(function(e,t){return[].concat(e,["c1"===r?[t.name,t.count,0===t.preCount?"--":(100*(t.count-t.preCount)/t.preCount).toFixed(2)+"%",0!==u&&u?(100*t.count/u).toFixed(2)+"%":"--",0===t.preCount?"--":t.count>t.preCount?"上升":"下降"]:[t.name,t.count,t.preCount]])},[e]),e="WAITER_SESSION_PRODUCT_COMPARE"===c?["序号","话题分类","话题内容","话题量"]:l.includes("关注点")?["序号","一级关注点","二级关注点","声量","占比","环比（按声量）","环比（按占比）"]:l.includes("话题")?["序号","话题分类","话题","数量","占比","环比（按数量）","环比（按占比）"]:[],e="WAITER_SESSION_PRODUCT_COMPARE"===c?t&&t.reduce(function(e,t){return[].concat(e,[[t.index,t.aspect1,t.name,t.count]])},[e]):t&&t.reduce(function(e,t){return[].concat(e,[[t.index,t.aspect1,t.name,t[a],"preCount"===a?0===t.prePercent?"--":Number(100*t.prePercent).toFixed(2)+"%":0===t.percent?"--":Number(100*t.percent).toFixed(2)+"%","preCount"===a||0===t.preCount||t.count-t.preCount==0?"--":(100*(t.count.toFixed(4)-t.preCount.toFixed(4))/t.preCount.toFixed(4)).toFixed(2)+"%","preCount"===a||0===Number(t.prePercent.toFixed(4))||Number(t.percent.toFixed(4))-Number(t.prePercent.toFixed(4))==0?"--":(100*(t.percent.toFixed(4)-t.prePercent.toFixed(4))/t.prePercent.toFixed(4)).toFixed(2)+"%"]])},[e]),(0,f.aT)([i,e],l,["数据统计","WAITER_SESSION_PRODUCT_COMPARE"===c?(o||m[0].name)+"话题内容":l.includes("话题")?"话题内容":"关注点"]))},d.onExportImage=function(){var e=d.state.chartType,t=d.props.title;"c1"!==e&&(0,f._v)(d.barChartRef.chartRef,t)},d.onPageChange=function(e,t){d.setState({pageIndex:e,pageSize:t})},d.onChange=function(e,t,n,a,r){d.props.onChange(e,t,n,a),d.setState({pageIndex:1,compareSpu:r})},d.onChartTypeChange=function(e){var t=d.props,n=t.title,a=t.onChartTypeChange,t=t.data;"c1"===e?d.onChange(n.includes("关注点")?t&&t instanceof Array&&t.map(function(e){return e.name}):[t&&t[0]&&t[0].name],"name",n):d.onChange(t&&t instanceof Array&&t.map(function(e){return e.name}),"name",n),d.setState({chartType:e,barType:"count"}),a&&a(e)};var t=e.pageType,n=(e.data,e.tableData),a=e.totalCount,r=e.totalPreCount,e=e.chartType;return d.state={pageIndex:1,pageSize:10,chartType:e||"WAITER_SESSION_PRODUCT_COMPARE"!==t?"c1":void 0,barType:"count",showLabel:!1,chainValue:"Count",newData:n&&n instanceof Array?n.map(function(e,t){return E()({},e,{index:t+1,percent:0!==a&&a?e.count/a:0,prePercent:0===r||!e.preCount||r?0:e.preCount/r})}):n,compareSpu:void 0},d}a()(e,o);var t=e.prototype;return t.componentDidUpdate=function(e,t){var n=e.tableData,a=e.chartType,r=e.compareData,o=this.props,s=o.tableData,i=o.totalCount,c=o.totalPreCount,e=o.chartType,o=o.compareData;JSON.stringify(n)!==JSON.stringify(s)&&this.setState({newData:s&&s instanceof Array?s.map(function(e,t){return E()({},e,{index:t+1,percent:0!==i&&i?e.count/i:0,prePercent:0!==c&&e.preCount&&c?e.preCount/c:0})}):s,pageIndex:1}),JSON.stringify(a)!==JSON.stringify(e)&&e&&this.setState({chartType:e,barType:"count",pageIndex:1}),JSON.stringify(r)!==JSON.stringify(o)&&o&&this.setState({compareSpu:void 0})},t.render=function(){var t=this,e=this.props,n=e.title,a=e.titleOverlay,r=e.loading,o=e.tableLoading,s=e.data,i=e.pageType,c=e.totalCount,l=e.totalPreCount,u=e.compareData,p=e.oriCompareData,m=e.emptyFilterHint,d=e.onChange,f=e.onMsgClick,h=this.state,j=h.chartType,g=h.showLabel,b=h.barType,x=h.chainValue,C=h.newData,y=h.pageIndex,e=h.pageSize,h=h.compareSpu;return k().createElement(S.Z,{className:"yt_service_card_bar_table",loading:r,data:s,emptyFilterHint:m,renderTitle:k().createElement(_.Z,{title:n,titleOverlay:a,data:"c1"===j?void 0:s},j&&k().createElement(U.Z,{options:L,activeObj:j,rightHook:!0,onChange:this.onChartTypeChange}),k().createElement(v.default,{placement:"top",content:"显示图表标签",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},k().createElement("i",{className:"icon-tubiaobiaoqian "+(g?"active":"")+" "+("c1"===j?"disabled":""),onClick:function(){"c1"!==j&&t.setState({showLabel:!g})}})),k().createElement(v.default,{placement:"top",content:"导出数据",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},k().createElement("i",{className:"icon-daochu",onClick:this.onExportExcel})),k().createElement(v.default,{placement:"top",content:"导出图片",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},k().createElement("i",{className:"icon-xiazaitupian  "+("c1"===j?"disabled":""),onClick:this.onExportImage})))},k().createElement(k().Fragment,null,("c0"===j||!j)&&k().createElement(z,{dataSource:s,title:n,showLabel:g,onChange:this.onChange,onBarTypeChange:function(e){t.setState({barType:e})},compareData:u,pageType:i,totalCount:c,totalPreCount:l,ref:function(e){return t.barChartRef=e},onMsgClick:f}),"c1"===j&&k().createElement(O,{onChange:this.onChange,data:s,title:n,onMsgClick:f})),k().createElement(W,{pageType:i,compareData:u,oriCompareData:p,data:C,totalCount:c,totalPreCount:l,compareSpu:h,title:n,loading:o,barType:b,onChange:d,pageIndex:y,pageSize:e,chainValue:x,onChainValueChange:function(e){t.setState({chainValue:e})},onPageChange:this.onPageChange,onMsgClick:f}))},e}(k().Component)},89212:(e,t,n)=>{"use strict";n.d(t,{Sv:()=>i,yz:()=>c,LV:()=>function(e,t){switch(t){case"HOUR":return{from:s()(e).format("YYYY-MM-DD HH:00:00"),to:s()(e).format("YYYY-MM-DD HH:59:59")};case"DAY":default:return{from:s()(e).format("YYYY-MM-DD HH:00:00"),to:s()(e).format("YYYY-MM-DD 23:59:59")}}}});var t=n(67154),r=n.n(t),t=n(67294),a=n.n(t),o=n(33798),t=n(30381),s=n.n(t),i=function(e){return"number"==typeof e&&e?a().createElement(o.Z,{style:{fontSize:"12px",margin:"0 10px",cursor:"default"},defaultIcon:0<e?"shangsheng":"xiajiang",activeIcon:0<e?"shangsheng":"xiajiang"}):"--"},c=function(e){if(e){var t=e.numOfDays,n=e.from,a=(e.to,e.date);return r()({},e,{from:("month"===a?s()(n).subtract(1,"months").startOf("month"):"1"===a?s()(n).subtract(1,"days").startOf("day"):s()(n).subtract(1,"days").subtract(t,"days")).format("YYYY-MM-DD"),to:("month"===a?s()(n).subtract(1,"months").endOf("month"):"1"===a?s()(n).subtract(1,"days").endOf("day"):s()(n).subtract(1,"days")).format("YYYY-MM-DD"),quickChoice:"month"===a?s()(n).subtract(1,"months").startOf("month").format("YYYY-MM-DD")+" - "+s()(n).subtract(1,"months").endOf("month").format("YYYY-MM-DD"):s()(n).subtract(1,"days").subtract(t,"days").format("YYYY.MM.DD")+" - "+s()(n).subtract(1,"days").format("YYYY.MM.DD")})}return e}}}]);