(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62],{Tznr:function(e,a,t){e.exports={main:"main___Y1eZD",tabStyle:"tabStyle___h9mGW",commitButton:"commitButton___KlGqJ",login:"login___321Tg"}},ZriK:function(e,a,t){e.exports={main:"main___tb4cM",capture:"capture___1MtNu"}},a3w7:function(e,a,t){"use strict";t.r(a);var n=t("k1fw"),r=t("0Owb"),c=t("fWQN"),i=t("mtLc"),s=t("yKVA"),l=t("879j"),o=t("q1tI"),m=t.n(o),u=t("9kvl"),p=(t("y8nQ"),t("Vl3Y")),d=(t("+L6B"),t("2/Rp")),f=(t("Znn+"),t("ZTPi")),h=t("tJVT"),g=t("55Ip"),E=(t("5NDa"),t("5rEg")),v=t("l244"),C=t("MGYb"),w=[],b=[],y=function(e){var a=e.required;return m.a.createElement(m.a.Fragment,null,m.a.createElement(p["a"].Item,{name:"username",rules:[{required:a,message:"\u8bf7\u8f93\u5165\u8d26\u53f7"}].concat(w)},m.a.createElement(E["a"],{size:"large",placeholder:"\u8d26\u53f7",prefix:m.a.createElement(v["a"],{style:{marginRight:8}}),maxLength:11})),m.a.createElement(p["a"].Item,{name:"password",rules:[{required:a,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}].concat(b)},m.a.createElement(E["a"].Password,{size:"large",placeholder:"\u5bc6\u7801",prefix:m.a.createElement(C["a"],{style:{marginRight:8}})})))},k=y,_=t("FQ2w"),O=(t("14J3"),t("BMrR")),j=(t("jCWc"),t("kPKH")),q=t("cGnJ"),R=t("KjXk"),I=[],x=function(e){var a=e.countDown,t=e.onClick,n=e.required,r=m.a.useState(!1),c=Object(h["a"])(r,2),i=c[0],s=c[1],l=m.a.useState(a||0),o=Object(h["a"])(l,2),u=o[0],f=o[1],g=function(){t()},v=function(e){var a=e.data;a.type===R["a"].sendCodeSuccessed&&s(!0)};return m.a.useEffect((function(){return window.addEventListener("message",v,!1),function(){return window.removeEventListener("message",v)}}),[]),m.a.useEffect((function(){var e=0;return i&&(e=window.setInterval((function(){f((function(t){return t<=1?(s(!1),clearInterval(e),a||60):t-1}))}),1e3)),function(){return clearInterval(e)}}),[i]),m.a.createElement(O["a"],{gutter:16},m.a.createElement(j["a"],{span:16},m.a.createElement(p["a"].Item,{name:"smsCode",rules:[{required:n,message:"\u8bf7\u8f93\u5165\u624b\u673a\u9a8c\u8bc1\u7801\uff01"}].concat(I)},m.a.createElement(E["a"],{size:"large",placeholder:"\u9a8c\u8bc1\u7801",prefix:m.a.createElement(q["a"],{style:{marginRight:8}})}))),m.a.createElement(j["a"],{span:8},m.a.createElement(d["a"],{disabled:i,style:{width:"100%"},size:"large",onClick:g},i?"".concat(u," \u79d2"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")))},z=x,F=t("ZriK"),N=t.n(F),T=[],S=function(){return"/api/v1/security/captcha/image.jpg?t=".concat((new Date).getTime())},J=function(e){var a=e.required,t=m.a.useState(S()),n=Object(h["a"])(t,2),r=n[0],c=n[1],i=function(){c(S())};return m.a.createElement("div",{className:N.a.main},m.a.createElement(O["a"],{gutter:16},m.a.createElement(j["a"],{span:16},m.a.createElement(p["a"].Item,{name:"captchaCode",rules:[{required:a,message:"\u8bf7\u8f93\u5165\u56fe\u5f62\u7801\uff01"}].concat(T)},m.a.createElement(E["a"],{placeholder:"\u56fe\u5f62\u7801",size:"large",prefix:m.a.createElement(C["a"],{style:{marginRight:8}})}))),m.a.createElement(j["a"],{span:8},m.a.createElement("span",{className:N.a.capture},m.a.createElement("img",{src:r,alt:"captcha",onClick:i})))))},K=J,L=[{pattern:/^1\d{10}$/,message:"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\uff01"}],P=function(e){var a=e.onClick,t=e.required;return m.a.createElement(m.a.Fragment,null,m.a.createElement(p["a"].Item,{name:"phone",rules:[{required:t,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\uff01"}].concat(L)},m.a.createElement(E["a"],{size:"large",placeholder:"\u624b\u673a\u53f7",prefix:m.a.createElement(_["a"],{style:{marginRight:8}}),maxLength:11})),m.a.createElement(K,{required:t}),m.a.createElement(z,{countDown:60,onClick:a,required:t}))},B=P,D=t("Tznr"),Z=t.n(D),G=m.a.forwardRef((function(e,a){var t=e.onFinish,n=e.onCodeClick,r=m.a.useState("password"),c=Object(h["a"])(r,2),i=c[0],s=c[1],l=function(e){t(e,i)};return m.a.createElement(p["a"],{onFinish:l,ref:a,className:Z.a.main},m.a.createElement(f["a"],{onChange:s,className:Z.a.tabStyle},m.a.createElement(f["a"].TabPane,{tab:"\u5bc6\u7801\u6ce8\u518c",key:"password"},m.a.createElement(k,{required:"password"===i})),m.a.createElement(f["a"].TabPane,{tab:"\u624b\u673a\u53f7\u6ce8\u518c",key:"phone"},m.a.createElement(B,{onClick:n,required:"phone"===i}))),m.a.createElement(p["a"].Item,null,m.a.createElement(d["a"],{size:"large",type:"primary",htmlType:"submit",className:Z.a.commitButton},"\u767b\u5f55")),m.a.createElement("section",{className:Z.a.login},m.a.createElement(g["a"],{to:"/user/login"},"\u767b\u5f55\u8d26\u6237")))})),M=G,Q=function(e){Object(s["a"])(t,e);var a=Object(l["a"])(t);function t(e){var n;return Object(c["a"])(this,t),n=a.call(this,e),n.events=void 0,n.handleOnFinishClick=function(e,a){var t,r=e.username,c=e.password,i=e.phone,s=e.smsCode,l=n.props.ref.current;"password"===a?t={type:a,form:l,params:{username:r,password:c}}:"phone"===a&&(t={type:a,form:l,params:{phone:i,smsCode:s}}),n.props.userRegister(t)},n.handleOnCodeClick=function(){var e=n.props,a=e.ref.current,t=e.fetchRegisterCode;a.validateFields(["phone","captchaCode"]).then((function(e){var a=e.phone,n=e.captchaCode;t({phone:a,captchaCode:n})}))},n.state={},n.events={onFinish:n.handleOnFinishClick,onCodeClick:n.handleOnCodeClick},n}return Object(i["a"])(t,[{key:"render",value:function(){return m.a.createElement(M,Object(r["a"])({},this.props,this.state,this.events))}}]),t}(m.a.Component);Q.defaultProps={ref:m.a.createRef()};var V=function(e){var a=e.user;e.loading;return Object(n["a"])({},a)},W=function(e){return{userRegister:function(a){return e({type:"user/userRegister",payload:a})},fetchRegisterCode:function(a){return e({type:"user/fetchRegisterCode",payload:a})}}};a["default"]=Object(u["a"])(V,W)(Q)}}]);