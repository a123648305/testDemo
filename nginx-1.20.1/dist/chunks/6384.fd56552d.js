"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6384],{61498:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M});var n={};r.r(n),r.d(n,{FilterKey:()=>c,OptType:()=>s,RoleCode:()=>p,authorityCode:()=>d,filterCodeOptions:()=>E,isDefaultExpandAll:()=>R,titleOverlay:()=>f});var o={};r.r(o),r.d(o,{addRole:()=>L,delRole:()=>y,fetchAllAuth:()=>C,fetchList:()=>S,fetchRelation:()=>g,fetchRoleDetail:()=>v,updateRole:()=>k});var i={};r.r(i),r.d(i,{filterTreeData:()=>N,findLeafNode:()=>J,getBreadcrumbTitle:()=>A,handleSkip:()=>b,transformTreeData:()=>D});var u=r(67294),a=r(55815),l=r(11186),c="projectId",p={ROLE_SUPER:"SYS_ROLE_PROJECT_ROLE_SUPER",SYS_ROLE_PROJECT_ROLE:"SYS_ROLE_PROJECT_ROLE",SYS_ROLE_PROJECT_USER:"SYS_ROLE_PROJECT_USER"},s={ADD:"\u6dfb\u52a0",EDIT:"\u7f16\u8f91",COPY:"\u590d\u5236"},d={skipToList:"PROJECT_MEMBER"},E=["PROJECT_MEMBER","PROJECT_ROLE_PERMISSION"],f="\u4e0d\u80fd\u62e5\u6709\u300c\u6210\u5458\u7ba1\u7406\u300d\u548c\u300c\u89d2\u8272\u4e0e\u6743\u9650\u300d\u4e24\u4e2a\u914d\u7f6e\u6743\u9650\u3002",R=!0,_=r(87462),m=r(49722),h=r(35239),O=h.t.get(h.V.curProject).id,T="PROJECT_ROLE",P="APP_NAME_SERVER",S=function(){var e={appName:P,roleType:T,projectId:O};return m.h.post("/upms/umps_role/not_page/list",e)},C=function(){return m.h.post("/upms/permission/setting/find",{type:"PROJECT",projectId:O})},L=function(e){return m.h.post("/upms/umps_role/add",(0,_.Z)({},e,{roleType:T,projectId:O}))},v=function(e){var t=[e.roleId];return m.h.post("/upms/umps_role/app/find",{roleIds:t,appName:P})},y=function(e){return e.status="DELETED",m.h.post("/upms/umps_role/status/update",e)},g=function(e){e.roleType=T;var t=new FormData;return Object.keys(e).forEach((function(r){return t.append(r,e[r])})),m.h.post("/upms/umps_role/relation/find",t)},k=function(e){return m.h.post("/upms/umps_role/update",(0,_.Z)({},e,{roleType:T,projectId:O}))},I=r(61409),j=function(e){return e&&e instanceof Array&&e.length>0};function D(e){return e.map((function(e,t){return{id:e.id,key:e.id,title:e.name,code:e.code,remark:e.remark,children:j(e.children)?D(e.children):[]}}))}function J(e){var t=[],r=[];return function e(n){return n.forEach((function(n){j(n.children)?(r.push(n.id),e(n.children)):t.push(n.id)}))}(e),{leafNode:t,nonLeafNode:r}}function N(e,t){return e.map((function(e,r){return(0,_.Z)({},e,{children:j(e.children)?N(e.children,t):[]})})).filter((function(e){return!t.includes(e.code)}))}var b=function(e){I.mW.push({pathname:"/account/project/member",state:{roleIds:[e.id]}})},A=function(e){var t=e.title,r=e.url;return[{title:h.t.get(h.V.backProjectConfig).name,url:"/account/project/preview"},{title:t,url:r}]};const M=function(){return u.createElement("div",{className:"business_setting_role_wrapper"},u.createElement(a.Z,{title:A({title:"\u89d2\u8272\u4e0e\u6743\u9650",url:void 0})}),u.createElement("div",{className:"business_setting_role"},u.createElement(l.Z,{tool:{constants:n,api:o,utils:i}})))}}}]);