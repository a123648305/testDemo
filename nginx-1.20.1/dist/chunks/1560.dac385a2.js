"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1560],{11765:(e,t,n)=>{n.d(t,{gt:()=>i,DR:()=>l,c6:()=>o});var a=n(87462),r=(n(2329),{"\u6027\u522b":"SCENE_SEX","\u5e74\u9f84\u6bb5":"SCENE_AGE","\u5e74\u9f84":"SCENE_AGE","\u5173\u7cfb":"SCENE_RELATION","\u4f7f\u7528\u573a\u5408":"SCENE_USE_SCENE","\u7528\u9014":"SCENE_USE","\u8d2d\u4e70\u51b3\u7b56":"SCENE_BUY_DECISION","\u7528\u6237\u5efa\u8bae":"SCENE_MY_ADVICE"}),i=function(e,t,n){var i=e.find((function(e){return"SCENE_ASPECT"===e.id}));return[].concat(e.filter((function(e){return"SCENE_ASPECT"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"SCENE_ASPECT",isSelectAll:i&&i.isSelectAll?i.isSelectAll:null,values:i?[].concat(i.values.map((function(e){return(0,a.Z)({},e)})),[{id:r[n],values:[t]}]):[{id:r[n],values:[t]}]}])},l=function(e,t,n){var r=e.find((function(e){return"CONFIG"===e.id}));return[].concat(e.filter((function(e){return"CONFIG"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"CONFIG",isSelectAll:r&&r.isSelectAll?r.isSelectAll:null,values:[].concat(r.values.filter((function(e){return e.id!==n})).map((function(e){return(0,a.Z)({},e)})),[{id:n,values:[t]}])}])},o=function(e,t,n){var r=e.find((function(e){return"ASPECT_MODEL"===e.id}));return[].concat(e.filter((function(e){return"ASPECT_MODEL"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"ASPECT_MODEL",values:r?[].concat(r.values.filter((function(e){return e.id!==n[0]&&"ASPECT_ESCORE"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:n[0],values:[t]},{id:"ASPECT_ESCORE",values:n[1].includes("\u8d1f\u9762")?["3"]:n[1].includes("\u6b63\u9762")?["8"]:["3","8"]}]):[{id:n[0],values:[t]},{id:"ASPECT_ESCORE",values:n[1].includes("\u8d1f\u9762")?["3"]:n[1].includes("\u6b63\u9762")?["8"]:["3","8"]}]}])}},2786:(e,t,n)=>{n.d(t,{X_:()=>o});var a=n(30381),r=n.n(a),i=n(87219);function l(e,t){var n=JSON.parse(JSON.stringify(e)),a=e.quickChoice,i=e.from,l=e.to,o=r()().format("YYYY-MM-DD HH:mm:ss").split(" ")[1];if("\u8fd124\u5c0f\u65f6"===a)if(1===t){var c=i.split(" ").map((function(e){return e.trim()}));n.from=r()(c[0]).format("YYYY-MM-DD")+" "+o,n.to=""+r()(c[0]).endOf("day").format("YYYY-MM-DD HH:mm:ss")}else{var s=l.split(" ").map((function(e){return e.trim()}));n.from=""+r()(s[0]).startOf("day").format("YYYY-MM-DD"),n.to=r()(s[0]).format("YYYY-MM-DD")+" "+o}else if(/\u5c0f\u65f6/.test(a)){var u=i.split(" ").map((function(e){return e.trim()}));1===t?(n.from=i,n.to=r()(u[0]).format("YYYY-MM-DD")+" "+r()(i).hour()+":59:59"):(n.from=""+r()(u[0]).startOf("day").format("YYYY-MM-DD HH:mm:ss"),n.to=l)}return n}var o=function(e,t,n,a,o,c){t.quickChoice;var s=t.numOfDays,u=/:/.test(t.quickChoice)||-1===t.quickChoice.indexOf("-"),f="line"===e&&a instanceof Array&&a.length>0?(0,i.ZP)(t,(function(e){var i=function(e,t,n){var a=n?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";switch(t){case"HOUR":return{from:r()(e).format("YYYY-MM-DD HH:00:00"),to:r()(e).format("YYYY-MM-DD HH:59:59")};case"YEAR":var i=r()(e);return{from:i.startOf("year").format(a),to:i.endOf("year").format(a)};case"QUARTER":var l=e.split("-"),o=r()().year(l[0]).quarter(l[1]);return{from:o.startOf("quarter").format(a),to:o.endOf("quarter").format(a)};case"MONTH":var c=r()(e);return{from:c.startOf("month").format(a),to:c.endOf("month").format(a)};case"WEEK":var s=e.split("-"),u=s[0],f=s[1],d=r()().year(u).week(f);return{from:d.startOf("week").format(a),to:d.endOf("week").format(a)};default:return{from:e,to:e}}}(n,o,u),c=i.from,f=i.to;"DAY"!==o&&"HOUR"!==o?JSON.stringify(n)===JSON.stringify(a[0])?c=e.from:JSON.stringify(n)===JSON.stringify(a[a.length-1])&&(f=e.to):"DAY"!==o&&"HOUR"!==o||1!==s&&2!==s||(JSON.stringify(n)===JSON.stringify(a[0])?(c=l(t,1).from,f=l(t,1).to):JSON.stringify(n)===JSON.stringify(a[a.length-1])&&(f=l(t,2).to,c=l(t,2).from)),e.from=c,e.to=f,e.numOfDays=function(e,t){var n=Date.parse(e),a=Date.parse(t),r=Math.abs(n-a);return Math.floor(r/864e5)+1}(f,c),e.quickChoice=c.replaceAll("-",".")+" - "+f.replaceAll("-",".")})):t;return f}},91455:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(63366),r=n(87462),i=n(94578),l=n(67294),o=n(35239),c=n(55609),s=n(35103),u=n(61409),f=n(19731),d=(n(43378),n(62443)),p=n(39432),E=n(70715),m=n(87300),h=n(81408);n(11765);const v=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).chartRef=void 0,t.source=void 0,t.lineSource=void 0,t.objNames=void 0,t.mColor=E.OW,t.legendSelected=void 0,t.getChartRef=function(e){return t.chartRef=e},t.setValue=function(e){var n=e.sort((function(e,t){return t.total-e.total})).map((function(e){return e.name})),a=n.reduce((function(n,a){var r=e.find((function(e){return e.name===a}));return t.legendSelected?t.legendSelected[a]&&n.push([r.name,r.total]):n.push([r.name,r.total]),n}),[["\u6316\u6398\u573a\u666f","\u6807\u7b7e\u6570\u91cf"]]),r=e[0].data.map((function(e){return e.name}));t.lineSource=r.map((function(t){return[t].concat(n.map((function(n){var a=e.find((function(e){return e.name===n}));if(a){var r=a.data.find((function(e){return e.name===t}));return r?r.count:0}return 0})))}));var i=[["\u65e5\u671f"].concat(n)].concat(t.lineSource);t.objNames=n,t.source=[a,i]},t.getOption=function(e){var n=e.title,a=e.showLabel,r=Object.values(t.props.dateType)[0],i=160<(0,p.jD)(t.source[0].reduce((function(e,t,n){return 0===n?"":e+t[0]}),""),12);return{title:{text:n},grid:[{left:36,top:100,width:270,bottom:24,containLabel:!0},{left:360,right:48,top:100,bottom:52,containLabel:!0}],dataset:t.source.map((function(e){return{source:e}})),tooltip:{trigger:"axis",showDelay:20,hideDelay:10,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",axisPointer:{type:"none",label:{show:!1}},position:function(e,t,n,a,r){var i=r.contentSize,l=r.viewSize,o=e[0]<l[0]/2?0:-1,c=e[1]<l[1]/2?-.5:-1,s=e[0]<l[0]/2?12:-12;return[e[0]+o*i[0]+s,e[1]+c*i[1]]},formatter:function(e,a,i){if(e.length)return setTimeout((function(){if("bar"!==e[0].seriesType){var l=e[0].axisValue,o=e.map((function(e){var t=e.marker,n=e.seriesName,a=e.data;return{name:"<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+t+"</span>"+n+"</div><div style='color: #262626;margin-left: 10px;'>\n                  "+(0,p.hE)(a.value)+"\n                </div></div>",value:a.value}})),c=o.map((function(e){return e.name})),s='\n            <span style="font-size: 12px; color: #8c8c8c; font-weight: 400;">'+(0,p.Sn)(r,l)+"</span>";i(a,(0,m.r)(s,c))}else{var u=e[0],f=u.marker,d=u.data;i(a,(0,m.r)(""+d[0],["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+f+"</span>\u6807\u7b7e\u6570\u91cf</div><div style='color: #262626;margin-left: 10px;'>\n                       "+(0,p.hE)(d[1])+"\n                    </div></div>"],[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return t._handleOnJumpMsg(e[0],n)}}],"yt_new_tooltip_wrapper"))}}),0)}},legend:{top:50,left:40,right:48,itemWidth:10,itemHeight:10,type:"scroll",itemGap:24,selected:t.legendSelected,data:t.objNames,icon:"circle"},dataZoom:[{show:!0,bottom:24,xAxisIndex:1,height:16,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"}],xAxis:[{type:"category",gridIndex:0,axisLabel:{rotate:i?45:0,show:!0,data:t.objNames,interval:0,formatter:function(e){return e.length>6?e.substring(0,5)+"...":e}}},{type:"category",gridIndex:1,boundaryGap:!1,axisPointer:{type:"line",label:{show:!1}},axisLabel:{formatter:function(e){return(0,p.Sn)(r,e)}},data:t.lineSource.map((function(e){return e[0]}))}],yAxis:[{type:"value",gridIndex:0,axisLabel:{color:"#626262",formatter:function(e){return(0,p.hE)(e)}},interval:(0,h.lQ)(t.source[0].slice(1)).intVal,max:(0,h.lQ)(t.source[0].slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},{type:"value",gridIndex:1,axisLabel:{color:"#626262",formatter:function(e){return(0,p.hE)(e)}},interval:(0,h.lQ)(t.source[1].slice(1)).intVal,max:(0,h.lQ)(t.source[1].slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}}],series:[{type:"bar",xAxisIndex:0,yAxisIndex:0,datasetIndex:0,barMaxWidth:24,data:t.source[0].slice(1),itemStyle:{color:function(e){var n=e.dataIndex,a=e.name;if(t.legendSelected){var r=Object.keys(t.legendSelected);return E.OW[r.indexOf(a)]}return E.OW[n]}},label:{show:!0,position:"top",color:"#262626",formatter:function(e){var t=e.value;return(0,p.hE)(t[1])}}}].concat(t.objNames.map((function(e,i){return{type:"line",name:t.objNames[i],xAxisIndex:1,yAxisIndex:1,symbolSize:1,datasetIndex:1,data:t.lineSource.map((function(e){return{value:e[i+1],tooltip:{trigger:"item",formatter:function(e,a,i){return setTimeout((function(){var l=e.seriesName,o=e.name,c=e.data,s=e.marker,u="\n                  <div style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;position:relative;\">\n                    <span style='position:absolute;width:40px;height:150px;left:-40px;top:-30px;'></span>\n                    <span style='position:absolute;width:40px;height:150px;right:-40px;top:-30px;'></span>\n                  </div>\n                  <span style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;\">"+(0,p.Sn)(r,o)+"</span>",f=["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+s+"</span>"+l+"</div><div style='color: #262626;margin-left: 10px;'>\n                      "+c.value+"\n                    </div></div>"];i(a,(0,m.r)(u,f,[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return t._handleOnJumpMsg(e,n)}}],"yt_new_tooltip_wrapper"))}),0)}},label:{show:a,position:"top",color:"#262626"}}})),itemStyle:{color:E.OW[i]}}})))}},t}return(0,i.Z)(t,e),t.prototype.renderChart=function(e,t,n){this.setValue(e),this.chartRef.clear(),this.chartRef.setOption(this.getOption({title:t,showLabel:n}))},t}(l.PureComponent);var S=n(8201),y=n(98191),C=n(50976),g=n(60496),T=n(94644),D=n(45697),_=n.n(D),N=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleOnMoreClick=function(e){var t=n.props,a=t.title,r=t.data;"image"===e&&n.chartRef?(0,T._v)(n.chartRef,a):"data"===e&&(0,S.P)(r)&&(0,T.aT)([n.source[0].map((function(e){return e.map((function(e){return e%1?(100*e).toFixed(2)+"%":e}))})),n.source[1].map((function(e){return e.map((function(e){return e%1?(100*e).toFixed(2)+"%":e}))}))],a)},n.handleOnLegendChange=function(e){var t=e.selected;n.legendSelected=t,n.renderChart()},n._handleOnJumpMsg=function(e,t){n.props.onMsgClick(e,t)},n._handleOnJumpAnalyze=function(e){n.props.onChartClick(e)},n.state={showLabel:!1},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,n=t[0],a=t[1];n.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(a.style.display="none")}),2e3)})),a&&a.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200)},n.componentDidUpdate=function(e,t){var n=e.data,a=this.props.data,r=t.showLabel,i=this.state.showLabel;(0,S.P)(a)&&JSON.stringify(n)!==JSON.stringify(a)&&this.renderChart(),r!==i&&this.renderChart(),!(0,S.P)(a)&&this.chartRef&&(this.chartRef=void 0)},n.renderChart=function(){var t=this.props,n=t.data,a=t.title,r=this.state.showLabel;(0,S.P)(n)&&this.chartRef&&e.prototype.renderChart.call(this,n,a,r)},n.render=function(){var e=this,t=this.props,n=t.data,a=t.loading,r=t.title,i=t.titleOverlay,o=t.onChange,c=t.onFlavorChange,s=t.dateOptions,u=t.dateType,f=t.flavorDateType,p=t.style,E=this.state.showLabel,m=Object.keys(u)[0],h=Object.keys(f)[0];return l.createElement(S.Z,{className:"yt_market_bm_sanalysis_bar_line_chart",data:n,style:p,loading:a,renderTitle:l.createElement(y.Z,{title:r,titleOverlay:i,data:n},l.createElement(g.Z,{options:s,activeObj:u[m],flavor:f[h],rightHook:!0,onChange:function(e){var t;return o(((t={})[m]=e,t))},onFlavorChange:function(e){var t;return c(((t={})[h]=e,t))}}),l.createElement(d.default,{placement:"top",content:"\u663e\u793a\u56fe\u8868\u6807\u7b7e",mouseEnterDelay:.6},l.createElement("i",{className:"icon-tubiaobiaoqian "+(E?"active":""),onClick:function(){e.setState({showLabel:!E})}})),l.createElement(d.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6},l.createElement("i",{className:"icon-daochu",onClick:function(){return e.handleOnMoreClick("data")}})),l.createElement(d.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6},l.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e.handleOnMoreClick("image")}})))},l.createElement(C.Z,{onChartReady:this.getChartRef,theme:"yunting_multi_color",option:{},style:{height:"100%"},onEvents:{legendselectchanged:this.handleOnLegendChange}}))},t}(v);N.propTypes={data:_().any,style:_().object,titleOverlay:_().oneOf([_().string,_().node]),title:_().string,loading:_().bool,onChange:_().func,onMsgClick:_().func,onChartClick:_().func,dateOptions:_().arrayOf({title:_().string,value:_().string}),dateType:_().object,flavorDateType:_().object};const A=N;var O=n(49447);const M=function(e){var t=e.pageType,n=e.dateOptions,a=e.trendData,r=e.timeType,i=e.fTimeType,o=e.fetchingTrendData,c=e.seneData,d=e.seneDateType,p=e.flavorSeneDateType,E=e.fetchingSeneData,m=e.relData,h=e.relDataType,v=e.flavorRelDataType,S=e.fetchingRelativeData,y=e.relChartConfig,C=e.onGraphClick,g=e.onFilterChange,T=e.onFlavorChange,D=e.filterReady,_=e.filterChange,N=e.onMsgClick,M=e.onChartClick;return l.createElement("div",{className:"yt_explore_scene_overview_wrapper"},l.createElement(s.Z,{onReady:D,onChange:_,pageType:t,advanceAuthority:!1,touchData:["\u7535\u5546\u8bc4\u8bba"],selectValue:"\u7535\u5546\u8bc4\u8bba",valueConf:["fullInfo"],showList:["fullDate","screening","save","sourceSearch"],hasHour:!0},l.createElement("div",{className:"content"},l.createElement(f.Z,{title:"\u63d0\u53ca\u573a\u666f\u6807\u7b7e\u7684\u6d88\u606f\u6570\u91cf",data:a,loading:o,timeType:r,fTimeType:i,timeOptions:n,onFilterChange:g,onFlavorChange:T,onMsgClick:N,pageType:t,titleOverlay:l.createElement("div",null,"\u573a\u666f\u6807\u7b7e\u63d0\u53ca\u7387 = \u63d0\u53ca\u573a\u666f\u6807\u7b7e\u7684\u6d88\u606f\u6570\u91cf \xf7 \u6d88\u606f\u603b\u91cf")}),l.createElement(A,{title:"\u5404\u573a\u666f\u6807\u7b7e\u6570\u91cf",titleOverlay:l.createElement("div",null,l.createElement("div",null,"\u6807\u7b7e\u6570\u91cf\u662f\u6307\u63d0\u53ca\u5230\u573a\u666f\u6807\u7b7e\u7684\u6d88\u606f\u6570\u91cf\u3002"),l.createElement("div",null,"\u6807\u7b7e\u6570\u91cf\u8ba1\u7b97\u8bf4\u660e\uff1a\u5982\u679c\u4e00\u6761\u6d88\u606f\u4e2d\u51fa\u73b0\u4e00\u4e2a\u573a\u666f\u6807\u7b7e\u5c31\u8ba11\uff0c\u540c\u4e00\u4e2a\u573a\u666f\u6807\u7b7e\u5728\u4e00\u4e2a\u6d88\u606f\u4e2d\u4e0d\u91cd\u590d\u8ba1\u6570\u3002")),data:c,dateOptions:n,dateType:{seneDateType:d},flavorDateType:{flavorSeneDateType:p},onChange:g,onFlavorChange:T,loading:E,onMsgClick:N,onChartClick:M}),l.createElement(O.Z,{title:"\u5404\u573a\u666f\u5173\u8054\u5173\u7cfb\u5206\u6790",titleOverlay:l.createElement(u.rU,{className:"yt-new-feedback-read-more",to:"https://www.yuque.com/docs/share/65dc5ff0-5e47-4687-a25f-d4bcbb36d97e?# \u300a\u548c\u5f26\u56fe\u4f7f\u7528\u8bf4\u660e\u300b",target:"_blank"},"\u4e86\u89e3\u66f4\u591a"),data:m,chartConfig:{relChartConfig:y},dataType:{relDataType:h},flavorDataType:{flavorRelDataType:v},loading:S,onChange:g,onClick:C,onMsgClick:N}))))};var b=n(53113),x={"\u7528\u6237\u7b80\u753b":"SCENE_USER","\u89d2\u8272\u4e0e\u5173\u7cfb":"SCENE_USER","\u6027\u522b":"SCENE_SEX","\u5e74\u9f84\u6bb5":"SCENE_AGE","\u5e74\u9f84":"SCENE_AGE","\u5173\u7cfb":"SCENE_RELATION","\u4f7f\u7528\u573a\u5408":"SCENE_USE_SCENE","\u7528\u9014":"SCENE_USE","\u8d2d\u4e70\u51b3\u7b56":"SCENE_BUY_DECISION","\u7528\u6237\u5efa\u8bae":"SCENE_MY_ADVICE","\u4ee3\u8a00\u4eba":"SCENE_SPOKESMAN_ANALYSIS"},Y={"\u6027\u522b":"SCENE_SEX","\u5e74\u9f84\u6bb5":"SCENE_AGE","\u5e74\u9f84":"SCENE_AGE","\u5173\u7cfb":"SCENE_RELATION","\u89d2\u8272\u4e0e\u5173\u7cfb":"SCENE_RELATION","\u4f7f\u7528\u573a\u5408":"SCENE_USE_SCENE","\u7528\u9014":"SCENE_USE","\u8d2d\u4e70\u51b3\u7b56":"SCENE_BUY_DECISION","\u7528\u6237\u5efa\u8bae":"SCENE_MY_ADVICE","\u4ee3\u8a00\u4eba":"SCENE_ENDORSER"},P=function(e,t,n,a){var i=e&&e.find((function(e){return"SCENE_ASPECT"===e.id})),l=e&&e.find((function(e){return"DEFAULT"===e.id}));return t&&n?[].concat(e.filter((function(e){return"SCENE_ASPECT"!==e.id&&"DEFAULT"!==e.id})).map((function(e){return(0,r.Z)({},e)})),[{id:"SCENE_ASPECT",isSelectAll:i&&i.isSelectAll?i.isSelectAll:null,values:i?[].concat(i.values.map((function(e){return(0,r.Z)({},e)})),[{id:Y[n],label:n,values:[t]}]):[{id:Y[n],label:n,values:[t]}]},{id:"DEFAULT",isSelectAll:l&&l.isSelectAll?l.isSelectAll:null,values:l?[].concat(l.values.filter((function(e){return"MESSAGE_TYPE"!==e.id})).map((function(e){return(0,r.Z)({},e)})),[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:a?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:a?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}]):[].concat(e.filter((function(e){return"DEFAULT"!==e.id})).map((function(e){return(0,r.Z)({},e)})),[{id:"DEFAULT",isSelectAll:l&&l.isSelectAll?l.isSelectAll:null,values:l?[].concat(l.values.filter((function(e){return"MESSAGE_TYPE"!==e.id})).map((function(e){return(0,r.Z)({},e)})),[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:a?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:a?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}])},w=function(e,t,n,a,i,l){var o=e&&e.find((function(e){return"SCENE_ASPECT"===e.id})),c=e&&e.find((function(e){return"DEFAULT"===e.id}));if("node"===t){var s=o&&o.values.find((function(e){return e.id===Y[a[0]]}));return[].concat(e.filter((function(e){return"SCENE_ASPECT"!==e.id&&"DEFAULT"!==e.id})).map((function(e){return(0,r.Z)({},e)})),[{id:"SCENE_ASPECT",isSelectAll:o&&o.isSelectAll?o.isSelectAll:null,values:o?[].concat(o.values.filter((function(e){return e.id!==Y[a[0]]})).map((function(e){return(0,r.Z)({},e)})),[{id:Y[a[0]],label:a[0],values:"analyze"===i&&s?s.values.find((function(e){return e===n[0]}))?[n[0]]:[].concat(s.values.filter((function(e){return e!==n[0]})),[n[0]]):[n[0]]}]):[{id:Y[a[0]],label:a[0],values:[n[0]]}]},{id:"DEFAULT",isSelectAll:c&&c.isSelectAll?c.isSelectAll:null,values:c?[].concat(c.values.filter((function(e){return"MESSAGE_TYPE"!==e.id})).map((function(e){return(0,r.Z)({},e)})),[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:l?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:l?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}])}return"edge"===t?[].concat(e.filter((function(e){return"SCENE_ASPECT"!==e.id&&"DEFAULT"!==e.id})).map((function(e){return(0,r.Z)({},e)})),[{id:"SCENE_ASPECT",isSelectAll:o&&o.isSelectAll?o.isSelectAll:null,values:o?[].concat(o.values.filter((function(e){return e.id!==Y[a[0]]&&e.id!==Y[a[1]]})).map((function(e){return(0,r.Z)({},e)})),[{id:Y[a[0]],label:a[0],values:[n[0]]},{id:Y[a[1]],label:a[1],values:[n[1]]}]):[{id:Y[a[0]],label:a[0],values:[n[0]]},{id:Y[a[1]],label:a[1],values:[n[1]]}]},{id:"DEFAULT",isSelectAll:c&&c.isSelectAll?c.isSelectAll:null,values:c?[].concat(c.values.filter((function(e){return"MESSAGE_TYPE"!==e.id})).map((function(e){return(0,r.Z)({},e)})),[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:l?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:l?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}]):e},R=n(2786),k=n(64396),F=["loading"],L=k.Z.explore.scene.overview,I=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleFilterReady=function(e,t){var a=(0,b.X)(e.dateFilter.numOfDays,!0),r=a.dateOptions,i=a.defaultDateType;n.props.fetchParams({projectId:o.t.get(o.V.curProject).id,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:e.dateFilter,dateOptions:r,defaultDateType:i,filterValues:t.fullInfo.filterValue})},n._handleFilterChange=function(e,t,a){var i=(0,b.X)(e.dateFilter.numOfDays,!0),l=i.dateOptions,o=i.defaultDateType;n.props.fetchData((0,r.Z)({},e,{dateOptions:l,defaultDateType:o,timeType:o,seneDateType:o,filterValues:t.fullInfo.filterValue}))},n._handleOnFilterChange=function(e){e.timeType?n.props.fetchTrendData(e):e.relDataType||void 0!==e.flavorRelDataType?(void 0!==e.flavorRelDataType&&n.props.setDefaultValue(e),e.relDataType&&n.props.save(e)):e.seneDateType?n.props.fetchSeneData(e):e.relChartConfig&&n.props.setDefaultValue(e)},n._handleOnFlavorChange=function(e){e.fTimeType||e.flavorSeneDateType,n.props.setDefaultValue(e)},n._handleOnMsgClick=function(e,t,a){var r=e.name,i=e.seriesName,l=e.componentSubType,o=e.dataType,c=e.data,s=n.props,u=s.projectId,f=s.dateFilter,d=s.headerFilterParamsNew,p=s.seneDateType,E=s.seneData,m=s.filterValues;if("bar"===l||"line"===l){var h={projectId:u,dateFilter:(0,R.X_)(l,f,r,E[0].data.map((function(e){return e.name})),p),headerFilterParamsNew:P(d),filterModel:{project:[u],messageCategory:["COMMENT"]},fromScene:"bar"===l?x[r]:x[i],filterTip:null,filterValues:P(m,null,null,!0)};window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(h)))}else if("graph"===l){var v="node"===o?w(d,o,[c.name],[c.category],"msg"):w(d,o,[c.source.split(":")[1],c.target.split(":")[1]],[c.sourceSceneName,c.targetSceneName],"msg"),S="node"===o?w(m,o,[c.name],[c.category],"msg",!0):w(m,o,[c.source.split(":")[1],c.target.split(":")[1]],[c.sourceSceneName,c.targetSceneName],"msg",!0),y={projectId:u,dateFilter:f,headerFilterParamsNew:"node"===o?P(d,c.name,c.category):v,filterModel:{project:[u],messageCategory:["COMMENT"],escore:a.includes("pos")?["1"]:a.includes("neg")?["-1"]:null},filterValues:"node"===o?P(m,c.name,c.category,!0):S};window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(y)))}},n.event={filterReady:n._handleFilterReady,filterChange:n._handleFilterChange,onFilterChange:n._handleOnFilterChange,onFlavorChange:n._handleOnFlavorChange,onMsgClick:n._handleOnMsgClick},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.clean()},n.render=function(){return l.createElement(M,(0,r.Z)({},this.props,this.state,this.event))},t}(l.Component);const Z=(0,c.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,F);return(0,r.Z)({},n[L],{fetchingTrendData:t.effects[L+"/fetchTrendData"]||!1,fetchingSeneData:t.effects[L+"/fetchSeneData"]||!1,fetchingRelativeData:t.effects[L+"/fetchRelativeData"]||!1})}),(function(e){return{save:function(t){return e({type:L+"/save",payload:t})},clean:function(t){return e({type:L+"/clean",payload:t})},setDefaultValue:function(t){return e({type:L+"/setDefaultValue",payload:t})},fetchParams:function(t){return e({type:L+"/fetchParams",payload:t})},fetchData:function(t){return e({type:L+"/fetchData",payload:t})},fetchTrendData:function(t){return e({type:L+"/fetchTrendData",payload:t})},fetchSeneData:function(t){return e({type:L+"/fetchSeneData",payload:t})},fetchRelativeData:function(t){return e({type:L+"/fetchRelativeData",payload:t})}}}))(I)}}]);