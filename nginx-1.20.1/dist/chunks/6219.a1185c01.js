"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6219],{16219:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(94578),i=n(87462),r=n(63366),c=n(67294),o=n(92360),l=n(29383),s=n(19586),d=n(5133),u=n(55609),p=(n(61193),n(49722)),m=n(43036),h=n(35239),f=n(23942),g=n(6637),k=n(30381),y=n.n(k),b=n(64396),v=["loading"],w=b.Z.price.historyPrice,E={"\u5317\u4eac":"\u4eac","\u4e0a\u6d77":"\u6caa","\u5e7f\u5dde":"\u7a57","\u6df1\u5733":"\u6df1"},C=function(e){return c.createElement("div",{style:{maxWidth:300}},e)},S=function(e){return c.createElement("span",{style:{display:"block",width:"100%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},title:e},e)},N={"\u65e5\u671f":{label:"\u65e5\u671f",prop:"day",width:100,fixed:"left",sortable:"custom",render:function(e){return e.day?y()(e.day).format("YYYY-MM-DD"):""}},"\u54c1\u724c":{label:"\u54c1\u724c",minWidth:80,render:function(e,t){return S(e[t.prop])}},"\u578b\u53f7":{label:"\u578b\u53f7",minWidth:80,render:function(e,t){return S(e[t.prop])}},"\u5546\u54c1\u6807\u9898":{label:"\u5546\u54c1\u6807\u9898",prop:"title",minWidth:120,render:function(e,t){return c.createElement("a",{style:{color:"#0847A6",display:"block",width:"100%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},target:"_blank",rel:"noopener noreferrer",href:e.url,title:e.title,onClick:function(e){return e.stopPropagation()}},e.title)}},"\u5355\u54c1\u5230\u624b\u4ef7":{label:c.createElement("span",null,"\u5355\u54c1\u5230\u624b\u4ef7",c.createElement(m.Z,{overlay:C("\u53ea\u8d2d\u4e701\u4ef6\u5355\u54c1\u5c31\u80fd\u83b7\u5f97\u4f18\u60e0\u5bf9\u5e94\u7684\u5230\u624b\u4ef7\uff0c\u53d6\u5f53\u5929\u6700\u4f4e\u3002"),placement:"top"},c.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c"}}))),prop:"takePrice",width:105,sortable:"custom"},"\u5355\u54c1\u62fc\u5355\u4ef7":{label:c.createElement("span",null,"\u5355\u54c1\u62fc\u5355\u4ef7",c.createElement(m.Z,{overlay:C("\u8d2d\u4e70\u591a\u4ef6\u5355\u54c1\u65f6\u80fd\u591f\u83b7\u5f97\u7684\u6700\u5927\u4f18\u60e0\u5bf9\u5e94\u7684\u5230\u624b\u4ef7\uff0c\u53d6\u5f53\u5929\u6700\u4f4e\u3002\u5176\u4e2d\uff0c\u6700\u5927\u4f18\u60e0\u6309\u5355\u54c1\u7684\u6302\u724c\u4ef7\u5206\u644a\u3002"),placement:"top"},c.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c"}}))),prop:"groupTakePrice",width:90},"\u5b8c\u7f8e\u62fc\u5355\u4ef7":{label:c.createElement("span",null,"\u5b8c\u7f8e\u62fc\u5355\u4ef7",c.createElement(m.Z,{overlay:C("\u5728\u5e73\u53f0\u5238\u548c\u5e97\u94fa\u5238\u7b49\u57fa\u7840\u4e0a\uff0c\u4e0e\u5176\u4ed6\u5546\u54c1\u8fdb\u884c\u62fc\u5355\u65f6\u80fd\u591f\u83b7\u5f97\u7684\u6700\u5927\u4f18\u60e0\u5bf9\u5e94\u7684\u5230\u624b\u4ef7\uff0c\u53d6\u5f53\u5929\u6700\u4f4e\u3002\u5176\u4e2d\uff0c\u6700\u5927\u4f18\u60e0\u6309\u5355\u54c1\u7684\u6302\u724c\u4ef7\u5206\u644a\u3002"),placement:"top"},c.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c"}}))),prop:"perfectGroupTakePrice",width:90},"\u5f53\u5929\u6700\u4f4e\u4ef7":{label:c.createElement("span",null,"\u5f53\u5929\u6700\u4f4e\u4ef7",c.createElement(m.Z,{overlay:C("\u5f53\u5929\u300c\u5355\u54c1\u5230\u624b\u4ef7\u300d\u3001\u300c\u5355\u54c1\u62fc\u5355\u4ef7\u300d\u548c\u300c\u5b8c\u7f8e\u62fc\u5355\u4ef7\u300d\u4e09\u4e2a\u4e2d\u6700\u4f4e\u7684\u4ef7\u683c\u3002"),placement:"top"},c.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c"}}))),prop:"minPrice",width:105,align:"center",sortable:"minPrice"},"\u4e0b\u67b6/\u7f3a\u8d27":{label:"\u4e0b\u67b6/\u7f3a\u8d27",prop:"takePrice",width:80,render:function(e){return S(e.takePrice>0?function(e){if(e.stock){var t=Object.keys(E),n=e.stock.cityStockModels.filter((function(e){return t.includes(e.city)&&"\u65e0\u8d27"===e.stockState}));return n&&n.length?n.map((function(e){return E[e.city]+"\u65e0\u8d27"})).join(","):"_"}return"_"}(e):"\u4e0b\u67b6")}},"\u5355\u54c1\u4f18\u60e0\u5238":{label:"\u5355\u54c1\u4f18\u60e0\u5238",prop:"skuQuan",width:84,align:"center",render:function(e){return c.createElement("div",{className:"ellipisis",style:{maxWidth:84}},e.skuQuan&&c.createElement(m.Z,{placement:"topLeft",overlay:JSON.parse(e.skuQuan).map((function(e,t){return c.createElement("span",{key:t},e,c.createElement("br",null))}))},c.createElement("span",null,JSON.parse(e.skuQuan).map((function(e,t){return c.createElement("span",{key:t},e,"\xa0")})))))}},"\u5e97\u94fa\u4f18\u60e0\u5238":{label:"\u5e97\u94fa\u4f18\u60e0\u5238",prop:"storeQuan",width:84,align:"center",render:function(e){return c.createElement("div",{className:"ellipisis",style:{maxWidth:84}},e.storeQuan&&c.createElement(m.Z,{placement:"topLeft",overlay:JSON.parse(e.storeQuan).map((function(e,t){return c.createElement("span",{key:t},e,c.createElement("br",null))}))},c.createElement("span",null,JSON.parse(e.storeQuan).map((function(e,t){return c.createElement("span",{key:t},e,"\xa0")})))))}},"\u884c\u4e1a\u4f18\u60e0\u5238":{label:"\u884c\u4e1a\u4f18\u60e0\u5238",prop:"industryQuan",width:84,align:"center",render:function(e){return c.createElement("div",{className:"ellipisis",style:{maxWidth:84}},e.industryQuan&&c.createElement(m.Z,{placement:"topLeft",overlay:JSON.parse(e.industryQuan).map((function(e,t){return c.createElement("span",{key:t},e,c.createElement("br",null))}))},c.createElement("span",null,JSON.parse(e.industryQuan).map((function(e,t){return c.createElement("span",{key:t},e,"\xa0")})))))}},"\u6ee1\u51cf":{label:"\u6ee1\u51cf",prop:"trueReductionValue",width:80,align:"center"},"\u8d60\u54c1":{label:"\u8d60\u54c1",prop:"gift",width:90,render:function(e){return S(e.gift)}},"\u514d\u606f\u6700\u957f\u5206\u671f":{label:"\u514d\u606f\u6700\u957f\u5206\u671f",prop:"freeByStages",width:84,align:"center"},"\u5b9a\u91d1":{label:"\u5b9a\u91d1",prop:"deposit",width:70,align:"center",render:function(e){return S(e.deposit)}},"\u9884\u5b9a\u6570\u91cf":{label:"\u9884\u5b9a\u6570\u91cf",prop:"orderAmount",width:70,align:"center",render:function(e){return S(e.orderAmount)}},"\u5e73\u53f0":{label:"\u5e73\u53f0",prop:"source",width:70,align:"center",render:function(e){return S(e.source)}},"\u5546\u54c1\u526f\u6807\u9898":{label:"\u5546\u54c1\u526f\u6807\u9898",prop:"slogan",width:70,align:"center",render:function(e){return S(e.slogan)}},"\u6302\u724c\u4ef7":{label:"\u6302\u724c\u4ef7",prop:"listPrice",width:70,align:"center",render:function(e){return S(e.listPrice)}},"\u4f18\u60e0\u5408\u8ba1":{label:"\u4f18\u60e0\u5408\u8ba1",prop:"rateCount",width:70,align:"center",render:function(e){return S(e.rateCount)}},"\u4f18\u60e0\u5238\u91d1\u989d":{label:"\u4f18\u60e0\u5238\u91d1\u989d",prop:"trueCouponValue",width:70,align:"center",render:function(e){return S(e.trueCouponValue)}},sku:{label:"sku",prop:"sku",width:70,align:"center",render:function(e){return S(e.sku)}},"\u94fe\u63a5":{label:"\u94fe\u63a5",prop:"url",width:70,align:"center",render:function(e){return S(e.url)}},"\u91c7\u7eb3\u4f18\u60e0\u7b56\u7565":{label:"\u91c7\u7eb3\u4f18\u60e0\u7b56\u7565",prop:"trueRate",width:80,align:"center",render:function(e){return S(e.trueRate)}},"\u4f18\u60e0\u653f\u7b56":{label:"\u4f18\u60e0\u653f\u7b56",prop:"rate",width:70,align:"center",render:function(e){return S(e.rate)}}},P=function(e){function t(t){var n;(n=e.call(this,t)||this).getTableHeight=function(){var e=document.documentElement.clientHeight-118-86;n.setState({maxHeight:e})},n.judgeTime=function(e){var t=n.props.priceTimeDisabled,a=t?30:365,i=function(e){return y()().diff(y()(e),"day")>a};return!i(e.dateFilter.from)&&!i(e.dateFilter.to)||(d.Z.warning("\u53ea\u80fd\u67e5\u770b\u8fd1"+(t?"30\u5929":"1\u5e74")+"\u7684\u6bcf\u65e5\u6700\u4f4e\u4ef7"),!1)},n.getList=function(){var e=n.filter.getValue();if(n.judgeTime(e)){var t=n.state,a=t.pageIndex,r=t.pageSize,c=t.sortAttr,o=t.sortType;n.props.getHistoryList((0,i.Z)({type:"ALL"},e,{pageIndex:a,pageSize:r,sortAttr:c,sortType:o}))}},n.getSortList=function(){var e=n.filter.getValue();if(n.judgeTime(e)){var t=n.state,a=t.pageIndex,r=t.pageSize,c=t.sortAttr,o=t.sortType,l=h.t.get(h.V.curProject);l&&n.setState({loading:!0},(function(){p.h.post("/price/history/list",(0,i.Z)({id:l.id,type:"ALL"},e,{pageIndex:a,pageSize:r,sortAttr:c,sortType:o})).then((function(e){var t=e.data.result,a=t.result,i=t.count;n.props.save({columns:a[0]?a[0].configDetailVoList:[]}),n.setState({sortData:a,total:i,loading:!1},(function(){var e=n.state.sortData;e&&e.length&&n.getStockInfo()}))}))}))}},n.getStockInfo=function(){var e=h.t.get(h.V.curProject),t=n.state.sortData;e&&p.h.post("/stock/list",{projectId:e.id,userConnectionIds:t.map((function(e){return e.userConnectionId}))})},n.handleSort=function(e){var t="ascending"===e.order?-1:"descending"===e.order?1:"";n.setState({sortAttr:e.prop,sortType:t},(function(){return n.getSortList()}))},n.handelPageSizeChange=function(e){n.setState({pageSize:e,pageIndex:1},(function(){n.getSortList()}))},n.handelPageChange=function(e){n.setState({pageIndex:e},(function(){n.getSortList()}))},n.filterChange=function(){n.setState({pageIndex:1},(function(){n.getSortList()}))},n.exportData=function(){(0,g.u)({options:n.state.rangedColumns.filter((function(e){return"\u8d8b\u52bf\u56fe"!==e})),value:n.state.rangedColumns.filter((function(e){return"\u8d8b\u52bf\u56fe"!==e})).filter((function(e){return e.checked})).map((function(e){return e.id}))}).then((function(e){n.checkedList=e,n.setState({dialogVisible:!0})}))},n.hanleDownload=function(e){var t=h.t.get(h.V.curProject).id;if(t){var a=n.filter.getValue();p.h.post("/data/export",(0,i.Z)({},a,{projectId:t,type:"HISTORY_PRICE",exportFields:e})).then((function(e){var t=e.data;2e4===t.code?d.Z.success(t.msg+"\uff0c\u8bf7\u5230\u4e2a\u4eba\u4e2d\u5fc3\u7684\u4e0b\u8f7d\u5217\u8868\u6216\u8005\u70b9\u51fb\u53f3\u4e0a\u89d2\u201c\u5c0f\u94c3\u94db\u201d\u4e0b\u8f7d"):d.Z.error(t.msg)}))}},n._handleSortChange=function(e,t){h.t.set(h.V.historyPriceTableTitleList,e),n.setState({rangedColumns:e,baseColumns:e.reduce((function(e,t){return t.checked?[].concat(e,[N[t.name]]):e}),[]).concat([{label:"",fixed:"right",width:"48"}])})};var a=h.t.get(h.V.historyPriceTableTitleList)||[{name:"\u65e5\u671f",checked:!0,disabled:!0,id:"day"},{name:"\u5546\u54c1\u6807\u9898",checked:!0,disabled:!1,id:"title"},{name:"\u5355\u54c1\u5230\u624b\u4ef7",checked:!0,disabled:!1,id:"takePrice"},{name:"\u5355\u54c1\u62fc\u5355\u4ef7",checked:!0,disabled:!1,id:"groupTakePrice"},{name:"\u5b8c\u7f8e\u62fc\u5355\u4ef7",checked:!0,disabled:!1,id:"perfectGroupTakePrice"},{name:"\u5f53\u5929\u6700\u4f4e\u4ef7",checked:!0,disabled:!1,id:"minPrice"},{name:"\u4e0b\u67b6/\u7f3a\u8d27",checked:!0,disabled:!1,id:"stock"},{name:"\u5355\u54c1\u4f18\u60e0\u5238",checked:!1,disabled:!1,id:"skuQuan"},{name:"\u5e97\u94fa\u4f18\u60e0\u5238",checked:!1,disabled:!1,id:"storeQuan"},{name:"\u884c\u4e1a\u4f18\u60e0\u5238",checked:!1,disabled:!1,id:"industryQuan"},{name:"\u6ee1\u51cf",checked:!0,disabled:!1,id:"trueReductionValue"},{name:"\u8d60\u54c1",checked:!0,disabled:!1,id:"gift"},{name:"\u514d\u606f\u6700\u957f\u5206\u671f",checked:!0,disabled:!1,id:"freeByStages"},{name:"\u5b9a\u91d1",checked:!0,disabled:!1,id:"deposit"},{name:"\u9884\u5b9a\u6570\u91cf",checked:!0,disabled:!1,id:"orderAmount"},{name:"\u5e73\u53f0",checked:!0,disabled:!1,id:"source"},{name:"\u5546\u54c1\u526f\u6807\u9898",checked:!0,disabled:!1,id:"slogan"},{name:"\u6302\u724c\u4ef7",checked:!0,disabled:!1,id:"listPrice"},{name:"\u4f18\u60e0\u5408\u8ba1",checked:!0,disabled:!1,id:"rateCount"},{name:"\u4f18\u60e0\u5238\u91d1\u989d",checked:!0,disabled:!1,id:"trueCouponValue"},{name:"sku",checked:!0,disabled:!1,id:"sku"},{name:"\u94fe\u63a5",checked:!0,disabled:!1,id:"url"},{name:"\u91c7\u7eb3\u4f18\u60e0\u7b56\u7565",checked:!0,disabled:!1,id:"trueRate"},{name:"\u4f18\u60e0\u653f\u7b56",checked:!0,disabled:!1,id:"rate"}];return n.state={baseColumns:[],rangedColumns:a,pageIndex:1,pageSize:20,sortAttr:"",sortType:"",maxHeight:"",sortData:[],total:0,loading:!1,dialogVisible:!1},n.checkedList=[],n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.getProTimeRange(),this.getTableHeight(),window.addEventListener("resize",this.getTableHeight)},n.componentWillUnmount=function(){window.removeEventListener("resize",this.getTableHeight),this.props.clearState()},n.componentDidUpdate=function(e,t){var n=e.columns,a=this.props.columns;if(JSON.stringify(n)!==JSON.stringify(a)){var i=this.state.rangedColumns.slice();a.push({topicTypeValue:"\u6dd8\u5b9d\u638c\u67dc",topicTypeId:"sellerNick",id:"sellerNick"}),a.forEach((function(e){var t=!1,n=N[e.topicTypeValue];if(n?n.prop=e.topicTypeId:N[e.topicTypeValue]={label:e.topicTypeValue,prop:e.topicTypeId,fixed:"",render:function(e,t){return c.createElement("div",{title:e[t.prop],style:{width:"100%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},"sellerNick"!==t.prop||""!==e[t.prop]?e[t.prop]:"-")}},!i.find((function(t){return t.name===e.topicTypeValue}))){var a=i.length;i.splice(a,0,{name:e.topicTypeValue,checked:t,disabled:t,id:"sellerNick"!==e.topicTypeId?"config:"+e.topicTypeId:e.topicTypeId})}})),this.setState({rangedColumns:i,baseColumns:i.reduce((function(e,t){return t.checked?[].concat(e,[N[t.name]]):e}),[]).concat([{label:"",fixed:"right",width:"48"}])})}},n.handleClickPrice=function(e){window.windowPool=[];var t=window.open("/price/realTimePrice/priceDetail");window.windowPool.push({window:t,parameter:{source:2,data:e}})},n.render=function(){var e=this,t=this.state,n=t.loading,a=t.pageSize,i=t.maxHeight,r=t.baseColumns,d=t.rangedColumns,u=t.sortData,p=t.total,h=t.pageIndex,g=t.dialogVisible,k=c.createElement("div",{className:"history-price-title"},c.createElement("span",null,"\u6bcf\u65e5\u6700\u4f4e\u4ef7"),c.createElement(m.Z,{overlay:'\u8be5\u9875\u9762\u4e0d\u5305\u542b\u5f53\u5929\u7684\u4ef7\u683c\u4fe1\u606f\uff0c\u5f53\u5929\u7684\u4ef7\u683c\u4fe1\u606f\u53ef\u524d\u5f80"\u5b9e\u65f6\u4ef7\u683c"\u67e5\u770b',overlayClassName:"history-price-title-popover",placement:"right"},c.createElement("i",{className:"icon-cem_file1"})));return c.createElement("div",{className:"history_price"},c.createElement(s.Z,{ref:function(t){return e.filter=t},showList:["condition","time","save"],filterCondition:{filter:["CONN_CONFIG","SOURCE","TAG"]},model:"PRICE_HISTORY",timeDefaultValue:{quickChoice:"\u8fd17\u5929",from:"",to:""},onChange:this.filterChange,onFilterReady:this.getSortList}),c.createElement("div",{className:"history_price_wrap"},k,c.createElement("div",{className:"table-zone"},c.createElement(f.Z,{title:"\u5217",options:d,onChange:this._handleSortChange,leftFixedNum:1,rightFixedNum:0}),c.createElement(l.Z,{loading:n,data:u.map((function(e){return e.configDetailVoList&&e.configDetailVoList.length&&e.configDetailVoList.forEach((function(t){e[t.topicTypeId]=e.connectionConfig?e.connectionConfig[t.topicTypeId]:void 0})),e})),columns:r,total:p,pageSize:a,currentPage:h,onSortChange:this.handleSort,onPage:this.handelPageChange,onPageSizeChange:this.handelPageSizeChange,onRowClick:this.handleClickPrice,rowStyle:{cursor:"pointer"},pagePosition:"down",bottomElement:u.length>0&&c.createElement("span",{className:"download",onClick:function(){return e.exportData()}},c.createElement("i",{className:"cem-icon icon-cem_download"}),"\u4e0b\u8f7d"),maxHeight:i,pageSizeSelectorShow:!0,notLimit:!0}))),c.createElement(o.Dialog,{title:c.createElement(c.Fragment,null,c.createElement("i",{className:"icon-cem_warning warn-tip"}),c.createElement("span",null,"\u63d0\u9192")),size:"tiny",visible:g,onCancel:function(){return e.setState({dialogVisible:!1})},lockScroll:!0},c.createElement(o.Dialog.Body,null,c.createElement("span",null,"\u9700\u8981\u4e0b\u8f7d",p,"\u6761\u6570\u636e\uff0c\u9884\u8ba1\u9700\u8981",Math.ceil(p/389/60),"\u5206\u949f\u5bfc\u51fa\u5b8c\u6210\u3002"),p>=6e4&&c.createElement("span",null,"\u56e0\u4e3a\u6570\u636e\u91cf\u8fc7\u5927\uff0c\u9700\u8981\u5bfc\u51fa\u591a\u4e2aExcel\u6587\u4ef6\uff0c\u6253\u5305\u5bfc\u51fa\u3002\u6bcf\u4e2aExcel\u6587\u4ef6\u53ef\u5bfc\u51fa60000\u6761\u6570\u636e\uff0c\u5171\u5bfc\u51fa",Math.ceil(p/6e4),"\u4e2aExcel\u6587\u4ef6\u3002")),c.createElement(o.Dialog.Footer,{className:"dialog-footer"},c.createElement(o.Button,{onClick:function(){e.setState({dialogVisible:!1})}},"\u53d6\u6d88"),c.createElement(o.Button,{type:"primary",onClick:function(){e.setState({dialogVisible:!1}),e.hanleDownload(e.checkedList)}},"\u786e\u5b9a"))))},t}(c.PureComponent);const T=(0,u.connect)((function(e){e.loading;var t=(0,r.Z)(e,v);return(0,i.Z)({},t[w])}),(function(e){return{save:function(t){return e({type:w+"/save",payload:t})},getHistoryList:function(t){return e({type:w+"/getHistoryList",payload:t})},clearState:function(t){return e({type:w+"/clearState",payload:t})},getProTimeRange:function(t){return e({type:w+"/getProTimeRange",payload:t})}}}))(P)},6637:(e,t,n)=>{n.d(t,{u:()=>u});var a=n(87462),i=n(67294),r=n(45697),c=n.n(r),o=n(92360),l=function(e){var t=e.value,n=e.options,a=e.getValue,r=n.length===t.length,c=i.useState(t),l=c[0],s=c[1],d=i.useState(r),u=d[0],p=d[1],m=i.useState(!r&&t.length>0),h=m[0],f=m[1];i.useEffect((function(){a(l)}),[l]);return i.createElement("div",{className:"yt_modal_price_download_wrapper"},i.createElement("div",{className:"content"},i.createElement("span",null,"\u5b57\u6bb5"),i.createElement(o.Checkbox,{checked:u,indeterminate:h,onChange:function(e){p(e),f(!1),s(e?n.map((function(e){return e.id})):[])}},"\u5168\u9009")),i.createElement("div",{className:"checkbox_group"},n.map((function(e,t){return i.createElement(o.Checkbox,{key:t,value:e.id,checked:l.includes(e.id),onChange:function(){return function(e){var t=l,a=t.indexOf(e);t=a>-1?t.filter((function(t){return t!==e})):[].concat(l,[e]),s(t),p(t.length===n.length),f(t.length>0&&t.length!==n.length&&t.length<n.length)}(e.id)}},e.name)}))))};const s=l;l.propTypes={value:c().object,getValue:c().func};var d=n(57522);function u(e){return new Promise((function(t,n){var r=e.value||[],c=(0,a.Z)({},e,{titleText:"\u4e0b\u8f7d\u6570\u636e",className:"yt_modal_price_download_modal",content:i.createElement(s,(0,a.Z)({},e,{getValue:function(e){r=e}})),top:"50%"});c.onOk=function(){return t(r)},c.onCancel=n,(0,d.Z)(c)}))}},23942:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(87462),i=n(94578),r=n(67294),c=n(92360),o=n(45697),l=n.n(o),s=function(e){function t(t){var n;(n=e.call(this,t)||this)._setPadShowFalse=function(){n.state.show&&n.setState({show:!1})},n._handleOnClick=function(e){var t=n.state.show;t&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout((function(){n.setState({show:!t})}),0)},n._handleOnPanelClick=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n._handleOnRangeClick=function(e,t,a){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var i=n.state,r=i.checkedOpts,c=i.unCheckedOpts,o=n.props,l=o.onChange,s=o.leftFixedNum,d=r.slice(),u=d.findIndex((function(e){return e.name===a.name}));switch(d.splice(u,1),t){case"top":d.splice(s,0,a);break;case"up":d.splice(u-1,0,a);break;case"down":d.splice(u+1,0,a)}n.setState({checkedOpts:d},(function(){setTimeout((function(){var e=d.concat(c);l(e,"range")}),0)}))},n._handleOnItemChange=function(e,t){var i=n.props,r=i.onChange,c=i.rightFixedNum,o=n.state,l=o.checkedOpts,s=o.unCheckedOpts,d=l.slice(),u=s.slice();e?(d.splice(d.length-c,0,(0,a.Z)({},t,{checked:!0})),u=s.filter((function(e){return t.name!==e.name}))):(d=l.filter((function(e){return t.name!==e.name})),u.splice(0,0,(0,a.Z)({},t,{checked:!1}))),n.setState({checkedOpts:d,unCheckedOpts:u},(function(){setTimeout((function(){var e=d.concat(u);r(e,"check")}),0)}))};var i=t.options?t.options.filter((function(e){return e.checked})):[],r=t.options?t.options.filter((function(e){return!e.checked})):[];return n.state={show:!1,checkedOpts:i,unCheckedOpts:r},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},n.componentDidUpdate=function(e,t){var n=e.options,a=this.props.options;JSON.stringify(a)!==JSON.stringify(n)&&this.setState({checkedOpts:a.filter((function(e){return e.checked})),unCheckedOpts:a.filter((function(e){return!e.checked}))})},n.render=function(){var e=this,t=this.state,n=t.show,a=t.checkedOpts,i=t.unCheckedOpts,o=this.props,l=o.title,s=o.leftFixedNum,d=o.rightFixedNum;return r.createElement("div",{className:"sortable-checklist-button-wrapper",onClick:this._handleOnClick},r.createElement("span",{className:"scl-button-trigger "+(n?"sel":"")},l,r.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:n?"rotate(-180deg)":""}})),r.createElement("div",{className:"scl-panel",id:"sorableList",style:{display:n?"block":"none"},onClick:this._handleOnPanelClick},a.map((function(t,n){return r.createElement("div",{key:t.name,className:"scl-panel-item"},r.createElement(c.Checkbox,{style:{width:"calc(100% - "+(5===n?14:a.length-2?34:48)+"px)"},checked:t.checked,disabled:t.disabled,onChange:function(n){return e._handleOnItemChange(n,t)}},t.name),!t.disabled&&r.createElement("span",{className:"range-button-zone"},n!==s&&r.createElement("i",{className:"icon-cem_roof-placement",onClick:function(n){return e._handleOnRangeClick(n,"top",t)}}),n!==s&&r.createElement("i",{className:"icon-cem_upper",onClick:function(n){return e._handleOnRangeClick(n,"up",t)}}),n!==a.length-1-d&&r.createElement("i",{className:"icon-cem_lower",onClick:function(n){return e._handleOnRangeClick(n,"down",t)}})))})),i.reduce((function(t,n){return[].concat(t,[r.createElement("div",{key:n.name,className:"scl-panel-item"},r.createElement(c.Checkbox,{style:{width:"100%"},checked:n.checked,disabled:n.disabled,onChange:function(t){return e._handleOnItemChange(t,n)}},n.name))])}),[0===i.length?null:r.createElement("div",{key:"divider",className:"h-divider"})])))},t}(r.PureComponent);s.propTypes={options:l().array,onChange:l().func,leftFixedNum:l().number,rightFixedNum:l().number};const d=s}}]);