"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[822],{55003:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var a=n(63366),r=n(87462),i=n(94578),l=n(67294),o=n(55609),c=n(92360),s=n(55815),u=n(45697),m=n.n(u);const d=function(e){var t=e.leftName,n=e.data,a=e.checkedList,r=e.onChange,i=n.length===a.length,o=l.useState(i),s=o[0],u=o[1];return l.useEffect((function(){u(i)}),[a]),l.createElement("div",{className:"checkbox-list-wrapper"},l.createElement(c.Checkbox,{className:"checkbox-item",checked:s,onChange:function(e){var a,i=e?n:[];u(!0),r(((a={})[t]=i,a))}},"\u5168\u9009"),l.createElement(c.Checkbox.Group,{value:a,onChange:function(e){var a;u(e.length===n.length),r(((a={})[t]=e,a))}},n.map((function(e){return l.createElement(c.Checkbox,{key:e,label:e,className:"checkbox-item"})}))))};var p=function(e){function t(t){var n;(n=e.call(this,t)||this)._setPadShowFalse=function(){n.state.show&&n.setState({show:!1,tmpValue:{}})},n._setEvent=function(e){return 0===e?{onMouseEnter:function(){n.setState({firstLiHover:!0})},onMouseLeave:function(){n.setState({firstLiHover:!1})}}:{}},n._handleOnClick=function(e){var t=n.state,a=t.show,r=t.conValue;a&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout((function(){n.setState({show:!a,tmpValue:a?{}:JSON.parse(JSON.stringify(r))})}),0)},n._handleOnLeftClick=function(e){setTimeout((function(){n.setState({selLeftName:e})}),0)},n._handleOnCheckboxChange=function(e){var t=n.state.tmpValue;n.setState({tmpValue:(0,r.Z)({},t,JSON.parse(JSON.stringify(e)))})};var a=t.data?Object.keys(t.data):[],i=a.reduce((function(e,t){var n;return(0,r.Z)({},e,((n={})[t]=[],n))}),{});return n.state={show:!1,dataKeys:a,selLeftName:void 0,conValue:i,tmpValue:{}},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},n.componentDidUpdate=function(e){var t=e.data,n=e.value,a=this.props,i=a.data,l=a.value;if(JSON.stringify(t)!==JSON.stringify(i)){var o=Object.keys(i)||[],c=o.reduce((function(e,t){var n;return(0,r.Z)({},e,((n={})[t]=[],n))}),{});this.setState({dataKeys:o,conValue:c})}JSON.stringify(n)!==JSON.stringify(l)&&this.setState({conValue:(0,r.Z)({},this.state.conValue,l),selLeftName:Object.keys(l)[0]})},n.render=function(){var e=this,t=this.props,n=t.preTitle,a=t.data,r=t.onConfirm,i=this.state,o=i.show,s=i.selLeftName,u=i.tmpValue,m=i.conValue,p=i.dataKeys,f=s||p[0],h=p.length>0?p.reduce((function(e,t){return e+m[t].join(",")}),""):"\u6570\u636e\u4e3a\u7a7a";return l.createElement("div",{className:"simple-multi-select-wrapper",onClick:this._handleOnClick},l.createElement("span",{className:"trigger "+(o?"sel":"")},l.createElement("span",{className:"pre-title"},n,":"),l.createElement("span",{className:"title"},h||"\u5168\u90e8"),l.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:o?"rotate(-180deg)":""}})),l.createElement("div",{className:"panel "+(o?"active":""),onClick:function(e){e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}},f&&o?l.createElement(l.Fragment,null,l.createElement("span",{className:"left"},p.map((function(t){return l.createElement("div",{className:"item "+(f===t?"sel":""),key:t,onClick:function(){e._handleOnLeftClick(t)}},l.createElement("span",null,t,u[t].length>0&&l.createElement("i",{className:"icon-cem_large-screening",style:{marginLeft:5}})),l.createElement("i",{className:"icon-cem_arrow-thick"}))}))),l.createElement("span",{className:"right"},l.createElement(d,{leftName:f,data:a[f],checkedList:u[f]||[],onChange:this._handleOnCheckboxChange}))):l.createElement("div",{style:{width:"100%",height:250,display:"flex",justifyContent:"center",alignItems:"center",color:"#bfbfbf"}},"\u6570\u636e\u4e3a\u7a7a"),l.createElement("span",{className:"bottom"},l.createElement(c.Button,{type:"primary",onClick:function(){var t=JSON.parse(JSON.stringify(u));e.setState({show:!1,tmpValue:{},conValue:t}),r&&r(t)}},"\u786e\u5b9a"),l.createElement(c.Button,{onClick:this._setPadShowFalse},"\u53d6\u6d88"))))},t}(l.PureComponent);const f=p;p.propTypes={preTitle:m().string.isRequired,data:m().object.isRequired,value:m().object,onConfirm:m().func};var h=n(43036),g=n(17945),v=function(e,t,n){return l.createElement("div",{className:"message-rule-content-overlay-wrapper"},l.createElement("div",{className:"content-overlay-title"},e),n.map((function(e){return l.createElement("div",{className:"content-overlay-item",key:e},l.createElement("span",{className:"content-overlay-item-type"},e),l.createElement("span",{className:"content-overlay-item-content"},t[e].join("\uff0c")))})),t["\u5185\u5bb9"]&&l.createElement("div",{className:"content-overlay-item"},l.createElement("span",{className:"content-overlay-item-type"},"\u7ec4\u5408\u89c4\u5219"),l.createElement("span",{className:"content-overlay-item-content"},l.createElement("span",{className:"content-list-type"},"\u5185\u5bb9"),l.createElement("span",{className:"content-list-value"},t["\u5185\u5bb9"].map((function(e){return l.createElement("span",{key:e},e)}))))))},E=function(e,t){return l.createElement("div",{className:"message-rule-content-overlay-wrapper"},l.createElement("div",{className:"content-overlay-title"},e),l.createElement("div",null,t))},y=function(e,t){return l.createElement("div",{className:"message-rule-content-overlay-wrapper"},l.createElement("span",{style:{color:"#8c8c8c"}},"\u6807\u7b7e\u7c7b\u578b\uff1a"),l.createElement("span",null,e+"\uff0c "),l.createElement("span",{style:{color:"#8c8c8c"}},"\u6807\u7b7e\uff1a"),l.createElement("span",null,t))},C=function(e,t,n,a){if("rule"===t)return l.createElement("div",{key:e,className:"column-item"},l.createElement("span",{className:"column-item-type"},e),l.createElement("span",{className:"column-item-content"},a));var r=(0,g.rV)(""+e+a)+12,i=n-35-36,o=i-(0,g.rV)(e)-12;return l.createElement("div",{key:e,className:"column-item-single"},l.createElement("span",{className:"column-item-type"},e),l.createElement("span",{style:{display:"inline-flex"}},l.createElement("span",{className:"column-item-content",style:{maxWidth:o}},a),r>i&&l.createElement(h.Z,{overlay:"recipient"===t?E(e,a):y(e,a),placement:"top"},l.createElement("span",{className:"content-item-detail"},"\u8be6\u60c5"))))};const k=function(e){var t=e.data,n=e.propType,a=e.maxWidth,r=e.height,i=Object.keys(t).filter((function(e){return"\u5185\u5bb9"!==e})),o=["\u65e0"];return t["\u5185\u5bb9"]&&t["\u5185\u5bb9"].length>0&&JSON.stringify(o)!==JSON.stringify(t["\u5185\u5bb9"])&&(t["\u5185\u5bb9"].length>5?(o=t["\u5185\u5bb9"].slice(0,4)).push("..."):o=t["\u5185\u5bb9"]),l.createElement("div",{className:"column-type-wrapper",style:{height:r}},i.map((function(e,r,o){var c="rule"===n?3:4,s=t[e]?t[e].join("\uff0c"):"";return o.length<c||("rule"===n?0===r:r<3)?C(e,n,a,s):("rule"===n?1===r:3===r)?l.createElement("div",{key:r},l.createElement("span",{style:{color:"#8c8c8c"}},"..."),"tag"===n&&l.createElement(h.Z,{overlay:v("\u6807\u7b7e",t,i),placement:"top"},l.createElement("span",{className:"content-item-detail"},"\u8be6\u60c5"))):null})),t["\u5185\u5bb9"]&&l.createElement("div",{className:"column-item"},l.createElement("span",{className:"column-item-type item-"+n},"\u5185\u5bb9"),l.createElement("span",{className:"column-item-content"},o.map((function(e,t,n){return l.createElement("span",{className:"content-item",key:""+e+t},e)})))),"rule"===n&&l.createElement(h.Z,{overlay:v("\u6d88\u606f\u5904\u7406\u89c4\u5219",t,i),placement:"top"},l.createElement("span",{className:"content-item-detail"},"\u8be6\u60c5")))};var b=l.createContext({contentWidth:0});const N=function(e){var t=e.data,n=t.status,a=t.history,r=e.id,i=e.height,o=l.useState("Enable"===n),s=o[0],u=o[1];return l.useEffect((function(){u("Enable"===n)}),[n]),l.createElement(b.Consumer,null,(function(e){var t=e.onDialogOpen,n=e.onEditTriggerClick;return l.createElement("div",{className:"control-item-wrapper",style:{height:i}},l.createElement(h.Z,{overlay:s?"\u5f00\u542f":"\u5173\u95ed",placement:"top"},l.createElement("span",null,l.createElement(c.Switch,{value:s,onText:"",offText:"",onColor:"#0747A6",offColor:"#8c8c8c",onChange:function(e){t({type:s?"stop":"open",id:r,history:"Enable"===a,callback:function(){u(!e)}})}}))),l.createElement("span",{onClick:function(e){n({id:r})}},"\u7f16\u8f91"),l.createElement("span",{onClick:function(){t({type:"delete",id:r})}},"\u5220\u9664"))}))};var O=n(37841),R=[{key:"\u5168\u90e8",value:null},{key:"\u542f\u7528",value:"Enable"},{key:"\u505c\u7528",value:"Disable"}],S=function(e,t){var n=e-24-32-96-180;return[{label:"",width:48},{label:"\u6d88\u606f\u5904\u7406\u89c4\u5219",prop:"rule",minWidth:.4*n,render:function(e,a,r){return l.createElement(k,{height:24*t[r].ruleLine+20,data:t[r][a.prop],propType:a.prop,maxWidth:.4*n})}},{label:"\u63a5\u6536\u6210\u5458",prop:"recipient",minWidth:.3*n,render:function(e,a,r){return l.createElement(k,{height:24*t[r].ruleLine+20,data:t[r][a.prop],propType:a.prop,maxWidth:.3*n})}},{label:"\u6807\u7b7e",prop:"tag",minWidth:.2*n,render:function(e,a,r){return l.createElement(k,{height:24*t[r].ruleLine+20,data:t[r][a.prop],propType:a.prop,maxWidth:.2*n})}},{label:"\u64cd\u4f5c",width:180,render:function(e,n,a){return l.createElement(N,{height:24*t[a].ruleLine+20,data:{status:t[a].status,history:t[a].history},id:e.id})}},{label:"",width:48}]};const _=function(e){var t=e.ruleDatas,n=e.tagData,a=e.recipientData,r=e.onFilterChange,i=(e.onEditTriggerClick,e.selTagData),o=e.filterObj.status;return l.createElement("div",{className:"message-rule-list-wrapper"},l.createElement("div",{className:"button-top",style:{height:"58px"}},l.createElement("span",{className:"button-left"},l.createElement(f,{preTitle:"\u6807\u7b7e",data:n.options,value:i,onConfirm:function(e){var t=Object.keys(e).reduce((function(t,a){return[].concat(t,e[a].map((function(e){return n.dictionary[e]})))}),[]);r({tagIdList:t})}}),l.createElement(f,{preTitle:"\u63a5\u6536\u6210\u5458",data:a.options,onConfirm:function(e){var t=e["\u56e2\u961f"].map((function(e){return a.dictionary[e]})),n=e["\u6210\u5458"].map((function(e){return a.dictionary[e]}));r({teamIdList:t,userIdList:n})}}),l.createElement(O.Z,{activeKey:o,options:R,onTabClick:function(e){return r({status:e})}}))),l.createElement(b.Consumer,null,(function(e){var n=e.contentWidth;return l.createElement(c.Table,{style:{width:"100%",zIndex:0,marginTop:10,minHeight:500},columns:S(n,t),data:t,className:"rule-list-table"})})))};var L={delete:{title:"\u662f\u5426\u4ecd\u8981\u5220\u9664\u8be5\u89c4\u5219\uff1f",type:"warning",body:"\u5220\u9664\u89c4\u5219\u540e\uff0c\u57fa\u4e8e\u8be5\u89c4\u5219\u5bf9\u6d88\u606f\u5df2\u7ecf\u6253\u4e0a\u7684\u6807\u7b7e\u5c06\u4f1a\u4fdd\u7559\u3002\u5982\u679c\u8981\u5220\u9664\u6807\u7b7e\uff0c\u8bf7\u4f7f\u7528\u6807\u7b7e\u7ba1\u7406\u529f\u80fd\u3002"},stop:{title:"\u662f\u5426\u4ecd\u8981\u505c\u7528\u8be5\u89c4\u5219\uff1f",type:"warning",body:"\u505c\u7528\u540e\u65b0\u7684\u6d88\u606f\u5c06\u4e0d\u4f1a\u88ab\u672c\u89c4\u5219\u5904\u7406\uff0c\u4f46\u57fa\u4e8e\u8be5\u89c4\u5219\u5bf9\u6d88\u606f\u5df2\u7ecf\u6253\u4e0a\u7684\u6807\u7b7e\u5c06\u4f1a\u4fdd\u7559\u3002\u5982\u679c\u8981\u5220\u9664\u6807\u7b7e\uff0c\u8bf7\u4f7f\u7528\u6807\u7b7e\u7ba1\u7406\u529f\u80fd\u3002"},open:{title:"\u662f\u5426\u542f\u7528\u8be5\u89c4\u5219\uff1f",type:"warning",body:"\u542f\u7528\u89c4\u5219\u540e\uff0c\u7b26\u5408\u672c\u89c4\u5219\u7684\u65b0\u6d88\u606f\u4f1a\u88ab\u6253\u4e0a\u76f8\u5e94\u7684\u6807\u7b7e\u5e76 \u8f6c\u53d1\u7ed9\u76ee\u6807\u6536\u4ef6\u4eba\u3002"},leave:{title:"\u662f\u5426\u4ecd\u8981\u79bb\u5f00\u8be5\u9875\u9762\uff1f",type:"warning",body:"\u60a8\u79bb\u5f00\u8be5\u9875\u9762\uff0c\u60a8\u8f93\u5165\u7684\u6570\u636e\u53ef\u80fd\u4e0d\u4f1a\u88ab\u4fdd\u5b58"},created:{title:"\u6d88\u606f\u5904\u7406\u89c4\u5219\u521b\u5efa\u6210\u529f",type:"success",body:"\u89c4\u5219\u7acb\u5373\u751f\u6548\n\u5386\u53f2\u6570\u636e\u5c06\u7a0d\u540e\u7684\u51e0\u5206\u949f\u5185\u5b8c\u6210\u6807\u7b7e\u5316\u5de5\u4f5c\uff0c\u4f46\u662f\u4e0d\u4f1a\u5206\u53d1\u6d88\u606f"},edited:{title:"\u6d88\u606f\u5904\u7406\u89c4\u5219\u4fdd\u5b58\u6210\u529f",type:"success",body:"\u89c4\u5219\u7acb\u5373\u751f\u6548\n\u9996\u5148\u4f1a\u5c06\u8be5\u89c4\u5219\u7684\u5386\u53f2\u6807\u7b7e\u6e05\u9664\uff0c\u5728\u7a0d\u540e\u7684\u51e0\u5206\u949f\u5185\u5b8c\u6210\u65b0\u7684\u6807\u7b7e\u5316\u5de5\u4f5c\uff0c\u4f46\u662f\u4e0d\u4f1a\u5206\u53d1\u6d88\u606f"},editNoChecked:{title:"\u63d0\u793a",type:"error",body:'"\u6807\u8bb0\u6807\u7b7e"\u548c"\u6d88\u606f\u5206\u914d\u7ed9"\u81f3\u5c11\u9009\u5b9a\u4e00\u4e2a'},contentInvalid:{title:"\u63d0\u793a",type:"error",body:"\u8fc7\u6ee4\u6761\u4ef6\u4e2d\u5b58\u5728\u5185\u5bb9\u89c4\u5219\u4e3a\u7a7a"},filterEmpty:{title:"\u63d0\u793a",type:"error",body:"\u8fc7\u6ee4\u6761\u4ef6\u4e0d\u80fd\u4e3a\u7a7a"},tagCheckedEmpty:{title:"\u63d0\u793a",type:"error",body:'\u9009\u5b9a"\u6807\u8bb0\u6807\u7b7e"\u540e\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a'},teamCheckedEmpty:{title:"\u63d0\u793a",type:"error",body:'\u9009\u5b9a"\u6d88\u606f\u5206\u914d\u7ed9"\u540e\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a'}};const w=function(e){function t(t){var n;return(n=e.call(this,t)||this).showDialog=function(e){n.state.visible?n.setState({visible:!1},(function(){return n.setState((0,r.Z)({history:!1,visible:!0,callback:void 0,cancelCallback:void 0},e))})):n.setState((0,r.Z)({history:!1,visible:!0,callback:void 0,cancelCallback:void 0},e))},n.state={visible:!1,type:"",id:"",history:!1,callback:void 0,cancelCallback:void 0},n}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.visible,a=t.type,r=t.id,i=t.callback,o=t.history,s=t.cancelCallback,u=this.props,m=u.onConfirm,d=u.onCancel,p=a?L[a].body:"";return l.createElement(c.Dialog,{className:"simple-dialog-wrapper simple-dialog-"+(a?L[a].type:""),closeOnClickModal:!1,title:a?L[a].title:"",visible:n,onCancel:function(){return e.setState({visible:!1})},size:"tiny"},l.createElement(c.Dialog.Body,null,l.createElement("div",{className:"dialog-body"},l.createElement("div",{style:{display:p?"block":"none"}},p.split("\n").map((function(e){return l.createElement("p",{key:e},e)}))),"open"===a&&l.createElement("div",null,l.createElement(c.Checkbox,{checked:o,onChange:function(t){e.setState({history:t})}},"\u5bf9\u6ee1\u8db3\u6b64\u89c4\u5219\u7684\u5386\u53f2\u6d88\u606f\u6253\u4e0a\u6807\u7b7e")))),l.createElement(c.Dialog.Footer,null,l.createElement("div",null,"created"===a||"edited"===a||"editNoChecked"===a||"editFilterEmpty"===a||"contentInvalid"===a||"filterEmpty"===a||"tagCheckedEmpty"===a||"teamCheckedEmpty"===a?l.createElement(c.Button,{type:"primary",onClick:function(){e.setState({visible:!1,type:"",id:""}),m&&m({type:a,id:r,history:o}),i&&i()}},"\u786e\u5b9a"):l.createElement(l.Fragment,null,l.createElement(c.Button,{type:"primary",onClick:function(){e.setState({visible:!1,id:"",type:""},(function(){m&&m({type:a,id:r,history:o}),i&&i()}))}},"\u786e\u5b9a"),l.createElement(c.Button,{onClick:function(){e.setState({visible:!1,id:"",type:""}),d&&d({type:a,id:r,history:o}),s&&s()}},"\u53d6\u6d88")))))},t}(l.PureComponent);var D=n(35303),I=n(83425),T=n(58992);const j=function(e){function t(t){var n;return(n=e.call(this,t)||this).getValue=function(){return new Promise((function(e,t){var a=n.filterConditionRef?n.filterConditionRef.getValue():[],i=n.contentRef?n.contentRef.getValue():[];i.length>0?n.contentRef.formRef.validate((function(n){n?e((0,r.Z)({},(0,g._l)(a),{content:i})):t("contentInvalid")})):a.length>0?e((0,r.Z)({},(0,g._l)(a))):t("filterEmpty")}))},n.filterConditionRef=void 0,n.getContentRef=void 0,n}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.filter,a=t.content;return l.createElement(l.Fragment,null,l.createElement(I.Z,{ref:function(t){return e.filterConditionRef=t},style:{display:"block"},type:"PRICE_WARNING",value:n,filter:["MESSAGE_RELATION","CONN_CONFIG"],filterConfig:["ESCORE","messageType"],noBottom:!0,moreFilterPosition:"top",hideAdvanced:!0}),l.createElement("div",{className:"dashed-divider"}),l.createElement(T.Z,{value:a,ref:function(t){return e.contentRef=t}}))},t}(l.PureComponent);const V=function(e){var t=e.conditionList,n=(t.tagList,t.userList),a=t.teamList,r=e.tagData,i=e.handleOnConfirm,o=e.handleOnCancel,s=e.getFilterRef,u=e.handleOnCommonChange,m=e.loading,d=e.filter,p=e.tagValues,f=e.teamValues,h=e.userValues,g=e.isTagChecked,v=e.contentValues,E=e.isDiliverChecked;return l.createElement("div",{className:"message-rule-edit-view-wrapper"},l.createElement(c.Loading,{loading:m,style:{height:"100%"}},l.createElement(l.Fragment,null,l.createElement("div",{className:"edit-top"},l.createElement("span",{className:"edit-top-title"},"\u8bbe\u7f6e\u5404\u79cd\u8fc7\u6ee4\u6761\u4ef6\uff0c\u4ee5\u65b9\u4fbf\u5bf9\u6d88\u606f\u8fdb\u884c\u5206\u7c7b\u6216\u5904\u7406")),l.createElement("div",{className:"solid-divider"}),l.createElement("div",{className:"edit-rule"},l.createElement(j,{ref:s,filter:d,content:v}))),l.createElement("div",{className:"zone-divider"}),l.createElement(l.Fragment,null,l.createElement("div",{className:"edit-top"},l.createElement("span",{className:"edit-top-title"},"\u6ee1\u8db3\u4ee5\u4e0a\u6761\u4ef6\u65f6\uff0c\u5219\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c")),l.createElement("div",{className:"solid-divider"}),l.createElement("div",{className:"edit-item"},l.createElement("span",null,l.createElement(c.Checkbox,{checked:g,onChange:function(e){return u("isTagChecked",e)}},"\u6807\u8bb0\u6807\u7b7e")),l.createElement("span",null,l.createElement(D.RS,{multiple:!0,tags:!0,value:p,onChange:function(e){return u("tagValues",e)}},Object.keys(r.options).map((function(e){return l.createElement(D.Ph.OptGroup,{label:e,key:e},r.options[e].map((function(e){return l.createElement(D.Wx,{key:e,label:e,value:e},e)})))}))))),l.createElement("div",{className:"edit-diliver",style:{marginBottom:"40px"}},l.createElement("span",null,l.createElement(c.Checkbox,{checked:E,onChange:function(e){return u("isDiliverChecked",e)}},"\u6d88\u606f\u5206\u914d\u7ed9")),l.createElement("span",null,l.createElement("div",{className:"edit-item"},l.createElement("span",null,"\u56e2\u961f"),l.createElement("span",null,l.createElement(D.RS,{multiple:!0,tags:!0,value:f,onChange:function(e){return u("teamValues",e)}},a.map((function(e){return l.createElement(D.Wx,{key:e.id,label:e.name,value:e.name},e.name)}))))),l.createElement("div",{className:"edit-item"},l.createElement("span",null,"\u7528\u6237"),l.createElement("span",null,l.createElement(D.RS,{multiple:!0,tags:!0,value:h,onChange:function(e){return u("userValues",e)}},n.map((function(e){return l.createElement(D.Wx,{key:e.id,label:e.name,value:e.name},e.name)})))))))),l.createElement("div",{className:"button-zone",style:{padding:"10px 24px",width:"100%"}},l.createElement("span",{className:"rigth"},l.createElement(c.Button,{type:"primary",onClick:i},"\u4fdd\u5b58"),l.createElement(c.Button,{onClick:o},"\u53d6\u6d88")))))};var x=n(35239),Z=n(64396),P=Z.Z.project.messageRule,J=function(e){function t(t){var n;(n=e.call(this,t)||this)._handleEvent=function(e){e&&"filter-list"===e.key&&n.setState({loading:!1})},n._checkValidateValue=function(e,t){return e.reduce((function(e,n){return e&&!!t.find((function(e){return e.name===n}))}),!0)},n._handleOnCommonChange=function(e,t){var a,r=n.state,i=r.isDiliverChecked,l=r.isTagChecked,o=r.userValues,c=r.tagValues,s=r.teamValues,u=n.props.conditionList,m=u.tagList,d=u.userList,p=u.teamList;("tagValues"!==e||n._checkValidateValue(t,m))&&("userValues"!==e||n._checkValidateValue(t,d))&&("teamValues"!==e||n._checkValidateValue(t,p))&&n.setState(((a={isDiliverChecked:"userValues"===e||"teamValues"===e?t.length>0:i,isTagChecked:"tagValues"===e?t.length>0:l,userValues:"isDiliverChecked"!==e||t?o:[],teamValues:"isDiliverChecked"!==e||t?s:[],tagValues:"isTagChecked"!==e||t?c:[]})[e]=t,a))},n._handleOnConfrim=function(){var e=n.props,t=e.onDialogOpen,a=e.conditionList,r=a.tagList,i=a.userList,l=a.teamList,o=e.editData,c=o.id,s=o.history,u=e.addRule,m=e.updateRule,d=e.filterObj,p=n.state,f=p.isDiliverChecked,h=p.isTagChecked,g=p.teamValues,v=p.tagValues,E=p.userValues,y=p.projectId;f||h?h&&0===v.length?t({type:"tagCheckedEmpty"}):f&&0===E.length&&0===g.length?t({type:"teamCheckedEmpty"}):n.filterRef&&n.filterRef.getValue().then((function(e){var n=h?v.map((function(e){var t=r.find((function(t){return t.name===e}));return t?t.id:e})):[],a=f?E.map((function(e){var t=i.find((function(t){return t.name===e}));return t?t.id:e})):[],o=f?g.map((function(e){var t=l.find((function(t){return t.name===e}));return t?t.id:e})):[];c?m({id:c,projectId:y,filterModel:e,teamIdList:o,tagIdList:n,userIdList:a,history:s,onDialogOpen:t,filterObj:d}):u({projectId:y,filterModel:e,tagIdList:n,teamIdList:o,userIdList:a,onDialogOpen:t,filterObj:d})})).catch((function(e){t({type:e})})):t({type:"editNoChecked"})},n._handleOnCancel=function(){var e=n.props,t=e.onEditTriggerClick;(0,e.onDialogOpen)({type:"leave",callback:function(){t(void 0)}})},n.filterRef=void 0;var a=t.editData,r=a.filter,i=a.tagList,l=a.teamList,o=a.userList,c=r&&r.content||void 0,s=i&&i.map((function(e){return e.name}))||[],u=l&&l.map((function(e){return e.name}))||[],m=o&&o.map((function(e){return e.name}))||[],d=s.length>0,p=u.length>0||m.length>0;return n.state={projectId:x.t.get(x.V.backProjectConfig).id,filter:r?(0,g.Bd)(r):[],tagValues:s,teamValues:u,userValues:m,isTagChecked:d,contentValues:c,isDiliverChecked:p,loading:!0},n.events={getFilterRef:function(e){return n.filterRef=e},handleOnCommonChange:n._handleOnCommonChange,handleOnConfirm:n._handleOnConfrim,handleOnCancel:n._handleOnCancel},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("setItemEvent",this._handleEvent)},n.componentWillUnmount=function(){window.removeEventListener("setItemEvent",this._handleEvent)},n.render=function(){return l.createElement(V,(0,r.Z)({},this.props,this.state,this.events))},t}(l.PureComponent);const F=(0,o.connect)((function(e){(0,r.Z)({},e);return{}}),(function(e){return{addRule:function(t){return e({type:P+"/addRule",payload:t})},updateRule:function(t){return e({type:P+"/updateRule",payload:t})}}}))(J);const W=function(e){var t=e.headerTitle,n=e.onDialogConfirm,a=e.getDialogRef,r=e.editData,i=e.onDialogCancel,o=e.loading,u=e.onBreadcrumbBeforeJump,m=e.onEditTriggerClick,d=document.documentElement.clientHeight-46-78-24;return l.createElement("div",{className:"message-rule-wrapper"},l.createElement(s.Z,{title:t,beforeJump:r?u:void 0,rightContent:r?null:l.createElement(c.Button,{type:"primary",onClick:function(e){return m({})}},"\u521b\u5efa\u89c4\u5219")}),l.createElement("div",{className:"content",id:"message-rule-content"},l.createElement("div",{style:{minHeight:d,backgroundColor:"#fff",padding:"16px",marginBottom:r?46:""}},l.createElement(c.Loading,{loading:o,style:{height:"100%"}},void 0===r?l.createElement(_,e):l.createElement(F,e)))),l.createElement(w,{onConfirm:n,onCancel:i,ref:a}))};var B=n(13713),A=["loading"],M=Z.Z.project.messageRule,z=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleWindowResize=function(){var e=document.getElementById("message-rule-content").offsetWidth;n.setState({contentWidth:e})},n._handleWindowPoststate=function(e){e.preventDefault(),e.stopImmediatePropagation(),!n.state.editData&&n._handleOnDialogOpen({type:"leave"})},n._handleOnFilterChange=function(e){var t=n.state.filterObj,a=n.props.fetchRuleList,i=(0,r.Z)({},t,e);n.setState({filterObj:i},(function(){a(i)}))},n._handleOnDialogConfirm=function(e){var t=n.props,a=t.updateHistoryRule,r=t.deleteRule,i=t.setRuleStatus,l=n.state.filterObj;switch(e.type){case"edited":case"created":n._handleOnEditTriggerClick(void 0),a({projectId:l.projectId,id:e.id,history:e.history?"Enable":"Disable",filterObj:l});break;case"delete":r({projectId:l.projectId,id:e.id,filterObj:l});break;case"stop":i({projectId:l.projectId,id:e.id,history:e.history?"Enable":"Disable",status:"Disable",filterObj:l});break;case"open":i({projectId:l.projectId,id:e.id,history:e.history?"Enable":"Disable",status:"Enable",filterObj:l});break;case"leave":n._handleOnEditTriggerClick(void 0)}},n._handleOnDialogCancel=function(e){var t=n.props.fetchRuleList,a=n.state.filterObj;if("created"===e.type)n._handleOnEditTriggerClick(void 0),t({projectId:a.projectId})},n._handleOnDialogOpen=function(e){var t=n.simpleDialogRef&&n.simpleDialogRef.showDialog;t&&t(e)},n._handleOnEditTriggerClick=function(e){var t=n.state.headerTitle,a=n.props.ruleList,r=e?Object.keys(e).length>0?a.find((function(t){return t.id===e.id})):{}:void 0;r?(t.push({title:r.id?"\u4fee\u6539\u89c4\u5219":"\u521b\u5efa\u89c4\u5219",url:""}),n.setState({editData:r,headerTitle:t})):n.setState({editData:r,headerTitle:(0,B.u)({title:"\u6d88\u606f\u5904\u7406\u89c4\u5219",url:"/account/project/messageRule"})})},n._handleOnBreadcrumbBeforeJump=function(e,t){n._handleOnDialogOpen({type:"leave",callback:function(){n._handleOnEditTriggerClick(void 0)}})},n.simpleDialogRef=void 0,n.filterConditionRef=void 0,n.state={headerTitle:(0,B.u)({title:"\u6d88\u606f\u5904\u7406\u89c4\u5219",url:"/account/project/messageRule"}),contentWidth:0,selTagData:{},filterObj:{projectId:x.t.get(x.V.backProjectConfig).id,status:null,tagIdList:[],teamIdList:[],userIdList:[]},editData:void 0,loading:!0},n.events={getDialogRef:function(e){return n.simpleDialogRef=e},onFilterChange:n._handleOnFilterChange,onDialogConfirm:n._handleOnDialogConfirm,onDialogCancel:n._handleOnDialogCancel,onDialogOpen:n._handleOnDialogOpen,onEditTriggerClick:n._handleOnEditTriggerClick,onBreadcrumbBeforeJump:n._handleOnBreadcrumbBeforeJump},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){(0,this.props.fetchCondition)({projectId:this.state.filterObj.projectId}),window.addEventListener("resize",this._handleWindowResize),window.addEventListener("popstate",this._handleWindowPoststate),this._handleWindowResize()},n.componentDidUpdate=function(e){var t=this,n=this.state.filterObj,a=this.props,i=a.fetchRuleList,l=a.location,o=a.conditionList;if(!this.props.fetchConditionEffecting&&e.fetchConditionEffecting){var c=l.state&&l.state.tagIdList||[],s=c.reduce((function(e,t){var n=o.tagList.find((function(e){return e.id===t}));return n&&(!e[n.value]&&(e[n.value]=[]),e[n.value].push(n.name)),e}),{});this.setState({selTagData:s,filterObj:(0,r.Z)({},n,{tagIdList:c})},(function(){return i(t.state.filterObj)}))}!this.props.ruleListEffecting&&e.ruleListEffecting&&this.setState({loading:!1})},n.componentWillUnmount=function(){window.removeEventListener("resize",this._handleWindowResize)},n.render=function(){return l.createElement(b.Provider,{value:{contentWidth:this.state.contentWidth,onDialogOpen:this._handleOnDialogOpen,onEditTriggerClick:this._handleOnEditTriggerClick}},l.createElement(W,(0,r.Z)({},this.props,this.state,this.events)))},t}(l.PureComponent);const G=(0,o.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,A);return(0,r.Z)({},n[M],{ruleListEffecting:t.effects[M+"/fetchRuleList"],fetchConditionEffecting:t.effects[M+"/fetchCondition"]})}),(function(e){return{fetchRuleList:function(t){return e({type:M+"/fetchRuleList",payload:t})},fetchCondition:function(t){return e({type:M+"/fetchCondition",payload:t})},updateHistoryRule:function(t){return e({type:M+"/updateHistoryRule",payload:t})},deleteRule:function(t){return e({type:M+"/deleteRule",payload:t})},setRuleStatus:function(t){return e({type:M+"/setRuleStatus",payload:t})}}}))(z)},13713:(e,t,n)=>{n.d(t,{u:()=>r});var a=n(35239),r=function(e){var t=e.title,n=e.url,r=a.t.get(a.V.backProjectConfig).name;return n&&-1!==n.indexOf("memberlist")?[{title:r,url:"/account/project/preview"},{title:"\u7528\u6237\u7ec4",url:"/account/project/usergroup"},{title:t,url:n}]:[{title:r,url:"/account/project/preview"},{title:t,url:n}]}},24473:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(87462),r=n(63366),i=n(94578),l=n(67294),o=n(45697),c=n.n(o),s=n(94184),u=n.n(s),m=["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"],d=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.prefixCls,i=t.children,o=t.className,c=t.block,s=t.indeterminate,d=t.value,p=t.checked,f=t.defaultChecked,h=t.onChange,g=t.disabled,v=(0,r.Z)(t,m),E={value:d,checked:p,defaultChecked:f,onChange:h,disabled:g},y=u()(n,((e={})[n+"-disabled"]=E.disabled,e[n+"-block"]=c,e[n+"-indeterminate"]=s,e),o);return l.createElement("label",(0,a.Z)({tabIndex:E.disabled?-1:0,className:y},v),l.createElement("input",(0,a.Z)({type:"checkbox",className:n+"-input"},E)),l.createElement("span",{className:n+"-status"}),i&&l.createElement("span",{className:n+"-text",title:i},i))},t}(l.Component);d.propTypes={prefixCls:c().string,value:c().oneOfType([c().string,c().number]),checked:c().bool,defaultChecked:c().bool,onChange:c().func,indeterminate:c().bool,disabled:c().bool,block:c().bool},d.defaultProps={prefixCls:"wt-checkbox"};const p=d},85151:(e,t,n)=>{n.d(t,{Jg:()=>a.Z,CS:()=>f});var a=n(24473),r=n(87462),i=n(63366),l=n(94578),o=n(67294),c=n(45697),s=n.n(c),u=n(94184),m=n.n(u),d=["prefixCls","children","className","onChange","values","checkedList","block"],p=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).handleCheckBoxChange=function(e){var n=t.props.onChange;n&&n(e)},t}return(0,l.Z)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,a=n.prefixCls,l=n.children,c=n.className,s=(n.onChange,n.values),u=n.checkedList,p=n.block,f=(0,i.Z)(n,d);return e=s?s.map((function(e,n){var a=0!==u.length&&-1!==u.indexOf(e);return o.createElement(Checkbox,{key:n,value:e,checked:a,onChange:function(e){return t.handleCheckBoxChange(e)},block:p},e)})):o.Children.map(l,(function(e,n){if(e){var a=e.props,r=a.value,i=0!==u.length&&-1!==u.indexOf(r);return o.cloneElement(e,{checked:i,key:n,block:a.block||p,onChange:function(){var e=a.value;t.handleCheckBoxChange(e)}})}})),o.createElement("div",(0,r.Z)({className:m()(a,c)},f),e)},t}(o.Component);p.defaultProps={prefixCls:"wt-checkbox-group"},p.propTypes={onChange:s().func,values:s().array,block:s().bool};const f=p;var h=function(e){var t={};return Object.keys(e).forEach((function(n){/^data\-.+$/.test(n)&&(t[n]=e[n])})),t},g=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=h(e);return o.createElement("label",{className:e.className,title:e.children},o.createElement("div",{className:"checkbox"},o.createElement("input",(0,r.Z)({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),o.createElement("div",{className:"checkbox-body"})),"\xa0",o.createElement("span",null,e.children))},t}(o.Component);g.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}},55815:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),r=n(67294),i=n(45697),l=n.n(i),o=n(43036),c=n(61409),s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,r=n.beforeJump;e!==a.length-1&&(r?new Promise((function(e,t){return r(e,t)})).then((function(){c.mW.push({pathname:a[e].url,state:a[e].state})})):c.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,i=t.rightContent,l=t.className,c=t.overlay;return r.createElement("div",{className:"breadcumb-wrapper "+l},n instanceof Array?r.createElement("div",{className:"breadcrumb-left"},r.createElement("div",null,n.map((function(t,a){return r.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),r.createElement("span",null,a||n[n.length-1].title,c&&r.createElement(o.Z,{placement:"top",overlay:c},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):r.createElement("div",{className:"normal-title"},n,c&&r.createElement(o.Z,{placement:"top",overlay:c},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),i||"")},t}(r.Component);s.propTypes={className:l().string,title:l().oneOfType([l().string,l().arrayOf(l().shape({title:l().string,url:l().string,state:l().object}))]).isRequired,overlay:l().oneOfType([l().string,l().node]),mainTitle:l().oneOfType([l().string,l().node]),beforeJump:l().func,rightContent:l().node};const u=s},58992:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(87462),r=n(94578),i=n(67294),l=n(92360),o=n(45697),c=n.n(o),s=n(38263),u=n(85151),m=[{label:"\u5305\u542b",value:"contain"},{label:"\u4e0d\u5305\u542b",value:"notContain"}];const d=function(e){var t=e.ruleGroup,n=e.formRef,a=e.groupIdx,r=e.editable,o=e.onSelectChange,c=e.onInputChange,d=e.onRuleItemDelete,p=e.onRuleGroupDelete,f=e.onRuleItemAdd,h=e.onActiveRuleCheckChange,g=(0===t.contain.length||""===t.contain[0])&&0===t.notContain.length,v=i.useState(g),E=v[0],y=v[1],C=i.useState(""),k=C[0],b=C[1];i.useEffect((function(){!E&&b(function(e,t){return(e?"\u4e00\u53e5\u8bdd\u4e2d":"\u5168\u6587\u4e2d")+"\uff1a"+["contain","notContain"].reduce((function(e,n){return t[n]&&t[n].length>0?[].concat(e,[("contain"===n?"\u5305\u542b":"\u4e0d\u5305\u542b")+t[n].map((function(e){return'<span style="color: #262626;">\u201c'+e+"\u201d</span>"})).join("\uff0c")]):e}),[]).join("\uff0c\u4e14")}(t.sentence,t))}),[E]);var N=t.contain.length+t.notContain.length,O=42*N+30+10;return i.createElement("div",{className:"content-rule-group"},i.createElement("div",{className:"content-rule-group-top"},i.createElement("span",{className:"show-icon",onClick:function(){E?function(e,t,n){var a=["contain","notContain"].reduce((function(n,a){return[].concat(n,e[a].map((function(e,n){return"rule-"+t+"-"+a+"-"+n})))}),[]),r=n[0],i=a.map((function(e){return new Promise((function(t,n){r?r.validateField(e,(function(e){null===e?t():n()})):n()}))}));return Promise.all(i)}(t,a,n).then((function(){y(!1)})):y(!0)}},i.createElement("i",{className:"icon-cem_pull-or-take-up",style:{transform:"rotate("+(E?-180:0)+"deg)"}})),i.createElement("span",{className:"content-rule-group-title"},E?i.createElement("span",{className:"group-title-check"},i.createElement(u.Jg,{checked:t.sentence,onChange:function(e){var t=e.currentTarget.checked;return h(a,t)}}),i.createElement("span",{style:{marginLeft:8}},"\u4ee5\u4e0b\u5173\u952e\u8bcd\u51fa\u73b0\u5728",i.createElement("span",{style:{color:"#262626"}},"\u201c\u4e00\u53e5\u8bdd\u201d"),"\u4e2d\u6761\u4ef6\u624d\u751f\u6548?")):i.createElement("span",{dangerouslySetInnerHTML:{__html:k}})),i.createElement("span",{className:"group-delete",onClick:function(){return p(a)}},i.createElement("i",{className:"icon-cem_delete"}))),i.createElement("div",{className:"content-rule-group-list",style:{height:E?O:0,paddingTop:E?10:0}},i.createElement("div",{className:"group-list "+(N>1?"mulit-group-list":"")},i.createElement("span",{className:"list-left"},i.createElement("span",{style:{fontSize:14}},"\u4e14")),i.createElement("span",{className:"list-right"},["contain","notContain"].map((function(e){return t[e]&&t[e].map((function(t,n){var u="rule-"+a+"-"+e+"-"+n;return i.createElement("div",{key:u,className:"content-rule-group-item"},i.createElement("span",null,i.createElement(s.ZP,{disabled:!r,value:m.find((function(t){return t.value===e})).label,onChange:function(e){return o(u,e)}},m.map((function(e){return i.createElement(s.Wx,{key:e.value,title:e.label},e.label)})))),i.createElement("span",{style:{height:42}},i.createElement(l.Form.Item,{prop:u},i.createElement(l.Input,{disabled:!r,value:t,onChange:function(e){return c(u,e)}}))),r&&i.createElement("span",{onClick:function(){return d(u)}},i.createElement("i",{className:"icon-cem_delete"})))}))})))),r&&i.createElement(i.Fragment,null,i.createElement("span",{className:"add-icon",onClick:function(){return f(a)}},i.createElement("i",{className:"icon-cem_add-to"})),i.createElement("span",{style:{marginLeft:8,color:"#262626",fontSize:14}},"\u6dfb\u52a0\u65b0\u7684\u5173\u952e\u8bcd"))))};var p={contain:[""],notContain:[],sentence:!0,id:Math.round(1e4*Math.random())},f=function(e){function t(t){var n;(n=e.call(this,t)||this)._handleOnRuleGroupAdd=function(){var e=n.state.content,t=[].concat(e,[JSON.parse(JSON.stringify(p))]);n.setState({content:t,formProps:n.getFormProps(t),hasChanged:!0})},n._handleOnRuleItemAdd=function(e){var t=n.state.content,a=n.props.onChange;if(t[e]){var r=JSON.parse(JSON.stringify(t));!r[e].contain&&(r[e].contain=[]),r[e].contain.push(""),n.setState({content:r,formProps:n.getFormProps(r),hasChanged:!0},(function(){return a&&a(r)}))}},n._handleOnRuleItemDelete=function(e){if(e){var t=n.state.content,a=n.props.onChange,r=e.split("-"),i=(r[0],r[1]),l=r[2],o=r[3];if(t[i]&&t[i][l]&&void 0!==t[i][l][o]){var c=JSON.parse(JSON.stringify(t));c[i][l].splice(o,1),0===c[i].contain.length&&0===c[i].notContain.length&&c.splice(i,1),n.setState({content:c,formProps:n.getFormProps(c),hasChanged:!0},(function(){return a&&a(c)}))}}},n._handleOnSelecChange=function(e,t){if(e&&t){var a=n.state.content,r=n.props.onChange,i=e.split("-"),l=(i[0],i[1]),o=i[2],c=i[3];if(a[l]&&a[l][o]&&void 0!==a[l][o][c]){var s=JSON.parse(JSON.stringify(a)),u=s[l][o].splice(c,1);s[l][t].push(u[0]),n.setState({content:s,formProps:n.getFormProps(s),hasChanged:!0},(function(){return r&&r(s)}))}}},n._handleOnInputChange=function(e,t){if(e){var a=n.state.content,r=n.props.onChange,i=e.split("-"),l=(i[0],i[1]),o=i[2],c=i[3];if(a[l]&&a[l][o]&&void 0!==a[l][o][c]){var s=JSON.parse(JSON.stringify(a));s[l][o][c]=t,n.setState({content:s,formProps:n.getFormProps(s),hasChanged:!0},(function(){return r&&r(s)}))}}},n._handleOnActiveRuleCheckChange=function(e,t){var a=n.state.content,r=n.props.onChange;if(a[e]){var i=JSON.parse(JSON.stringify(a));i[e].sentence=t,n.setState({content:i,hasChanged:!0},(function(){return r&&r(i)}))}},n._handleOnRuleGroupDelete=function(e){var t=n.state.content,a=n.props.onChange;if(t[e]){var r=JSON.parse(JSON.stringify(t));r.splice(e,1)&&n.setState({content:r,hasChanged:!0,formProps:n.getFormProps(r)},(function(){return a&&a(r)}))}},n.getValue=function(){return n.state.content},n.hasChanged=function(){return n.state.hasChanged},n.getFormProps=function(e){var t={model:{},rules:{}};return e&&e.length>0&&e.forEach((function(e,n){e&&["contain","notContain"].forEach((function(a){e[a]&&e[a].forEach((function(e,r){var i="rule-"+n+"-"+a+"-"+r;t.model[i]=e,t.rules[i]=[{required:!0,message:" ",trigger:"blur"}]}))}))})),t},n.mRefs=[],n.formRef=void 0;var r=(t.value||[p]).map((function(e){return(0,a.Z)({},e,{id:Math.round(1e4*Math.random())})}));return n.state={content:r,formProps:n.getFormProps(r),hasChanged:!1},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=e.value,n=this.props.value;JSON.stringify(t)!==JSON.stringify(n)&&this.setState({content:n,formProps:this.getFormProps(n)})},n.render=function(){var e=this,t=this.state,n=t.content,r=t.formProps,o=this.props,c=o.editable,s=void 0===c||c,u=o.className,m=void 0===u?"":u;return i.createElement("div",{className:"content-rule-wrapper "+m},i.createElement("span",{className:"content-rule-title"},"\u5185\u5bb9"),i.createElement("div",{className:"content-rule"},i.createElement(l.Form,(0,a.Z)({},r,{ref:function(t){e.formRef=t,e.mRefs.splice(0,e.mRefs.length),e.mRefs.push(t)}}),n.length>0&&i.createElement("span",{className:"content-rule-hint"},"\u6ee1\u8db3\u4efb\u610f\u4e00\u7ec4\u6761\u4ef6\uff0c\u8be5\u89c4\u5219\u5373\u751f\u6548"),n.map((function(t,n){return i.createElement(d,{key:t.id,formRef:e.mRefs,ruleGroup:t,groupIdx:n,editable:s,onSelectChange:e._handleOnSelecChange,onRuleGroupDelete:e._handleOnRuleGroupDelete,onInputChange:e._handleOnInputChange,onRuleItemDelete:e._handleOnRuleItemDelete,onRuleItemAdd:e._handleOnRuleItemAdd,onActiveRuleCheckChange:e._handleOnActiveRuleCheckChange})}))),s&&i.createElement(i.Fragment,null,i.createElement("span",{className:"add-icon",onClick:this._handleOnRuleGroupAdd},i.createElement("i",{className:"icon-cem_add-to"})),i.createElement("span",{style:{marginLeft:8,color:"#262626",fontSize:14}},"\u6dfb\u52a0\u65b0\u7684\u6761\u4ef6"))))},t}(i.PureComponent);const h=f;f.propTypes={value:c().array,editable:c().bool,onChange:c().func,className:c().string}},37841:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67294),r=n(45697),i=n.n(r),l=function(e){var t=e.activeKey,n=e.options,r=e.onTabClick;return a.createElement("div",{className:"tabs"},n.map((function(e,n){return a.createElement("div",{key:n,className:t===e.value?"active-tab":"",onClick:function(){return t!==e.value&&r(e.value,e)}},e.key||e.label)})))};l.propTypes={activeKey:i().oneOfType([i().string,i().number]),options:i().arrayOf(i().shape({key:i().string,value:i().oneOfType([i().string,i().number])})).isRequired,onTabClick:i().func.isRequired};const o=l}}]);