"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9350],{69350:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var s=n(87462),a=n(43144),l=n(94578),r=n(67294),i=n(92360),c=n(5133),o=n(29383),u=n(95814),p=n(49722),m=n(61409),f=n(26687),d=n(83425),h=n(35239),g=function(e){function t(t){var s;return(s=e.call(this,t)||this).selCompareWay=function(e){var t=s.state.steps;t[0].value=e,s.setState({steps:t})},s.onFilterChange=function(e){var t=s.state.steps;t[1].value=e,t[1].fullValue=s.refs.FilterCondition.getFullValue(),t[2].priceList=[],s.clearTableData(),s.setState({steps:t},(function(e){return s.getStep2List()}))},s.refreshColumns=function(e,t){var n=s.refs["SelectableColumns"+e].competeSelectMenuItem(t);2===e&&s.setState({selectMenuItem2:n},(function(t){s.refs["SelectableColumns"+e].resize()})),3===e&&s.setState({selectMenuItem3:n},(function(t){s.refs["SelectableColumns"+e].resize()}))},s.changeSelModel=function(e){var t=s.state.steps;t[2].selModel=e,s.setState({steps:t})},s.addFilter=function(e){var t=s.state.steps;t[2].priceList.filter((function(e){return e.sel}))[0].values.filter((function(t){return t.id===e}))[0].sel=t[2].selModel,t[2]["currentPage"+t[2].selModel]=1,s.setState({steps:t},(function(e){return s.getStep3List(t[2].selModel)}))},s.clearAllSel=function(e){var t=s.state.steps;t[2].priceList.filter((function(e){return e.sel}))[0].values.forEach((function(t){t.sel===e&&(t.sel=null)})),s.clearTableData(e),s.setState({steps:t})},s.selPriceCompareWay=function(e){var t=s.state.steps;t[3].priceCompareList.forEach((function(t){return t.sel=t.id===e})),s.setState({steps:t,loading:!1})},s.handleChangeUserGroup=function(e){var t=s.state.steps;t[4].value=e,s.setState({steps:t})},s.step1=function(e){var t=s.state.steps;return r.createElement("div",{className:"step1"},r.createElement("ul",null,r.createElement("li",{onClick:function(e){return s.selCompareWay(1)},className:1===t[0].value?"sel":""},r.createElement("p",{className:"title"},"\u540c\u7c7b\u5546\u54c1\u4e4b\u95f4\u4ef7\u683c\u5dee\u4ef7",r.createElement("span",{className:"rule"},"\u6bd4\u4ef7\u6761\u4ef6\uff1aA")),r.createElement("div",{className:"circle"},r.createElement("div",{className:"left"},r.createElement("p",null,"\u7b26\u5408\u6761\u4ef6"),r.createElement("p",null,"A=A1"),r.createElement("p",null,"\u7684\u5546\u54c1\u4ef7\u683c")),r.createElement("div",{className:"vs"},"vs"),r.createElement("div",{className:"right"},r.createElement("p",null,"\u4e0d\u7b26\u5408\u6761\u4ef6"),r.createElement("p",null,"A=A1"),r.createElement("p",null,"\u7684\u5176\u4ed6\u4ef7\u683c"))),r.createElement("p",{className:"title2"},"\u540c\u7c7b\u5546\u54c1\u4e4b\u95f4\u6bd4\u4ef7")),r.createElement("li",{onClick:function(e){return s.selCompareWay(2)},className:2===t[0].value?"sel":""},r.createElement("p",{className:"title"},"\u5546\u54c1\u4e0e\u56fa\u5b9a\u91d1\u989d\u4e4b\u95f4\u7684\u5dee\u4ef7"),r.createElement("div",{className:"circle"},r.createElement("div",{className:"left"},r.createElement("p",null,"\u5168\u90e8\u7b26\u5408\u6761\u4ef6"),r.createElement("p",null,"\u7684\u5546\u54c1\u4ef7\u683c")),r.createElement("div",{className:"vs"},"vs"),r.createElement("div",{className:"right"},r.createElement("br",null),r.createElement("p",null,"\u56fa\u5b9a\u91d1\u989d"))),r.createElement("p",{className:"title2 "},"\u5546\u54c1\u4e0e\u56fa\u5b9a\u91d1\u989d\u6bd4\u4ef7"))))},s.step2=function(e){s.state.steps;return null},s.step3=function(e){var t=s.state.steps;return r.createElement("div",{className:"step3"},t[1].fullValue.length>0&&r.createElement("ul",{className:"info bottom-line"},t[1].fullValue.map((function(e){return r.createElement("li",{key:e.id},r.createElement("p",null,e.name+"\uff1a"),r.createElement("span",null,e.values.map((function(t,n){return r.createElement("span",{key:t.id},t.name+(n===e.values.length-1?"":"\uff0c"))}))))}))),r.createElement("div",{className:"more-filter bottom-line"},r.createElement("span",{className:"title"},"\u6dfb\u52a0\u6bd4\u4ef7\u6761\u4ef6"),t[2].priceList.some((function(e){return e.sel}))?t[2].priceList.filter((function(e){return e.sel})).map((function(e,t){return r.createElement("span",{className:"filter-card sel",onClick:function(t){return s.clearSelPriceModel(e.id)},key:e.id},e.name," \xd7")})):t[2].priceList.map((function(e,t){return r.createElement("span",{className:"filter-card "+(e.sel?"sel":""),onClick:function(t){return s.selPriceModel(e.id)},key:e.id},e.name)}))),t[2].selPriceListValues()&&r.createElement("div",{className:"shopSel"},r.createElement("div",{className:"all-shop"},r.createElement("p",{className:"shop"},t[2].priceList.filter((function(e){return e.sel}))[0].name),r.createElement("p",{className:"right"},t[2].selPriceListValues().filter((function(e){return!e.sel})).map((function(e,n){return r.createElement("span",{style:{borderColor:2===t[2].selModel?"#D6A9A5":"#93C791"},onClick:function(t){return s.addFilter(e.id)},className:"filter-card",key:e.id},e.name)})))),r.createElement("div",{className:"vs"},r.createElement("div",{className:"left "+(1===t[2].selModel?"sel":""),onClick:function(e){return 1===t[2].selModel?"":s.changeSelModel(1)}},t[2].selPriceListValues().filter((function(e){return 1===e.sel})).map((function(e,t){return r.createElement("span",{className:"filter-card",onClick:function(t){return s.delFilter(e.id)},key:e.id},e.name)})),t[2].selPriceListValues().filter((function(e){return 1===e.sel})).length<1?r.createElement("p",{className:"click"},"\u70b9\u51fb\u9762\u677f\u8fdb\u884c\u5207\u6362"):r.createElement("p",{className:"clear",onClick:function(e){return s.clearAllSel(1)}},"\u6e05\u7a7a\u5168\u90e8\u9009\u62e9")),r.createElement("p",null,r.createElement("span",null,"vs")),r.createElement("div",{className:"right "+(2===t[2].selModel?"sel":""),onClick:function(e){return 2===t[2].selModel?"":s.changeSelModel(2)}},t[2].selPriceListValues().filter((function(e){return 2===e.sel})).map((function(e,t){return r.createElement("span",{className:"filter-card",onClick:function(t){return s.delFilter(e.id)},key:e.id},e.name)})),t[2].selPriceListValues().filter((function(e){return 2===e.sel})).length<1?r.createElement("p",{className:"click"},"\u70b9\u51fb\u9762\u677f\u8fdb\u884c\u5207\u6362"):r.createElement("p",{className:"clear",onClick:function(e){return s.clearAllSel(2)}},"\u6e05\u7a7a\u5168\u90e8\u9009\u62e9")))))},s.step4=function(e){var t=s.state.steps;return r.createElement("div",{className:"step4"},r.createElement("div",{className:"price bottom-line"},r.createElement("span",{className:"title"},"\u91d1\u989d"),r.createElement(i.Input,{className:"input",placeholder:"\u8bf7\u586b\u5199\u91d1\u989d",value:t[3].value,onChange:function(e){t[3].value=e,s.setState({steps:t})},append:"\u5143"})),r.createElement("div",{className:"compareWay bottom-line"},r.createElement("span",{className:"title"},"\u6bd4\u4ef7\u65b9\u5f0f"),t[3].priceCompareList.filter((function(e){return 1!==t[0].value?"LT_OR_GT"!==e.id:"GT"!==e.id&&"LT"!==e.id})).map((function(e){return r.createElement("span",{key:e.id,className:"filter-card "+(e.sel?"sel":""),onClick:function(t){return s.selPriceCompareWay(e.id)}},e.name)}))))},s.step5=function(e){var t=s.state.steps;return r.createElement("div",{className:"step5"},r.createElement("div",{className:"way bottom-line"},r.createElement("span",{className:"title"},"\u901a\u77e5\u65b9\u5f0f"),r.createElement("span",null,r.createElement("img",{src:n(7759),alt:""})," \u5fae\u4fe1\u901a\u77e5")),r.createElement("div",{className:"user-group "},r.createElement("p",{className:"sel-user"},"\u9009\u62e9\u901a\u77e5\u7528\u6237\u7ec4"),r.createElement(u.Z,{checkedList:t[4].value,data:t[4].userList,changeState:s.handleChangeUserGroup})))},s.step6=function(e){var t=s.state.steps;return r.createElement("div",{className:"step6"},r.createElement("div",{className:"warning bottom-line"},r.createElement("span",{className:"title"},"\u9884\u8b66\u540d\u79f0"),r.createElement(i.Input,{className:"input",placeholder:"\u8bf7\u586b\u540d\u79f0",value:t[5].value,onChange:function(e){t[5].value=e,s.setState({steps:t})}})))},s.changeStep=function(e){var t=s.state.steps;t.forEach((function(t,n){n>e&&(t.checkNow=!1)})),s.setState({steps:t})},s.routerWillLeave=function(e){return"{}"===JSON.stringify(s.state.steps[1].value)||!s.state.checkDone||"\u4fe1\u606f\u8fd8\u672a\u4fdd\u5b58\uff0c\u786e\u8ba4\u8981\u79bb\u5f00\uff1f"},s.getShowColumns2=function(e){s.setState({selectMenuItem2:e})},s.getShowColumns3=function(e){s.setState({selectMenuItem3:e})},s.state={checkDone:!0,steps:[{title:"\u9009\u62e9\u6bd4\u4ef7\u65b9\u5f0f",checkNow:!0,value:t.location&&t.location.state?Number(t.location.state.type):1},{title:"\u7b5b\u9009\u6bd4\u4ef7\u5546\u54c1\u8303\u56f4",checkNow:!0,value:{},getArrayValue:function(){return[].concat(s.state.steps[1].value.connConfig?s.state.steps[1].value.connConfig:[]).concat(s.state.steps[1].value.source?{values:s.state.steps[1].value.source,id:"source"}:[])},fullValue:[],list:[],currentPage:1,count:0,check:function(){return"{}"===JSON.stringify(s.state.steps[1].value)?"\u8bf7\u9009\u62e9\u7b5b\u9009\u6761\u4ef6":1===s.state.steps[0].value?s.state.steps[1].list.length>1||"\u8be5\u6bd4\u4ef7\u5546\u54c1\u8303\u56f4\u5185\u6ca1\u6709\u6570\u636e\u6216\u6570\u636e\u91cf\u5c0f\u4e8e2\u6761\uff0c\u65e0\u6cd5\u6bd4\u8f83\uff01":s.state.steps[1].list.length>0||"\u8be5\u6bd4\u4ef7\u5546\u54c1\u8303\u56f4\u5185\u6ca1\u6709\u6570\u636e\uff01"}},{title:"\u8bbe\u7f6e\u5bf9\u6bd4\u6761\u4ef6",checkNow:!1,value:[],selModel:1,priceList:[],selPriceListValues:function(){return s.state.steps[2].priceList.some((function(e){return e.sel}))?s.state.steps[2].priceList.filter((function(e){return e.sel}))[0].values:null},getValueLeft:function(){return s.state.steps[2].selPriceListValues().filter((function(e){return 1===e.sel}))},getValueRight:function(){return s.state.steps[2].selPriceListValues().filter((function(e){return 2===e.sel}))},list1:[],list2:[],currentPage1:1,currentPage2:1,pageSize:4,count1:0,count2:0,check:function(){return s.state.steps[2].list1.length>0&&s.state.steps[2].list2.length>0||"\u7f3a\u5c11\u6bd4\u8f83\u5bf9\u8c61\u6216\u8005\u6bd4\u8f83\u5bf9\u8c61\u6ca1\u6709\u6570\u636e\uff01"}},{title:"\u8bbe\u7f6e\u9884\u8b66\u503c",checkNow:!1,priceCompareList:[{name:"\u4f4e\u4e8e",id:"LT"},{name:"\u9ad8\u4e8e",id:"GT"},{name:"\u5dee\u4ef7\u9ad8\u4e8e",id:"LT_OR_GT"}],value:"",check:function(){return/^[1-9]\d*(.\d{1,2})?$/.test(s.state.steps[3].value)?!!s.state.steps[3].priceCompareList.some((function(e){return e.sel}))||"\u8bf7\u9009\u62e9\u6bd4\u4ef7\u65b9\u5f0f!":"\u8bf7\u6b63\u786e\u586b\u5199\u91d1\u989d\uff01"}},{title:"\u901a\u77e5\u7b56\u7565",checkNow:!1,userList:[],value:[],remindType:"",check:function(){return s.state.steps[4].value.length>0||"\u8bf7\u9009\u62e9\u901a\u77e5\u7528\u6237\u7ec4\uff01"}},{title:"\u9884\u8b66\u540d\u79f0\uff08\u5b8c\u6210\uff09",checkNow:!1,value:"",check:function(){return""!==s.state.steps[5].value.trim()||"\u8bf7\u586b\u5199\u540d\u79f0\uff01"}}],columns:[{label:"\u94fe\u63a5\u552f\u4e00\u6807\u5fd7",prop:"syncKey"},{label:"\u94fe\u63a5\u540d",prop:"url",minWidth:"200"},{label:"\u5546\u54c1\u6807\u9898",prop:"name",minWidth:"200",render:function(e,t,n){return r.createElement("div",{style:{paddingLeft:"32px"}},e.name)}}],selectMenuItem2:[],selectMenuItem3:[],loading:!1,pageSize:20,projectId:h.t.get(h.V.curProject).id,filter:[]},s}(0,l.Z)(t,e);var g=t.prototype;return g.getStep2List=function(){var e=this,t=this.state.steps;p.h.post("/price/warning/connection/list",{filterModel:(0,s.Z)({project:[this.state.projectId]},t[1].value),pageIndex:t[1].currentPage,pageSize:this.state.pageSize}).then((function(n){var s=n.data.result;t[1].list=s.result,t[1].count=s.count,e.refreshColumns(2,s.result[0]?s.result[0].configDetails:[])}))},g.getPriceList=function(){var e=this,t=this.state.steps;return this.setState({loading:!0}),p.h.post("/price/warning/filter/list",(0,s.Z)({project:[this.state.projectId]},t[1].value)).then((function(n){t[2].priceList=n.data.result.filter((function(e){return e.values.length>1})),e.setState({steps:t,loading:!1})}))},g.getStep3List=function(e){var t=this,n=this.state.steps,a=JSON.parse(JSON.stringify(n[2].priceList.filter((function(e){return e.sel}))[0]));if(a.values=a.values.filter((function(t){return t.sel===e})).map((function(e){return e.id})),0!==a.values.length){var l=JSON.parse(JSON.stringify(n[1].value));l.connConfig?l.connConfig.push(a):l.connConfig=[a],p.h.post("/price/warning/connection/list",{filterModel:(0,s.Z)({project:[this.state.projectId]},l),pageIndex:n[2]["currentPage"+e],pageSize:n[2].pageSize}).then((function(s){var a=s.data.result;n[2]["list"+e]=a.result,n[2]["count"+e]=a.count,t.refreshColumns(3,a.result[0]?a.result[0].configDetails:[])}))}else this.clearTableData(e)},g.selPriceModel=function(e){var t=this.state.steps;t[2].priceList.forEach((function(t){return t.sel=t.id===e})),this.setState({steps:t})},g.clearSelPriceModel=function(e){var t=this,n=this.state.steps,s=function(){n[2].priceList.forEach((function(t){t.id===e&&(t.sel=!1,t.values.forEach((function(e){return e.sel=null})))})),t.clearTableData(),t.setState({steps:n})};n[2].selPriceListValues().some((function(e){return 1===e.sel||2===e.sel}))>0?i.MessageBox.confirm("\u6b64\u64cd\u4f5c\u5c06\u4f7f\u5f53\u524d\u7684\u6570\u636e\u4e22\u5931\uff0c\u662f\u5426\u7ee7\u7eed?","\u63d0\u793a",{type:"warning"}).then((function(e){s()})):s()},g.delFilter=function(e){var t=this,n=this.state.steps;n[2].priceList.filter((function(e){return e.sel}))[0].values.filter((function(t){return t.id===e}))[0].sel=null,n[2]["currentPage"+n[2].selModel]=1,this.setState({steps:n},(function(e){return t.getStep3List(n[2].selModel)}))},g.clearTableData=function(e){var t=this.state.steps,n=function(e){t[2].list1=[],t[2].count1=0,t[2].currentPage1=1},s=function(e){t[2].list2=[],t[2].count2=0,t[2].currentPage2=1};switch(e){case 1:n();break;case 2:s();break;default:n(),s()}this.setState({steps:t})},g.getUserList=function(){var e=this,t=this.state.steps;this.setState({loading:!0}),p.h.get("team/list?projectId="+this.state.projectId).then((function(n){t[4].userList=n.data.result.list,e.setState({steps:t,loading:!1})}))},g.prev=function(){var e=this.state.steps;4===this.stepNow&&2===e[0].value?(e[2].checkNow=!1,e[3].checkNow=!1):e[this.stepNow-1].checkNow=!1,this.setState({steps:e})},g.next=function(){var e=this,t=this.state.steps;if(!0!==(t[this.stepNow-1].check&&t[this.stepNow-1].check())&&t[this.stepNow-1].check)c.Z.warning(t[this.stepNow-1].check()||"\u8bf7\u6b63\u786e\u586b\u5199\u5fc5\u8981\u4fe1\u606f\u540e\uff0c\u624d\u53ef\u4ee5\u8fdb\u5165\u4e0b\u4e00\u6b65\uff01");else{if(this.stepNow>5)return void this.finish();2===this.stepNow&&2===t[0].value?(t[2].checkNow=!0,t[3].checkNow=!0):t[this.stepNow].checkNow=!0,this.setState({steps:t},(function(n){switch(e.stepNow){case 2:0===t[1].list.length&&e.getStep2List(),0===t[1].fullValue.length&&setTimeout((function(n){return t[1].fullValue=e.refs.FilterCondition.getFullValue()}),1e3);break;case 3:0===t[2].priceList.length&&e.getPriceList();break;case 5:e.getUserList()}}))}},g.finish=function(){var e=this,t=this.state.steps,n=this.props.location.state,a={projectId:this.state.projectId,compareType:1===t[0].value?"PRODUCT":"PRICE",filter:t[1].value,warningPrice:t[3].value,priceCompareType:t[3].priceCompareList.filter((function(e){return e.sel}))[0].id,remindType:"WEIXIN",teamId:t[4].value,name:t[5].value};if(1===t[0].value){var l={compareConditionType:"source"===t[2].priceList.filter((function(e){return e.sel}))[0].id?"SOURCE":"TOPIC",topicId:"source"===t[2].priceList.filter((function(e){return e.sel}))[0].id?"":t[2].priceList.filter((function(e){return e.sel}))[0].id,to:t[2].selPriceListValues().filter((function(e){return 1===e.sel})).map((function(e){return e.id})),be:t[2].selPriceListValues().filter((function(e){return 2===e.sel})).map((function(e){return e.id}))};Object.assign(a,l)}n&&n.id&&!n.copy&&(a.id=n.id),this.setState({loading:!0}),p.h.post(n&&n.id&&!n.copy?"/price/warning/update":"/price/warning/add",(0,s.Z)({},a)).then((function(t){e.setState({loading:!1,checkDone:!1},(function(e){return m.mW.push("/priceWarning")}))})).catch((function(t){e.setState({loading:!1})}))},g.getUserData=function(e){var t=this,n=this.state.steps,a=this.props.location.state;p.h.post("/price/warning/find",{id:e}).then((function(e){var l=e.data.result;n[0].value="PRODUCT"===l.compareType?1:2,l.filter.forEach((function(e){return e.values=e.values.map((function(e){return e.id}))})),n[1].value.connConfig=l.filter.map((function(e){return(0,s.Z)({},e,{special:"connConfig"})})),n[3].value=l.warningPrice,n[3].priceCompareList=n[3].priceCompareList.map((function(e){return e.sel=e.id===l.priceCompareType,e})),n[4].value=l.teamVOS.map((function(e){return e.id})),n[5].value=a&&a.copy?l.name+"-\u526f\u672c":l.name,t.setState({steps:n,filter:l.filter||[]},(function(e){t.getStep2List(),"NONE"!==l.compareConditionType&&t.getPriceList().then((function(e){n[2].priceList.forEach((function(e){e.values.forEach((function(e){-1!==l.to.indexOf(e.id)&&(e.sel=1),-1!==l.be.indexOf(e.id)&&(e.sel=2)})),e.id===l.topic.id&&(e.sel=!0)})),t.setState({steps:n},(function(e){t.getStep3List(1),t.getStep3List(2)}))}))}))}))},g.componentDidMount=function(){this.state.steps;var e=this.props.location.state;e&&e.id?this.getUserData(e.id):this.getStep2List(),this.props.router.setRouteLeaveHook(this.props.route,this.routerWillLeave)},g.render=function(){var e=this,t=this.state,n=t.columns,s=t.steps,a=t.pageSize,l=t.selectMenuItem2,c=t.selectMenuItem3,u=t.filter;return r.createElement("div",{className:"price-warning-add"},r.createElement("ul",{className:"bread"},s.filter((function(e,t){return e.checkNow&&t})).map((function(t,n){return r.createElement("li",{key:n,onClick:function(t){(2!==s[0].value||2!==n)&&e.changeStep(n+1)}},r.createElement("i",null,n+1),r.createElement("span",{className:"title"},t.title),r.createElement("span",{className:"icon"}))}))),r.createElement(i.Loading,{loading:this.state.loading},r.createElement("div",{className:"step2",style:{display:2===this.stepNow?"block":"none"}},r.createElement(d.Z,{ref:"FilterCondition",value:s[1].getArrayValue(),filterValue:u,type:"PRICE_WARNING",filter:["CONN_CONFIG"],onFilterChange:this.onFilterChange,noBottom:!0,hideAdvanced:!0,noFresh:!0})),r.createElement("div",{className:"step-wrap"},this["step"+this.stepNow]()),r.createElement("div",{className:"next"},r.createElement(i.Button,{onClick:function(t){return 2===e.stepNow?m.mW.go(-1):e.prev()}},2===this.stepNow?"\u8fd4\u56de":"\u4e0a\u4e00\u6b65"),r.createElement(i.Button,{type:"primary",onClick:function(t){return e.next()}},this.stepNow>5?"\u5b8c\u6210":"\u4e0b\u4e00\u6b65")),r.createElement("div",{className:"table",style:{display:2===this.stepNow?"block":"none"}},r.createElement(f.Z,{ref:"SelectableColumns2",multiSave:{name:"addWarning_step2"},columns:l.length>0?l:[],getShowColumns:this.getShowColumns2}),r.createElement(o.Z,{key:"table",columns:n.concat(this.selColumns2),data:s[1].list,pageSize:a,total:s[1].count,currentPage:s[1].currentPage,onPage:function(t){s[1].currentPage=t,e.setState({steps:s},(function(t){e.getStep2List()}))}})),r.createElement("div",{className:"table",style:{display:3===this.stepNow?"block":"none"}},s[2].count1>0&&r.createElement("span",{className:"title"},"\u76d1\u6d4b\u5546\u54c1\u5305\u542b ",r.createElement("span",null,s[2].count1)," \u4e2a\u5546\u54c1"),r.createElement(f.Z,{ref:"SelectableColumns3",multiSave:{name:"addWarning_step3"},columns:c.length>0?c:[],getShowColumns:this.getShowColumns3}),r.createElement(o.Z,{key:"table1",columns:n.concat(this.selColumns3),data:s[2].list1,pageSize:s[2].pageSize,total:s[2].count1,currentPage:s[2].currentPage1,onPage:function(t){s[2].currentPage1=t,e.setState({steps:s},(function(t){e.getStep3List(1)}))}})),r.createElement("div",{className:"table",style:{display:3===this.stepNow?"block":"none"}},s[2].count2>0&&r.createElement("span",{className:"title"},"\u6bd4\u4ef7\u5546\u54c1\u5305\u542b ",r.createElement("span",null,s[2].count2)," \u4e2a\u5546\u54c1"),r.createElement(o.Z,{key:"table2",columns:n.concat(this.selColumns3),data:s[2].list2,pageSize:s[2].pageSize,total:s[2].count2,currentPage:s[2].currentPage2,onPage:function(t){s[2].currentPage2=t,e.setState({steps:s},(function(t){e.getStep3List(2)}))}}))))},(0,a.Z)(t,[{key:"stepNow",get:function(){for(var e=0,t=0;t<this.state.steps.length&&this.state.steps[t].checkNow;t++)e++;return e}},{key:"selColumns2",get:function(){return this.state.selectMenuItem2?this.state.selectMenuItem2.filter((function(e){return e.checked})):[]}},{key:"selColumns3",get:function(){return this.state.selectMenuItem3?this.state.selectMenuItem3.filter((function(e){return e.checked})):[]}}]),t}(r.Component)},24473:(e,t,n)=>{n.d(t,{Z:()=>f});var s=n(87462),a=n(63366),l=n(94578),r=n(67294),i=n(45697),c=n.n(i),o=n(94184),u=n.n(o),p=["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"],m=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.prefixCls,l=t.children,i=t.className,c=t.block,o=t.indeterminate,m=t.value,f=t.checked,d=t.defaultChecked,h=t.onChange,g=t.disabled,v=(0,a.Z)(t,p),E={value:m,checked:f,defaultChecked:d,onChange:h,disabled:g},N=u()(n,((e={})[n+"-disabled"]=E.disabled,e[n+"-block"]=c,e[n+"-indeterminate"]=o,e),i);return r.createElement("label",(0,s.Z)({tabIndex:E.disabled?-1:0,className:N},v),r.createElement("input",(0,s.Z)({type:"checkbox",className:n+"-input"},E)),r.createElement("span",{className:n+"-status"}),l&&r.createElement("span",{className:n+"-text",title:l},l))},t}(r.Component);m.propTypes={prefixCls:c().string,value:c().oneOfType([c().string,c().number]),checked:c().bool,defaultChecked:c().bool,onChange:c().func,indeterminate:c().bool,disabled:c().bool,block:c().bool},m.defaultProps={prefixCls:"wt-checkbox"};const f=m},85151:(e,t,n)=>{n.d(t,{Jg:()=>s.Z,CS:()=>d});var s=n(24473),a=n(87462),l=n(63366),r=n(94578),i=n(67294),c=n(45697),o=n.n(c),u=n(94184),p=n.n(u),m=["prefixCls","children","className","onChange","values","checkedList","block"],f=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).handleCheckBoxChange=function(e){var n=t.props.onChange;n&&n(e)},t}return(0,r.Z)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,s=n.prefixCls,r=n.children,c=n.className,o=(n.onChange,n.values),u=n.checkedList,f=n.block,d=(0,l.Z)(n,m);return e=o?o.map((function(e,n){var s=0!==u.length&&-1!==u.indexOf(e);return i.createElement(Checkbox,{key:n,value:e,checked:s,onChange:function(e){return t.handleCheckBoxChange(e)},block:f},e)})):i.Children.map(r,(function(e,n){if(e){var s=e.props,a=s.value,l=0!==u.length&&-1!==u.indexOf(a);return i.cloneElement(e,{checked:l,key:n,block:s.block||f,onChange:function(){var e=s.value;t.handleCheckBoxChange(e)}})}})),i.createElement("div",(0,a.Z)({className:p()(s,c)},d),e)},t}(i.Component);f.defaultProps={prefixCls:"wt-checkbox-group"},f.propTypes={onChange:o().func,values:o().array,block:o().bool};const d=f;var h=function(e){var t={};return Object.keys(e).forEach((function(n){/^data\-.+$/.test(n)&&(t[n]=e[n])})),t},g=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=h(e);return i.createElement("label",{className:e.className,title:e.children},i.createElement("div",{className:"checkbox"},i.createElement("input",(0,a.Z)({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),i.createElement("div",{className:"checkbox-body"})),"\xa0",i.createElement("span",null,e.children))},t}(i.Component);g.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}},26687:(e,t,n)=>{n.d(t,{Z:()=>c});var s=n(87462),a=n(94578),l=n(67294),r=n(85151),i=n(35239),c=function(e){function t(t){var n;return(n=e.call(this,t)||this).openMenu=function(){n.setState({menuState:!n.state.menuState})},n.onChange=function(e){var t,s=n.props,a=s.columns,l=s.getShowColumns,r=s.multiSave;a&&a[e]&&((t=a.slice(0))[e].checked=!t[e].checked);var c=r?r.name:"",o=i.t.get(i.V.storageColumns)?i.t.get(i.V.storageColumns):{};o[c]=t,i.t.set(i.V.storageColumns,o),l&&l(t),n.resize(),n.setState({columns:t})},n.competeSelectMenuItem=function(e){var t=n.props.multiSave,s=t?t.name:"",a=n.props.columns,r=i.t.get(i.V.storageColumns)?i.t.get(i.V.storageColumns)[s]:[];if(r&&0!==r.length)"price_check"===s?r.map((function(e,t){return e.render=a.filter((function(t){return t.label===e.label})).length>0?a.filter((function(t){return t.label===e.label}))[0].render:function(t,n,s){return l.createElement("span",null,t[e.prop])}})):r.map((function(e,t){return e.render=function(e,n,s){return l.createElement("span",null,e.configDetails[t]&&e.configDetails[t].topicValue)}})),a=r.slice(0);else if(e&&e.every((function(e){return e.label&&e.prop})))a=e;else{var c=[];e&&e.forEach((function(e,t){c.push({label:e.topicTypeValue,checked:!1,render:function(e,n,s){return l.createElement("span",null,e.configDetails[t].topicValue)}})})),a=c.slice(0)}return n.setState({columns:a}),a},n.resize=function(){var e=document.querySelector(".connection-table .is-sortable");if(e){var t=n.getStyle(e,"width"),s=document.body.offsetWidth,a=n.state.columns;if(s>800&&a.length>2&&parseInt(t)<275)for(var l=0;l<a.length-2;l++)if(a[l].checked)return void n.onChange(l)}},n.close=function(e){n.state.menuState&&n.setState({menuState:!1})},n.state={menuState:!1,multiSave:null,columns:t.columns.map((function(e){return!e.checked&&(e.checked=!1),e}))},n}(0,a.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){this.setState((0,s.Z)({},e))},n.getStyle=function(e,t){return e.style[t]?e.style[t]:e.currentStyle?e.currentStyle[t]:getComputedStyle(e,null)[t]},n.componentDidMount=function(){window.addEventListener("click",this.close),window.addEventListener("resize",this.resize,!1)},n.componentWillUnmount=function(){window.removeEventListener("resize",this.resize,!1),window.removeEventListener("click",this.close)},n.render=function(){var e=this,t=this.state.columns;return l.createElement("div",{className:"menu-wrapper",onClick:function(e){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()}},l.createElement("span",{className:"el-dropdown-link "+(this.state.menuState?"sel":""),onClick:this.openMenu},"\u5217",l.createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:this.state.menuState?"rotate(-180deg)":""}})),this.state.menuState&&l.createElement("div",{className:"menuList"},l.createElement("ul",null,0===t.length?l.createElement("li",{style:{color:"#8c8c8c"}},"\u65e0\u53ef\u9009\u62e9\u5185\u5bb9"):t.map((function(t,n){return l.createElement("li",{key:n},l.createElement(r.Jg,{key:n,value:t.label,checked:t.checked,onChange:e.onChange.bind(e,n),block:!0},t.label))})))))},t}(l.Component)},7759:(e,t,n)=>{e.exports=n.p+"img/bec210cb701235671955.png"}}]);