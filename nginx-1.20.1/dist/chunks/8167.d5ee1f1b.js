"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8167],{12475:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(87462),r=n(94578),i=n(67294),l=n(92360),o=n(5133),s=n(29383),c=n(49722),u=n(55815),p=function(e){function t(t){var n;return(n=e.call(this,t)||this).getIpList=function(e){var t=n.state,a=(t.startTime,t.endTime,t.selUsers,t.selTypes,t.currentPage),r=t.pageSize;c.h.post("ip/page",{pageNum:a,pageSize:r}).then((function(e){n.setState({data:[],pageSize:e.data.result.size,totalNumber:e.data.result.totalElements},(function(t){n.setState({data:e.data.result.content})}))}))},n.addIps=function(e){var t=n.state,r=t.form;t.id;if(0!==r.ips.length){var i=/(?=(\b|\D))(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))(?=(\b|\D))/;"string"===typeof r.ips&&(r.ips=r.ips.split(/[\s\n]/)),r.ips.some((function(e){return!i.test(e)}))?o.Z.warning("\u542b\u6709\u975e\u6cd5IP"):c.h.post("/ip/add",(0,a.Z)({},r)).then((function(e){n.setState({dialogVisible:!1,form:{name:"",ips:""}}),n.getIpList()}))}else o.Z.warning("\u8bf7\u8f93\u5165IP\u5730\u5740")},n.getPage=function(e){n.setState({currentPage:e},(function(e){return n.getIpList()}))},n.deleteIp=function(e){var t=n.state,a=t.data;t.onValue&&a&&1===a.length?o.Z.warning("\u8bf7\u5148\u5173\u95edIP\u767d\u540d\u5355"):c.h.post("ip/delete",{ids:[e]}).then((function(e){n.getIpList()}))},n.handleSwitch=function(e){var t=n.state,a=t.data,r=t.onValue;if(!r&&a&&0===a.length)return n.setState({onValue:!1}),void o.Z.warning("\u8bf7\u81f3\u5c11\u6dfb\u52a0\u4e00\u4e2aIP\u5230\u767d\u540d\u5355");c.h.post("ip/update",{ipWhiteListEnable:e?1:0}).then((function(e){n.setState({onValue:!r}),o.Z.success("\u64cd\u4f5c\u6210\u529f")}))},n.getState=function(e){c.h.get("/ip/enable").then((function(e){return n.setState({onValue:e.data.result})}))},n.state={columns:[{label:"",prop:"paddingLeft",width:16},{label:"IP\u5730\u5740",prop:"ip"},{label:"IP\u63cf\u8ff0",prop:"description"},{label:"\u65e5\u671f",prop:"createAt"},{label:"\u64cd\u4f5c",width:180,render:function(e,t,a){return i.createElement("span",null,i.createElement("a",{className:"operation_columns",onClick:function(){return n.deleteIp(n.state.data[a].id)}},"\u5220\u9664"))}},{label:"",prop:"paddingRight",width:16}],data:[],form:{name:"",ips:""},onValue:!1,currentPage:1,pageSize:20,totalNumber:0},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.getIpList(),this.getState()},n.projectOnChange=function(e,t){var n;this.setState({form:Object.assign(this.state.form,(n={},n[e]=t,n))})},n.render=function(){var e=this,t=this.state,n=t.totalNumber,a=t.currentPage,r=t.pageSize,o=t.dialogVisible,c=t.form,p=t.onValue,m=t.columns,d=t.data,g=document.documentElement.clientHeight-54-48-24;return i.createElement("div",{className:"white-list-wrap common-wrapper"},i.createElement(u.Z,{title:"IP\u767d\u540d\u5355",rightContent:i.createElement(l.Button,{type:"primary",onClick:function(){return e.setState({dialogVisible:!0})}},"\u6dfb\u52a0IP\u767d\u540d\u5355")}),i.createElement("div",{className:"common-padding-12"},i.createElement("div",{style:{minHeight:g,backgroundColor:"#fff",paddingTop:"20px"}},i.createElement("div",{className:"filter"},i.createElement("div",null,i.createElement("div",{className:"switch-bar"},"\u662f\u5426\u5f00\u542f\xa0\xa0\xa0\xa0",i.createElement(l.Switch,{value:p,onColor:"#0747A6",offColor:"#CCCCCC",onText:"",offText:"",onChange:this.handleSwitch})))),i.createElement("div",{className:"white-list"},i.createElement(s.Z,{columns:m,data:d,start:1===a?1:20*(a-1)+1,end:n,total:n,pageSize:r,currentPage:a,onPage:this.getPage})))),i.createElement(l.Dialog,{title:"\u6dfb\u52a0IP\u767d\u540d\u5355",visible:o,className:"add-project-modal",onCancel:function(){return e.setState({dialogVisible:!1})}},i.createElement(l.Dialog.Body,null,i.createElement(l.Form,{labelPosition:"left",model:c},i.createElement(l.Form.Item,{label:"IP\u5730\u5740",prop:"ips"},i.createElement(l.Input,{value:this.state.form.ips,type:"textarea",onChange:function(t){return e.projectOnChange("ips",t)},placeholder:"\u53ef\u591a\u884c\u8f93\u5165,\u76f8\u90bbIP\u7528\u7a7a\u683c\u95f4\u9694"}),i.createElement("i",null,"*")),i.createElement(l.Form.Item,{label:"IP\u63cf\u8ff0",prop:"name"},i.createElement(l.Input,{value:this.state.form.name,onChange:function(t){return e.projectOnChange("name",t)}})))),i.createElement(l.Dialog.Footer,{className:"dialog-footer"},i.createElement(l.Button,{type:"primary",onClick:this.addIps},"\u786e \u5b9a"),i.createElement(l.Button,{onClick:function(){return e.setState({dialogVisible:!1})}},"\u53d6 \u6d88"))))},t}(i.Component)},55815:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),r=n(67294),i=n(45697),l=n.n(i),o=n(43036),s=n(61409),c=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,r=n.beforeJump;e!==a.length-1&&(r?new Promise((function(e,t){return r(e,t)})).then((function(){s.mW.push({pathname:a[e].url,state:a[e].state})})):s.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,i=t.rightContent,l=t.className,s=t.overlay;return r.createElement("div",{className:"breadcumb-wrapper "+l},n instanceof Array?r.createElement("div",{className:"breadcrumb-left"},r.createElement("div",null,n.map((function(t,a){return r.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),r.createElement("span",null,a||n[n.length-1].title,s&&r.createElement(o.Z,{placement:"top",overlay:s},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):r.createElement("div",{className:"normal-title"},n,s&&r.createElement(o.Z,{placement:"top",overlay:s},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),i||"")},t}(r.Component);c.propTypes={className:l().string,title:l().oneOfType([l().string,l().arrayOf(l().shape({title:l().string,url:l().string,state:l().object}))]).isRequired,overlay:l().oneOfType([l().string,l().node]),mainTitle:l().oneOfType([l().string,l().node]),beforeJump:l().func,rightContent:l().node};const u=c}}]);