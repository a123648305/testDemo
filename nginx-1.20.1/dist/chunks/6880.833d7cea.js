"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6880],{26880:(e,t,n)=>{n.r(t),n.d(t,{default:()=>X});var a=n(63366),i=n(87462),r=n(94578),l=n(67294),o=n(19586),s=n(97189),c=n.n(s),u=n(50976),m=n(8201),d=n(98191),p=n(45697),f=n.n(p),h=n(39432),v=n(43036),g=function(e){function t(t){var n;(n=e.call(this,t)||this)._setPadShowFalse=function(){n.state.show&&n.setState({show:!1})},n._handleOnClick=function(e){var t=n.state.show;t&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout((function(){n.setState({show:!t})}),0)};var a=Math.max.apply(null,t.options.map((function(e){return(0,h.jD)(e.title,14)})))+32+2;return n.state={show:!1,firstLiHover:!1,panelWidth:a>100?a:100},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},n.render=function(){var e=this.state,t=e.show,n=e.panelWidth,a=this.props,i=a.activeObj,r=void 0===i?"":i,o=a.onChange,s=a.options,c=a.objName,u=a.preTitle,m=a.sufTitle,d=void 0===m?"":m,p=a.showTitle,f=void 0===p||p,h=a.overlay,g=a.divider,E=void 0===g?"right":g,y=s.find((function(e){return e.value===r})),_=""===r?d:y&&y.title;return l.createElement("div",{className:"chart_title_selector single_select_diviver_"+E,onClick:this._handleOnClick},l.createElement("div",{className:"button_content"},l.createElement("span",null,l.createElement("span",{className:"button-trigger "+(t?"sel":"")},f&&l.createElement(l.Fragment,null,u&&l.createElement("span",{className:"pre-title"},u,"\uff1a"),l.createElement("span",{className:"button-title"},_)),l.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:t?"rotate(-180deg)":""}})),h&&l.createElement("span",{style:{marginLeft:4}},l.createElement(v.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:h},l.createElement("i",{className:"icon-cem_file1"})))),l.createElement("div",{className:"button-panel "+(t?"active":""),style:{minWidth:n}},s.map((function(e,t){return l.createElement("div",{className:"panel-item "+(e.value===r?"sel":"")+" "+(e.disabled?"disabled":""),key:e.value,onClick:function(){var t;!e.disabled&&o(c?((t={})[c]=e.value,t):e.value)}},e.title)})))))},t}(l.PureComponent);g.propTypes={activeObj:f().any,onChange:f().func.isRequired,options:f().array.isRequired,objName:f().any,preTitle:f().string,sufTitle:f().string,showTitle:f().bool,overlay:f().string,divider:f().oneOf(["both","left","right","none"])};const E=g;var y=function(e){var t=e.option,n=e.titles,a=e.data,i=e.overlays,r=void 0===i?[]:i;return l.createElement("div",{className:"yt_simple_talbe_wrapper",style:{height:t.height}},l.createElement("div",{className:"st_title"},n.map((function(e,t){return l.createElement("span",{key:e},e,r[t]&&l.createElement(v.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:r[t]},l.createElement("i",{className:"icon-cem_file1",style:{marginLeft:2,fontSize:14}})))}))),l.createElement("div",{className:"st_content"},a.map((function(e,t){return l.createElement("div",{key:"row_"+t,className:"st_row"},e.map((function(e,t){var n=2===t?function(e){if("--"!==e)return e.startsWith("-"),l.createElement("div",{key:e+"_"+Math.random()},l.createElement("span",{className:"ellipsis_value"},e));return l.createElement("div",{key:e+"_"+Math.random(),style:{paddingRight:16}},e)}(e):e;return l.createElement("span",{key:"col_"+t,className:"st_col"},l.createElement(v.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:n},l.createElement("span",null,n)))})))}))))};const _=y;y.propTypes={titles:f().array.isRequired,data:f().array.isRequired,overlays:f().array,option:f().shape({height:f().oneOfType([f().string,f().number])})};var N=n(94644),b=n(92360),I=(n(61409),n(93162),n(70715));const C=function(e){var t=e.option,n=e.title,a=e.list,i=e.val,r=e.loading,o=e.onChange,s=e.tip,c=e.name,p=l.useState(void 0),f=p[0],h=p[1],g=l.useState(void 0),y=g[0],C=g[1];return l.useEffect((function(){y&&f&&function(e,t){t.clear(),t.setOption(e)}(y,f)}),[y,f]),l.useEffect((function(){var e=function(e){if(e)return e.length?{title:{},tooltip:{trigger:"axis"},legend:{type:"scroll",data:e.map((function(e){return e.name})),left:20,top:45,itemWidth:14,itemHeight:12,pageIconSize:12,icon:I.W4.lineRing},grid:{left:22,right:20,bottom:14,top:80,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e[0].data.map((function(e){return e.name}))},yAxis:{type:"value"},series:e.map((function(e){return{name:e.name,data:e.data.map((function(e){return e.count})),type:"line",stack:"\u603b\u91cf",symbol:"none",smooth:!0,areaStyle:{}}}))}:null}(t);C(e)}),[t]),l.createElement(m.Z,{data:y,className:"brand_analyze_index_chart",loading:r,renderTitle:l.createElement(d.Z,{data:y,onMoreClick:function(e){return function(e,t,n,a){try{if("image"===t)(0,N._v)(e,n);else if("data"===t){var i=[""].concat(a.map((function(e){return e.name}))),r=a.reduce((function(e,t){return e.map((function(e,n){return e.push(t.data[n].count),e}))}),a[0].data.map((function(e){return[e.name]})));(0,N.aT)([[i].concat(r)],n)}}catch(l){b.Message.error("\u5bfc\u51fa\u5931\u8d25"),console.error("\u5bfc\u51fa\u5931\u8d25,"+l)}}(f,e,n,t)},titleSelector:l.createElement("div",{className:"chart_title_selector_wrap"},a?l.createElement(E,{onChange:function(e){return o(e.val)},objName:"val",activeObj:i,options:a,divider:"none"}):l.createElement("span",{style:{fontWeight:"bold"}},n),s&&l.createElement(v.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:s},l.createElement("i",{className:"icon-cem_file1"})))})},l.createElement(u.Z,{theme:"yunting_multi_color",loadingOption:{text:"\u52a0\u8f7d\u4e2d",color:"#20a0ff"},option:{},opts:{devicePixelRatio:2},style:{width:"70%",height:"100%",float:"left"},onChartReady:function(e){return h(e)}}),t&&t.length>0&&l.createElement("div",{style:{width:"28%",height:"100%",float:"right"}},l.createElement(_,{data:t.map((function(e){return[e.name,String(e.total),""+(e.total/e.data.length).toFixed(2)]})),titles:[c,"\u603b\u8ba1","\u5747\u503c"],option:{height:"100%"}})))};var w=[{value:"BAIDU_SEARCH_INDEX",title:"\u767e\u5ea6\u641c\u7d22\u6307\u6570"},{value:"BAIDU_FEED_INDEX",title:"\u767e\u5ea6\u8d44\u8baf\u6307\u6570"},{value:"BAIDU_NEWS_INDEX",title:"\u767e\u5ea6\u5a92\u4f53\u6307\u6570"}],S={BAIDU_SEARCH_INDEX:"\u641c\u7d22\u6307\u6570\u4e3a\u60a8\u663e\u793a\uff1a\u4e92\u8054\u7f51\u7528\u6237\u5bf9\u952e\u8bcd\u641c\u7d22\u5173\u6ce8\u7a0b\u5ea6\u53ca\u6301\u7eed\u53d8\u5316\u60c5\u51b5\u3002 \u7b97\u6cd5\u8bf4\u660e\uff1a\u4ee5\u7f51\u6c11\u5728\u767e\u5ea6\u7684\u641c\u7d22\u91cf\u4e3a\u6570\u636e\u57fa\u7840\uff0c\u4ee5\u5173\u952e\u8bcd\u4e3a\u7edf\u8ba1\u5bf9\u8c61\uff0c\u79d1\u5b66\u5206\u6790\u5e76\u8ba1\u7b97\u51fa\u5404\u4e2a\u5173\u952e\u8bcd\u5728\u767e\u5ea6\u7f51\u9875\u641c\u7d22\u4e2d\u641c\u7d22\u9891\u6b21\u7684\u52a0\u6743\u3002\u6839\u636e\u6570\u636e\u6765\u6e90\u7684\u4e0d\u540c\uff0c\u641c\u7d22\u6307\u6570\u5206\u4e3aPC\u641c\u7d22\u6307\u6570\u548c\u79fb\u52a8\u641c\u7d22\u6307\u6570\u3002",BAIDU_FEED_INDEX:"\u8d44\u8baf\u6307\u6570\u548c\u5a92\u4f53\u6307\u6570\u4e3a\u60a8\u663e\u793a\uff1a\u65b0\u95fb\u8d44\u8baf\u5728\u4e92\u8054\u7f51\u4e0a\u5bf9\u7279\u5b9a\u5173\u952e\u8bcd\u7684\u5173\u6ce8\u53ca\u62a5\u9053\u7a0b\u5ea6\u53ca\u6301\u7eed\u53d8\u5316\u3002 \u8d44\u8baf\u6307\u6570\uff1a\u4ee5\u767e\u5ea6\u667a\u80fd\u5206\u53d1\u548c\u63a8\u8350\u5185\u5bb9\u6570\u636e\u4e3a\u57fa\u7840\uff0c\u5c06\u7f51\u6c11\u7684\u9605\u8bfb\u3001\u8bc4\u8bba\u3001\u8f6c\u53d1\u3001\u70b9\u8d5e\u3001\u4e0d\u559c\u6b22\u7b49\u884c\u4e3a\u7684\u6570\u91cf\u52a0\u6743\u6c42\u548c\u5f97\u51fa\u8d44\u8baf\u6307\u6570\u3002",BAIDU_NEWS_INDEX:"\u5a92\u4f53\u6307\u6570\uff1a\u4ee5\u5404\u5927\u4e92\u8054\u7f51\u5a92\u4f53\u62a5\u9053\u7684\u65b0\u95fb\u4e2d\uff0c\u4e0e\u5173\u952e\u8bcd\u76f8\u5173\u7684\uff0c\u88ab\u767e\u5ea6\u65b0\u95fb\u9891\u9053\u6536\u5f55\u7684\u6570\u91cf\uff0c\u91c7\u7528\u65b0\u95fb\u6807\u9898\u5305\u542b\u5173\u952e\u8bcd\u7684\u7edf\u8ba1\u6807\u51c6\uff0c\u6570\u636e\u6765\u6e90\u3001\u8ba1\u7b97\u65b9\u6cd5\u4e0e\u641c\u7d22\u6307\u6570\u65e0\u76f4\u63a5\u5173\u7cfb\u3002"},D=[{value:"QIHU_TREND_INDEX",title:"360\u5173\u6ce8\u8d8b\u52bf"},{value:"QIHU_EXPLOSURE_INDEX",title:"360\u66dd\u5149\u91cf"}],F={QIHU_TREND_INDEX:"\u5173\u6ce8\u8d8b\u52bf\uff1a\u663e\u793a\u5173\u952e\u8bcd\u5728\u6240\u9009\u5468\u671f\u5185\u4e92\u8054\u7f51\u7528\u6237\u7684\u5173\u6ce8\u7a0b\u5ea6\u53ca\u6301\u7eed\u53d8\u5316\u60c5\u51b5\u3002",QIHU_EXPLOSURE_INDEX:"\u66dd\u5149\u91cf\uff1a\u4ee5360\u6536\u5f55\u7684\u7f51\u9875\u4e3a\u7edf\u8ba1\u57fa\u7840\uff0c\u5206\u6790\u3001\u8ba1\u7b97\u5173\u952e\u8bcd\u7684\u66dd\u5149\u6b21\u6570\u53ca\u6301\u7eed\u53d8\u5316\u60c5\u51b5\u3002"};const R=function(e){function t(){return e.call(this)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.weibo,n=e.baidu,a=e.zhishu360,i=e.onFilterChange,r=e.changeSel,s=e.baiduSelect,u=e.select360,m=e.weiboFetching,d=e.baiduFetching,p=e.fetching360,f=e.filterParams,h=e.onFilterReady,v=e.dimensionName;return l.createElement("div",{className:"brand_index_analyze_wrap"},l.createElement(o.Z,{values:f,model:"BRAND_INDEX_ANALYSIS",showList:["condition","time","save"],filterCondition:{filter:["DIMENSION_INDEX"],dimension:c().getQuery("id"),hideAdvanced:!0},onFilterReady:h,onChange:i}),l.createElement("div",{className:"brand_index_analyze"},l.createElement(C,{option:t,title:"\u5fae\u535a\u6307\u6570",tip:"\u5fae\u535a\u6307\u6570\u662f\u5bf9\u63d0\u53ca\u91cf\u3001\u9605\u8bfb\u91cf\u3001\u4e92\u52a8\u91cf\u52a0\u6743\u5f97\u51fa\u7684\u7efc\u5408\u6307\u6570\uff0c\u66f4\u52a0\u5168\u9762\u7684\u4f53\u73b0\u5173\u952e\u8bcd\u5728\u5fae\u535a\u4e0a\u7684\u70ed\u5ea6\u60c5\u51b5",loading:m,name:v}),l.createElement(C,{option:n&&n[s],title:w.filter((function(e){return e.value===s}))[0].title,tip:S[s],loading:d,name:v,onChange:function(e){return r({baiduSelect:e})},list:w,val:s}),l.createElement(C,{option:a&&a[u],title:D.filter((function(e){return e.value===u}))[0].title,tip:F[u],loading:p,name:v,onChange:function(e){return r({select360:e})},list:D,val:u})))},t}(l.Component);var k=n(35239),x=n(55609),T=n(64396),Z=["loading"],P=T.Z.brand.analyzeOfIndex,A=T.Z.public.menu,U=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleFilterReady=function(e){n.props.save({projectId:k.t.get(k.V.curProject).id,filterParams:e,dimensionId:c().getQuery("id")});var t=setInterval((function(){n.props.inboxMenu&&n.props.inboxMenu.brandInsightMenus&&(n.setState({dimensionName:n.props.inboxMenu.brandInsightMenus[k.t.get(k.V.curProject).id].find((function(e){return String(e.id)===String(c().getQuery("id"))})).name}),clearInterval(t))}),100);setTimeout((function(){n.props.init()}),1)},n._handleFilterChange=function(e){n.props.save({filterParams:e}),setTimeout((function(){n.props.init()}),1)},n.state={dimensionName:""},n.event={onFilterChange:n._handleFilterChange,onFilterReady:n._handleFilterReady},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.clean()},n.render=function(){return l.createElement(R,(0,i.Z)({},this.props,this.event,this.state))},t}(l.Component);const X=(0,x.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,Z);return(0,i.Z)({},n[P],{inboxMenu:n[A].menuList,weiboFetching:t.effects[P+"/fetchWeibo"]||!1,baiduFetching:t.effects[P+"/fetchBaidu"]||!1,fetching360:t.effects[P+"/fetch360"]||!1})}),(function(e){return{changeEnlargeId:function(t){return e({type:P+"/changeEnlargeId",payload:t})},changeSel:function(t){return e({type:P+"/changeSel",payload:t})},init:function(t){return e({type:P+"/init",payload:t})},save:function(t){return e({type:P+"/save",payload:t})},clean:function(){return e({type:P+"/clean"})}}}))(U)}}]);