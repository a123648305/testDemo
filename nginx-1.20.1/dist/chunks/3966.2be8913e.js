"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[3966],{3966:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(63366),r=n(87462),l=n(94578),o=n(67294),c=n(55815),i=n(50976),s=n(30133),u={unCollectedCount:{color:"#D96969",title:"\u5f85\u91c7\u96c6"},collectingCount:{color:"#1574B3",title:"\u91c7\u96c6\u4e2d"},collectedCount:{color:"#15B374",title:"\u5df2\u91c7\u96c6"}};const m=function(e){var t=e.data,n=e.loading,a=o.useState(void 0),r=a[0],l=a[1];return o.useEffect((function(){t&&r&&new Promise((function(e){var n=function(e){return{title:{text:"\u5404\u6570\u636e\u5e73\u53f0\u91c7\u96c6\u8fdb\u5ea6"},tooltip:{formatter:function(e){var t=e.data.fullData,n=t.unCollectedCount+t.collectedCount+t.collectingCount,a=["collectedCount","collectingCount","unCollectedCount"].map((function(e){return'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+u[e].color+';"></span> '+u[e].title+"\uff1a"+t[e]+'<span style="color: #8c8c8c">\uff08'+(t[e]/n*100).toFixed(0)+"%\uff09</span>"}));return a.splice(0,0,t.dataPlatform),a.join("<br/>")}},grid:{left:"5%",right:"5%",top:50,bottom:"10%",containLabel:!0},xAxis:{type:"category",axisTick:{show:!0,alignWidthLabel:!0},data:e.map((function(e){return e.dataPlatform}))},yAxis:{show:!1},series:[].concat(["unCollectedCount","collectingCount","collectedCount"].map((function(t){return{type:"bar",barMaxWidth:30,stack:"store",itemStyle:{borderWidth:1,borderColor:"#fff"},data:e.map((function(e){return{value:e[t],fullData:e,itemStyle:{color:u[t].color}}}))}})))}}(t.dataPlatformList);e(n)})).then((function(e){r.clear(),r.setOption(e)}))}),[t,r]),o.createElement("div",{className:"yt-cm-chart"},o.createElement("div",{className:"chart"},void 0===t?o.createElement(s.Z,null):null===t?o.createElement("div",{className:"empty-block"},"\u6682\u65e0\u6570\u636e"):o.createElement(i.Z,{theme:"yunting_neg_neu_pos",showLoading:n,loadingOption:{text:"",color:"#20a0ff"},option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return l(e)}})))};var d=n(43036),g=n(92360);const p=function(e){var t=e.data;e.loading;return o.createElement("div",{className:"yt-cm-summary"},o.createElement("div",{className:"summary"},void 0===t?o.createElement(s.Z,null):null===t?o.createElement("div",{className:"empty-block"},"\u6682\u65e0\u6570\u636e"):o.createElement(o.Fragment,null,o.createElement("div",{className:"title"},"\u91c7\u96c6\u5b8c\u6210\u5ea6",o.createElement(d.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:o.createElement(o.Fragment,null,o.createElement("div",null,"\u5bf9\u4e00\u4e2a\u5e97\u94fa\u7684\u4e00\u4e2a\u6570\u636e\u5e73\u53f0\u7684\u76ee\u6807\u6570\u636e\u7684\u91c7\u96c6\u8bb0\u4e3a1\u4e2a\u91c7\u96c6\u4efb\u52a1\u3002\u5982\u679c\u8be5\u6570\u636e\u5e73\u53f0\u5bf9\u5e94\u7684\u5e97\u94fa\u6ca1\u6709\u88ab\u91c7\u96c6\uff0c\u5219\u72b6\u6001\u4e3a\u201c\u5f85\u91c7\u96c6\u201d\uff1b\u5982\u679c\u6ca1\u6709\u6309\u8981\u6c42\u5168\u90e8\u5b8c\u6210\uff0c\u5219\u72b6\u6001\u4e3a\u201c\u91c7\u96c6\u4e2d\u201d\uff1b\u5982\u679c\u5168\u90e8\u5b8c\u6210\uff0c\u5219\u4e3a\u201c\u5df2\u91c7\u96c6\u201d\u3002 \u5b8c\u6210\u5ea6\u662f\u6307\u8fd9\u4e9b\u91c7\u96c6\u4efb\u52a1\u4e2d\u5df2\u7ecf\u5b8c\u6210\u91c7\u96c6\u7684\u4efb\u52a1\u7684\u5360\u6bd4\u3002"),o.createElement("div",null,"\u6b64\u6570\u636e\u662f\u4e3a\u4e86\u7763\u4fc3\u7528\u6237\u6216\u8005\u76f8\u5173\u7684\u7ba1\u7406\u5458\u53ca\u65f6\u5b8c\u6210\u76f8\u5e94\u7684\u91c7\u96c6\u4efb\u52a1"))},o.createElement("i",{className:"icon-cem_file1"}))),o.createElement("div",{className:"content"},o.createElement("span",null,(100*t.progressRate).toFixed(0)+"%"),o.createElement(g.Progress,{strokeWidth:8,showText:!1,percentage:100*t.progressRate})))))};var h=n(71339),f=n(61918);const y=function(e){var t=e.options,n=e.value,a=e.onChange;return o.createElement("div",{className:"yt-radio-group-button-wrapper"},o.createElement(g.Radio.Group,{value:n,onChange:a},Object.keys(t).map((function(e){return o.createElement(g.Radio.Button,{key:e,value:e},t[e])}))))};var v={ALL:"\u5168\u90e8",UNCOLLECTED:"\u5f85\u91c7\u96c6",COLLECTING:"\u91c7\u96c6\u4e2d",COLLECTED:"\u5df2\u91c7\u96c6"},E=function(e,t){var n=e-5-24-40-32-144;return[{label:"",width:16},{label:"\u5e97\u94fa\u540d\u79f0",prop:"name",width:.2*n},{label:"\u7535\u5546\u5e73\u53f0",prop:"platform",width:.2*n},{label:"\u5e97\u94fa\u91c7\u96c6\u8d1f\u8d23\u4eba",width:.2*n,render:function(e){var t=e.managerTeamList,n=e.managerUserList;return o.createElement(o.Fragment,null,o.createElement("div",{className:"col-manager"},o.createElement("span",null,"\u56e2\u961f"),o.createElement("span",null,t.reduce((function(e,t){return[].concat(e,[t.name])}),[]).join(","))),o.createElement("div",{className:"col-manager"},o.createElement("span",null,"\u6210\u5458"),o.createElement("span",null,n.reduce((function(e,t){return[].concat(e,[t.name])}),[]).join(","))))}},{label:"\u6570\u636e\u5e73\u53f0",width:.2*n,render:function(e){return e.taskList.map((function(e){return o.createElement("div",{className:"col-platform",key:e.dataPlatform,onClick:function(){return t(e)}},o.createElement("span",null,e.dataPlatform))}))}},{label:o.createElement("span",null,"\u91c7\u96c6\u5b8c\u6210\u5ea6",o.createElement(d.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:o.createElement("div",null,o.createElement("div",null,"\u4f9d\u636e\u91c7\u96c6\u5b8c\u8be5\u8d26\u53f7\u9700\u8981\u7528\u6237\u8fdb\u884c\u7684\u4e00\u6b21\u70b9\u51fb\u5373\u4e3a1\u4e2a\u4efb\u52a1\u3002\u5982\u201c1/21\u201d\u8868\u793a\u5b8c\u6210\u8be5\u8d26\u53f7\u5728\u8be5\u6570\u636e\u5e73\u53f0\u7684\u6570\u636e\u91c7\u96c6\u5171\u9700\u8981\u7528\u6237\u5b8c\u6210\u6709\u6548\u70b9\u51fb21\u6b21\uff0c\u73b0\u5728\u7528\u6237\u5df2\u5b8c\u62101\u6b21\u6709\u6548\u70b9\u51fb\u3002"),o.createElement("div",null,"\u6bcf\u5929\u66f4\u65b0\u6240\u6709\u5e97\u94fa\u7684\u5b8c\u6210\u5ea6\u8fdb\u5c55"))},o.createElement("i",{className:"icon-cem_file1",style:{marginLeft:4}}))),width:.2*n,render:function(e){return e.taskList.map((function(e){return o.createElement("div",{className:"col-platform",key:e.dataPlatform},o.createElement(g.Progress,{showText:!1,strokeWidth:8,percentage:(e.finishCount/e.totalCount*100).toFixed(2)}),o.createElement("span",null,e.finishCount+"/"+e.totalCount))}))}},{label:"",width:16}]};const C=function(e){var t=e.option,n=e.pageIndex,a=e.pageSize,r=e.status,l=e.loading,c=e.data,i=e.keyword,u=e.onPageSizeChange,m=e.onPageChange,d=e.onStatusChange,g=e.onPlatformClick,p=e.onSearch,C=0===r.length?"ALL":r[0];return o.createElement("div",{className:"yt-cm-store-list"},c?o.createElement(o.Fragment,null,o.createElement("div",{className:"yt-cm-store-filter"},o.createElement(f.Z,{defValue:i,style:{width:200},placeholder:"\u8bf7\u8f93\u5165\u5e97\u94fa\u540d\u79f0",onSearch:p}),o.createElement(y,{options:v,value:C,onChange:d})),o.createElement(h.Z,{columns:E(t.width,g),data:null===c?[]:c.result,total:c.count,pageIndex:n,pageSize:a,loading:l,option:t,onPageSizeChange:u,onPageChange:m})):o.createElement("div",{style:{background:"white",minHeight:500}},o.createElement(s.Z,null)))};const b=function(e){var t=e.storeData,n=e.storeListData,a=e.pageIndex,r=e.pageSize,l=e.statusList,i=e.keyword,s=e.fetchingStoreData,u=e.fetchingStoreListData,d=e.contentWidth,g=e.onPageSizeChange,h=e.onPageChange,f=e.onStatusChange,y=e.onPlatformClick,v=e.onSearch;return o.createElement("div",{className:"yt-colletion-mange-wrapper"},o.createElement(c.Z,{title:"\u5e97\u94fa\u7ba1\u7406"}),o.createElement("div",{className:"yt-cm-content"},o.createElement("div",{className:"yt-cm-top"},o.createElement(p,{data:t,loading:s}),o.createElement("div",{className:"v-divider"}),o.createElement(m,{data:t,loading:s})),o.createElement("div",{className:"h-divider"}),o.createElement(C,{keyword:i,onPlatformClick:y,onPageSizeChange:g,onPageChange:h,onStatusChange:f,onSearch:v,status:l,loading:u,data:n,pageIndex:a,pageSize:r,option:{width:d}})))};var S=n(35239),w=n(61193),N=n(55609),k=n(84122),P=n(64396),L=["loading"],x=P.Z.colManage.manage,_=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleOnPageSizeChange=function(e){n.props.fetchStoreListData({pageSize:e,pageIndex:1})},n._handleOnPageChange=function(e){n.props.fetchStoreListData({pageIndex:e})},n._handleOnStatusChange=function(e){n.props.fetchStoreListData({statusList:"ALL"===e?[]:[e],pageIndex:1})},n._handleOnSearch=function(e){n.props.fetchStoreListData({keyword:e,pageIndex:1})},n._handleOnPlatformClick=function(e){(0,k.Ln)((function(t){var n=w.Z.getUser(),a=S.t.get(S.V.curProject);t.loginFromWeb({userInfo:n,project:a}).then((function(t){t.status&&window.open(e.dataPlatformUrl,"_blank")}))}))},n.state={projectId:S.t.get(S.V.curProject).id},n.event={onPageSizeChange:n._handleOnPageSizeChange,onPageChange:n._handleOnPageChange,onStatusChange:n._handleOnStatusChange,onSearch:n._handleOnSearch,onPlatformClick:n._handleOnPlatformClick},n}(0,l.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.fetchData({projectId:this.state.projectId})},n.componentWillUnmount=function(){},n.render=function(){return o.createElement(b,(0,r.Z)({},this.props,this.state,this.event))},t}(o.PureComponent);const z=(0,N.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,L);return(0,r.Z)({},n[x],{fetchingStoreData:t.effects[x+"/fetchStoreData"]||!1,fetchingStoreListData:t.effects[x+"/fetchStoreListData"]||!1})}),(function(e){return{fetchStoreListData:function(t){return e({type:x+"/fetchStoreListData",payload:t})},fetchData:function(t){return e({type:x+"/fetchData",payload:t})},clean:function(t){return e({type:x+"/clean",payload:t})}}}))(_)},55815:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),r=n(67294),l=n(45697),o=n.n(l),c=n(43036),i=n(61409),s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,r=n.beforeJump;e!==a.length-1&&(r?new Promise((function(e,t){return r(e,t)})).then((function(){i.mW.push({pathname:a[e].url,state:a[e].state})})):i.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,l=t.rightContent,o=t.className,i=t.overlay;return r.createElement("div",{className:"breadcumb-wrapper "+o},n instanceof Array?r.createElement("div",{className:"breadcrumb-left"},r.createElement("div",null,n.map((function(t,a){return r.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),r.createElement("span",null,a||n[n.length-1].title,i&&r.createElement(c.Z,{placement:"top",overlay:i},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):r.createElement("div",{className:"normal-title"},n,i&&r.createElement(c.Z,{placement:"top",overlay:i},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),l||"")},t}(r.Component);s.propTypes={className:o().string,title:o().oneOfType([o().string,o().arrayOf(o().shape({title:o().string,url:o().string,state:o().object}))]).isRequired,overlay:o().oneOfType([o().string,o().node]),mainTitle:o().oneOfType([o().string,o().node]),beforeJump:o().func,rightContent:o().node};const u=s},25022:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),r=n(92360),l=n(35303),o=n(45697),c=n.n(o),i=[{label:"10\u9879/\u9875",value:10},{label:"20\u9879/\u9875",value:20},{label:"40\u9879/\u9875",value:40},{label:"100\u9879/\u9875",value:100}];const s=function(e){var t=e.onPageChange,n=e.onSizeChange,o=e.total,c=void 0===o?0:o,s=e.pageIndex,u=e.pageSize,m=e.layout,d=e.className,g=e.currLength,p=0===c?0:(s-1)*u+1,h=0===c?0:g?p+g-1:p+u-1;return 0===c?null:a.createElement("div",{className:"yt-awp-pagination "+(d||"")},a.createElement("span",{className:"total_num"},a.createElement("span",null,p+" - "+h+" "),"\u9879\uff0c\u5171",a.createElement("span",null," "+c+" "),"\u9879"),a.createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},a.createElement(r.Pagination,{small:!0,pageSize:u,currentPage:s,pageCount:Math.ceil(c/u),layout:0===c?"":"prev, pager, next",onCurrentChange:t}),void 0===m||m.includes("sizes")?a.createElement(l.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:u||10,onChange:n},i.map((function(e,t){return a.createElement(l.Wx,{key:t,label:e.label,value:e.value},e.label)}))):null))};c().propTypes={onPageChange:c().func,onSizeChange:c().func,total:c().number,pageIndex:c().number,pageSize:c().number,layout:c().string,className:c().string}},71339:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),r=n(92360),l=n(25022),o=n(45697),c=n.n(o),i=function(e){var t=e.data,n=e.total,o=void 0===n?0:n,c=e.loading,i=e.pageIndex,s=e.columns,u=e.pageSize,m=e.onPageChange,d=e.onPageSizeChange,g=e.onSortChange,p=e.defaultSort,h=e.className,f=void 0===h?"":h;return a.useEffect((function(){var e=document.getElementsByClassName("is-sortable")[0];p&&e&&e.classList.add(p.order)}),[p]),a.createElement("div",{className:"yt-awp-content-list "+f},a.createElement(r.Loading,{loading:c,className:"awp-content-loading"},a.createElement(r.Table,{defaultSort:p,columns:s,style:{width:"100%"},data:t,onSortChange:function(e){return g(e)}})),m&&a.createElement(l.Z,{onPageChange:m,onSizeChange:d,total:o,currLength:t.length,pageIndex:i,pageSize:u}))};i.propTypes={data:c().array,total:c().number,loading:c().bool,pageIndex:c().number,columns:c().array,pageSize:c().number,onPageChange:c().func,onPageSizeChange:c().func,onSortChange:c().func,defaultSort:c().any,className:c().string};const s=i},61918:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(67294),r=n(45697),l=n.n(r),o=function(e){var t=e.className,n=e.onClear,r=e.onSearch,l=e.placeholder,o=e.style,c=e.defValue,i=e.signal,s=a.useState(c),u=s[0],m=s[1];a.useEffect((function(){m(c)}),[c,i]);return a.createElement("div",{style:o,className:"yt_search_input_wrapper "+(t||"")},a.createElement("input",{placeholder:l,value:u,onKeyDown:function(e){13===e.keyCode&&r(u)},onChange:function(e){return m(e.target.value)},autoComplete:"off"}),u&&a.createElement("i",{className:"icon-cem_log-off",onClick:function(){m(""),n&&n("")}}),a.createElement("i",{className:"icon-cem_small-search",onClick:function(){return r(u)}}))};o.propTypes={className:l().string,onSearch:l().func.isRequired,placeholder:l().string,style:l().object,defValue:l().string,signal:l().any,onClear:l().func};const c=o},84122:(e,t,n)=>{n.d(t,{Ln:()=>s,YG:()=>u,Pl:()=>m,VG:()=>d,Rr:()=>g});var a=n(87462),r=n(67294),l=n(92360),o=n(5133);function c(e){l.MessageBox.confirm(r.createElement("span",null,"\u8bf7\u5148\u4e0b\u8f7d\u4e91\u542c\u63d2\u4ef6\u5e76\u5b89\u88c5\uff0c\u518d\u8fdb\u884c\u64cd\u4f5c!",r.createElement("br",null),"\u4e0b\u8f7d\u540e\u5237\u65b0\u6b64\u9875\uff0c",r.createElement("a",{href:e,target:"_black",style:{color:"#0747a6",textDecoration:"underline"}},"\u70b9\u8fd9\u53bb\u4e0b\u8f7d"),"\uff08",r.createElement("a",{href:"http://wiki.yuntingai.com/x/lgAB",target:"_black",style:{color:"#0747a6",textDecoration:"underline"}},"\u5b89\u88c5\u8bf4\u660e"),"\uff09",r.createElement("br",null)),"\u63d0\u793a",{type:"warning",confirmButtonText:"\u5df2\u5b8c\u6210\u4e0b\u8f7d"}).then((function(){window.location.reload()}))}function i(e,t,n,a){!function c(){l.MessageBox.confirm(r.createElement("span",null,"\u8bf7\u767b\u5f55",t,"\u5e73\u53f0\uff0c\u518d\u8fdb\u884c\u56de\u590d!",r.createElement("br",null),r.createElement("a",{href:n,target:"_black",style:{color:"#0747a6",textDecoration:"underline"}},"\u70b9\u8fd9\u53bb\u767b\u5f55")),"\u63d0\u793a",{type:"warning",confirmButtonText:"\u5df2\u5b8c\u6210\u767b\u5f55"}).then((function(t){e[a]().then((function(e){e.status||(c(),o.Z.warning("\u672a\u68c0\u6d4b\u5230\u767b\u5f55\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u6216\u8054\u7cfb\u7ba1\u7406\u5458\u3002"))}))}))}()}var s=function(e){new Promise((function(e,t){try{e(new YUNTING_OP_LOGIN)}catch(n){t(n)}})).then((function(t){e&&e(t)})).catch((function(e){c("https://yunting-1251101074.coscd.myqcloud.com/plugin/yunting-store.zip")}))},u=function(e){new Promise((function(e,t){try{e(new YUNTINGPLUGIN)}catch(n){t(n)}})).then((function(t){e&&e(t)})).catch((function(e){c("https://yunting-1251101074.file.myqcloud.com/plugin/yunting.zip")}))},m=function(e,t,n,r){return e.weibo.check().then((function(l){return l.status?e.weibo.reply(t.url,n).then((function(e){return e.status?r((0,a.Z)({},e,{content:n,id:t.id,uid:t.uid})):o.Z.error(e.msg||"\u56de\u590d\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458")})):i(e,"\u5fae\u535a","https://passport.weibo.cn/signin/login?entry=mweibo&yuntinglogin","weiboCheckLogin")}))},d=function(e,t,n,r){return e.tieba.check().then((function(l){return l.status?e.tieba.reply(t.group,n).then((function(e){return e.status?r((0,a.Z)({},e,{id:t.id,content:n})):o.Z.error(e.msg||"\u56de\u590d\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458")})):i(e,"\u767e\u5ea6\u8d34\u5427","https://passport.baidu.com/v2/?login&yuntinglogin","tiebaCheckLogin")}))},g=function(e,t,n,r){return e.zhihu.check().then((function(l){return l.status?e.zhihu.reply(t.zhihuId,n).then((function(e){return e.status?r((0,a.Z)({},e,{id:t.id,img:l.avatar_url,uid:l.uid,username:l.name,userDesc:l.headline,userHome:l.url,content:n})):o.Z.error(e.message||"\u56de\u590d\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458")})):i(e,"\u77e5\u4e4e","https://www.zhihu.com/signin?yuntinglogin","zhihuCheckLogin")}))}}}]);