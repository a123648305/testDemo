"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8149],{86767:(e,t,n)=>{n.d(t,{Z:()=>m});n(43378);var a=n(62443),l=n(23493),o=n.n(l),r=n(67294),i=n(50976),c=n(8201),s=n(98191),p=n(60496),u=n(28183);const m=function(e){var t=e.dataAspect1,n=e.dataAspect2,l=e.title,m=void 0===l?"\u6307\u6807\u7edf\u8ba1\u91cf\u56fe":l,d=e.onChartClick,f=e.onMsgClick,h=(0,r.useState)([]),y=h[0],v=h[1],g=(0,r.useState)(0),E=g[0],x=g[1],b=(0,r.useState)(null),C=b[0],_=b[1],S=(0,r.useState)("SINGLE"),w=S[0],N=S[1],T=(0,r.useState)("FIRST"),k=T[0],A=T[1],R=(0,r.useState)(""),Z=R[0],F=R[1],I=function(e){v("FIRST"!==k?t:e?n.filter((function(t){return t.aspect1===e})):n),A("FIRST"===k?"SECOND":"FIRST"),F("FIRST"===k?e:"")},O=o()((function(e){var t=e.targetType,n=e.value;"axisLabel"===t&&I(n)}),100);return(0,r.useEffect)((function(){Array.isArray(t)&&v(t)}),[t]),(0,r.useEffect)((function(){if(C){var e=(0,c.P)(y)?(0,u.Rl)(y,m,E,k,null==C?void 0:C.getWidth(),f):{};e&&C.setOption(e)}}),[y,E,C,k]),(0,r.useEffect)((function(){if(Array.isArray(n)&&Array.isArray(n)){var e=("FIRST"===k?t:n).reduce((function(e,t){return e+t.total}),0);x(e)}}),[k,t,n]),(0,r.useEffect)((function(){return null==C||C.on("mousedown","xAxis.category",O),function(){null==C||C.off("mousedown")}}),[C,k]),r.createElement("div",{className:"aspect_lineChart_box "+(t&&"string"!==typeof t?"":"empty"),style:{height:"100%"}},r.createElement(c.Z,{data:t,loading:!1,style:{height:"100%"},renderTitle:r.createElement(s.Z,{title:m,titleOverlay:r.createElement(r.Fragment,null,r.createElement("div",null,"\u300c\u6307\u6807\u5360\u6bd4\u300d\u8be5\u6307\u6807\u58f0\u91cf\u5360\u6240\u6709\u6307\u6807\u58f0\u91cf\u7684\u767e\u5206\u6bd4"),r.createElement("div",null,"\u300c\u6307\u6807\u597d\u8bc4\u7387\u300d\u6307\u6807\u6b63\u9762\u58f0\u91cf\xf7\uff08\u6307\u6807\u6b63\u9762\u58f0\u91cf + \u6307\u6807\u8d1f\u9762\u58f0\u91cf\uff09"),r.createElement("div",null,"\u300c\u6307\u6807\u5dee\u8bc4\u7387\u300d\u6307\u6807\u8d1f\u9762\u58f0\u91cf\xf7\uff08\u6307\u6807\u6b63\u9762\u58f0\u91cf + \u6307\u6807\u8d1f\u9762\u58f0\u91cf\uff09")),data:t},Z&&r.createElement("span",{className:"icon-cem_pull-or-take-up",onClick:function(){return I()}},"\u8fd4\u56de\u4e00\u7ea7\u6307\u6807"),r.createElement(p.Z,{options:u.Gn,activeObj:w,onChange:function(e){N(e),d("showType",e)}}),r.createElement(p.Z,{options:u.mH,activeObj:k,onChange:function(){return I()}}),r.createElement("div",{className:"icons"},r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-daochu",onClick:function(){return(0,u.kQ)(C,"data",y,m,k)}}))),r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return(0,u.kQ)(C,"image",y,m)}})))))},r.createElement(i.Z,{onChartReady:function(e){return _(e)},theme:"yt_multi_color_10",option:{},opts:{devicePixelRatio:2},style:{width:"100%",height:"100%"}})))}},28183:(e,t,n)=>{n.d(t,{Rl:()=>c,kQ:()=>p,Gn:()=>u,mH:()=>m});var a=n(87462),l=n(39432),o=n(87300),r=n(70715),i=n(94644),c=function(e,t,n,i,c,s){var p=["#60DDA9","#F08A8A"],u=function(e,t,n){var l=JSON.parse(JSON.stringify(e)),o=new Array(2).fill([]),r=l.map((function(e){return"FIRST"===n?e.aspect1:e.aspect2})),i=l.map((function(e){var n=e.total/t;return e.voicePercent=n,e}));return o[0]=i.map((function(e){return(0,a.Z)({},e,{value:e.posRate*e.voicePercent})})),o[1]=i.map((function(e){return(0,a.Z)({},e,{value:e.negRate*e.voicePercent})})),{xAxisData:r,data:o}}(e,n,i),m=u.xAxisData,d=u.data,f=(0,l.jD)(m.join(""),12)/(.4*c)>1,h=function(e){return e.map((function(e){return(0,a.Z)({},e,{tooltip:{trigger:"item",formatter:function(e,t,n){var a=t.indexOf("\u6b63\u9762")>-1?0:1;return setTimeout((function(){e.seriesName;var l=e.data,r=l.aspect1,c=l.aspect2,p=l.posRate,u=l.negRate,m=l.menRate,d=l.positive,f=l.negative,h=e.marker,y="FIRST"===i?r:c,v="\n              <div style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;position:relative;\">\n                <span style='position:absolute;width:40px;height:150px;left:-40px;top:-30px;'></span>\n                <span style='position:absolute;width:40px;height:150px;right:-40px;top:-30px;'></span>\n              </div>\n              <span style=\"font-size: 12px; color: #262626; font-weight: 400;\">"+y+"</span>",g=['<span style="color: #8C8C8C;display: inline-block;width: 114px;margin-bottom:6px;">'+h+'<span style="margin-left:3px;">'+(a<1?"\u6307\u6807\u6b63\u9762\u58f0\u91cf":"\u6307\u6807\u8d1f\u9762\u58f0\u91cf")+'</span></span><span style="float: right;color: #262626;position: relative;">\n              '+(a<1?d:f)+"</span>",'<span style="color: #8C8C8C;display: inline-block;width: 114px;margin-left:18px;margin-bottom:6px;">\u6307\u6807'+(a<1?"\u597d\u8bc4":"\u5dee\u8bc4")+'\u7387</span><span style="float: right;color: #262626;position: relative;">\n                '+(100*(a<1?p:u)).toFixed(2)+"%\n                  </span>",'<span style="color: #8C8C8C;display: inline-block;width: 114px;margin-left:18px;">\u6307\u6807\u63d0\u53ca\u7387</span><span style="float: right;color: #262626;position: relative;">\n                '+((a<1?p:u)*m*100).toFixed(2)+"%\n                  </span>"];n(t,s?(0,o.r)(v,g,[{title:"\u4e0b\u94bb",icon:"icon-cem_jump-message",callback:function(){return s({type:"analyze",name:y,aspectType:"FIRST"===i?"ASPECT1":"ASPECT2",value:["",a<1?d:f],eomtionsType:a<1?"positive":"negative"})}}],"yt_new_tooltip_wrapper"):(0,o.r)(v,g))}),0)}}})}))};return{color:p,graphic:[{type:"group",top:24,left:20,silent:!0,children:[{type:"text",left:10,style:{text:t,font:"bolder 14px "+r.I8,fill:"#262626"}},{type:"text",left:(0,l.jD)(t)+12,style:{text:"",font:"normal 14px "+r.I8,fill:"#8C8C8C"}}]}],grid:{left:28,right:66,top:100,containLabel:!0},legend:{left:16,top:52,itemWidth:10,itemHeight:10,itemGap:16,icon:"circle",data:["\u6b63\u9762\u6307\u6807","\u8d1f\u9762\u6307\u6807"]},xAxis:{type:"category",data:m,triggerEvent:!0,nameTextStyle:{color:"#626262"},axisLabel:{rotate:f?45:0,margin:f?15:8,formatter:function(e){return(null==e?void 0:e.length)>6?e.substring(0,5)+"...":e}},axisPointer:{type:"shadow",label:{show:!1},z:0}},yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return(100*e).toFixed(0)+"%"}},splitNumber:3,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},tooltip:{trigger:"axis",showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,n,a,l){var o=l.contentSize,r=l.viewSize,i=e[0]<r[0]/2?0:-1,c=e[1]<r[1]/2?-.5:-1.01,s=e[0]<r[0]/2?7:-12;return[e[0]+i*o[0]+s,e[1]+c*o[1]]},formatter:function(e,t,n){if(e.length)return setTimeout((function(){var a=e[0].data,l="FIRST"===i?a.aspect1:a.aspect2,r=['<span style="color: #8C8C8C;display: inline-block;width: 95px;margin-bottom:6px;">\u6307\u6807\u58f0\u91cf</span> <span style="float: right;color: #262626;position: relative;">\n          '+a.total+" ("+(100*a.voicePercent).toFixed(2)+"%)</span>",'<span style="color: #8C8C8C;display: inline-block;width: 95px;">\u6307\u6807\u63d0\u53ca\u7387</span> <span style="float: right;color: #262626;position: relative;">\n          '+(100*a.menRate).toFixed(2)+"%</span>"],c='<span span style = "font-size: 12px; color: #262626; font-weight: 400;" >'+l+"</span>";n(t,(0,o.r)(c,r,[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return s({type:"FIRST"===i?"aspect1":"aspect2",name:l})}}],"yt_new_tooltip_wrapper"))}),0)," "}},dataZoom:{show:!0,bottom:16,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"},series:[{type:"bar",name:"\u6b63\u9762\u6307\u6807",smooth:!0,showSymbol:!0,symbolSize:1,stack:"Ad",barMaxWidth:24,barMinWidht:24,itemStyle:{color:p[0]},emphasis:{focus:"series"},data:h(d[0])},{type:"bar",name:"\u8d1f\u9762\u6307\u6807",smooth:!0,showSymbol:!0,stack:"Ad",barMaxWidth:24,barMinWidht:24,itemStyle:{color:p[1]},emphasis:{focus:"series"},data:h(d[1])}]}},s=["\u6307\u6807\u58f0\u91cf","\u6307\u6807\u6b63\u9762\u58f0\u91cf","\u6307\u6807\u597d\u8bc4\u7387","\u6307\u6807\u8d1f\u9762\u58f0\u91cf","\u6307\u6807\u5dee\u8bc4\u7387","\u6307\u6807\u63d0\u53ca\u7387","\u6d88\u606f\u603b\u6570"],p=function(e,t,n,a,l){if("image"===t)(0,i._v)(e,a);else if("data"===t){var o="FIRST"===l,r=[[(o?"\u4e00":"\u4e8c")+"\u7ea7\u6307\u6807"].concat(s)];n.forEach((function(e,t){r.push([o?e.aspect1:e.aspect2,e.total,e.positive,(100*e.posRate).toFixed(2)+"%",e.negative,(100*e.negRate).toFixed(2)+"%",(100*e.menRate).toFixed(2)+"%",e.messageTotal])}));var c=[r];(0,i.aT)(c,a)}},u=[{title:"\u6307\u6807\u7edf\u8ba1\u91cf\uff08\u5355\u56fe\uff09",value:"SINGLE"},{title:"\u6307\u6807\u7edf\u8ba1\u91cf\uff08\u591a\u56fe\uff09",value:"MULTI"}],m=[{title:"\u4e00\u7ea7\u6307\u6807",value:"FIRST"},{title:"\u4e8c\u7ea7\u6307\u6807",value:"SECOND"}]},27310:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(94578),l=n(67294),o=n(45697),r=n.n(o),i=n(92360),c=function(e){var t=e.height;return l.createElement("div",{style:{background:"#fff",height:t,display:"flex",alignItems:"center",justifyContent:"center"}},"Template")},s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).clientHeight=160,t.notShowList=[],t._handleOnCheckBoxChange=function(e,n){var a,l=t.props,o=l.onChange,r=l.showList;e?(a=r.slice()).push(n):a=r.filter((function(e){return e!==n})),o&&o(a)},t._renderEditableFrame=function(e,n){var a=t.props,o=a.editable,r=a.colNumber,c=void 0===r?1:r;return l.createElement("div",{id:e.key,key:e.key,style:{width:"calc("+100/c+"% - 12px)"},className:o?"child_editable":""},e,o&&l.createElement(i.Checkbox,{checked:n,className:"checkbox_style",onChange:function(n){return t._handleOnCheckBoxChange(n,e.key)}}))},t}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.children,t=e instanceof Array?e[0]:e,n=document.getElementById(t.key);n&&(this.childHeight=n.clientHeight)},n.render=function(){var e=this,t=this.props,n=t.className,a=void 0===n?"":n,o=t.editable,r=void 0!==o&&o,i=t.orientation,s=void 0===i?"horiziontal":i,p=t.children,u=t.showList,m=void 0===u?[]:u,d=p instanceof Array?p:[p];return this.notShowList=[],l.createElement("div",{className:"yt_drag_layout_wrapper yt_drag_layout_"+s+" "+a},d.reduce((function(t,n,a){var o=m.indexOf(n.key);if(o>-1?t[o]=e._renderEditableFrame(n,!0):e.notShowList.push(n.key),a===d.length-1){var i=t.filter((function(e){return e}));return r&&e.notShowList.length>0&&e.notShowList.forEach((function(t){i.push(e._renderEditableFrame(l.createElement(c,{key:t,height:e.childHeight}),!1))})),i}return t}),[]))},t}(l.PureComponent);const p=s;s.propTypes={orientation:r().oneOf(["horizontal","vertical"]),colNumber:r().number,className:r().oneOfType([r().string,r().object]),editable:r().bool,showList:r().arrayOf(r().string),onChange:r().func}},94530:(e,t,n)=>{n.d(t,{Z:()=>k});var a=n(87462),l=n(63366),o=n(67294),r=n(25713),i=n(43036),c=n(45697),s=n.n(c),p=n(38263),u=n(57522),m=[{value:"WEEK",label:"\u5468"},{value:"MONTH",label:"\u6708"},{value:"QUATER",label:"\u5b63"},{value:"YEAR",label:"\u5e74"}],d=function(e){var t=e.value,n=e.getValue,a=o.useState(t),l=a[0],r=a[1];return o.createElement("div",{className:"yt_modal_dashboard_edit_wrapper"},o.createElement("div",{className:"content_item"},o.createElement("span",null,"\u540c\u6bd4\u7c7b\u578b"),o.createElement("span",null,o.createElement(p.ZP,{className:"content_item_select",value:(m.find((function(e){return e.value===l}))||{}).label,onChange:function(e){return function(e){r(e),setTimeout((function(){return n&&n(e)}),0)}(e)},inputIcon:o.createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},m.map((function(e){return o.createElement(p.ZP.Option,{value:e.value,key:e.value},e.label)}))))))},f=function(e){return new Promise((function(t,n){var l=e.value,r=(0,a.Z)({},e,{titleText:o.createElement("div",{className:"indicator_card_comfirm"},o.createElement("span",null,"\u540c\u6bd4\u8bbe\u7f6e"),o.createElement("span",{onClick:function(){return window.open("https://www.yuque.com/docs/share/5615d490-0056-4bb9-b208-bf747c9048c0")}},"\u67e5\u770b\u66f4\u591a")),content:o.createElement(d,(0,a.Z)({},e,{getValue:function(e){l=e}}))});r.onOk=function(){return t(l)},r.onCancel=n,(0,u.Z)(r)}))};const h=f;f.propTypes={getValue:s().func,value:s().string};var y=n(8201),v=n(39432),g=n(94644),E=n(29531),x=n.n(E),b=n(93162),C=function(e){return!["",null,void 0].includes(e)},_=[{title:"\u5bfc\u51fa\u56fe\u7247",type:"image"},{title:"\u5bfc\u51fa\u6570\u636e",type:"data"}],S=[{title:"\u8bbe\u7f6e\u540c\u6bd4",type:"compare"}],w=function(e){return e&&e.length>6?String(e).substring(0,6)+"...":e},N=function(e,t,n){if("image"===e)l=t,o=(0,g.UO)(n[0]&&n[0].name),new Promise((function(e){var t=l.offsetWidth,n=l.cloneNode(!0),a=document.createElement("canvas");a.width=12*t,a.height=1920,a.style.width=t+"px",a.style.height="160px",a.className="yt_trend_list_canvas",a.getContext("2d").scale(12,12),n.style.width=t+"px",n.style.height="160px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=-1,n.style.opacity=0,document.body.appendChild(n),x()(n,{allowTaint:!0,taintTest:!1,canvas:a,useCORS:!0,width:t,height:160,onrendered:function(e){document.body.appendChild(e);var t=e.toDataURL("png");(0,b.saveAs)(t,o,"image/png"),setTimeout((function(){document.body.removeChild(n),document.body.removeChild(document.querySelector(".yt_trend_list_canvas"))}),0)}})}));else if("data"===e){var a=[n.reduce((function(e,t){return[].concat(e,[[t.name,t.count]])}),[])];(0,g.aT)(a,n[0]&&n[0].name)}var l,o};var T=["data","tip","compare","onSetting","loading","paragraph","onMsgClick"];const k=function(e){var t=e.data,n=e.tip,c=e.compare,s=e.onSetting,p=e.loading,u=e.paragraph,m=e.onMsgClick,d=(0,l.Z)(e,T),f=o.useState(),g=f[0],E=f[1],x=function(e){return t&&t[e]?t[e]:{}},b=function(e){if(x(e).name){if(C(x(e).count)){var t=x(e).count;switch(x(e).format){case"myriad":t=(0,v.hE)(t);break;case"percent":n=t,t=C(null)?null:0===n?"0.00%":Math.abs(100*n).toFixed(2)+"%"}return t}return"--"}var n;return""},k=function(e){return"myriad"===x(e).format?x(e).count.toLocaleString():b(e)};return o.createElement("div",(0,a.Z)({className:"indicator_card"},d,{ref:function(e){return E(e)}}),o.createElement(y.Z,{data:t,className:"section_com",loading:p,paragraph:u},o.createElement("div",{className:"title_wrap"},o.createElement("span",{className:"chart_title"},o.createElement("span",{className:"chart_title_name"},x(0).name,n&&o.createElement(i.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:n},o.createElement("i",{className:"icon-cem_file1","data-html2canvas-ignore":!0})))),o.createElement("span",{className:"chart_title_buttons","data-html2canvas-ignore":!0},o.createElement(r.Z,{onClick:function(e){"compare"===e?h({value:c}).then((function(e){s&&s({compareValue:e})})):N(e,g,t)},options:_.concat(s?S:[])}))),o.createElement("div",{className:"section_mid"},o.createElement("p",null,o.createElement(i.Z,{placement:"top",overlay:k(0)},o.createElement("section",null,b(0)))),x(1).name||x(2).name?o.createElement("p",null,o.createElement("span",null,o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:x(1).name},o.createElement("section",{className:"name"},x(1).name))),o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:k(1)},o.createElement("section",null,b(1))),"boolean"===typeof x(1).rise&&o.createElement("i",{className:x(1).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"}))),o.createElement("span",null,o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:x(2).name},o.createElement("section",{className:"name"},x(2).name))),o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:k(2)},o.createElement("section",null,b(2))),"boolean"===typeof x(2).rise&&o.createElement("i",{className:x(2).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"})))):null),(x(3).name||x(4).name)&&o.createElement("div",{className:"section_bottom"},o.createElement("span",null,o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:x(3).name},o.createElement("section",{className:"name"},x(4).name?w(x(3).name):x(3).name))),o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:k(3)},o.createElement("section",null,b(3))))),x(4).name?o.createElement("span",null,o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:x(4).name},o.createElement("section",{className:"name"},w(x(4).name)))),o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:k(4)},o.createElement("section",null,b(4))))):null,m&&o.createElement("span",{className:"toMsg",onClick:function(){return m(t)}},"\u67e5\u770b\u8be6\u60c5"))))}},94309:(e,t,n)=>{n.d(t,{P:()=>a});var a={CHART_MESSAGE:"CHART_MESSAGE",CHART_MESSAGE_RANGE:"CHART_MESSAGE_RANGE",CHART_MESSAGE_TOOLTIP:"CHART_MESSAGE_TOOLTIP"}}}]);