"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8432],{13713:(e,t,n)=>{n.d(t,{u:()=>a});var r=n(35239),a=function(e){var t=e.title,n=e.url,a=r.t.get(r.V.backProjectConfig).name;return n&&-1!==n.indexOf("memberlist")?[{title:a,url:"/account/project/preview"},{title:"\u7528\u6237\u7ec4",url:"/account/project/usergroup"},{title:t,url:n}]:[{title:a,url:"/account/project/preview"},{title:t,url:n}]}},48432:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r=n(87462),a=n(63366),i=(n(7940),n(31059)),l=(n(1025),n(65400)),c=n(94578),o=n(67294),s=n(55609),u=n(51474),d=n(35239),p=n(64396),m=n(55815),f=n(84391),E=n(13713),h=n(33798),v=["loading"],y=n(7732),g=p.Z.workOrder.detail,I=p.Z.workOrder.board,T=function(e){function t(t){var n;return(n=e.call(this,t)||this).DefaultValue=function(e){switch(e){case"STATE":return o.createElement("span",{style:{background:"#FFF3E8",color:"#ff8a1a",padding:"2px 8px"}},o.createElement("i",{className:"icon-daichuli",style:{marginRight:"8px"}}),"\u5f85\u5904\u7406");case"ASSIGNEE":case"CREATOR":case"UPDATER":return o.createElement("span",{style:{display:"flex",alignItems:"center"}},o.createElement("img",{src:y,style:{width:"30px",height:"30px",marginRight:"8px"}}),"\u5f85\u6dfb\u52a0");case"DUE_TIME":return o.createElement("span",null,"\u4eca\u5929 18:00\u622a\u6b62");case"PRIORITY":return o.createElement(o.Fragment,null,o.createElement(h.Z,{defaultIcon:"zuigao",activeIcon:"zuigao",style:{width:"16px",height:"16px"}}),"\u8d85\u9ad8");case"CREATED_TIME":case"UPDATED_TIME":case"FINISHED_TIME":case"DATE_TIME":return o.createElement("span",null,"2020/12/01 12:00");case"CHECKBOX":return o.createElement("span",null,"\u9009\u98791\uff0c\u9009\u98792");case"RADIO":return o.createElement("span",null,"\u9009\u98791");case"DESCRIPTION":return o.createElement("span",{style:{color:"#8C8C8C"}},"\u70b9\u51fb\u6dfb\u52a0\u63cf\u8ff0\u4fe1\u606f");case"MESSAGE":case"WARNING":return o.createElement("span",{style:{color:"#8C8C8C"}},"0",o.createElement("a",{style:{color:"#1890FF",marginLeft:"24px"}},"\u67e5\u770b","MESSAGE"===e?"\u6d88\u606f":"\u901a\u77e5"));case"ATTACHMENT":return o.createElement(l.default,{icon:o.createElement(f.Z,null),style:{color:"#8C8C8C"}},"\u4e0a\u4f20\u6587\u4ef6");case"REMARK":case"TEXT":return o.createElement("span",{style:{color:"#8C8C8C"}},"\u63cf\u8ff0\u6587\u672c");case"NUMERIC":return o.createElement("span",null,"-13.02");default:return}},n.state={onHoverId:void 0},t.save({projectId:d.t.get(d.V.backProjectConfig).id}),n}(0,c.Z)(t,e);var n=t.prototype;return n.onChangeCheckBox=function(e,t){var n=this.props.fieldList,r=!e;this.props.save({fieldList:n.map((function(e){return e.id===t&&(e.isDetailVisible=r),e}))}),this.props.fetchShow({id:t,isDetailVisible:r}).then((function(){}))},n.onHoverLeave=function(){this.setState({onHoverId:void 0})},n.onHover=function(e){this.setState({onHoverId:e})},n.componentDidMount=function(){var e=this;this.props.fetchList(),document.querySelector("#option-list")&&u.default.create(document.querySelector("#option-list"),{group:"option-list",animation:150,handle:".option-handler",fallbackOnBody:!0,invertSwap:!0,delay:5,onEnd:function(t){var n,r,a=t.newIndex,i=t.oldIndex,l=e.props.fieldList,c=null==l?void 0:l.filter((function(e){return"REMARK"!==e.kind&&"ATTACHMENT"!==e.kind}));a!==i&&(a>i?e.props.fetchSort({currentId:c[i].id,nextId:null==(n=c[a+1])?void 0:n.id,prevId:c[a].id}).then((function(){e.props.fetchList()})):e.props.fetchSort({currentId:c[i].id,nextId:c[a].id,prevId:null==(r=c[a-1])?void 0:r.id}).then((function(){e.props.fetchList()})))}})},n.componentWillUnmount=function(){this.props.clean()},n.render=function(){var e=this,t=this.props.fieldList,n=this.state.onHoverId,r=null==t?void 0:t.filter((function(e){return!/REMARK|ATTACHMENT|DESCRIPTION|MESSAGE|WARNING/.test(e.kind)}));return o.createElement("div",{className:"workOrder-detail-wrapper"},o.createElement(m.Z,{title:(0,E.u)({title:"\u5de5\u5355\u8be6\u60c5\u663e\u793a\u914d\u7f6e",url:""})}),o.createElement("div",{className:"workOrder-detail-container"},o.createElement("div",{className:"workOrder-detail-content"},o.createElement("div",{className:"left"},o.createElement("div",{className:"title"},"\u5de5\u5355\u8be6\u60c5\u9884\u89c8"),o.createElement("div",{className:"card"},null==r?void 0:r.map((function(t){return t.isDetailVisible?o.createElement("div",{key:t.id,className:"card_item"},o.createElement("span",{className:"card_item_tip "+(t.isSystem?"card_item_tip_center":"")},t.name,t.isRequired&&o.createElement("span",{style:{color:"#F08A8A",marginLeft:"4px",marginTop:"2px"}},"*")),e.DefaultValue(t.kind)):null})))),o.createElement("div",{className:"right"},o.createElement("div",{className:"title"},"\u53ef\u914d\u7f6e\u5b57\u6bb5"),o.createElement("ul",{id:"option-list",onMouseLeave:function(){e.onHoverLeave()}},null==r?void 0:r.map((function(t,r){return o.createElement("li",{key:t.id,onMouseEnter:function(){e.onHover(t.id)},onClick:function(n){"ASSIGNEE"!==t.kind&&"PRIORITY"!==t.kind&&"STATE"!==t.kind&&e.onChangeCheckBox(t.isDetailVisible,t.id)},className:n===t.id?"hoverPointer option-handler":"option-handler"},o.createElement("span",{className:"name"},o.createElement("i",{className:"icon-cem_move"}),o.createElement("span",null,t.name,t.isRequired&&o.createElement("span",{style:{color:"#F08A8A",marginLeft:"4px",marginTop:"2px"}},"*"))),o.createElement("span",null,o.createElement(i.default,{checked:t.isDetailVisible,disabled:"ASSIGNEE"===t.kind||"PRIORITY"===t.kind||"STATE"===t.kind})))})))))))},t}(o.Component);const C=(0,s.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,v);return(0,r.Z)({},n[g],{loading:t.effects[g+"/fetchList"]||!1})}),(function(e){return{save:function(t){return e({type:g+"/save",payload:t})},clean:function(){return e({type:g+"/clean"})},fetchList:function(t){return e({type:g+"/fetchList",payload:t})},fetchShow:function(t){return e({type:I+"/fetchShow",payload:t})},fetchSort:function(t){return e({type:g+"/fetchSort",payload:t})}}}))(T)},55815:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(94578),a=n(67294),i=n(45697),l=n.n(i),c=n(43036),o=n(61409),s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._handleBreadcrumbClick=function(e){var n=t.props,r=n.title,a=n.beforeJump;e!==r.length-1&&(a?new Promise((function(e,t){return a(e,t)})).then((function(){o.mW.push({pathname:r[e].url,state:r[e].state})})):o.mW.push({pathname:r[e].url,state:r[e].state}))},t}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,r=t.mainTitle,i=t.rightContent,l=t.className,o=t.overlay;return a.createElement("div",{className:"breadcumb-wrapper "+l},n instanceof Array?a.createElement("div",{className:"breadcrumb-left"},a.createElement("div",null,n.map((function(t,r){return a.createElement("span",{className:t.url?"":"not_clickable",key:r,onClick:function(){return t.url&&r!==n.length-1&&e._handleBreadcrumbClick(r)}},t.title,r!==n.length-1&&" / ")}))),a.createElement("span",null,r||n[n.length-1].title,o&&a.createElement(c.Z,{placement:"top",overlay:o},a.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):a.createElement("div",{className:"normal-title"},n,o&&a.createElement(c.Z,{placement:"top",overlay:o},a.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),i||"")},t}(a.Component);s.propTypes={className:l().string,title:l().oneOfType([l().string,l().arrayOf(l().shape({title:l().string,url:l().string,state:l().object}))]).isRequired,overlay:l().oneOfType([l().string,l().node]),mainTitle:l().oneOfType([l().string,l().node]),beforeJump:l().func,rightContent:l().node};const u=s}}]);