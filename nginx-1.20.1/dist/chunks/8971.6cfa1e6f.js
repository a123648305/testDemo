"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8971],{59132:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(67294),r=n(43036),o=n(25713),l=n(39432),i=n(45697),c=n.n(i),s=n(8201),u=function(e){var t=e.title,n=void 0===t?"":t,i=e.data,c=e.titleOverlay,u=e.titleSelector,d=e.children,p=e.onMoreClick,h=e.moreOptions,f=e.className,m=e.status,v=(e.id,!(0,s.P)(i));return a.createElement("div",{className:"yt_dashboard_chart_title_wrapper "+(f||"")},a.createElement("span",{className:"chart_title"},v&&a.createElement("span",{className:"chart_title_name"},n),(u||c)&&a.createElement("span",{className:"chart_title_suffix",style:{marginLeft:v?0:(0,l.jD)(n)+14+(u?14:0)}},!!u&&u,c&&a.createElement(r.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:c},a.createElement("i",{className:"icon-cem_file1"})))),a.createElement("span",{className:"chart_title_buttons"},d,p&&a.createElement(o.Z,{disabled:m||!1,disableType:["copy","edit"],panelOverlay:"\u51fa\u4e8e\u67d0\u79cd\u539f\u56e0\uff0c\u5982\u76f8\u5173\u8d1f\u8d23\u4eba\u8981\u6c42\r\u4e0b\u67b6\uff0c\u8be5\u56fe\u8868\u6a21\u677f\u5df2\u4e0b\u67b6\uff0c\u4f60\u53ef\u4ee5\r\u53bb\u6dfb\u52a0\u80fd\u591f\u6ee1\u8db3\u76f8\u540c\u5206\u6790\u610f\u56fe\u7684\u56fe\r\u8868\u3002\u5982\u679c\u4f60\u4ecd\u9700\u8981\u8be5\u56fe\u8868\uff0c\u8bf7\u8054\u7cfb\r\u7cfb\u7edf\u7ba1\u7406\u5458\u3002",onClick:p,options:h})))};const d=u;u.propTypes={data:c().any,title:c().string,titleOverlay:c().string,titleSelector:c().node,onMoreClick:c().func,moreOptions:c().array}},88971:(e,t,n)=>{n.r(t),n.d(t,{default:()=>be});var a=n(63366),r=n(87462),o=n(94578),l=n(67294),i=n(19586),c=n(69968),s=n.n(c),u=n(87219),d=n(50976),p=n(8201),h=n(45697),f=n.n(h),m=(n(49722),n(35239)),v=n(94184),y=n.n(v),b=[{name:"\u6309\u5929",id:"DAY"},{name:"\u6309\u5468",id:"WEEK"},{name:"\u6309\u6708",id:"MONTH"}],g=function(e){function t(t){var n,a=Object.prototype.hasOwnProperty.call(t,"dateRange");return(n=e.call(this,t)||this).handleToggleDisplay=function(e){var t=n.state.panelShow;setTimeout((function(){return n.setState({panelShow:!t})}),0)},n.handleParentClick=function(e){n.state.panelShow&&n.props.showFlavor&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n.handleCollapse=function(){return n.setState({panelShow:!1})},n.handleSwitchValue=function(e){var t=n.state.dateOptions,a=n.props.onChange;if(e!==n.state.value){var r=(t.filter((function(t){return t.id===e})).length>0?t.filter((function(t){return t.id===e}))[0]:t[0]).id;n.setState({value:e},(function(){return a&&a(r)}))}},n.DATE_DIMENSIONS=a?[{id:"HOUR",name:"\u6309\u65f6"}].concat(b):b,n.state={value:"",dateRange:parseInt(t.dateRange),dateOptions:a?[{id:"HOUR",name:"\u6309\u65f6"}].concat(b):b,panelShow:!1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=(e.uniqueId,e.dateRange),n=e.onChange,a=this.state.value;this.projectId=m.t.get(m.V.curProject).id,window.addEventListener("click",this.handleCollapse),Object.prototype.hasOwnProperty.call(this.props,"dateRange")?this.getCurrDateOptions(parseInt(t),!0):n&&n(a)},n.componentWillUnmount=function(){window.removeEventListener("click",this.handleCollapse)},n.componentDidUpdate=function(e,t){var n=this,a=this.props,r=a.dateRange,o=a.defaultValue;e.dateRange!==r&&this.setState({dateRange:parseInt(r)},(function(){return n.getCurrDateOptions(parseInt(r))})),e.defaultValue!==o&&this.setState({value:o})},n.getCurrDateOptions=function(e,t){var n=this;if(e>=1){var a=this.props,r=a.onChange,o=a.noHour,l=a.collectValue,i=a.defaultValue,c=this.DATE_DIMENSIONS,s=[],u="";if(1===e){s=c.slice(o?1:0,o?2:1);var d=o?c.filter((function(e){return"\u6309\u5929"===e.name})):c.filter((function(e){return"\u6309\u65f6"===e.name}));u=d[0].id}else if(e>1&&e<=7){s=c.slice(o?1:0,o?3:2);var p=c.filter((function(e){return"\u6309\u5929"===e.name}));u=p[0].id}else if(e>7&&e<=30){s=c.slice(o?1:0,o?4:3);var h=c.filter((function(e){return"\u6309\u5929"===e.name}));u=h[0].id}else if(e>30&&e<=60){s=c.slice(1,o?5:4);var f=c.filter((function(e){return"\u6309\u5929"===e.name}));u=f[0].id}else if(e>60&&e<=180){s=c.slice(1,o?5:4);var m=c.filter((function(e){return"\u6309\u5468"===e.name}));u=m[0].id}else{s=c.slice(1,o?5:4);var v=c.filter((function(e){return"\u6309\u6708"===e.name}));u=v[0].id}t&&s.some((function(e){return e.id===l}))?u=l:t&&s.some((function(e){return e.id===i}))?u=i:s.some((function(e){return e.id===n.state.value}))&&(u=this.state.value),this.setState({dateOptions:s,value:u},(function(){r&&r(u)}))}},n.render=function(){var e=this,t=this.props,n=t.style,a=t.showFlavor,r=t.collectValue,o=t.updateCollectValue,i=this.state,c=i.dateOptions,s=i.value,u=i.panelShow,d=c.filter((function(e){return e.id===s}))[0]&&c.filter((function(e){return e.id===s}))[0].name;return l.createElement("div",{className:"dashboard_date_dimension_selector_wrapper",style:n,onClick:this.handleParentClick},l.createElement("div",{className:u?"date_dimension_btn active":"date_dimension_btn",onClick:this.handleToggleDisplay},l.createElement("span",null,d),l.createElement("i",{className:"icon icon-cem_arrow-launches",style:{transform:u?"rotate(-180deg)":""}})),l.createElement("ul",{className:"date_dimension_panel",style:{display:u?"inline-block":"none"}},c.map((function(t){var n=t.name,i=t.id;return l.createElement("li",{className:y()(s===i?"date_dimension_item active":"date_dimension",a&&"flavor_style"),key:i,onClick:function(){return e.handleSwitchValue(i)}},l.createElement("span",null,n),l.createElement("i",{className:r===i?"icon-cem_collection-settings stared":"icon-cem_collection-settings",onClick:function(e){e.stopPropagation(),o(i===r?void 0:i)}}))}))))},t}(l.Component);g.propTypes={noHour:f().bool,dateRange:f().number,defaultValue:f().oneOf(["HOUR","DAY","WEEK","MONTH"]),onChange:f().func.isRequired,style:f().object,collectValue:f().string,updateCollectValue:f().func};var E=n(33798),C=n(43036),w=function(e){var t=e.chartType,n=e.enable,a=void 0!==n&&n,r=e.options,o=e.notLimitList,i=void 0===o?[]:o,c=e.onChange;return l.createElement("div",{className:"yt-chart-type-radio-wrapper"},Object.keys(r).map((function(e){return l.createElement(C.Z,{key:e,placement:"top",overlay:r[e][2]},l.createElement("span",null,l.createElement(E.Z,{enable:!a||i.includes(e),isActive:t===e,defaultIcon:r[e][0],activeIcon:r[e][1],onClick:function(){return!a&&c(e)}})))})))};w.propTypes={chartType:f().string,enable:f().bool,options:f().object,notLimitList:f().array};const S=w;var _=n(39432),k=function(e){function t(t){var n;return(n=e.call(this,t)||this).getPanelWidth=function(){var e=n.props,t=e.showFlavor,a=void 0!==t&&t,r=e.options,o=Math.max.apply(null,r.map((function(e){return(0,_.jD)(e.title,14)})))+2+24+25;return(o+=a?24:0)>100?o:100},n._setPadShowFalse=function(){n.state.show&&n.setState({show:!1})},n._handleParentClick=function(e){n.state.show&&n.props.showFlavor&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n._handleTriggerOnClick=function(){var e=n.state.show;setTimeout((function(){n.setState({show:!e})}),0)},n.state={show:!1,firstLiHover:!1,panelWidth:n.getPanelWidth()},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},n.componentDidUpdate=function(e){var t=e.options,n=this.props.options;JSON.stringify(t)!==JSON.stringify(n)&&this.setState({panelWidth:this.getPanelWidth()})},n.render=function(){var e=this.state,t=e.show,n=e.panelWidth,a=this.props,r=a.activeObj,o=void 0===r?"":r,i=a.onChange,c=a.options,s=a.objName,u=a.preTitle,d=a.sufTitle,p=void 0===d?"":d,h=a.showTitle,f=void 0===h||h,m=a.overlay,v=a.divider,y=void 0===v?"right":v,b=(a.flavor,a.onFlavorChange,a.showFlavor,a.collectValue),g=a.updateCollectValue,E=c.find((function(e){return e.value===o})),w=""===o?p:E&&E.title;return l.createElement("div",{className:"dashboard-single-select-button-wrapper dashboard_single_select_diviver_"+y,onClick:this._handleParentClick},l.createElement("div",{className:"button_content"},l.createElement("span",{onClick:this._handleTriggerOnClick},l.createElement("span",{className:"button-trigger "+(t?"sel":"")},f&&l.createElement(l.Fragment,null,u&&l.createElement("span",{className:"pre-title"},u,"\uff1a"),l.createElement("span",{className:"button-title"},w)),l.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:t?"rotate(-180deg)":""}})),m&&l.createElement("span",{style:{marginLeft:4}},l.createElement(C.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:m},l.createElement("i",{className:"icon-cem_file1"})))),l.createElement("div",{className:"button-panel "+(t?"active":""),style:{minWidth:n}},c.map((function(e,t){return l.createElement("div",{className:"panel-item "+(e.value===o?"sel":"")+" "+(e.disabled?"disabled":""),key:e.value,onClick:function(){var t;!e.disabled&&i(s?((t={})[s]=e.value,t):e.value)}},e.title,l.createElement("i",{className:b===e.value?"icon-cem_collection-settings stared":"icon-cem_collection-settings",onClick:function(t){t.stopPropagation(),g(e.value===b?void 0:e.value)}}))})))))},t}(l.PureComponent);k.propTypes={activeObj:f().any,onChange:f().func.isRequired,options:f().array.isRequired,objName:f().any,preTitle:f().string,sufTitle:f().string,showTitle:f().bool,overlay:f().string,divider:f().oneOf(["both","left","right"]),showFlavor:f().bool,flavor:f().string,onFlavorChange:f().func};const N=k;var I=n(92360),T=function(e){function t(){var t;return(t=e.call(this)||this).sortList=function(e,n,a){a.stopPropagation(),a.nativeEvent.stopImmediatePropagation();var r=JSON.parse(JSON.stringify(t.getShowList()));if(r.some((function(t){return t.value===e.value}))){var o=r.findIndex((function(t){return t.value===e.value})),l=r.splice(o,1)[0];switch(n){case"top":r.unshift(l);break;case"up":r.splice(o-1,0,l);break;case"down":r.splice(o+1,0,l)}t.props.onChange&&t.props.onChange(r.map((function(e){return{value:e.value,title:e.title}})))}},t.getShowList=function(){var e=t.props,n=e.options,a=e.value,r=[];return 0===a.length?n:(a.forEach((function(e){n.forEach((function(t){e.value===t.value&&r.push(t)}))})),r.length!==n.length&&n.forEach((function(e){r.some((function(t){return t.value===e.value}))||r.push(e)})),r)},t.state={showSel:!1,searchWord:""},t}(0,o.Z)(t,e);var n=t.prototype;return n.getValue=function(){return this.state.value},n.UNSAFE_componentWillReceiveProps=function(e){},n.UNSAFE_componentWillMount=function(){},n.componentWillUnmount=function(){},n.render=function(){var e=this,t=this.state.searchWord,n=this.getShowList();return l.createElement("div",{className:"dashboard-sort-select "+(this.props.triangle?"triangle":""),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},l.createElement("div",{className:"wrap"},l.createElement("div",null,l.createElement(I.Input,{value:t,placeholder:"\u8f93\u5165\u5173\u952e\u8bcd",className:"search",icon:"close",onChange:function(t){e.setState({searchWord:t})},onIconClick:function(){return e.setState({searchWord:""})}})),l.createElement("ul",null,n.length>0&&n.filter((function(e){return!t||-1!==e.title.toLocaleLowerCase().indexOf(t.trim().toLocaleLowerCase())})).map((function(a,r){return l.createElement("li",{key:r},l.createElement("span",{title:a.title},a.title),l.createElement("div",{className:"handle"},(0!==r||t)&&l.createElement("i",{title:"\u7f6e\u9876",onClick:function(t){e.sortList(a,"top",t)},className:"icon-cem_roof-placement"}),0!==r&&!t&&l.createElement("i",{title:"\u4e0a\u4e00\u4f4d",onClick:function(t){e.sortList(a,"up",t)},className:"icon-cem_upper"}),r!==n.length-1&&!t&&l.createElement("i",{title:"\u4e0b\u4e00\u4f4d",onClick:function(t){e.sortList(a,"down",t)},className:"icon-cem_lower"})))})),0===n.length&&l.createElement("div",{className:"noData"},"\u65e0\u6570\u636e"))))},t}(l.Component);T.propTypes={options:f().array,value:f().array,onChange:f().func,singelSel:f().bool};var O=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setPadShowFalse=function(){n.state.show&&n.setState({show:!1})},n._handleParentClick=function(e){n.state.show&&n.props.showFlavor&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n._handleTriggerOnClick=function(){var e=n.state.show;setTimeout((function(){n.setState({show:!e})}),0)},n.updateCollectValue=function(e){var t=JSON.parse(JSON.stringify(n.props)),a=t.listId,r=t.collectValue;r.some((function(e){return e.value===a}))?r.find((function(e){return e.value===a})).children=e:r.push({value:a,children:e}),n.props.onChange&&n.props.onChange(r)},n.state={show:!1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},n.render=function(){var e=this,t=this.state.show,n=this.props,a=n.options,r=n.listId,o=n.collectValue;return l.createElement("div",{className:"dashboard-sort-select-wrap",onClick:this._handleParentClick},l.createElement("div",{className:"infor "+(t?"sel":""),onClick:function(){return e._handleTriggerOnClick()}},l.createElement("span",null,"\u989c\u8272"),l.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:t?"rotate(-180deg)":""}})),t&&l.createElement(T,{options:a.find((function(e){return e.value===r}))&&a.find((function(e){return e.value===r})).children||[],value:o&&o.some((function(e){return e.value===r}))?o.find((function(e){return e.value===r})).children:[],onChange:function(t){return e.updateCollectValue(t)},triangle:t}))},t}(l.Component),x=n(59132),D=n(57522),L=n(18446),W=n.n(L),V=n(94644),Z=n(61409),A=n(38263),P=(n(83796),function(e){var t=e.folderOption,n=void 0===t?[]:t,a=e.dashId,r=e.folderId,o=e.getValue,i=l.useState(r),c=i[0],s=i[1],u=l.useState(a),d=u[0],p=u[1],h=n.filter((function(e){return e.value===c}))[0].dashboard.map((function(e){return{label:e.name,value:e.id}})),f=function(e,t){var a,r;"mfolderId"===t?(s(e),p(n.find((function(t){return t.value===e})).dashboard[0].id),a=e,r=n.find((function(t){return t.value===e})).dashboard[0].id):"mdashId"===t&&(p(e),a=c,r=e),setTimeout((function(){return o&&o(a,r)}),0)};return l.createElement("div",{className:"yt_modal_dashboard_edit_wrapper"},l.createElement("div",{className:"content_item"},l.createElement("span",null,"\u6587\u4ef6\u5939"),l.createElement("span",null,l.createElement(A.ZP,{className:"content_item_select",value:n.find((function(e){return e.value===c})).label,onChange:function(e){return f(e,"mfolderId")},inputIcon:l.createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},n.map((function(e){return l.createElement(A.ZP.Option,{value:e.value,key:e.value},e.label)}))))),l.createElement("div",{className:"content_item"},l.createElement("span",null,"\u4eea\u8868\u76d8"),l.createElement("span",null,l.createElement(A.ZP,{className:"content_item_select",value:h.find((function(e){return e.value===d})).label,onChange:function(e){return f(e,"mdashId")},inputIcon:l.createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},h.map((function(e){return l.createElement(A.ZP.Option,{value:e.value,key:e.value},e.label)}))))))});const F=P;P.propTypes={folderOption:f().arrayOf({label:f().string,value:f().string,dashboard:f().arrayOf({label:f().string,value:f().string})}),folderId:f().string,dashId:f().string,getValue:f().func};var R=function(e){var t=e.value,n=e.getValue,a=l.useState(t.rotate||"0"),r=a[0],o=a[1],i=l.useState(t.row||"1"),c=i[0],s=i[1],u=l.useState(t.length||"12"),d=u[0],p=u[1],h=l.useState(!0),f=h[0],m=h[1];return l.useEffect((function(){var e=Number(d);e&&e>=6&&e<=12&&e.toFixed()===String(e)?m(!0):m(!1)}),[d]),l.useEffect((function(){n({rotate:r,row:c,length:d})}),[r,c,d]),l.createElement("div",{className:"yt_modal_dashboard_prefer_wrapper"},l.createElement("h3",null,"X\u5750\u6807\u8f74\u523b\u5ea6\u6807\u7b7e"),l.createElement("div",{className:" first"},l.createElement("span",null,"\u65cb\u8f6c\u89d2\u5ea6"),l.createElement("span",null,l.createElement(I.Radio.Group,{value:r,onChange:function(e){return o(e)}},l.createElement(I.Radio,{value:"0"},"\u6a2a\u6392\u663e\u793a"),l.createElement(I.Radio,{value:"-45"},"\u5de6\u8d77\u659c\u4e0b"),l.createElement(I.Radio,{value:"45"},"\u53f3\u8d77\u659c\u4e0b")))),l.createElement("div",{className:" second"},l.createElement("span",null,"\u6587\u672c\u957f\u5ea6"),l.createElement("span",null,"\u6309\xa0",l.createElement(A.ZP,{className:"content_item_select",value:c,onChange:function(e){return s(e)},inputIcon:l.createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},[{value:"1",label:"1"},{value:"2",label:"2"}].map((function(e){return l.createElement(A.ZP.Option,{value:e.value,key:e.value},e.label)}))),"\xa0\u884c\u663e\u793a"),l.createElement("br",null),l.createElement("span",null,l.createElement("span",null,"\u8d85\u8fc7\u4e86\xa0",l.createElement(I.Input,{className:f?"":"err",value:d,onChange:function(e){return p(e)}}),"\xa0\u4e2a\u5b57\u7b26\u65f6\uff0c\u624d","2"===c?"\u6362\u884c":"\u7701\u7565")),l.createElement("p",{className:f?"":"err"},"*\u6587\u672c\u957f\u5ea6\u6700\u5c116\u5b57\u7b26\uff0c\u6700\u591a12\u4e2a\u5b57\u7b26")))};const M=R;function B(e){return new Promise((function(t,n){var a=e.folderId,o=e.dashId,i=(0,r.Z)({},e,{titleText:"\u9009\u62e9\u56fe\u8868\u590d\u5236\u5230\u4e0b\u9762\u7684\u4eea\u8868\u76d8",content:l.createElement(F,(0,r.Z)({},e,{getValue:function(e,t){a=e,o=t}}))});i.onOk=function(){return t({folderId:a,dashId:o})},i.onCancel=n,(0,D.Z)(i)}))}R.propTypes={value:f().object,getValue:f().func};var H=n(50361),j=n.n(H);function z(e,t,n){if(!e)return{option:void 0};if("empty"===e)return{option:e};var a,o=j()(e);try{var l=(t?t.filter((function(e){return"stackType"===e.id})):[])[0];if(l&&Array.isArray(o.series))switch(l.value){case"c0":o.series.forEach((function(e){e.stack=void 0,e.type="line"}));break;case"c1":o.series.forEach((function(e){e.stack="a",e.type="line"}));break;case"c2":o.series.forEach((function(e){e.stack=void 0,e.type="bar"}));break;case"c3":o.series.forEach((function(e){e.stack="a",e.type="bar"}))}var i=(t?t.filter((function(e){return"labelType"===e.type})):[])[0];i&&Array.isArray(o.series)&&o.series.forEach((function(e){return e.label=(0,r.Z)({},e.label,{show:i.value,position:"top"}),e}));var c=(t?t.filter((function(e){return/^sort_/.test(e.id)})):[])[0];if(c&&t.some((function(e){return e.id===c.id.replace("sort_","")}))){var s=t.find((function(e){return e.id===c.id.replace("sort_","")})).value,u=c.collectValue&&c.collectValue.find((function(e){return e.value===s}))?c.collectValue:c.option;u=u.find((function(e){return e.value===s}))?u.find((function(e){return e.value===s})).children:[],"FIRST"===n.sortMode&&o.dataset?((u=u.filter((function(e){return o.dataset.source[0].includes(e.title)})).map((function(e){return e.title}))).unshift(""),u.forEach((function(e,t){o.dataset.source[0].forEach((function(n,a){if(e===n){var r=a,l=t;o.dataset.source.forEach((function(e){var t=e.splice(r,1);e.splice(l,0,t[0])}))}}))}))):"SECOND"===n.sortMode&&o.dataset&&((u=u.filter((function(e){return o.dataset.source.map((function(e){return e[0]})).includes(e.title)})).map((function(e){return e.title}))).unshift(""),(u=Array.from(new Set(u))).forEach((function(e,t){o.dataset.source.map((function(e){return e[0]})).forEach((function(n,a){if(e===n){var r=a,l=t,i=o.dataset.source.splice(r,1);o.dataset.source.splice(l,0,i[0])}}))})))}var d=(t?t.filter((function(e){return"prefer"===e.id})):[])[0];if(d&&d.collectValue){var p=d.collectValue;if(o.xAxis){var h=function(e){e.axisLabel=e.axisLabel||{},e.axisLabel.rotate=p.rotate||0,e.axisLabel.formatter=function(e){e=String(e);var t=Number(p.length||"12");return"2"===p.row?e.substring(0,t)+(e.length>t?"\n"+e.substring(t,2*t):"")+(e.substring(2*t).length>0?"...":""):e.substring(0,t)+(e.length>t?"...":"")}};Array.isArray(o.xAxis)?o.xAxis.forEach((function(e){return h(e)})):h(o.xAxis)}}}catch(f){a=!0,console.error("op\u89e3\u6790\u5931\u8d25\uff0c\u8bf7\u67e5\u770bop\u683c\u5f0f\uff0c"+f)}return{option:a?"error":o}}var U=[{title:"\u5bfc\u51fa\u56fe\u7247",type:"image"},{title:"\u5bfc\u51fa\u6570\u636e",type:"data"}],G=[{title:"\u590d\u5236",type:"copy"}],q=[{title:"\u504f\u597d\u8bbe\u7f6e",type:"prefer"}],J=[{title:"\u7f16\u8f91",type:"edit"},{title:"\u5220\u9664",type:"del"}];const Y=function(e){var t=e.chart,n=e.dateRange,a=e.onSelectorChange,o=e.lock,i=e.dashboardId,c=e.folderId,s=e.delDash,u=e.changeEnlargeId,h=e.shrink,f=(e.dashboardType,e.systermAuthority),m=e.fetchingDashboards,v=e.dateFilter,y=e.className,b=e.updateCollectValue,E=e.menu,w=t.option,_=t.source,k=t.selector,T=t.name,L=t.id,A=t.templateDeleted,P=t.description,F=l.useState(void 0),R=F[0],H=F[1],j=l.useState(void 0),Y=j[0],K=j[1],Q=l.useState({}),X=Q[0],$=Q[1],ee=l.useState(te),te=ee[0],ne=ee[1],ae=l.useState(v),re=ae[0],oe=ae[1];return l.useEffect((function(){Y&&R&&function(e,t){t.clear(),t.setOption(e)}(Y,R)}),[Y,R]),l.useEffect((function(){var e=z(w,te,t).option;K(e),$(_)}),[w]),l.useEffect((function(){setTimeout((function(){return oe(v)}),0)}),[v]),l.useEffect((function(){if(ne(k),k){var e=k.filter((function(e){return"stackType"===e.id}))[0],n=(te?te.filter((function(e){return"stackType"===e.id})):[])[0],a=k.filter((function(e){return/^sort_/.test(e.id)}))[0],r=(te?te.filter((function(e){return/^sort_/.test(e.id)})):[])[0],o=k.filter((function(e){return"prefer"===e.id}))[0],l=(te?te.filter((function(e){return"prefer"===e.id})):[])[0],i=k.filter((function(e){return"labelType"===e.id}))[0],c=(te?te.filter((function(e){return"labelType"===e.id})):[])[0];if(w&&(void 0!==e&&e.value!==(n?n.value:void 0)||void 0!==a&&!W()(a.collectValue,r?r.collectValue:void 0)||void 0!==o&&!W()(o,l||void 0)||void 0!==i&&!W()(i,c||void 0))){var s=z(w,k,t).option;K(s)}}}),[k]),l.createElement(p.Z,{data:Y,className:"yt_dashborad_chart_wrap "+(y||""),loading:!!m&&m.includes(L),renderTitle:l.createElement(x.Z,{className:!h&&(0,p.P)(Y)?"hover_to_show":"",data:Y,onMoreClick:function(e){return"del"===e?(0,D.Z)({dialogType:"danger",titleText:"\u786e\u5b9a\u5220\u9664\u56fe\u8868\uff1f",showClose:!1,content:"\u786e\u5b9a\u5220\u9664\u56fe\u8868"+T+"\uff1f",onCancel:function(){},onOk:function(){return s&&s({id:L})}}):"prefer"===e?function(e){return new Promise((function(t,n){var a=e.value||{},o=!0,i=(0,r.Z)({},e,{titleText:"\u504f\u597d\u8bbe\u7f6e",content:l.createElement(M,(0,r.Z)({},e,{getValue:function(e){a=e;var t=Number(e.length);o=t&&t>=6&&t<=12&&t.toFixed()===String(t)}})),test:function(){return o}});i.onOk=function(){return t(a)},i.onCancel=n,(0,D.Z)(i)}))}({value:te.find((function(e){return"prefer"===e.id}))&&te.find((function(e){return"prefer"===e.id})).collectValue||{},onCancel:function(){}}).then((function(e){b({id:L,selectId:"prefer",val:e})})):function(e,t,n,a,r,o,l,i,c){try{if("image"===t)(0,V._v)(e,a||"\u4e91\u542c\u4eea\u8868\u76d8}");else if("data"===t){var s=[n];(0,V.aT)(s,a||"\u4e91\u542c\u4eea\u8868\u76d8}")}else if("copy"===t){var u=i&&i.dashboards?i.dashboards.map((function(e){return{label:e.name,value:e.id,dashboard:e.dataDashboardVOList,type:e.type}})).filter((function(e){return(c||"SELF_FOLDER"===e.type)&&e.dashboard&&e.dashboard.length>0})):[],d=l,p=r;u.some((function(e){return e.value===d}))||(d=u[0].value,p=u[0].dashboard[0].id),B({folderOption:u,folderId:d,dashId:p,onCancel:function(){}}).then((function(e){e.folderId;var t=e.dashId;Z.mW.push({pathname:"/dashboard/"+t+"/edit",state:{chartId:o,isCopy:!0}})}))}else"edit"===t&&Z.mW.push({pathname:"/dashboard/"+r+"/edit",state:{chartId:o,isCopy:!1}})}catch(h){I.Message.error("copy"===t?"\u590d\u5236\u5931\u8d25":"\u5bfc\u51fa\u5931\u8d25"),console.error("\u5bfc\u51fa\u5931\u8d25,"+h)}}(R,e,X,T,i,L,c,E,f)},title:T,id:L,status:A||!1,moreOptions:U.concat(te&&te.find((function(e){return"prefer"===e.id}))?q:[]).concat(G).concat(o?[]:J),titleOverlay:P},l.createElement("div",null,te&&te.filter((function(e){return"prefer"!==e.id&&"labelType"!==e.id})).map((function(e){if(/^sort_/.test(e.id))return l.createElement(O,{key:e.id,onChange:function(t){return b({id:L,selectId:e.id,val:t})},listId:te.find((function(t){return t.id===e.id.replace("sort_","")}))?te.find((function(t){return t.id===e.id.replace("sort_","")})).value:"",options:e.option||[],collectValue:e.collectValue||[]});switch(e.id){case"dateGroupingType":return n?l.createElement("span",{key:e.id},l.createElement(g,{noHour:!0,dateRange:n,onChange:function(t){(!w||t!==e.value||v.from!==re.from||v.to!==re.to)&&a({id:L,selectId:"dateGroupingType",val:t})},defaultValue:e.value,collectValue:e.collectValue,updateCollectValue:function(e){return b({id:L,selectId:"dateGroupingType",val:e})}})):"";case"stackType":return l.createElement(S,{key:e.id,onChange:function(e){return a({id:L,selectId:"stackType",val:e})},chartType:e.value,options:e.option});default:return l.createElement(N,{key:e.id,onChange:function(t){return a({id:L,selectId:e.id,val:t[e.id]})},objName:e.id,activeObj:e.value,options:e.option,collectValue:e.collectValue,updateCollectValue:function(t){return b({id:L,selectId:e.id,val:t})}})}})),te&&te.filter((function(e){return"labelType"===e.id})).map((function(e){return l.createElement(C.Z,{overlay:"\u5c55\u793a\u56fe\u8868\u6807\u7b7e",placement:"top",key:e.id},l.createElement("i",{className:"icon-tubiaobiaoqian enlarge "+(e.value?"show":""),onClick:function(){return a({id:L,selectId:e.id,val:!e.value})}}))})),h?l.createElement("i",{className:(h?"icon-cem_reduce":"icon-cem_enlarge")+" enlarge",onClick:function(){return h?h():u({id:L})}},l.createElement("span",null,"\u9000\u51fa\u5168\u5c4f ")):l.createElement(C.Z,{overlay:"\u5168\u5c4f\u663e\u793a",placement:"top",disable:!h},l.createElement("i",{className:(h?"icon-cem_reduce":"icon-cem_enlarge")+" enlarge",onClick:function(){return h?h():u({id:L})}}))))},l.createElement(d.Z,{className:o||h?"":"lock",theme:"yunting_dashboard_theme",loadingOption:{text:"\u52a0\u8f7d\u4e2d",color:"#20a0ff"},option:{},opts:{devicePixelRatio:2},style:{width:"100%",height:"100%"},onChartReady:function(e){return H(e)}}))};var K=["columns","data","className","style","maxHeight"],Q=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}(0,o.Z)(t,e);var n=t.prototype;return n.resizeTable=function(){var e=this.state,t=e.total,n=e.start,a=e.end,r=e.top,o=window.innerHeight-document.querySelector(".cem-table-wrap").getClientRects()[0].top-20,l=t&&n&&a?r?80:40:0;document.querySelector(".el-table.cem-table .el-table__body-wrapper .el-table__body").clientHeight+40+l>o&&(document.querySelector(".cem-table-wrap").style.height=o+"px",document.querySelector(".el-table.cem-table").style.height="calc(100% - "+l+"px)")},n.render=function(){var e=this,t=this.props,n=t.columns,o=t.data,i=t.className,c=t.style,s=t.maxHeight,u=(0,a.Z)(t,K);return l.createElement("div",{className:"dashboard-table-wrap",style:c},l.createElement(I.Table,(0,r.Z)({ref:function(t){return e.cemTable=t},className:"cem-table "+(i||""),columns:n,data:o||[],maxHeight:s},u)))},t}(l.Component);Q.propTypes={columns:f().array,data:f().array,className:f().string,style:f().object};n(93162);var X=[{title:"\u5bfc\u51fa\u6570\u636e",type:"data"}],$=[{title:"\u590d\u5236",type:"copy"}],ee=[{title:"\u7f16\u8f91",type:"edit"},{title:"\u5220\u9664",type:"del"}];const te=function(e){var t=e.chart,n=e.dateRange,a=e.onSelectorChange,r=e.lock,o=e.dashboardId,i=e.folderId,c=e.delDash,s=e.changeEnlargeId,u=e.shrink,d=(e.dashboardType,e.systermAuthority),h=e.fetchingDashboards,f=e.dateFilter,m=e.className,v=e.updateCollectValue,y=e.menu,b=e.status,E=t.option,w=t.source,S=t.selector,_=t.name,k=t.id,T=t.w,O=t.h,L=l.useState(void 0),W=L[0],A=L[1],P=l.useState([]),F=P[0],R=P[1],M=l.useState(S),H=M[0],j=M[1],z=l.useState(f),U=z[0],G=z[1],q=l.useState([]),J=q[0],Y=q[1],K=l.useState([]),te=K[0],ne=K[1],ae=l.useState(200),re=ae[0],oe=ae[1];return l.useEffect((function(){R(w)}),[w]),l.useEffect((function(){var e=function(e,t){var n=[],a=[],r=e?JSON.parse(JSON.stringify(e)):[];try{r[0]&&r[0].forEach((function(e){a.push({label:e,prop:e})})),r.filter((function(e,t){return 0!==t})).length&&r.filter((function(e,t){return 0!==t})).forEach((function(e){var t={};e.forEach((function(e,n){t[r[0][n]]=e})),n.push(t)})),a.forEach((function(e,t){0===t&&(e.fixed=!0),e.align="center"}))}catch(o){console.error("source\u89e3\u6790\u5931\u8d25\uff0c\u8bf7\u67e5\u770b\u6570\u636e\uff0c"+o)}return{data:n,columns:a}}(F),t=e.data,n=e.columns;Y(t),ne(n)}),[F]),l.useEffect((function(){W&&oe(W.getBoundingClientRect().height-84)}),[T,O,W]),l.useEffect((function(){setTimeout((function(){return G(f)}),0)}),[f]),l.useEffect((function(){j(S)}),[S]),l.createElement(p.Z,{data:w,className:"yt_dashborad_chart_wrap "+(m||""),loading:!!h&&h.includes(k),renderTitle:l.createElement(x.Z,{data:void 0,onMoreClick:function(e){return"del"===e?(0,D.Z)({dialogType:"danger",titleText:"\u786e\u5b9a\u5220\u9664\u56fe\u8868\uff1f",showClose:!1,content:"\u786e\u5b9a\u5220\u9664\u56fe\u8868"+_+"\uff1f",onCancel:function(){},onOk:function(){return c&&c({id:k})}}):function(e,t,n,a,r,o,l,i,c){try{if("image"===t)(0,V._v)(e,a||"\u4e91\u542c\u4eea\u8868\u76d8}");else if("data"===t){var s=[n];(0,V.aT)(s,a||"\u4e91\u542c\u4eea\u8868\u76d8}")}else if("copy"===t){var u=i&&i.dashboards?i.dashboards.map((function(e){return{label:e.name,value:e.id,dashboard:e.dataDashboardVOList,type:e.type}})).filter((function(e){return(c||"SELF_FOLDER"===e.type)&&e.dashboard&&e.dashboard.length>0})):[],d=l,p=r;u.some((function(e){return e.value===d}))||(d=u[0].value,p=u[0].dashboard[0].id),B({folderOption:u,folderId:d,dashId:p,onCancel:function(){}}).then((function(e){e.folderId;var t=e.dashId;Z.mW.push({pathname:"/dashboard/"+t+"/edit",state:{chartId:o,isCopy:!0}})}))}else"edit"===t&&Z.mW.push({pathname:"/dashboard/"+r+"/edit",state:{chartId:o,isCopy:!1}})}catch(h){I.Message.error("copy"===t?"\u590d\u5236\u5931\u8d25":"\u5bfc\u51fa\u5931\u8d25"),console.error("\u5bfc\u51fa\u5931\u8d25,"+h)}}(1,e,F,_,o,k,i,y,d)},title:_,id:k,status:b,moreOptions:X.concat($).concat(r?[]:ee)},l.createElement("div",null,H&&H.filter((function(e){return"prefer"!==e.id})).map((function(e){if(/^sort_/.test(e.id))return null;switch(e.id){case"dateGroupingType":return n?l.createElement("span",{key:e.id},l.createElement(g,{noHour:!0,dateRange:n,onChange:function(t){(!E||t!==e.value||f.from!==U.from||f.to!==U.to)&&a({id:k,selectId:"dateGroupingType",val:t})},defaultValue:e.value,collectValue:e.collectValue,updateCollectValue:function(e){return v({id:k,selectId:"dateGroupingType",val:e})}})):"";case"stackType":return null;default:return l.createElement(N,{key:e.id,onChange:function(t){return a({id:k,selectId:e.id,val:t[e.id]})},objName:e.id,activeObj:e.value,options:e.option,collectValue:e.collectValue,updateCollectValue:function(t){return v({id:k,selectId:e.id,val:t})}})}})),u?l.createElement("i",{className:(u?"icon-cem_reduce":"icon-cem_enlarge")+" enlarge",onClick:function(){return u?u():s({id:k})}},l.createElement("span",null,"\u9000\u51fa\u5168\u5c4f ")):l.createElement(C.Z,{overlay:"\u5168\u5c4f\u663e\u793a",placement:"top",disable:!u},l.createElement("i",{className:(u?"icon-cem_reduce":"icon-cem_enlarge")+" enlarge",onClick:function(){return u?u():s({id:k})}}))))},l.createElement("div",{className:"dashboard_table",ref:function(e){return A(e)}},l.createElement(Q,{columns:te,data:J,style:{height:"100%"},maxHeight:re})))};var ne=function(e){function t(t){var n;return(n=e.call(this,t)||this).resizeListener=function(){if(n.dashWrap){var e=n.dashWrap.getBoundingClientRect().width;n.setState({ratio:e/1200,width:e})}},n.onDrag=function(e){if(e.y<94){if(n.topDistance=94-e.y,n.topInterval)return;n.topInterval=setInterval((function(){n.dashWrap.scrollTop=n.dashWrap.scrollTop-n.topDistance}),10)}else if(window.innerHeight-e.y<20){if(n.bottomDistance=20-(window.innerHeight-e.y),n.bottomInterval)return;n.bottomInterval=setInterval((function(){n.dashWrap.scrollTop=n.dashWrap.scrollTop+n.bottomDistance}),10)}else clearInterval(n.topInterval),clearInterval(n.bottomInterval),n.topInterval=null,n.bottomInterval=null},n.onDragStop=function(){clearInterval(n.topInterval),clearInterval(n.bottomInterval),n.topInterval=null,n.bottomInterval=null},n.state={width:1200,ratio:1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("resize",this.resizeListener),this.resizeListener()},n.componentWillUnmount=function(){window.removeEventListener("resize",this.resizeListener)},n.componentDidUpdate=function(e){var t=this;e.shrinkMenu!==this.shrinkMenu&&(this.shrinkMenu=e.shrinkMenu,setTimeout((function(){return t.resizeListener()}),400))},n.competeWidth=function(e){if(this.dashWrap){var t=this.dashWrap.getBoundingClientRect().width;return e?e*(t/1200):t}return 0},n.render=function(){var e=this,t=this.state,n=t.width,a=t.ratio,o=this.props,i=o.dashboards,c=o.lock,d=o.onLayoutChange,p=o.dashboardId,h=o.dashboardType,f=o.systermAuthority;return l.createElement("div",{className:"dashboard_page",ref:function(t){return e.dashWrap=t}},i.length>0?l.createElement(s(),{className:"layout",cols:36,rowHeight:30,width:n,compactType:"",measureBeforeMount:!1,preventCollision:!0,useCSSTransforms:!0,isDraggable:!c,isResizable:!c,onLayoutChange:d,onDrag:function(t,n,a,r,o){return e.onDrag(o)},onDragStop:this.onDragStop},(0,u.ZP)(i,(function(e){e.forEach((function(e){e.i=e.id,e.w=e.w*a,e.static=c}))})).map((function(t){var n=t.option&&t.option.series&&(Array.isArray(t.option.series)?t.option.series.every((function(e){return"table"===e.type})):"table"===t.option.series.type),a=t.selector&&t.selector.find((function(e){return"tableView"===e.id}))&&"table"===t.selector.find((function(e){return"tableView"===e.id})).value;return l.createElement("div",{key:t.id,"data-grid":{i:t.id,x:t.x,y:t.y,w:t.w,h:t.h,minW:9,minH:8},style:{zIndex:t.y}},n||a?l.createElement(te,(0,r.Z)({},e.props,{chart:t,className:"dashboard_chart_"+t.id})):l.createElement(Y,(0,r.Z)({},e.props,{chart:t,className:"dashboard_chart_"+t.id})))}))):i&&l.createElement("div",{className:"dashborad_nodata"},l.createElement("i",{className:"icon-cem_invalid-save"}),l.createElement("span",null,"\u5f53\u524d\u4eea\u8868\u76d8\u8fd8\u6ca1\u6709\u4efb\u4f55\u300c\u56fe\u8868\u300d"),("SELF_FOLDER"===h||f)&&l.createElement(I.Button,{type:"primary",onClick:function(){return Z.mW.push("/dashboard/"+p+"/list")}},"\u7acb\u5373\u65b0\u5efa")))},t}(l.Component),ae=n(61193),re=["chart","shrink"];const oe=function(e){var t=e.chart,n=e.shrink,o=(0,a.Z)(e,re);return l.createElement("div",{className:"elarge_wrap"},l.createElement("div",{className:"elarge_header"},l.createElement("span",{className:"chart_name"},t.name)),l.createElement("div",{className:"elarge_chart_wrap"},t.option&&t.option.series&&(Array.isArray(t.option.series)?t.option.series.every((function(e){return"table"===e.type})):"table"===t.option.series.type)?l.createElement(te,(0,r.Z)({},o,{chart:t,lock:!0,shrink:n})):l.createElement(Y,(0,r.Z)({},o,{chart:t,lock:!0,shrink:n}))))};const le=function(e){var t,n=(0,r.Z)({},e),a=n.onFilterChange,o=n.onFilterReady,c=n.dashboards,s=n.enlargeId,u=n.changeEnlargeId,d=n.title,h=n.lock,f=n.onLockChange,m=n.dashboardId,v=n.dashboardType;n.systermAuthority;c&&s&&(t=c.filter((function(e){return e.id===s}))[0]);return l.createElement("div",{className:"dashboard"},l.createElement(i.Z,{title:l.createElement("div",{className:"dashboard_title"},l.createElement("span",null,d),("SELF_FOLDER"===v||ae.Z.hasAuthority("DASHBOARD_OPERATION"))&&l.createElement("span",null,l.createElement("span",{className:"line"}),l.createElement(I.Button,{type:"primary",onClick:function(){return Z.mW.push("/dashboard/"+m+"/list")}},"\u6dfb\u52a0\u56fe\u8868"),l.createElement("span",{className:"line"}),l.createElement(C.Z,{overlay:h?"\u89e3\u9501\u540e\uff0c\u53ef\u4ee5\u62d6\u62fd\u548c\u7f16\u8f91\u56fe\u8868":"\u8bf7\u9501\u5b9a\u4eea\u8868\u76d8\uff0c\u4ee5\u9632\u6b62\u8bef\u64cd\u4f5c",placement:"top"},l.createElement("i",{className:h?"icon-cem_locking":"icon-cem_open",onClick:f})))),showList:["time"],onFilterReady:o,onChange:a}),l.createElement(p.Z,{data:c,className:"section_dashboard"},l.createElement(ne,n)),s&&l.createElement(oe,(0,r.Z)({},n,{chart:t,shrink:function(){return u({id:""})}})))};var ie=n(64396),ce=n(55609),se=n(70596),ue=n.n(se),de=["#1574B3","#CDB446","#D07B49","#1EA082","#3D85FF","#D8727F","#0E97AD","#119073","#D969BF","#A9A557","#3D42C6","#3ACCD3","#1A9E59","#1574B3","#38B5FF","#9369D9","#1BBF69","#CC6A77","#A3A3A3","#D2D2D2"],pe={color:de,backgroundColor:"#ffffff",textStyle:{fontFamily:"'PingFang SC','Microsoft Yahei', 'Helvetica Neue', Helvetica, Tahoma, Arial, 'Hiragino Sans GB', 'WenQuanYi Micro Hei', sans-serif"},grid:{top:108,right:32,bottom:24,left:32,containLabel:!0},title:{top:24,left:32,textStyle:{color:"#262626",fontSize:14},subtextStyle:{color:"#8c8c8c"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"circle",smooth:!0},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"circle",smooth:!0},bar:{itemStyle:{normal:{barBorderWidth:"0",barBorderColor:"#ccc"},emphasis:{barBorderWidth:"0",barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:"0",borderColor:"#ccc"},emphasis:{borderWidth:"0",borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:"0",borderColor:"#ccc"},emphasis:{borderWidth:"0",borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:"0",borderColor:"#ccc"},emphasis:{borderWidth:"0",borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:"0",borderColor:"#ccc"},emphasis:{borderWidth:"0",borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:"0",borderColor:"#ccc"},emphasis:{borderWidth:"0",borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:"0",borderColor:"#ccc"},emphasis:{borderWidth:"0",borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:"0",borderColor:"#ccc"},emphasis:{borderWidth:"0",borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#c12e34",color0:"#2b821d",borderColor:"#c12e34",borderColor0:"#2b821d",borderWidth:1}}},graph:{itemStyle:{normal:{color:function(e){return de[e.dataIndex%de.length]},borderWidth:"0",borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:4,symbol:"circle",smooth:!0,color:de,label:{normal:{textStyle:{color:"#ffffff"}}}},map:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(230,182,0,1)",borderColor:"#dddddd",borderWidth:1}},label:{normal:{textStyle:{color:"#c12e34"}},emphasis:{textStyle:{color:"rgb(193,46,52)"}}}},geo:{itemStyle:{normal:{areaColor:"#dddddd",borderColor:"#eeeeee",borderWidth:.5},emphasis:{areaColor:"rgba(230,182,0,1)",borderColor:"#dddddd",borderWidth:1}},label:{normal:{textStyle:{color:"#c12e34"}},emphasis:{textStyle:{color:"rgb(193,46,52)"}}}},wordCloud:{textStyle:{normal:{color:function(e){return de[e.dataIndex%de.length]}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#ebebeb"}},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#262626"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#ebebeb"}},axisTick:{show:!1,lineStyle:{color:"#ebebeb"}},axisLabel:{show:!0,textStyle:{color:"#262626"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#ebebeb"}},axisTick:{show:!1,lineStyle:{color:"#ebebeb"}},axisLabel:{show:!0,textStyle:{color:"#262626"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#ebebeb"}},axisTick:{show:!1,lineStyle:{color:"#ebebeb"}},axisLabel:{show:!0,textStyle:{color:"#262626"}},splitLine:{show:!1,lineStyle:{color:["#ccc"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#D2D2D2"},emphasis:{borderColor:"#093B88"}},feature:{dataView:{readOnly:!0},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u7f29\u653e\u8fd8\u539f"}},saveAsImage:{title:"\u5bfc\u51fa\u56fe\u7247",pixelRatio:2}}},legend:{top:60,left:32,right:32,textStyle:{color:"#262626"}},tooltip:{textStyle:{color:"#262626",fontSize:12},backgroundColor:"rgba(255,255,255,0.9)",borderWidth:1,padding:[8,18],borderColor:"#ccc",extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",axisPointer:{lineStyle:{color:"#bfbfbf",width:1},label:{show:!0,backgroundColor:"#000",shadowColor:"rgba(0, 0, 0, 0.15)",shadowBlur:8},crossStyle:{color:"#bfbfbf",type:"dashed"}}},timeline:{lineStyle:{color:"#0847a6",width:1},itemStyle:{normal:{color:"#0847a6",borderWidth:1},emphasis:{color:"#0847a6"}},controlStyle:{normal:{color:"#0847a6",borderColor:"#0847a6",borderWidth:.5},emphasis:{color:"#0847a6",borderColor:"#0847a6",borderWidth:.5}},checkpointStyle:{color:"#0847a6",borderColor:"rgba(49,107,194,0.5)"},label:{normal:{textStyle:{color:"#0847a6"}},emphasis:{textStyle:{color:"#0847a6"}}}},visualMap:{color:["#D07B49","#CDB446","#1574B3"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#333333"}},markPoint:{label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"#ffffff"}}}}};const he=function(){return ue().registerTheme("yunting_dashboard_theme",pe)};var fe=["loading"],me=ie.Z.dashboard.dashboard,ve=ie.Z.public.menu;he();var ye=function(e){function t(t){var n;return(n=e.call(this,t)||this).escPress=function(e){27===e.keyCode&&n.props.changeEnlargeId({id:""})},n._handleOnFilterReady=function(e){var t=n.props,a=t.save,r=t.menu;if(r&&r.dashboards){var o,l,i,c=e.dateFilter,s=n.props.params.id;r.dashboards.forEach((function(e){e.dataDashboardVOList&&e.dataDashboardVOList.forEach((function(t){t.id===s&&(o=t.name,l=e.type,i=e.id)}))})),a({dashboardId:s,folderId:i,projectId:m.t.get(m.V.curProject).id,title:o,dashboardType:l,lock:!ae.Z.hasAuthority("DASHBOARD_OPERATION")||!(!1===m.t.get(m.V.dashboardLock,"session")),systermAuthority:ae.Z.hasAuthority("DASHBOARD_OPERATION"),dateFilter:c,dateRange:c.numOfDays+Math.random()}),n.props.fetchDashboards().then((function(e){e.forEach((function(e){e.selector&&e.selector&&e.selector.some((function(e){return"dateGroupingType"===e.id}))||n.props.fetchChart({chart:e})}))}))}else setTimeout((function(){return n._handleOnFilterReady(e)}),10)},n._handleOnFilterChange=function(e){var t=n.props.save,a=e.dateFilter;t({dateFilter:a,dateRange:a.numOfDays+Math.random(),dashboards:(0,u.ZP)(n.props.dashboards,(function(e){e.forEach((function(e){return e.option=void 0}))}))}),n.props.dashboards.forEach((function(e){e.selector&&e.selector&&e.selector.some((function(e){return"dateGroupingType"===e.id}))||n.props.fetchChart({chart:e})}))},n._handelOnLayoutChange=function(e){var t=n.props,a=t.dashboards,r=t.onLayoutChange;if(!t.lock){var o=[];a.forEach((function(t){e.forEach((function(e){if(t.id===e.i&&(t.x!==e.x||t.y!==e.y||t.w!==e.w||t.h!==e.h)){var n=e.x,a=e.y,r=e.w,l=e.h;o.push({x:n,y:a,w:r,h:l,id:e.i,chartName:t.name})}}))})),o.length>1||1===o.length&&r(o[0])}},n._events={onFilterChange:n._handleOnFilterChange,onFilterReady:n._handleOnFilterReady,onLayoutChange:n._handelOnLayoutChange},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){document.addEventListener("keydown",this.escPress)},n.componentWillUnmount=function(){this.props.clean(),document.removeEventListener("keydown",this.escPress)},n.render=function(){return l.createElement(le,(0,r.Z)({},this.props,this._events))},t}(l.Component);const be=(0,ce.connect)((function(e){e.loading;var t=(0,a.Z)(e,fe);return(0,r.Z)({},t[me],{menu:t[ve].menuList,shrinkMenu:t[ve].shrinkMenu})}),(function(e){return{filterReady:function(t){return e({type:me+"/filterReady",payload:t})},fetchDashboards:function(t){return e({type:me+"/fetchDashboards",payload:t})},fetchChart:function(t){return e({type:me+"/fetchChart",payload:t})},onSelectorChange:function(t){return e({type:me+"/onSelectorChange",payload:t})},updateCollectValue:function(t){return e({type:me+"/updateCollectValue",payload:t})},onLayoutChange:function(t){return e({type:me+"/onLayoutChange",payload:t})},delDash:function(t){return e({type:me+"/delDash",payload:t})},onLockChange:function(){return e({type:me+"/onLockChange"})},changeEnlargeId:function(t){return e({type:me+"/changeEnlargeId",payload:t})},save:function(t){return e({type:me+"/save",payload:t})},clean:function(t){return e({type:me+"/clean",payload:t})}}}))(ye)}}]);