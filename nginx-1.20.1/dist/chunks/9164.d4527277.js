"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9164],{59164:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ue});var n=a(63366),i=a(87462),s=a(94578),r=a(67294),o=a(35103),l=a(61409),u=(a(43378),a(62443)),c=(a(75314),a(11187)),p=a(70715),d=a(39432),f=a(87300),v=[{title:"\u4e00\u7ea7\u6307\u6807",value:"aspect1"},{title:"\u4e8c\u7ea7\u6307\u6807",value:"aspect2"},{title:"\u4e1a\u52a1\u89c6\u89d2",value:"businessPoint"}],h=[{title:"\u6307\u6807\u58f0\u91cf",value:"total"},{title:"\u6307\u6807\u6b63\u9762\u58f0\u91cf",value:"positive"},{title:"\u6307\u6807\u8d1f\u9762\u58f0\u91cf",value:"negative"}],m=function(e,t){var a=e;if(e&&e instanceof Array)if(t.includes("businessPoint")){a=e.reduce((function(e,t){return t.businessPoint.forEach((function(a){var n=a.id,i=a.name,s=e.find((function(e){return e.view===i}));s||(s={id:n,view:i,aspects:[],total:0,positive:0,negative:0},e.push(s));var r=t.positive+t.negative;s.aspects.push({view:i,total:r,aspect1:t.aspect1,aspect2:t.aspect2,positive:t.positive,negative:t.negative}),s.total+=t.positive+t.negative,s.positive+=t.positive,s.negative+=t.negative})),e}),[]);var n=JSON.parse(JSON.stringify(a)).map((function(e){return e.view}));a=a.length?n.reduce((function(e,t){var n=a.find((function(e){return e.view===t}));return n&&e.push(n),e}),[]):"empty"}else"aspect1"===t?a=e.reduce((function(e,a){var n=e.find((function(e){return e.aspect===a[t]}));return n||(n={aspect:a[t],messageTotal:0,positive:0,negative:0,businessPoint:a.businessPoint,total:0,aspect2:[]},e.push(n)),n.aspect===a[t]&&(n.aspect2.push({aspect:a.aspect2,messageTotal:a.messageTotal,positive:a.positive,negative:a.negative,businessPoint:a.businessPoint,total:a.positive+a.negative}),n.positive+=a.positive,n.negative+=a.negative,n.messageTotal+=a.messageTotal,n.total+=a.positive+a.negative),e}),[]):"aspect2"===t&&(a=e.map((function(e){return{aspect1:e.aspect1,aspect:e.aspect2,negative:e.negative,positive:e.positive,messageTotal:e.messageTotal,total:e.negative+e.positive,businessPoint:e.businessPoint}})));return a},E=function(e,t){var a=[],n=p.OW.map((function(e){return{color:e,used:!1}}));if(t&&t instanceof Array&&t.length){var i=p.OW[0];e.forEach((function(e,s){s<n.length?(t.find((function(t){return t===e[0]}))&&(i=n[s].color,a.push([e[0],i])),n[s].used=!!t.find((function(t){return t===e[0]}))):t.find((function(t){return t===e[0]}))&&(i=n.find((function(e){return!e.used})).color,n.find((function(e){return!e.used})).used=!0,a.push([e[0],i]))}))}return a},g=function(e){var t=0;e.forEach((function(e){var a=parseFloat(e[1]);a>t&&(t=a)})),t=Math.ceil(t);for(var a=0;a<4;a++)t%4!==0&&t++;return 0===t&&(t=4),{intVal:t/4,maxVal:t}},T=["positive","negative","total"],y=p.OW.map((function(e){return{color:e,used:!1}}));const b=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).chartRef=void 0,t.source=void 0,t.color=p.OW,t.legendSelected=void 0,t.datasetIndex=-1,t.getChartRef=function(e){return t.chartRef=e},t.getSourceData=function(e,t,a,n,i,s){return"businessPoint"===a?e.sort((function(e,t){return t[n]-e[n]})).reduce((function(e,t){return t.total>=s&&e.push([t.view,t[n]]),e}),[t]):"businessPoint_aspect"===a?(i?e.find((function(e){return e.view===i})):e).aspects.sort((function(e,t){return t[n]-e[n]})).reduce((function(e,t){return t.total>=s&&e.push([t.aspect2,t[n],t.view]),e}),[t]):"aspect1"===a?e.sort((function(e,t){return t[n]-e[n]})).reduce((function(e,t){return t.total>=s&&e.push([t.aspect,t[n]]),e}),[t]):"aspect2"===a?(i?e.filter((function(e){return e.aspect1===i})):e).sort((function(e,t){return t[n]-e[n]})).reduce((function(e,t){return t.total>=s&&e.push([t.aspect,t[n]]),e}),[t]):e},t.setValue=function(e,a,n,i,s,r){var o=a.includes("aspect")?["\u6307\u6807","\u6307\u6807\u58f0\u91cf"]:"businessPoint"===i?["\u4e1a\u52a1\u89c6\u89d2","\u6307\u6807\u58f0\u91cf"]:["\u6307\u6807","\u6307\u6807\u58f0\u91cf","\u4e1a\u52a1\u89c6\u89d2"],l=t.getSourceData(e,o,i,"total",r,s),u=a.includes("aspect")?["\u6307\u6807","\u6307\u6807\u6b63\u9762\u58f0\u91cf"]:"businessPoint"===i?["\u4e1a\u52a1\u89c6\u89d2","\u6307\u6807\u6b63\u9762\u58f0\u91cf"]:["\u6307\u6807","\u6307\u6807\u6b63\u9762\u58f0\u91cf","\u4e1a\u52a1\u89c6\u89d2"],c=t.getSourceData(e,u,i,"positive",r,s),p=a.includes("aspect")?["\u6307\u6807","\u6307\u6807\u8d1f\u9762\u58f0\u91cf"]:"businessPoint"===i?["\u4e1a\u52a1\u89c6\u89d2","\u6307\u6807\u8d1f\u9762\u58f0\u91cf"]:["\u6307\u6807","\u6307\u6807\u8d1f\u9762\u58f0\u91cf","\u4e1a\u52a1\u89c6\u89d2"],d=t.getSourceData(e,p,i,"negative",r,s);return t.dataset=[c,d,l].map((function(e,t){return{dimensions:0===t?u:1===t?p:o,source:e,sourceHeader:!1}})),[c,d,l]},t.getOption=function(e,a,n,s,r,o,l,u,c,p,v){var h=T.indexOf(n);t.datasetIndex=h;var m=t.chartRef.getWidth(),E=(0,d.jD)(t.dataset[h].source.slice(1).map((function(e){return e[0]})).join(""),12)/(.6*m)>1;t.dataset[h].source.slice(1).map((function(e){return e[0]})).join("");var b="businessPoint_aspect"===a?s+"-"+e:e,S={title:{text:b},dataset:(0,i.Z)({},t.dataset[h],{source:t.dataset[h].source.slice(1)}),brush:{xAxisIndex:"all",yAxisIndex:"all",transformable:!1,throttleType:"debounce",throttleDelay:1e3,brushStyle:{borderWidth:1,color:"rgba(91,143,249,0.1)",borderColor:"#5B8FF9"},outOfBrush:{colorAlpha:.9}},toolbox:{feature:{dataZoom:{show:!1,yAxisIndex:!1,xAxisIndex:!1},saveAsImage:{show:!1},restore:{show:!1},dataView:{show:!1},magicType:{show:!1},brush:{type:["lineX"],icon:{lineX:"path://M521.472 524.992l501.76 226.816-180.096 90.752L753.024 1024 521.472 524.992zM900.992 64.832v129.6h-64.32V64.832h-128.64V0h192.96zM64.704 842.56h128.704v64.768H0.384V712.96h64.32zM64.704 64.832v129.6H0.384V0h193.024v64.832zM322.048 0h257.28v64.832h-257.28zM322.048 842.56h257.28v64.768h-257.28zM0.384 324.032h64.32v259.2H0.384zM836.672 324.032h64.32v259.2h-64.32z"}}},itemSize:14,iconStyle:{color:"#8c8c8c",borderColor:"#8c8c8c"},emphasis:{iconStyle:{color:"#7262FD"}},top:14,right:148,z:3},tooltip:{trigger:"item",showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,a,n,i){var s=i.contentSize,r=i.viewSize,o=e[0]<r[0]/2?0:-1,l=e[1]<r[1]/2?-.5:-1,u=e[0]<r[0]/2?20:-20;return[e[0]+o*s[0]+u,e[1]+l*s[1]]},formatter:function(e,t,a){var n=e.marker,i=e.name,s=e.value;return setTimeout((function(){a(t,(0,f.r)("                \n                <span>"+i+"</span>",["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+n+"</span>"+b+"</div><div style='color: #262626;margin-left: 10px;'>"+(0,d.hE)(s)+"</div></div>"],[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return v(e,b)}}],"yt_new_tooltip_wrapper"))}),0)}},grid:{top:s&&"aspect2"===a||s&&"businessPoint_aspect"===a?108:60,left:36,right:36,bottom:56,containLabel:!0},dataZoom:{show:!0,bottom:24,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)",start:u,end:c},xAxis:{type:"category",boundaryGap:[0,.01],triggerEvent:"aspect1"===a||"businessPoint"===a,data:t.dataset[h].source.slice(1).map((function(e){return e[0]})),axisLabel:{interval:E&&l?1:0,rotate:E&&l?45:0,margin:E&&l?15:8,formatter:function(e){return e.length>6?e.substring(0,6)+"...":e}}},yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return(0,d.hE)(e)}},interval:g(t.dataset[h].source.slice(1)).intVal,max:g(t.dataset[h].source.slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},series:[{type:"bar",barMaxWidth:24,data:t.dataset[h].source.slice(1).map((function(e,t){var a="#BFBFBF";return t<y.length?(o.find((function(t){return t===e[0]}))&&(a=y[t].color),y[t].used=!!o.find((function(t){return t===e[0]}))):o.find((function(t){return t===e[0]}))&&(a=y.find((function(e){return!e.used})).color,y.find((function(e){return!e.used})).used=!0),{name:e[0],value:e[1],itemStyle:{color:a}}})),label:{show:r,position:"top",color:"#8C8C8C"}}]};return t.dataset[h].source,S},t}return(0,s.Z)(t,e),t.prototype.renderChart=function(e,t,a,n,i,s,r,o,l,u,c,p,d,f){this.setValue(e,a,n,i,s,r),this.chartRef.clear(),this.chartRef.setOption(this.getOption(t,i,n,r,o,l,u,c,p,d,f))},t}(r.PureComponent);var S=a(8201),P=a(98191),C=a(45697),O=a.n(C),_=a(43036),x=function(e){function t(t){var a;return(a=e.call(this,t)||this).getPanelWidth=function(){var e=a.props,t=e.flavor,n=e.options,i=e.rightHook,s=Math.max.apply(null,n.map((function(e){return(0,d.jD)(e.title,14)})))+2+10+32;return s+=void 0!==t?24:0,(s+=void 0!==i?30:0)>100?s:100},a._setPadShowFalse=function(){a.state.show&&a.setState({show:!1})},a._handleParentClick=function(e){a.state.show&&a.props.showFlavor&&a.props.enable&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},a._handleTriggerOnClick=function(){var e=a.state.show;a.props.enable&&setTimeout((function(){a.setState({show:!e})}),0)},a.state={show:!1,firstLiHover:!1,panelWidth:a.getPanelWidth()},a}(0,s.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},a.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},a.componentDidUpdate=function(e){var t=e.options,a=this.props.options;JSON.stringify(t)!==JSON.stringify(a)&&this.setState({panelWidth:this.getPanelWidth()})},a.render=function(){var e=this.state,t=e.show,a=e.panelWidth,n=this.props,i=n.activeObj,s=void 0===i?"":i,o=n.onChange,l=n.options,u=n.objName,c=n.preTitle,p=n.sufTitle,d=void 0===p?"":p,f=n.showTitle,v=void 0===f||f,h=n.overlay,m=n.divider,E=void 0===m?"right":m,g=n.flavor,T=n.className,y=void 0===T?"":T,b=n.onFlavorChange,S=n.sufIcon,P=n.style,C=n.type,O=void 0===C?"text":C,x=n.enable,A=n.rightHook,N=l.find((function(e){return e.value===s})),F=""===s?d:N&&N.title,w=""===s?d:N&&N.icon;return r.createElement("div",{className:"single-select-button-wrapper single_select_diviver_"+E+" single-select-button_"+O+" "+y,style:P,onClick:this._handleParentClick},r.createElement("div",{className:"button_content "+(x?"":"button_content_disable")},r.createElement("span",{onClick:this._handleTriggerOnClick},r.createElement("span",{className:"button-trigger "+(t?"sel":"")},v&&r.createElement(r.Fragment,null,c&&r.createElement("span",{className:"pre-title"},c,"\uff1a"),w?r.createElement("i",{className:w+" word_icon_hover"}):r.createElement("span",{className:"button-title"},F)),r.createElement("i",{className:S||"icon-cem_pull-down-or-take-up",style:{transform:t?"rotate(-180deg)":""}})),h&&r.createElement("span",{style:{marginLeft:4}},r.createElement(_.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:h},r.createElement("i",{className:"icon-cem_file1"})))),r.createElement("div",{className:"button-panel "+(t?"active":""),style:{minWidth:a}},l.map((function(e,t){return r.createElement("div",{className:"panel-item "+(e.value===s?"sel":"")+" "+(e.disabled?"disabled":""),key:e.value,onClick:function(){var t;!e.disabled&&o(u?((t={})[u]=e.value,t):e.value)}},e.icon&&r.createElement("i",{className:e.icon+" panel-item-icon"}),r.createElement("span",{className:"ellipsis",style:{maxWidth:97.5}},e.title),void 0!==g&&r.createElement("i",{className:g===e.value?"icon-cem_star":"icon-cem_star-filling star_hide",onClick:function(t){var a,n,i;t.stopPropagation(),b(g===e.value?u?((a={})[u]="",a):"":u?((n={})[u]=e.value,n):e.value),o(u?((i={})[u]=e.value,i):e.value)}}),r.createElement("i",{className:e.value===s&&A?"icon-cem_right1 choice":""}))})))))},t}(r.PureComponent);x.defaultProps={enable:!0,activeObj:"",sufTitle:"",showTitle:!0,divider:"right",className:"",type:"text"},x.propTypes={activeObj:O().any,onChange:O().func.isRequired,options:O().array.isRequired,objName:O().any,preTitle:O().string,sufTitle:O().string,showTitle:O().bool,overlay:O().string,divider:O().oneOf(["both","left","right","none"]),flavor:O().string,onFlavorChange:O().func,className:O().string,sufIcon:O().string,style:O().object,type:O().oneOf(["button","text"]),enable:O().bool,rightHook:O().bool};const A=x;a(1025);var N=a(65400),F=(a(89858),a(51024)),w=(a(96606),a(36155)),D=a(15861),R=a(87757),M=a.n(R),I=a(49722);function k(){return(k=(0,D.Z)(M().mark((function e(t){var a,n;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.projectId,n=t.key,e.abrupt("return",I.h.post("/default/value/find",{projectId:a,key:n}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=(0,D.Z)(M().mark((function e(t){var a,n,i;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.projectId,n=t.value,i=t.key,e.abrupt("return",I.h.post("/default/value/update",{projectId:a,key:i,value:n}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=a(35239),j=function(e){function t(t){var a;return(a=e.call(this,t)||this)._setPadShowFalse=function(e){var t=a.state,n=t.show,i=t.showTips,s=t.minNum,r=t.target;setTimeout((function(){!r&&n&&a.setState({show:!1})}),0),!r&&i&&a.setState({showTips:!1}),!r&&a.setState({min:s!==a.originState.min?s:a.originState.min})},a.onOk=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var t=a.props,n=t.savedKey,i=t.onChange,s=a.state,r=s.min,o=s.show,l=s.minNum;n&&function(e){return L.apply(this,arguments)}({projectId:V.t.get(V.V.curProject).id,key:a.props.savedKey,value:JSON.stringify({min:Number(r)===parseFloat(r)&&Number(r)>=0?r:l!==a.originState.min?l:a.originState.min})}).then((function(e){e.data})),a.setState({show:!o,showTips:!1,min:r,minNum:Number(r)===parseFloat(r)&&Number(r)>=0?r:l!==a.originState.min?l:a.originState.min,active:Number(r)===parseFloat(r)&&Number(r)>0}),i({min:Number(r)===parseFloat(r)&&Number(r)>=0?r:l!==a.originState.min?l:a.originState.min})},a.onMinChange=function(e){var t=a.state.min;e.target.value.trim()&&a.setState({showTips:!0}),void 0!==t&&Number(t)===parseFloat(t)&&String(t).startsWith("0")&&e.target.value?a.setState({min:Number(e.target.value)}):a.setState({min:e.target.value.trim()})},a.onSliderChange=function(e){var t=e[0],n=e[1];a.setState({min:t,max:n})},a.originState={min:t.min||0,minNum:0,show:!1,showTips:!1,target:""},a.state=(0,i.Z)({},Object.assign({},a.originState),{active:!1}),a}(0,s.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this,t=this.props,a=t.savedKey,n=t.onChange;a&&function(e){return k.apply(this,arguments)}({projectId:V.t.get(V.V.curProject).id,key:a}).then((function(t){var a,i=t.data;if(2e4===i.code&&i.result)try{a=JSON.parse(i.result).min,e.originState.min=a}catch(s){}finally{e.setState({min:a,minNum:a,active:a>0}),n({min:a})}})),window.addEventListener("click",this._setPadShowFalse)},a.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},a.render=function(){var e=this,t=this.props,a=t.title,n=t.max,i=this.state,s=i.min,o=i.show,l=i.showTips,c=i.active;i.minNum;return r.createElement("div",{className:"yt_slider_range_wrapper",onClick:function(e){o&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())}},r.createElement(u.default,{placement:"top",content:"\u6570\u503c\u8303\u56f4",mouseEnterDelay:.6},r.createElement("i",{className:"icon-cem_volume",style:{color:o||c?"#7262FD":"#8c8c8c"},onClick:function(t){o&&(t.stopPropagation(),t.nativeEvent.stopImmediatePropagation()),setTimeout((function(){return e.setState({show:!o})}),0)}})),r.createElement("div",{className:"yt_slider_range_content",onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},style:{display:o?"block":"none"}},r.createElement("div",{className:"title"},a),r.createElement(w.Z,{onChange:this.onSliderChange,range:{draggableTrack:!0},value:[s,n],max:this.props.max,min:0,tooltipVisible:!1}),r.createElement("div",{className:"input_wrap",onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},r.createElement(F.default,{style:{marginRight:70},value:s,onChange:this.onMinChange,onFocus:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),e.setState({target:t.target.className})},onBlur:function(t){e.setState({target:""})},onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}}),r.createElement("span",null,n)),l&&r.createElement("p",null,"\u4e0b\u6b21\u9ed8\u8ba4\u6309\u8bbe\u7f6e\u7684\u6700\u5c0f\u503c\u5c55\u793a"),r.createElement("div",{className:"button_wrap",style:{marginTop:l?0:32}},r.createElement(N.default,{onClick:function(){e.setState({min:e.originState.min})}},"\u91cd\u7f6e"),r.createElement("div",{className:"right"},r.createElement(N.default,{type:"primary",onClick:this.onOk},"\u786e\u5b9a"),r.createElement(N.default,{onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),e._setPadShowFalse()}},"\u53d6\u6d88")))))},t}(r.PureComponent);j.propTypes={title:O().string,savedKey:O().string,min:O().number,max:O().number,onChange:O().func};const Y=j;var Z=a(87219),B=a(50976),G=a(94644),W=["positive","negative","total"];const U=function(e){function t(t){var a;return(a=e.call(this,t)||this).resizeListener=function(){if(a.chartRef&&(0,S.P)(a.state.data)&&a.dataset){var e=a.chartRef.getWidth();(0,d.jD)(a.dataset[a.datasetIndex].source.slice(1).map((function(e){return e[0]})).join(""),12)/(.6*e)>1&&a.setState({dragEnd:!0})}},a.onAspectChange=function(){var e=a.state,t=e.filterName,n=e.min,i=e.dragEnd,s=a.props,r=s.bsType,o=s.save,l=s.data,u=s.aspectVolumeType;t&&("aspect2"===r?a.setState({filterName:""},(function(){var e=a.setValue(m(l,"aspect1"),"aspect1",u,"aspect1",n,"");o({selectAspectObj:{value:e[W.indexOf(u)].slice(1,6).map((function(e){return e[0]})),type:"aspect1",color:e[W.indexOf(u)].slice(1,6).map((function(e,t){return[e[0],p.OW[t]]}))}}),a.setState({start:0,end:e[W.indexOf(u)].length>16?Math.floor(15/(e[W.indexOf(u)].length-1)*100)-.93:100,data:l&&"empty"!==l&&1===e[W.indexOf(u)].length?"empty_filter":a.props.data})})):"businessPoint_aspect"===r&&a.setState({filterName:""},(function(){var e=a.setValue(m(l,"businessPoint"),"businessPoint",u,"businessPoint",n,"");o({selectAspectObj:{value:e[W.indexOf(u)].slice(1,6).map((function(e){return e[0]})),type:"businessPoint",color:e[W.indexOf(u)].slice(1,6).map((function(e,t){return[e[0],p.OW[t]]}))}}),a.setState({start:0,end:e[W.indexOf(u)].length>16?Math.floor(15/(e[W.indexOf(u)].length-1)*100)-.93:100,data:l&&"empty"!==l&&1===e[W.indexOf(u)].length?"empty_filter":a.props.data})})),i&&a.setState({dragEnd:!1}))},a.onAspectTypeChange=function(e){var t=a.props,n=t.onFilterChange,i=t.data,s=t.aspectVolumeType,r=(t.bsType,a.state),o=r.filterName,l=r.min,u=r.dragEnd,c=(0,S.P)(i)?a.setValue(m(i,e),e,s,e,l,""):[];n({aspectType:e,selectAspectObj:{type:e,value:c[W.indexOf(s)]&&c[W.indexOf(s)].length>1?c[W.indexOf(s)].slice(1,6).map((function(e){return e[0]})):[],color:c[W.indexOf(s)]&&c[W.indexOf(s)].length>1?c[W.indexOf(s)].slice(1,6).map((function(e,t){return[e[0],p.OW[t]]})):[]}}),o&&a.setState({filterName:""}),a.setState({setTypeActive:!0,start:0,end:c[W.indexOf(s)]&&c[W.indexOf(s)].length>16?Math.floor(15/(c[W.indexOf(s)].length-1)*100)-.93:100,data:i&&"empty"!==i&&1===c[W.indexOf(s)].length?"empty_filter":i}),u&&a.setState({dragEnd:!1})},a.onExportImage=function(){a.chartRef&&(0,G._v)(a.chartRef,a.props.title)},a.onExportExcel=function(){var e=a.props,t=e.title,n=e.bsType,i=a.state,s=i.filterName,r=i.data;if((0,S.P)(r)){var o=[a.dataset[a.datasetIndex].source];(0,G.aT)(o,"businessPoint_aspect"===n?s+"-"+t:t)}},a._handleOnJumpMsg=function(e,t){a.props.onMsgClick(e,t)},a.onChartClick=function(e){e.componentSubType;var t=e.componentType,n=(e.color,e.name),s=(e.data,e.seriesIndex,e.value),r=a.props,o=r.bsType,l=r.save,u=r.selectAspectObj,d=r.aspectVolumeType,f=a.state,v=f.min,h=f.dragEnd;if("xAxis"===t)"aspect1"===o?a.setState({filterName:s},(function(){var e=a.setValue(m(a.props.data,"aspect2"),"aspect2",d,"aspect2",v,s);a.setState({start:0,end:e[W.indexOf(d)].length>16?Math.floor(15/(e[W.indexOf(d)].length-1)*100)-.93:100,data:a.props.data&&"empty"!==a.props.data&&1===e[W.indexOf(d)].length?"empty_filter":a.props.data}),l({selectAspectObj:{value:e[W.indexOf(d)].slice(1,6).map((function(e){return e[0]})),type:"aspect2",color:e[W.indexOf(d)].slice(1,6).map((function(e,t){return[e[0],p.OW[t]]}))}})})):"businessPoint"===o&&a.setState({filterName:s},(function(){var e=a.setValue(m(a.props.data,"businessPoint_aspect"),"businessPoint_aspect",d,"businessPoint_aspect",v,s);a.setState({start:0,end:e[W.indexOf(d)].length>16?Math.floor(15/(e[W.indexOf(d)].length-1)*100)-.93:100,data:a.props.data&&"empty"!==a.props.data&&1===e[W.indexOf(d)].length?"empty_filter":a.props.data}),l({selectAspectObj:{value:e[W.indexOf(d)].slice(1,6).map((function(e){return e[0]})),type:"businessPoint_aspect",color:e[W.indexOf(d)].slice(1,6).map((function(e,t){return[e[0],p.OW[t]]}))}})})),h&&a.setState({dragEnd:!1});else if("series"===t){u.type;var g=u.value,T=(u.color,(0,Z.ZP)(g,(function(e){if(e.find((function(e){return e===n})))return e.length>1?e.filter((function(e){return e!==n})):(c.default.warning("\u8d8b\u52bf\u56fe\u81f3\u5c11\u4fdd\u7559\u4e00\u6761\u8d8b\u52bf\u7ebf"),e);e.length<10?e.push(n):c.default.warning("\u6700\u591a\u5c55\u793a10\u4e2a\u8d8b\u52bf\u7ebf\uff0c\u5df2\u6ee110\u4e2a\u3002\u65e0\u6cd5\u518d\u6dfb\u52a0\u8d8b\u52bf\u7ebf")}))),y=a.dataset[a.datasetIndex].source.slice(1);l({selectAspectObj:(0,i.Z)({},u,{value:T,color:E(y,T)})})}},a.onFilterAspectChange=function(e){var t=a.state,n=t.dragEnd,i=t.filterName,s=a.props,r=s.save,o=s.selectAspectObj,l=s.aspectVolumeType,u=s.aspectType,c=s.data,d=s.bsType;n&&a.setState({dragEnd:!1}),a.setState({min:e.min},(function(){var t=(0,S.P)(c)?a.setValue(m(c,d),u,l,d,e.min,i):[];t[W.indexOf(l)]&&(r({selectAspectObj:{type:o.type,value:t[W.indexOf(l)].length>1?t[W.indexOf(l)].slice(1,6).map((function(e){return e[0]})):[],color:t[W.indexOf(l)].length>1?t[W.indexOf(l)].slice(1,6).map((function(e,t){return[e[0],p.OW[t]]})):[]}}),a.setState({start:0,end:a.dataset[a.datasetIndex]&&a.dataset[a.datasetIndex].source&&a.dataset[a.datasetIndex].source.length>16?Math.floor(15/(a.dataset[a.datasetIndex].source.length-1)*100)-.93:100,data:c&&"empty"!==c&&1===t[W.indexOf(l)].length?"empty_filter":c}))}))},a.onBrushSelected=function(e){var t=a.dataset[a.datasetIndex].source.slice(1),n=e.type,s=e.batch,r=a.props,o=r.selectAspectObj,l=r.save,u=o.value;o.color;if("brushselected"===n){var p=s[0].selected[0].dataIndex,d=function(e,t){var a=[];return e&&e instanceof Array&&e.length&&t.forEach((function(t){a.push(e[t][0])})),a}(t,p);if(!p||!p.length)return void(a.chartRef&&a.chartRef.dispatchAction({type:"brush",areas:[]}));if(u.length===d.length&&d.every((function(e){return u.indexOf(e)>-1})))return void(a.chartRef&&a.chartRef.dispatchAction({type:"brush",areas:[]}));var f=(0,Z.ZP)(u,(function(e){return e.length===d.length&&d.every((function(t){return e.indexOf(t)>-1}))?e:10===e.length&&d.length?(c.default.warning("\u6700\u591a\u5c55\u793a10\u4e2a\u8d8b\u52bf\u7ebf\uff0c\u5df2\u6ee110\u4e2a\u3002\u65e0\u6cd5\u518d\u6dfb\u52a0\u8d8b\u52bf\u7ebf"),void(a.chartRef&&a.chartRef.dispatchAction({type:"brush",areas:[]}))):void(d.length&&d.forEach((function(t,a,n){e.find((function(e){return e===t}))||e.length<10&&e.push(t)})))}));l({selectAspectObj:(0,i.Z)({},o,{value:f,color:E(t,f)})})}},a.onDataZoom=function(e){var t=e.start,n=e.end;if("datazoom"===e.type&&a.chartRef&&(0,S.P)(a.state.data)){var i=a.chartRef.getWidth();a.timer&&clearTimeout(a.timer);var s=a.dataset[a.datasetIndex].source.length-1>100?73:40;a.timer=setTimeout((function(){n-t>=i/s?a.setState({dragEnd:!0,start:t,end:n}):a.setState({dragEnd:!1,start:t,end:n})}),200)}},a.state={rangeChecked:!1,showLabel:!1,min:0,filterName:"",setWordActive:!1,setTypeActive:!1,dragEnd:!1,start:0,end:54,data:t.data},a}(0,s.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;this.renderChart(),this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,a=t[0],n=t[1];a.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(n.style.display="none")}),2e3)})),n&&n.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200),window.addEventListener("resize",this.resizeListener)},a.componentDidUpdate=function(e,t){var a=this,n=e.data,s=e.aspectVolumeType,r=e.aspectType,o=(e.bsType,this.props),l=o.data,u=o.aspectVolumeType,c=o.aspectType,d=o.bsType,f=o.save,v=o.selectAspectObj,h=t.min,E=t.showLabel,g=t.dragEnd,T=t.start,y=t.end,b=this.state,P=b.min,C=b.showLabel,O=b.dragEnd,_=b.start,x=b.end,A=b.filterName;if(JSON.stringify(n)!==JSON.stringify(l)){var N=(0,S.P)(l)?this.setValue(m(l,d),c,u,d,P,A)[W.indexOf(u)]:[],F=l&&"empty"!==l&&1===N.length?"empty_filter":l;!(0,S.P)(F)&&this.chartRef&&(this.chartRef=void 0),this.setState({start:0,end:N.length>16?Math.floor(15/(N.length-1)*100)-.93:100,data:F},(function(){a.renderChart(),f({selectAspectObj:(0,i.Z)({},v,{value:N.length>1?N.slice(1,6).map((function(e){return e[0]})):[],color:N.length>1?N.slice(1,6).map((function(e,t){return[e[0],p.OW[t]]})):[]})})}))}if(u===s&&JSON.stringify(e.selectAspectObj)===JSON.stringify(v)&&E===C&&r===c||this.renderChart(),Number(h)!==Number(P)){var w=(0,S.P)(l)?this.setValue(m(l,c),c,u,c,P,A)[W.indexOf(u)]:[],D=l&&"empty"!==l&&1===w.length?"empty_filter":l;this.setState({data:D},(function(){a.renderChart()}))}g===O&&T===_&&y===x||this.setState({dragEnd:O,start:_,end:x},(function(){a.renderChart()})),!(0,S.P)(l)&&this.chartRef&&(this.chartRef=void 0)},a.componentWillUnmount=function(){window.removeEventListener("resize",this.resizeListener)},a.renderChart=function(){var t=this.props,a=t.title,n=t.aspectType,i=t.aspectVolumeType,s=t.bsType,r=t.selectAspectObj,o=this.state,l=o.showLabel,u=o.filterName,c=o.min,p=o.dragEnd,d=o.start,f=o.end,v=o.data;(0,S.P)(v)&&this.chartRef&&e.prototype.renderChart.call(this,m(v,s),a,n,i,s,c,u,l,r.value,p,d,f,this.onAspectChange,this._handleOnJumpMsg)},a.render=function(){var e=this,t=this.props,a=t.loading,n=t.title,i=t.bsType,s=t.aspectType,o=t.aspectTypeFlavor,l=t.aspectVolumeType,c=t.aspectVolumeTypeFlavor,d=(t.selectAspectObj,t.save,t.onFilterChange),f=t.onFlavorChange,E=this.state,g=E.showLabel,T=E.min,y=E.filterName,b=E.dragEnd,C=E.data;return r.createElement(S.Z,{className:"yt_product_aspectTrend_bar_chart",data:C,loading:a,emptyFilterHint:"\u6682\u65e0\u5bf9\u5e94\u6570\u636e\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u6570\u503c\u8303\u56f4",renderTitle:r.createElement(P.Z,{title:"businessPoint_aspect"===i?y+"-"+n:n,data:C},r.createElement("div",{className:"operate_zone"},r.createElement(A,{className:this.state.setTypeActive?"set_Top_active":"",options:v,activeObj:s,rightHook:!0,flavor:o,onChange:this.onAspectTypeChange,onFlavorChange:function(e){return f({aspectTypeFlavor:e})}}),r.createElement(A,{className:this.state.setTopActive?"set_Top_active":"",options:h,activeObj:l,flavor:c,rightHook:!0,onChange:function(t){e.setState({setTopActive:!0,start:0,end:e.dataset&&e.dataset[W.indexOf(t)]&&e.dataset[W.indexOf(t)].source.length>16?Math.floor(15/(e.dataset[W.indexOf(t)].source.length-1)*100)-.93:100,data:e.props.data&&"empty"!==e.props.data&&1===e.dataset[W.indexOf(t)].source.length?"empty_filter":e.props.data}),b&&e.setState({dragEnd:!1}),d({aspectVolumeType:t,value:e.dataset&&e.dataset[W.indexOf(t)]&&e.dataset[W.indexOf(t)].source.length>1?e.dataset[W.indexOf(t)].source.slice(1,6).map((function(e){return e[0]})):[],color:e.dataset&&e.dataset[W.indexOf(t)]&&e.dataset[W.indexOf(t)].source.length>1?e.dataset[W.indexOf(t)].source.slice(1,6).map((function(e,t){return[e[0],p.OW[t]]})):[]})},onFlavorChange:function(e){return f({aspectVolumeTypeFlavor:e})}})),r.createElement("div",{className:"icon_zone"},r.createElement(Y,{title:"\u53ea\u5bf9\u6307\u6807\u58f0\u91cf\u505a\u6570\u503c\u7b5b\u9009",min:T,max:(0,S.P)(this.props.data)?Math.max.apply(null,m(this.props.data,s).map((function(e){return e.total}))):0,savedKey:"product_aspectTrend_filter",onChange:this.onFilterAspectChange}),r.createElement("div",{className:"icon"},r.createElement(u.default,{placement:"top",content:"\u663e\u793a\u56fe\u8868\u6807\u7b7e",mouseEnterDelay:.6},r.createElement("i",{className:"icon-tubiaobiaoqian "+(g?"active":""),onClick:function(){e.setState({showLabel:!g})}}))),r.createElement("div",{className:"icon"},r.createElement(u.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6},r.createElement("i",{className:"icon-daochu",onClick:this.onExportExcel}))),r.createElement("div",{className:"icon"},r.createElement(u.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6},r.createElement("i",{className:"icon-xiazaitupian",onClick:this.onExportImage})))))},y&&r.createElement("div",{className:"bread_menu"},r.createElement("span",{className:"filter_name",onClick:this.onAspectChange},y),r.createElement("span",null,"\xa0",">","\xa0","aspect2"===i?"\u4e8c\u7ea7\u6307\u6807":"\u672b\u7ea7\u6307\u6807")),r.createElement(B.Z,{onChartReady:this.getChartRef,theme:"yt_multi_color_10",option:{},style:{width:"100%",height:"100%"},onEvents:{click:this.onChartClick,brushselected:this.onBrushSelected,datazoom:this.onDataZoom}}))},t}(b);a(6373);var z=a(82891),J=(a(54214),a(12386)),H=(a(15267),a(64713)),q=[{title:"\u6307\u6807\u597d\u8bc4\u7387",value:"posRate"},{title:"\u6b63\u9762\u5360\u6bd4",value:"posRatio"},{title:"\u6b63\u9762\u603b\u5360\u6bd4",value:"posRatioTotal"},{title:"\u6307\u6807\u6b63\u9762\u58f0\u91cf",value:"positive"}],K=[{title:"\u6307\u6807\u5dee\u8bc4\u7387",value:"negRate"},{title:"\u8d1f\u9762\u5360\u6bd4",value:"negRatio"},{title:"\u8d1f\u9762\u603b\u5360\u6bd4",value:"negRatioTotal"},{title:"\u6307\u6807\u8d1f\u9762\u58f0\u91cf",value:"negative"}],X=[{title:"\u6307\u6807\u58f0\u91cf",value:"total"},{title:"\u6307\u6807\u63d0\u53ca\u7387",value:"menRate"}],Q=[{title:"\u6307\u6807\u58f0\u91cf",value:"total"},{title:"\u6307\u6807\u6b63\u9762\u58f0\u91cf",value:"positive"},{title:"\u6307\u6807\u8d1f\u9762\u58f0\u91cf",value:"negative"},{title:"\u6307\u6807\u597d\u8bc4\u7387",value:"posRate"},{title:"\u6307\u6807\u5dee\u8bc4\u7387",value:"negRate"}];var $=function(e){var t=0;e.forEach((function(e){var a=e.slice(1).sort((function(e,t){return t-e})),n=parseFloat(a[0]);n>t&&(t=n)})),t=Math.ceil(t);for(var a=0;a<4;a++)t%4!==0&&t++;return 0===t&&(t=4),{intVal:t/4,maxVal:t}};const ee=function(e){function t(t){var a;return(a=e.call(this,t)||this).renderChart=function(){var e=a.props,t=e.data,n=e.title,i=e.aspectDateType,s=e.selectAspectObj,r=a.state.showLabel;if((0,S.P)(t)&&a.chartRef){var o=a.rateInfo().rateType,l=function(e,t,a,n,i,s,r){var o=function(e){var t=e.map((function(e){return e.name})),a=(e[0]&&e[0].list&&e[0].list.map((function(e){return e.title}))||[]).map((function(a){return[a].concat(t.map((function(t){var n=e.find((function(e){return e.name===t}));if(n){var i=n.list.find((function(e){return e.title===a}));if(i)return i.count}return 0})))}));return{dateList:a,source:[["\u65e5\u671f"].concat(t)].concat(a),objNames:t}}(e),l=o.source,u=o.objNames,c=o.dateList,p=!1;s&&(s.includes("Rate")||s.includes("Ratio"))&&(p=!0);var v=i.color,h=v.map((function(e){return e[0]})),m=v.map((function(e){return e[1]})),E=u.map((function(e){return m[h.indexOf(e)]}));return{title:{text:t},grid:{top:100,left:36,right:60,bottom:56,containLabel:!0},dataset:{source:l},xAxis:{axisPointer:{type:"line",label:{show:!1}},type:"category",boundaryGap:!1,axisLabel:{formatter:function(e){return(0,d.Sn)(n,e)}},data:c.map((function(e){return e[0]}))},yAxis:{type:"value",axisPointer:!1,axisLabel:{color:"#626262",formatter:function(e){return p?Math.round(100*e)+"%":(0,d.hE)(e)}},interval:p?$(l.slice(1).map((function(e){return e.map((function(e){return 100*e}))}))).intVal/100:$(l.slice(1)).intVal,max:p?$(l.slice(1).map((function(e){return e.map((function(e){return 100*e}))}))).maxVal/100:$(l.slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},series:[].concat(u.map((function(e,t){return{type:"line",name:u[t],color:E[t],smooth:!0,showSymbol:!0,symbolSize:1,data:c.map((function(e){return{value:e[t+1],tooltip:{trigger:"item",formatter:function(e,t,a){return setTimeout((function(){var i=e.seriesName,o=e.name,l=e.data,u=e.marker,v="\n                <div style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;position:relative;\">\n                  <span style='position:absolute;width:40px;height:150px;left:-40px;top:-30px;'></span>\n                  <span style='position:absolute;width:40px;height:150px;right:-40px;top:-30px;'></span>\n                </div>\n                <span style='font-size: 12px;font-weight: 400;color:#8c8c8c;'>\n                  "+(0,d.Sn)(n,o)+"\n                </span>\n                ",h=[u+" "+i+'<span style="float: right; font-weight: 500; color: #000000;">\n                  '+(p?(100*l.value).toFixed(2)+"%":l.value)+"</span>"];a(t,(0,f.r)(v,h,[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){var t=c.map((function(e){return e[0]}));r(e,"",o,t,s)}}],"yt_new_tooltip_wrapper"))}),0)}},label:{show:a,position:"top",color:"#8C8C8C",formatter:function(e){return p?(100*e.value).toFixed(2)+"%":e.value}}}}))}}))),tooltip:{trigger:"axis",showDelay:20,hideDelay:10,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n      box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",formatter:function(e,t,a){if(e.length)return setTimeout((function(){var i=e[0].axisValue,s=e.map((function(e){var t=e.marker,a=e.seriesName,n=e.data;return{name:t+" "+a+'<span style="float: right; font-weight: 500; color: #000000;">'+(p?(100*n.value).toFixed(2)+"%":(0,d.hE)(n.value))+"</span>",value:n.value}})),r=s.map((function(e){return e.name})),o='<span style="font-size: 12px; color: #8c8c8c; font-weight: 400;">'+(0,d.Sn)(n,i)+"</span>";a(t,(0,f.r)(o,r))}),0)}},dataZoom:{show:!0,bottom:24,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"},legend:{top:50,left:30,right:48,itemWidth:10,itemHeight:10,type:"scroll",itemGap:24,data:u,icon:"circle",selectedMode:!1}}}(function(e,t,a){var n=t.type,i=t.value,s=e,r=[];if(r=e.reduce((function(e,t){var a=e.find((function(e){return e.title===t.title}));return a?(a.sum.posSum+=t.positive,a.sum.negSum+=t.negative,a.sum.totalSum+=t.total):(a={title:t.title,sum:{posSum:t.positive,negSum:t.negative,totalSum:t.total}},e.push(a)),e}),[]),"aspect1"===n&&(s=e.reduce((function(e,t){var a=e.find((function(e){return e.name===t[n]}));if(a||(a={name:t[n],list:[{title:t.title,data:{positive:0,negative:0,total:0,messageTotal:t.messageTotal}}]},e.push(a)),a.name===t[n]){var i=a.list.find((function(e){return e.title===t.title}));i?(i.data.positive+=t.positive,i.data.negative+=t.negative,i.data.total+=t.total):a.list.push({title:t.title,data:{positive:t.positive,negative:t.negative,total:t.total,messageTotal:t.messageTotal}})}return e}),[])),"aspect2"===n||"businessPoint_aspect"===n){var o="aspect2";s=e.reduce((function(e,t){var a=e.find((function(e){return e.name===t[o]}));return a?a.list.push({title:t.title,data:{positive:t.positive,negative:t.negative,total:t.total,messageTotal:t.messageTotal}}):(a={name:t[o],list:[{title:t.title,data:{positive:t.positive,negative:t.negative,total:t.total,messageTotal:t.messageTotal}}]},e.push(a)),e}),[])}return"businessPoint"===n&&(s=e.reduce((function(e,t){var a=t.businessPoint,n=(a.id,a.name),i=e.find((function(e){return e.name===n}));return i||(i={name:n,list:[{title:t.title,data:{positive:0,negative:0,total:0,messageTotal:t.messageTotal}}]},e.push(i)),i.name===n&&(i.list.find((function(e){return e.title===t.title}))?i.list.forEach((function(e){e.title===t.title&&(e.data.positive+=t.positive,e.data.negative+=t.negative,e.data.total+=t.total)})):i.list.push({title:t.title,data:{positive:t.positive,negative:t.negative,total:t.total,messageTotal:t.messageTotal}})),e}),[])),s=(s=s.filter((function(e){var t=e.name;return i.includes(t)}))).map((function(e){var t=e.name,n=e.list.map((function(e){var t=e.data,n=e.title,i=r.find((function(e){return e.title===n})).sum,s=i.posSum,o=i.negSum,l=i.totalSum,u=0;switch(a){case"positive":u=t.positive;break;case"negative":u=t.negative;break;case"total":u=t.total;break;case"posRate":u=0===t.total?0:t.positive/t.total;break;case"negRate":u=0===t.total?0:t.negative/t.total;break;case"posRatio":u=0===s?0:t.positive/s;break;case"negRatio":u=0===o?0:t.negative/o;break;case"posRatioTotal":u=0===l?0:t.positive/l;break;case"negRatioTotal":u=0===l?0:t.negative/l;break;case"menRate":u=0===t.messageTotal?0:t.total/t.messageTotal}return{title:e.title,count:isNaN(u)?0:u}}));return{name:t,list:n}})),s}(t,s,o),n,r,i,s,o,a.OnJumpMsg)||{};a.chartRef.clear(),a.chartRef.setOption(l)}},a.getChartRef=function(e){return a.chartRef=e},a.rateInfo=function(){var e=a.props;return function(e,t,a){var n=[],i="",s="";switch(e){case"total":n=X,i=t.aspectTotalType,s=a.aspectTotalTypeFlavor;break;case"positive":n=q,i=t.aspectPosType,s=a.aspectPosTypeFlavor;break;case"negative":n=K,i=t.aspectNegType,s=a.aspectNegTypeFlavor;break;case"businessPoint":n=Q,i=t.aspectBusType,s=a.aspectBusTypeFlavor}return{rateOptions:n,rateType:i,fRateType:s}}(e.trendEmotion,{aspectTotalType:e.aspectTotalType,aspectPosType:e.aspectPosType,aspectNegType:e.aspectNegType,aspectBusType:e.aspectBusType},{aspectTotalTypeFlavor:e.aspectTotalTypeFlavor,aspectPosTypeFlavor:e.aspectPosTypeFlavor,aspectNegTypeFlavor:e.aspectNegTypeFlavor,aspectBusTypeFlavor:e.aspectBusTypeFlavor})},a.OnJumpMsg=function(e,t,n,i,s){var r=a.props.title;a.props.onMsgClick(e,r,n,i,s)},a.onExportImage=function(){a.chartRef&&(0,G._v)(a.chartRef,a.props.title)},a.onExportExcel=function(){var e=a.props,t=e.data,n=e.title;if((0,S.P)(t)&&a.chartRef){var i=[a.chartRef._model.option.dataset[0].source];(0,G.aT)(i,n)}},a.onExportAllExcel=function(e){if(e){var t=a.props,n=t.trendEmotion,i=t.selectAspectObj,s=t.OnExportRateData,r=t.businessPointName,o=t.data,l={type:"aspect1"===i.type?"aspect1":"aspect2",formula:e};if("businessPoint"!==n&&(l.emotion=n),r){var u=o.find((function(e){return e.businessPoint.name===r})),c=u.businessPoint&&u.businessPoint.id;l.businessPoint=""+c}s(l)}},a.state={showLabel:!1,setWordActive:!1,setTypeActive:!1,data:t.data},a}(0,s.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,a=t[0],n=t[1];a.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(n.style.display="none")}),2e3)})),n&&n.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200)},a.componentDidUpdate=function(e,t){var a=this,n=e.data,i=e.trendEmotion,s=e.aspectDateType,r=e.aspectTotalType,o=e.aspectPosType,l=e.aspectNegType,u=e.aspectBusType,c=e.title,p=e.selectAspectObj,d=this.props,f=d.data,v=d.trendEmotion,h=d.aspectDateType,m=d.aspectTotalType,E=d.aspectPosType,g=d.aspectNegType,T=d.aspectBusType,y=d.title,b=d.selectAspectObj,P=t.showLabel,C=this.state.showLabel;if((0,S.P)(f)&&JSON.stringify(n)!==JSON.stringify(f)){var O=b.value,_=f&&"empty"!==f&&0===O.length?"empty_filter":f;!(0,S.P)(_)&&this.chartRef&&(this.chartRef=void 0),this.setState({data:_},(function(){return a.renderChart()}))}if(P!==C&&this.renderChart(),JSON.stringify(p)!==JSON.stringify(b)){var x=b.value,A=f&&"empty"!==f&&0===x.length?"empty_filter":f;this.setState({data:A},(function(){return a.renderChart()}))}i===v&&s===h&&r===m&&o===E&&l===g&&u===T&&c===y||this.renderChart(),!(0,S.P)(f)&&this.chartRef&&(this.chartRef=void 0)},a.render=function(){var e=this,t=this.props,a=t.title,n=void 0===a?"\u6307\u6807\u8d8b\u52bf":a,i=t.titleOverlay,s=t.loading,o=t.aspectDateOptions,l=t.aspectDateType,c=t.aspectDateTypeFlavor,p=t.trendEmotion,d=t.onFilterChange,f=t.onFlavorChange,v=this.rateInfo(),h=v.rateOptions,m=v.rateType,E=v.fRateType,g=this.state,T=g.showLabel,y=g.data;return r.createElement(S.Z,{data:y,loading:s,className:"yt_prodcut_aspect_line_chart",emptyFilterHint:"\u6682\u65e0\u6570\u636e",renderTitle:r.createElement(P.Z,{title:n,data:y,titleOverlay:i},"businessPoint"!==p&&r.createElement(H.default.Group,{value:p,onChange:function(e){return d({trendEmotion:e.target.value})},size:"small"},r.createElement(H.default.Button,{value:"total"},"\u5168\u90e8\u60c5\u611f"),r.createElement(H.default.Button,{value:"positive"},"\u6b63\u9762"),r.createElement(H.default.Button,{value:"negative"},"\u8d1f\u9762")),r.createElement(A,{className:this.state.setTypeActive?"set_Top_active":"",options:h,activeObj:m,flavor:E,rightHook:!0,onChange:function(t){e.setState({setTypeActive:!0}),d({rateType:t,emotion:p})},onFlavorChange:function(e){return f({fRateType:e,emotion:p})}}),r.createElement(A,{className:this.state.setTopActive?"set_Top_active":"",options:o,activeObj:l,flavor:c,rightHook:!0,onChange:function(t){e.setState({setTopActive:!0}),d({aspectDateType:t})},onFlavorChange:function(e){return f({aspectDateTypeFlavor:e})}}),r.createElement(u.default,{placement:"top",content:"\u663e\u793a\u56fe\u8868\u6807\u7b7e",mouseEnterDelay:.6},r.createElement("i",{className:"icon-tubiaobiaoqian "+(T?"active":""),onClick:function(){e.setState({showLabel:!T})}})),"businessPoint"!==p?r.createElement(z.default,{placement:"bottomCenter",overlay:r.createElement(J.default,{className:"yt_prodcut_aspect_line_chart"},r.createElement(J.default.Item,{onClick:this.onExportExcel},"\u5bfc\u51fa\u56fe\u4e2d\u5c55\u793a\u6570\u636e"),r.createElement(J.default.Item,{onClick:function(){return e.onExportAllExcel(m)}},"\u5bfc\u51fa\u6240\u6709\u6307\u6807\u6570\u636e"))},r.createElement("i",{className:"icon-daochu"})):r.createElement(u.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6},r.createElement("i",{className:"icon-daochu",onClick:this.onExportExcel})),r.createElement(u.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6},r.createElement("i",{className:"icon-xiazaitupian",onClick:this.onExportImage})))},r.createElement(B.Z,{theme:"yt_multi_color_10",option:{},style:{width:"100%",height:"100%"},onChartReady:this.getChartRef}))},t}(r.Component);const te=function(e){var t=e.filterReady,a=e.filterChange,n=e.save,i=e.aspectCountData,s=e.fetchingAspectCountData,u=e.selectAspectObj,c=e.aspectType,p=e.aspectTypeFlavor,d=e.aspectVolumeType,f=e.aspectVolumeTypeFlavor,v=e.onFilterChange,m=e.onFlavorChange,E=e.onMsgClick,g=e.aspectTrendData,T=e.fetchingAspectTrendData,y=e.aspectTotalType,b=e.aspectPosType,S=e.aspectNegType,P=e.aspectBusType,C=e.aspectTotalTypeFlavor,O=e.aspectPosTypeFlavor,_=e.aspectNegTypeFlavor,x=e.aspectBusTypeFlavor,A=e.trendEmotion,N=e.aspectDateOptions,F=e.aspectDateType,w=e.aspectDateTypeFlavor,D=e.OnExportRateData,R=u.type,M=r.useRef(),I=r.useState(""),k=I[0],L=I[1],V=r.useState(""),j=V[0],Y=V[1];return r.useEffect((function(){"businessPoint"===R?(L("\u4e1a\u52a1\u89c6\u89d2\u8d8b\u52bf"),Y("")):"businessPoint_aspect"===R?(L(M.current.state.filterName+"-\u6307\u6807\u8d8b\u52bf"),Y(""+M.current.state.filterName)):(L("\u6307\u6807\u8d8b\u52bf"),Y(""))}),[R]),r.createElement("div",{className:"yt_product_aspectTrend_wrapper"},r.createElement(o.Z,{onReady:t,onChange:a,pageType:"ASPECT_TREND",advanceAuthority:!1,valueConf:["fullInfo"],showList:["fullDate","screening","save"],hasHour:!0},r.createElement("div",{className:"content"},r.createElement(U,{ref:M,loading:s,data:i,title:d?h.find((function(e){return e.value===d})).title:"",aspectType:c,aspectTypeFlavor:p,aspectVolumeType:d,aspectVolumeTypeFlavor:f,bsType:u.type||c,onFilterChange:v,onFlavorChange:m,onMsgClick:E,save:n,selectAspectObj:u}),r.createElement(ee,{title:k,loading:T,data:g,trendEmotion:"businessPoint"===R?"businessPoint":A,aspectTotalType:y,aspectPosType:b,aspectNegType:S,aspectBusType:P,aspectTotalTypeFlavor:C,aspectPosTypeFlavor:O,aspectNegTypeFlavor:_,aspectBusTypeFlavor:x,aspectDateOptions:N,aspectDateType:F,aspectDateTypeFlavor:w,selectAspectObj:u,businessPointName:j,onFilterChange:v,onFlavorChange:m,OnExportRateData:D,onMsgClick:E,titleOverlay:r.createElement("div",{className:"yt_product_aspectTrend_trendOverlay"},r.createElement(l.rU,{className:"yt-feedback-read-more",to:"https://skieer.feishu.cn/docs/doccnR37Aig3B0ZG9gtMqRG4hwf",target:"_blank"},"\u4e86\u89e3\u8ba1\u7b97\u516c\u5f0f"))}))))};var ae=a(55609),ne=a(53113),ie=a(64396),se=a(2329),re=["loading"],oe=ie.Z.product.aspectTrend.overview,le=function(e){function t(t){var a;return(a=e.call(this,t)||this)._handleFilterReady=function(e,t){var n=(0,ne.X)(e.dateFilter.numOfDays,!0),i=n.dateOptions,s=n.defaultDateType;a.props.fetchParams({projectId:V.t.get(V.V.curProject).id,filterModel:e.filterModel,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:e.dateFilter,aspectDateOptions:i,aspectDateTypeFlavor:s,filterValues:t.fullInfo.filterValue})},a._handleFilterChange=function(e,t,n){var s=(0,ne.X)(e.dateFilter.numOfDays,!0),r=s.dateOptions;a.props.save({filterModel:e.filterModel,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:(0,i.Z)({},e.dateFilter,{dateGroupType:s.defaultDateType}),aspectDateOptions:r,filterValues:t.fullInfo.filterValue}),a.props.fetchDatas((0,i.Z)({},e,{dateFilter:(0,i.Z)({},e.dateFilter,{dateGroupType:s.defaultDateType})}))},a._handleOnFilterChange=function(e){var t=a.props,n=t.selectAspectObj,s=t.dateFilter;if(e.dateFilter)a.props.fetchDatas((0,i.Z)({},e,{filterModel:e.filterValue,shouldRefreshChart:!0,projectId:V.t.get(V.V.curProject).id}));else if(e.aspectType)a.props.save(e);else if(e.aspectVolumeType)a.props.save({aspectVolumeType:e.aspectVolumeType,selectAspectObj:{value:e.value,type:n.type,color:e.color}});else if(e.trendEmotion)a.props.save(e);else if(e.rateType){switch(e.emotion){case"total":a.props.save({aspectTotalType:e.rateType});break;case"positive":a.props.save({aspectPosType:e.rateType});break;case"negative":a.props.save({aspectNegType:e.rateType});break;case"businessPoint":a.props.save({aspectBusType:e.rateType})}}else e.aspectDateType&&a.props.fetchAspectTrendData({dateFilter:(0,i.Z)({},s,{dateGroupType:e.aspectDateType})})},a._handleOnFlavorChange=function(e){if(void 0!==e.fRateType)switch(e.emotion){case"total":a.props.setDefaultValue({aspectTotalTypeFlavor:e.fRateType});break;case"positive":a.props.setDefaultValue({aspectPosTypeFlavor:e.fRateType});break;case"negative":a.props.setDefaultValue({aspectNegTypeFlavor:e.fRateType});break;case"businessPoint":a.props.setDefaultValue({aspectBusTypeFlavor:e.fRateType})}else e.aspectDateTypeFlavor,a.props.setDefaultValue(e)},a._handleOnMsgClick=function(e,t,n,i,s){var r=e.componentSubType,o=e.seriesName,l=e.name,u=a.props,c=u.dateFilter,p=u.headerFilterParamsNew,d=u.filterValues,f=u.projectId,v=u.selectAspectObj.type,h=u.aspectVolumeType,m=u.aspectCountData,E=u.aspectTrendData,g=u.aspectDateType;if("bar"===r){var T="businessPoint"===v?m.find((function(e){return e.businessPoint[0].name===l})).businessPoint[0].id:null,y={dateFilter:c,filterModel:{project:[f],messageCategory:["COMMENT"]},filterValues:(0,Z.ZP)(d,(function(e){var t=e.find((function(e){return"DEFAULT"===e.id}));t?(t.values.find((function(e){return"CATEGORY_TYPE"===e.id}))||t.values.push({id:"CATEGORY_TYPE",label:"\u6570\u636e\u7c7b\u578b",values:["\u7535\u5546\u8bc4\u8bba"]}),t.values.find((function(e){return"MESSAGE_TYPE"===e.id}))||t.values.push({id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]}),t.values.find((function(e){return"EFFECTIVENESS_TYPE"===e.id}))||t.values.push({id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["\u6709\u6548\u6570\u636e"]})):e.push({id:"DEFAULT",values:[{id:"CATEGORY_TYPE",label:"\u6570\u636e\u7c7b\u578b",values:["\u7535\u5546\u8bc4\u8bba"]},{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]},{id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["\u6709\u6548\u6570\u636e"]}]});var a=e.find((function(e){return"ASPECT_MODEL"===e.id}));a?a.values.find((function(e){return"ASPECT_ESCORE"===e.id}))?e.find((function(e){return"ASPECT_MODEL"===e.id})).values.find((function(e){return"ASPECT_ESCORE"===e.id})).values="negative"===h?["\u8d1f\u9762\u6307\u6807"]:"positive"===h?["\u6b63\u9762\u6307\u6807"]:["\u8d1f\u9762\u6307\u6807","\u6b63\u9762\u6307\u6807"]:a.values.push({id:"ASPECT_ESCORE",label:"\u6307\u6807\u60c5\u611f",values:"negative"===h?["\u8d1f\u9762\u6307\u6807"]:"positive"===h?["\u6b63\u9762\u6307\u6807"]:["\u8d1f\u9762\u6307\u6807","\u6b63\u9762\u6307\u6807"]}):e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT_ESCORE",label:"\u6307\u6807\u60c5\u611f",values:"negative"===h?["\u8d1f\u9762\u6307\u6807"]:"positive"===h?["\u6b63\u9762\u6307\u6807"]:["\u8d1f\u9762\u6307\u6807","\u6b63\u9762\u6307\u6807"]}]});var n=e.find((function(e){return"ASPECT_MODEL"===e.id}));n?(T&&(n.values.find((function(e){return"BUSINESS_POINT"===e.id}))?n.values.find((function(e){return"BUSINESS_POINT"===e.id})).values=[T]:n.values.push({id:"BUSINESS_POINT",label:"\u4e1a\u52a1\u89c6\u89d2",values:[l]})),"aspect1"===v&&(n.values.find((function(e){return"ASPECT1"===e.id}))?n.values.find((function(e){return"ASPECT1"===e.id})).values=[l]:n.values.push({id:"ASPECT1",label:"\u4e00\u7ea7\u6307\u6807",values:[l]})),"aspect2"!==v&&"businessPoint_aspect"!==v||(n.values.find((function(e){return"ASPECT2"===e.id}))?n.values.find((function(e){return"ASPECT2"===e.id})).values=[l]:n.values.push({id:"ASPECT2",label:"\u4e8c\u7ea7\u6307\u6807",values:[l]}))):(T&&e.push({id:"ASPECT_MODEL",values:[{id:"BUSINESS_POINT",label:"\u4e1a\u52a1\u89c6\u89d2",values:[l]}]}),"aspect1"===v&&e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT1",label:"\u4e00\u7ea7\u6307\u6807",values:[l]}]}),"aspect2"!==v&&"businessPoint_aspect"!==v||e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT2",label:"\u4e8c\u7ea7\u6307\u6807",values:[l]}]}))})),headerFilterParamsNew:(0,Z.ZP)(p,(function(e){var t=e.find((function(e){return"DEFAULT"===e.id}));t?(t.values.find((function(e){return"CATEGORY_TYPE"===e.id}))||t.values.push({id:"CATEGORY_TYPE",label:"\u6570\u636e\u7c7b\u578b",values:["COMMENT"]}),t.values.find((function(e){return"MESSAGE_TYPE"===e.id}))||t.values.push({id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:["COMMENT_APPEND","MESSAGE_COMMENT"]}),t.values.find((function(e){return"EFFECTIVENESS_TYPE"===e.id}))||t.values.push({id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["useful"]})):e.push({id:"DEFAULT",values:[{id:"CATEGORY_TYPE",label:"\u6570\u636e\u7c7b\u578b",values:["COMMENT"]},{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:["COMMENT_APPEND","MESSAGE_COMMENT"]},{id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["useful"]}]});var a=e.find((function(e){return"ASPECT_MODEL"===e.id}));a?a.values.find((function(e){return"ASPECT_ESCORE"===e.id}))?e.find((function(e){return"ASPECT_MODEL"===e.id})).values.find((function(e){return"ASPECT_ESCORE"===e.id})).values="negative"===h?["3"]:"positive"===h?["8"]:["3","8"]:a.values.push({id:"ASPECT_ESCORE",label:"\u6307\u6807\u60c5\u611f",values:"negative"===h?["3"]:"positive"===h?["8"]:["3","8"]}):e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT_ESCORE",label:"\u6307\u6807\u60c5\u611f",values:"negative"===h?["3"]:"positive"===h?["8"]:["3","8"]}]});var n=e.find((function(e){return"ASPECT_MODEL"===e.id}));n?(T&&(n.values.find((function(e){return"BUSINESS_POINT"===e.id}))?n.values.find((function(e){return"BUSINESS_POINT"===e.id})).values=[T]:n.values.push({id:"BUSINESS_POINT",label:"\u4e1a\u52a1\u89c6\u89d2",values:[T]})),"aspect1"===v&&(n.values.find((function(e){return"ASPECT1"===e.id}))?n.values.find((function(e){return"ASPECT1"===e.id})).values=[l]:n.values.push({id:"ASPECT1",label:"\u4e00\u7ea7\u6307\u6807",values:[l]})),"aspect2"!==v&&"businessPoint_aspect"!==v||(n.values.find((function(e){return"ASPECT2"===e.id}))?n.values.find((function(e){return"ASPECT2"===e.id})).values=[l]:n.values.push({id:"ASPECT2",label:"\u4e8c\u7ea7\u6307\u6807",values:[l]}))):(T&&e.push({id:"ASPECT_MODEL",values:[{id:"BUSINESS_POINT",label:"\u4e1a\u52a1\u89c6\u89d2",values:[T]}]}),"aspect1"===v&&e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT1",label:"\u4e00\u7ea7\u6307\u6807",values:[l]}]}),"aspect2"!==v&&"businessPoint_aspect"!==v||e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT2",label:"\u4e8c\u7ea7\u6307\u6807",values:[l]}]}))})),projectId:f,filterTip:null};window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(y)))}if("line"===r){var b={dateFilter:(0,se.X_)("line",c,n,i,g),filterModel:{project:[f],messageCategory:["COMMENT"]},filterValues:(0,Z.ZP)(d,(function(e){var t=e.find((function(e){return"DEFAULT"===e.id}));t?(t.values.find((function(e){return"CATEGORY_TYPE"===e.id}))||t.values.push({id:"CATEGORY_TYPE",label:"\u6570\u636e\u7c7b\u578b",values:["\u7535\u5546\u8bc4\u8bba"]}),t.values.find((function(e){return"MESSAGE_TYPE"===e.id}))||t.values.push({id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]}),t.values.find((function(e){return"EFFECTIVENESS_TYPE"===e.id}))||t.values.push({id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["\u6709\u6548\u6570\u636e"]})):e.push({id:"DEFAULT",values:[{id:"CATEGORY_TYPE",label:"\u6570\u636e\u7c7b\u578b",values:["\u7535\u5546\u8bc4\u8bba"]},{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]},{id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["\u6709\u6548\u6570\u636e"]}]});var a=e.find((function(e){return"ASPECT_MODEL"===e.id}));a?a.values.find((function(e){return"ASPECT_ESCORE"===e.id}))?e.find((function(e){return"ASPECT_MODEL"===e.id})).values.find((function(e){return"ASPECT_ESCORE"===e.id})).values=s.includes("neg")?["\u8d1f\u9762\u6307\u6807"]:s.includes("pos")?["\u6b63\u9762\u6307\u6807"]:["\u8d1f\u9762\u6307\u6807","\u6b63\u9762\u6307\u6807"]:a.values.push({id:"ASPECT_ESCORE",label:"\u6307\u6807\u60c5\u611f",values:s.includes("neg")?["\u8d1f\u9762\u6307\u6807"]:s.includes("pos")?["\u6b63\u9762\u6307\u6807"]:["\u8d1f\u9762\u6307\u6807","\u6b63\u9762\u6307\u6807"]}):e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT_ESCORE",label:"\u6307\u6807\u60c5\u611f",values:s.includes("neg")?["\u8d1f\u9762\u6307\u6807"]:s.includes("pos")?["\u6b63\u9762\u6307\u6807"]:["\u8d1f\u9762\u6307\u6807","\u6b63\u9762\u6307\u6807"]}]});var n=e.find((function(e){return"ASPECT_MODEL"===e.id})),i="businessPoint"===v?E.find((function(e){return e.businessPoint.name===o})).businessPoint.id:null;n?(i&&(n.values.find((function(e){return"BUSINESS_POINT"===e.id}))?n.values.find((function(e){return"BUSINESS_POINT"===e.id})).values=[i]:n.values.push({id:"BUSINESS_POINT",label:"\u4e1a\u52a1\u89c6\u89d2",values:[o]})),"aspect1"===v&&(n.values.find((function(e){return"ASPECT1"===e.id}))?n.values.find((function(e){return"ASPECT1"===e.id})).values=[o]:n.values.push({id:"ASPECT1",label:"\u4e00\u7ea7\u6307\u6807",values:[o]})),"aspect2"!==v&&"businessPoint_aspect"!==v||(n.values.find((function(e){return"ASPECT2"===e.id}))?n.values.find((function(e){return"ASPECT2"===e.id})).values=[o]:n.values.push({id:"ASPECT2",label:"\u4e8c\u7ea7\u6307\u6807",values:[o]}))):(i&&e.push({id:"ASPECT_MODEL",values:[{id:"BUSINESS_POINT",label:"\u4e1a\u52a1\u89c6\u89d2",values:[o]}]}),"aspect1"===v&&e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT1",label:"\u4e00\u7ea7\u6307\u6807",values:[o]}]}),"aspect2"!==v&&"businessPoint_aspect"!==v||e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT2",label:"\u4e8c\u7ea7\u6307\u6807",values:[o]}]}))})),headerFilterParamsNew:(0,Z.ZP)(p,(function(e){var t=e.find((function(e){return"DEFAULT"===e.id}));t?(t.values.find((function(e){return"CATEGORY_TYPE"===e.id}))||t.values.push({id:"CATEGORY_TYPE",label:"\u6570\u636e\u7c7b\u578b",values:["COMMENT"]}),t.values.find((function(e){return"MESSAGE_TYPE"===e.id}))||t.values.push({id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:["COMMENT_APPEND","MESSAGE_COMMENT"]}),t.values.find((function(e){return"EFFECTIVENESS_TYPE"===e.id}))||t.values.push({id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["useful"]})):e.push({id:"DEFAULT",values:[{id:"CATEGORY_TYPE",label:"\u6570\u636e\u7c7b\u578b",values:["COMMENT"]},{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:["COMMENT_APPEND","MESSAGE_COMMENT"]},{id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["useful"]}]});var a=e.find((function(e){return"ASPECT_MODEL"===e.id}));a?a.values.find((function(e){return"ASPECT_ESCORE"===e.id}))?e.find((function(e){return"ASPECT_MODEL"===e.id})).values.find((function(e){return"ASPECT_ESCORE"===e.id})).values=s.includes("neg")?["3"]:s.includes("pos")?["8"]:["3","8"]:a.values.push({id:"ASPECT_ESCORE",label:"\u6307\u6807\u60c5\u611f",values:s.includes("neg")?["3"]:s.includes("pos")?["8"]:["3","8"]}):e.push({id:"ASPECT_MODEL",values:[{id:"ASPECT_ESCORE",label:"\u6307\u6807\u60c5\u611f",values:s.includes("neg")?["3"]:s.includes("pos")?["8"]:["3","8"]}]});var n=e.find((function(e){return"ASPECT_MODEL"===e.id})),i="businessPoint"===v?E.find((function(e){return e.businessPoint.name===o})).businessPoint.id:null;n?(i&&(n.values.find((function(e){return"BUSINESS_POINT"===e.id}))?n.values.find((function(e){return"BUSINESS_POINT"===e.id})).values=[i]:n.values.push({id:"BUSINESS_POINT",label:"\u4e1a\u52a1\u89c6\u89d2",values:[i]})),"aspect1"===v&&(n.values.find((function(e){return"ASPECT1"===e.id}))?n.values.find((function(e){return"ASPECT1"===e.id})).values=[o]:n.values.push({id:"ASPECT1",label:"\u4e00\u7ea7\u6307\u6807",values:[o]})),"aspect2"!==v&&"businessPoint_aspect"!==v||(n.values.find((function(e){return"ASPECT2"===e.id}))?n.values.find((function(e){return"ASPECT2"===e.id})).values=[o]:n.values.push({id:"ASPECT2",label:"\u4e8c\u7ea7\u6307\u6807",values:[o]}))):(i&&e.push({id:"ASPECT_MODEL",values:[{id:"BUSINESS_POINT",label:"\u4e1a\u52a1\u89c6\u89d2",values:[i]}]}),"aspect1"===v&&e.push({id:"ASPECT1",label:"\u4e00\u7ea7\u6307\u6807",values:[o]}),"aspect2"!==v&&"businessPoint_aspect"!==v||e.push({id:"ASPECT2",label:"\u4e8c\u7ea7\u6307\u6807",values:[o]}))})),projectId:f,filterTip:null};window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(b)))}},a._handleOnExportRateData=function(e){a.props.fetchExportRateData(e)},a.state={},a.event={filterReady:a._handleFilterReady,filterChange:a._handleFilterChange,onFilterChange:a._handleOnFilterChange,onFlavorChange:a._handleOnFlavorChange,onMsgClick:a._handleOnMsgClick,OnExportRateData:a._handleOnExportRateData},a}(0,s.Z)(t,e);var a=t.prototype;return a.componentWillUnmount=function(){this.props.clean()},a.render=function(){return r.createElement(te,(0,i.Z)({},this.props,this.state,this.event))},t}(r.PureComponent);const ue=(0,ae.connect)((function(e){var t=e.loading,a=(0,n.Z)(e,re);return(0,i.Z)({},a[oe],{fetchingAspectCountData:t.effects[oe+"/fetchAspectCountData"]||!1,fetchingAspectCount:t.effects[oe+"/fetchAspectCount"]||!1,fetchingPositiveAspectRate:t.effects[oe+"/fetchPositiveAspectRate"]||!1,fetchingNegativeAspectRate:t.effects[oe+"/fetchNegativeAspectRate"]||!1,fetchingAspectTrendData:t.effects[oe+"/fetchAspectTrendData"]||!1})}),(function(e){return{fetchParams:function(t){return e({type:oe+"/fetchParams",payload:t})},setDefaultValue:function(t){return e({type:oe+"/setDefaultValue",payload:t})},fetchDatas:function(t){return e({type:oe+"/fetchDatas",payload:t})},save:function(t){return e({type:oe+"/save",payload:t})},clean:function(t){return e({type:oe+"/clean",payload:t})},fetchAspectCountData:function(t){return e({type:oe+"/fetchAspectCountData",payload:t})},fetchAspectTrendData:function(t){return e({type:oe+"/fetchAspectTrendData",payload:t})},fetchExportRateData:function(t){return e({type:oe+"/fetchExportRateData",payload:t})}}}))(le)}}]);