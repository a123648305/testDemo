"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[4702],{94702:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var n=a(63366),r=a(87462),o=a(94578),c=a(67294),i=a(27310),l=a(8201),s=a(94530),u=a(50976),p=a(39432),m=a(60496),d=a(98191),f=a(970),g=a(70715),h=a(94644);function v(e,t,a,n){var r=n&&n.length>0&&n[0].values[0].values,o=[];try{o=e.sort((function(e,t){return!!(r&&t.id&&e.id)&&r.indexOf(e.id)-r.indexOf(t.id)})),o=(0,f.zV)(e);var c=[].concat(o.map((function(e){return e.name}))),i=o.map((function(e){return e[a]})),l=o[0][t].sort((function(e,t){return t[a]-e[a]})).map((function(e){return[e.aspect]}));return[{dimensions:c,source:i},{dimensions:["\u6307\u6807"].concat(o.map((function(e){return e.name}))),source:o.reduce((function(e,n){return n[t].forEach((function(t){return e&&e.some((function(e){return e[0]===t.aspect}))&&e.find((function(e){return e[0]===t.aspect})).push(t[a])})),e}),[].concat(l))}]}catch(s){}}var y=function(e,t,a,n,r,o,c){var i=a.includes("\u5360\u6bd4")?function(e,t,a,n){var r=n&&n.length>0&&n[0].values[0].values,o=[];try{o=e.sort((function(e,t){return!!(r&&t.id&&e.id)&&r.indexOf(e.id)-r.indexOf(t.id)})),o=(0,f.zV)(e);var c=[].concat(o.map((function(e){return e.name}))),i=(0,f.yE)(t),l=i.find((function(e){return e.name===o[0].name})).aspectTotal,s=o.map((function(e){return e.aspectTotal})),u=o[0][a].sort((function(e,t){return 0===l?t.aspectTotal-e.aspectTotal:t.aspectTotal/l-e.aspectTotal/l})).map((function(e){return[e.aspect]}));return[{dimensions:c,source:s},{dimensions:["\u6307\u6807"].concat(o.map((function(e){return e.name}))),source:o.reduce((function(e,t){return t[a].forEach((function(a){return e&&e.some((function(e){return e[0]===a.aspect}))&&e.find((function(e){return e[0]===a.aspect})).push(0===i.find((function(e){return e.name===t.name})).aspectTotal?0:a.aspectTotal/i.find((function(e){return e.name===t.name})).aspectTotal)})),e}),[].concat(u))}]}catch(p){}}(e,t,n,o):a.includes("\u63d0\u53ca\u7387")?v(e,n,"mentionRate",o):v(e,n,r,o);return c&&(i[1].source=c.map((function(e){return i[1].source.find((function(t){return t[0]===e}))}))),i},C=a(45697),E=a.n(C),T=a(43036),b=function(e){var t=e.onChange,a=e.check,n=e.enable,r=void 0===n||n,o=c.useState(a),i=o[0],l=o[1];return c.useEffect((function(){l(a)}),[a]),c.createElement("div",{className:"yt_range_button_wrapper"},c.createElement(T.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:i?"\u5404\u56fe\u72ec\u7acb\u6392\u5e8f":c.createElement("div",null,c.createElement("div",null,"\u6b64\u56fe\u4f5c\u4e3a\u5176\u4ed6\u56fe"),c.createElement("div",null,"\u8868\u7684\u6392\u5e8f\u4f9d\u636e"))},c.createElement("span",{onClick:function(){if(r){var e=!i;t&&t(e),l(e)}},style:{color:i?"#0847a6":"#8c8c8c"},className:"button_trigger "+(r?"enable":"disable")},c.createElement("i",{className:"icon-cem_independent"}))))};b.propTypes={check:E().bool,onChange:E().func,enable:E().bool};const _=b;var N=function(e){var t=e.title,a=e.titleOverlay,n=e.loading,o=e.data,i=e.fetchedData,s=e.aspectType,v=e.aspectTypeFlavor,C=e.volOptions,E=e.volType,T=e.volTypeFlavor,b=e.onFilterChange,N=e.onFlavorChange,A=e.cachedAnalysisObjs,S=e.onClick,F=e.rangeChecked,k=e.chartType,R=e.rangedNames,x=c.useState(void 0),w=x[0],P=x[1],O=c.useState(void 0),Z=O[0],I=O[1],L=c.useState(F),D=L[0],z=L[1];c.useEffect((function(){w&&((0,l.P)(o)?I(y(o,i,t,s,E,A,R)):P(void 0))}),[o,w,s,E,R]),c.useEffect((function(){z(F)}),[F]),c.useEffect((function(){if(Z){var e=function(e,t){var a=e&&e[1].dimensions.slice(1),n=e&&e[0].dimensions;return{title:{text:t},grid:[{left:36,right:"69.4%",top:"30%",bottom:"3%",height:"55%",containLabel:!0},{left:"34%",top:"30%",right:36,bottom:"3%",height:"55%",containLabel:!0}],dataZoom:[{show:"slider",left:"35%",right:"4%",bottom:15,xAxisIndex:1,height:16,handleSize:"100%",showDetail:!1}],dataset:e&&e.map((function(e){return(0,r.Z)({},e,{sourceHeader:!1})})),tooltip:{trigger:"axis"},legend:{top:40,left:"33%",right:40,itemWidth:14,itemHeight:12,type:"scroll",pageIconSize:12,data:n,icon:g.W4.lineRing},xAxis:[{type:"category",gridIndex:0,boundaryGap:[0,.01],data:a,axisLabel:{interval:0,formatter:function(e){return e.length>7?e.substring(0,7)+"...":e}},axisTick:{show:!0,alignWithLabel:!0}},{type:"category",gridIndex:1,boundaryGap:!1,axisTick:{show:!0},triggerEvent:!0}],yAxis:e&&e.map((function(e,a){return{minInterval:t.includes("\u58f0\u91cf")||0===a&&t.includes("\u5360\u6bd4")?1:void 0,gridIndex:a,axisLabel:{showMinLabel:!1,formatter:function(e){return t.includes("\u58f0\u91cf")||0===a&&t.includes("\u5360\u6bd4")?p.ZP.formatNumber(e):(100*e).toFixed(2)+"%"}}}})),series:[{type:"bar",datasetIndex:0,barMaxWidth:24,xAxisIndex:0,yAxisIndex:0,tooltip:{trigger:"item",formatter:function(e){var a=e.marker,n=e.data,r=n.value;return a+" "+n.name+"\uff1a"+(t.includes("\u58f0\u91cf")||t.includes("\u5360\u6bd4")?p.ZP.formatNumber(r):(100*r).toFixed(2)+"%")}},data:e.length&&e[0].source.map((function(t,a){return{value:t,name:e[0].dimensions[a],itemStyle:{color:g.Fq[a]}}}))}].concat(Array.from({length:e[1].dimensions.length-1}).map((function(e,a){return{type:"line",xAxisIndex:1,yAxisIndex:1,datasetIndex:1,areaStyle:{opacity:.1},itemStyle:{color:g.Fq[a]},tooltip:{trigger:"item",formatter:function(e){var a=e.marker,n=e.data,r=e.name,o=e.seriesName,c=n[e.seriesIndex];return'<span class="yt_echart_tooltip_title"><span style="color: #262626;">'+r+"</span></span><br />"+a+" "+o+"\uff1a"+(t.includes("\u58f0\u91cf")?p.ZP.getApproximateNum(c):(100*c).toFixed(2)+"%")}}}})))}}(Z,t);w.clear(),w.setOption(e)}}),[Z]);return c.createElement("div",{className:"bar_trend_chart"},c.createElement(l.Z,{data:o,loading:n,className:"product_compare_chart_wrap",renderTitle:c.createElement(d.Z,{title:t,titleOverlay:a,data:o,onMoreClick:function(e){return function(e,t,a,n,r,o,c,i,l){if("image"===t)(0,h._v)(e,r);else if("data"===t){var s=y(a,n,r,o,c,i,l);if(s){l&&(s[1].source=l.map((function(e){return s[1].source.find((function(t){return t[0]===e}))})));var u=["\u6307\u6807\u58f0\u91cf","\u6307\u6807\u6b63\u9762\u58f0\u91cf","\u6307\u6807\u8d1f\u9762\u58f0\u91cf"].includes(r),p="\u6307\u6807\u5360\u6bd4"===r?s[0].source:s[0].source.map((function(e){return(100*e).toFixed(2)+"%"})),m=u?s[1].source:s[1].source.map((function(e){return e.map((function(e,t){return t>0?(100*e).toFixed(2)+"%":e}))})),d=[s[0].dimensions,p],f=[s[1].dimensions].concat(m),g=[].concat(d,[[""]],f);(0,h.aT)([g],r)}}}(w,e,o,i,t,s,E,A,R)}},c.createElement(_,{check:D,onChange:function(e){var a;!R||D?b(((a={})[k+"RangeCheck"]=e,a.tarAspectType=e?s:void 0,a.tarRangedNames=e?Z[1].source.reduce((function(e,t,a){return e.push(t[0]),e}),[]):void 0,a)):new Promise((function(e,a){e(y(o,i,t,s,E,A,void 0))})).then((function(t){var a;b(((a={})[k+"RangeCheck"]=e,a.tarRangedNames=e?t[1].source.reduce((function(e,t){return e.push(t[0]),e}),[]):void 0,a)),I(t)}));z(e)}}),s&&c.createElement(m.Z,{options:f.Rx,activeObj:s,flavor:v,onFlavorChange:function(e){var t;return N(((t={})[k+"AspectType"]=e,t))},onChange:function(e){var a;D?new Promise((function(a,n){a(y(o,i,t,e,E,A,void 0))})).then((function(t){var a;b(((a={})[k+"RangeCheck"]=D,a.tarAspectType=e,a.tarRangedNames=t[1].source.reduce((function(e,t){return e.push(t[0]),e}),[]),a))})):b(((a={})[k+"AspectType"]=e,a))},enable:!R||D}),E&&c.createElement(m.Z,{objName:k+"Type",options:C,activeObj:E,flavor:T,onFlavorChange:N,onChange:b}))},c.createElement(u.Z,{theme:"yunting_multi_color",className:"yt_echarts_style",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return P(e)},onEvents:{click:S}})))};const A=N;N.propTypes={title:E().string,loading:E().bool,data:E().oneOfType([E().string,E().object]),dateRange:E().number,timeType:E().string,fTimeType:E().string,aspectType:E().string,aspectTypeFlavor:E().string,onFilterChange:E().func,onFlavorChange:E().func,onClick:E().func,rangeChecked:E().bool,chartType:E().string,rangedNames:E().arrayOf(E().string)};var S=a(71339),F=function(e){var t=e.key,a=e.data,n=e.loading,r=e.aspectListType,o=e.aspectListTypeFlavor,i=e.onFilterChange,s=e.onFlavorChange,u=c.useState(0),p=u[0],g=u[1],v=c.useState([]),y=v[0],C=v[1],E=c.useState(1),T=E[0],b=E[1],_=c.useState(10),N=_[0],A=_[1],F=function(){var e=document.getElementById("detail_content");g(e.clientWidth)};c.useEffect((function(){return window.addEventListener("resize",F),F(),function(){return window.removeEventListener("resize",F)}}),[]),c.useEffect((function(){if((0,l.P)(a)){var e=a[r].slice(1);C(e.slice((T-1)*N,T*N))}}),[a,r,T,N]);return c.createElement("div",{key:t},c.createElement(l.Z,{className:"yt_product_compare_detail_wrapper",data:a,loading:n,renderTitle:c.createElement("span",{className:"product_compare_detail_header"},c.createElement("span",{style:{fontWeight:"bold"}},"\u8be6\u7ec6\u6570\u636e"),c.createElement(d.Z,{data:a,onMoreClick:function(e){"data"===e&&(0,l.P)(a)&&(0,h.aT)([a[r].map((function(e){return e.map((function(t,a){return t%1?(100*t).toFixed(a===e.length-1?4:2)+"%":t}))}))],"\u8be6\u7ec6\u6570\u636e")},moreOptions:[{title:"\u5bfc\u51fa\u6570\u636e",type:"data"}]},c.createElement(m.Z,{activeObj:r,flavor:o,options:f.Rx,objName:"aspectListType",onChange:i,onFlavorChange:s})))},(0,l.P)(a)&&c.createElement("div",{id:"detail_content"},c.createElement(S.Z,{loading:!1,total:a[r].length-1,data:y,columns:function(){var e=p-16-40-32-5;return[{label:"",width:16}].concat(a[r][0].reduce((function(t,a,n,o){return t.push({label:a,width:1*e/o.length,render:function(e){var t=e[n];return r.includes("aspect1")?n>5||3===n?(100*t).toFixed(2)+"%":t:r.includes("aspect2")?n>6||4===n?(100*t).toFixed(2)+"%":t:void 0}}),t}),[]),[{label:"",width:16}])}(),pageSize:N,pageIndex:T,onPageChange:b,onPageSizeChange:function(e){A(e),b(1)}}))))};const k=F;F.propTypes={key:E().string,data:E().any,total:E().number,pageIndex:E().number,pageSize:E().number,loading:E().bool,onPageChange:E().func,onPageSizeChange:E().func,onAspectTypeChange:E().func};var R=a(2329),x=a(35103),w=a(91063);const P=function(e){var t,a,n=e.cmtData,r=e.cmtAspectType,o=e.cmtAspFlavor,u=e.cmtType,p=e.cmtFlavor,m=e.cmtRangeCheck,d=e.volData,g=e.volAspectType,h=e.volAspFlavor,v=e.volType,y=e.volFlavor,C=e.volRangeCheck,E=e.menData,T=e.menAspectType,b=e.menAspFlavor,_=e.menRangeCheck,N=e.perData,S=e.perAspectType,F=e.perAspFlavor,P=e.perRangeCheck,O=e.aspectData,Z=e.pageSize,I=e.pageIndex,L=e.total,D=e.aspectListType,z=e.aspectListTypeFlavor,M=e.onPageChange,j=e.onPageSizeChange,V=e.count,U=e.countLoading,W=e.countSameRateType,H=e.positiveRate,B=e.postiveLoading,G=e.positiveSameRateType,J=e.negativeRate,q=e.negativeLoading,K=e.negativeSameRateType,Y=e.onSetSameRate,Q=e.tarRangedNames,$=e.fetchedAspectData,X=e.loading,ee=e.analysisModel,te=e.onChartClick,ae=e.onFilterChange,ne=e.onFlavorChange,re=e.onFilterReady;return c.createElement("div",{className:"yt_productAnalysis_compareProduct_wrapper"},c.createElement(x.Z,{onReady:re,onChange:ae,pageType:w.Gy,resourceKeys:"ASPECT_TREE.data.ANALYZE_PRODUCT",advanceAuthority:!1,valueConf:["fullInfo"],showList:["fullDate","screening","save"],hasHour:!0},c.createElement("div",{className:"content",id:"detail_content"},c.createElement(i.Z,{orientation:"horizontal",colNumber:4,showList:["count","positive","negative"]},c.createElement(s.Z,{key:"count",style:{width:"100%",height:"160px"},loading:U,data:(0,l.P)(V)?[{name:"\u6307\u6807\u58f0\u91cf",count:V.usefulAspectCount,format:"myriad"},{name:(0,R.kV)(W)+"\u540c\u6bd4",count:V.sameRate,rise:V.sameRate&&V.sameRate>0,format:"percent"},{name:"\u73af\u6bd4",count:V.circleRate,rise:V.circleRate&&V.circleRate>0,format:"percent"},{name:"\u6709\u6548\u8bc4\u8bba",count:V.usefulCommentCount,format:"myriad"},{name:"\u6307\u6807\u63d0\u53ca\u7387",count:V.aspectMentionRate,format:"percent"}]:H,tip:f.aH,compare:V&&V.sameRateType,onSetting:function(e){return Y(e,"USEFUL_ASPECT_COUNT_CARD")}}),c.createElement(s.Z,{key:"positive",style:{width:"100%",height:"160px"},loading:B,data:(0,l.P)(H)?[{name:"\u6307\u6807\u597d\u8bc4\u7387",count:H.positiveAspectRate,format:"percent"},{name:(0,R.kV)(G)+"\u540c\u6bd4",count:H.sameRate,rise:H.sameRate&&H.sameRate>0,format:"percent"},{name:"\u73af\u6bd4",count:H.circleRate,rise:H.circleRate&&H.circleRate>0,format:"percent"},{name:"\u6b63\u9762\u58f0\u91cf",count:H.usefulPositiveAspectCount,format:"myriad"},{name:"\u6307\u6807\u58f0\u91cf",count:H.usefulAspectCount,format:"myriad"}]:H,tip:f.qR,compare:H&&H.sameRateType,onSetting:function(e){return Y(e,"POSITIVE_ASPECT_RATE_CARD")}}),c.createElement(s.Z,{key:"negative",style:{width:"100%",height:"160px"},loading:q,data:(0,l.P)(J)?[{name:"\u6307\u6807\u5dee\u8bc4\u7387",count:J.negativeAspectRate,format:"percent"},{name:(0,R.kV)(K)+"\u540c\u6bd4",count:J.sameRate,rise:J.sameRate&&J.sameRate>0,format:"percent"},{name:"\u73af\u6bd4",count:J.circleRate,rise:J.circleRate&&J.circleRate>0,format:"percent"},{name:"\u8d1f\u9762\u58f0\u91cf",count:J.usefulNegativeAspectCount,format:"myriad"},{name:"\u6307\u6807\u58f0\u91cf",count:J.usefulAspectCount,format:"myriad"}]:J,tip:f.k_,compare:J&&J.sameRateType,onSetting:function(e){return Y(e,"NEGATIVE_ASPECT_RATE_CARD")}})),c.createElement(i.Z,{className:"bar_trend_table",orientation:"vertical",showList:["cmt","vol","men","per","detail"]},c.createElement(A,{key:"cmt",chartType:"cmt",title:f.JM.find((function(e){return e.value.includes(u)})).title,titleOverlay:f.ct,loading:X,data:n,aspectType:r,aspectTypeFlavor:o,volOptions:f.JM,volType:u,volTypeFlavor:p,onFilterChange:ae,onFlavorChange:ne,cachedAnalysisObjs:ee,onClick:te,rangeChecked:m,rangedNames:Q}),c.createElement(A,{key:"vol",chartType:"vol",title:f.BI.find((function(e){return e.value.includes(v)})).title,loading:X,data:d,aspectType:g,aspectTypeFlavor:h,volOptions:f.BI,volType:v,volTypeFlavor:y,onFilterChange:ae,onFlavorChange:ne,cachedAnalysisObjs:ee,onClick:te,rangeChecked:C,rangedNames:Q}),c.createElement(A,{key:"men",chartType:"men",title:"\u6307\u6807\u63d0\u53ca\u7387",titleOverlay:"\u300c\u6307\u6807\u63d0\u53ca\u7387\u300d\u662f\u6307\u9009\u4e2d\u7684\u6d88\u606f\u4e2d\uff0c\u6307\u6807\u7684\u58f0\u91cf\xf7\u6d88\u606f\u6570\u91cf\u3002",loading:X,data:E,aspectType:T,aspectTypeFlavor:b,onFilterChange:ae,onFlavorChange:ne,cachedAnalysisObjs:ee,onClick:te,rangeChecked:_,rangedNames:Q}),c.createElement(A,{key:"per",chartType:"per",title:"\u6307\u6807\u5360\u6bd4",titleOverlay:f.$j,loading:X,data:N,fetchedData:$,aspectType:S,aspectTypeFlavor:F,onFilterChange:ae,onFlavorChange:ne,cachedAnalysisObjs:ee,rangeChecked:P,rangedNames:Q}),c.createElement(k,{key:"detail",title:"\u8be6\u7ec6\u6570\u636e",name:null!=ee&&ee.length?null==(t=ee[0])||null==(a=t.values[0])?void 0:a.label:"\u54c1\u724c",aspectListType:D,aspectListTypeFlavor:z,total:L,data:O,pageSize:Z,pageIndex:I,loading:X,onPageChange:M,onPageSizeChange:j,onFilterChange:ae,onFlavorChange:ne})))))};var O=a(69058),Z=a(35239),I=a(55609),L=a(64396),D=a(35836),z=["loading"],M=(L.Z.screening,["cmtRangeCheck","volRangeCheck","menRangeCheck","perRangeCheck"]),j=function(e){function t(t){var a;return(a=e.call(this,t)||this)._handleOnFilterReady=function(e,t){a.props.fetchParams({projectId:Z.t.get(Z.V.curProject).id,headerFilterParamsNew:e.headerFilterParamsNew,analysisModel:e.analysisModel,dateFilter:e.dateFilter,selectAnalySisModel:t.fullInfo.analysisModel,dateRange:e.dateFilter.numOfDays+Math.random()})},a._handleOnPageChange=function(e){a.props.save({pageIndex:e})},a._handleOnPageSizeChange=function(e){a.props.save({pageIndex:1,pageSize:e})},a._handleOnChartClick=function(e,t){var n=e.componentSubType,o=e.componentType,c=e.seriesName,i=e.name,l=e.data,s=e.seriesIndex,u=e.value,p=a.props,m=p.projectId,d=p.dateFilter,f=p.headerFilterParamsNew,g=p.analysisModel,h=p.selectAnalySisModel,v=p.cmtAspectType,y=p.volAspectType,C=p.menAspectType,E=p.perAspectType,T=p.cmtData,b=p.volData,_=p.menData,N=p.perData,A=(p.aspectData,p.fetchedAspectData),S=h[0].values[0],F=t._model.option.title[0].text;if("line"===n&&"series"===o){var k={projectId:m,leftName:"\u7ade\u54c1\u5206\u6790",analyseName:c,type:"EMOTION_ASPECT_LEVEL_BAR",aspect:i,aspectTotal:l[s],dateFilter:d,analysisObjs:S.values.map((function(e){return e.id})),filterModel:(0,r.Z)({},(0,O.bF)(f),{analysis:{id:g[0].values[0].id,name:g[0].values[0].label,type:"CONFIG"===g[0].id?"CONN_CONFIG":g[0].id,values:[A.find((function(e){return e.name===c})).id]}})};F.includes("\u597d\u8bc4")||F.includes("\u5dee\u8bc4")?(k.seriesName=F.includes("\u597d\u8bc4")?"\u6b63\u9762":"\u8d1f\u9762",k.filterModel.aspect={aspect1:v.includes("aspect1")?[i]:[],aspect2:v.includes("aspect2")?[i]:[],emotion:F.includes("\u597d\u8bc4")?["positive"]:["negative"]},window.open("/tab/detail?"+encodeURIComponent(JSON.stringify(k)))):(F.includes("\u6b63\u9762")||F.includes("\u8d1f\u9762"))&&(k.seriesName=F.includes("\u6b63\u9762")?"\u6b63\u9762":"\u8d1f\u9762",k.filterModel.aspect={aspect1:y.includes("aspect1")?[i]:[],aspect2:y.includes("aspect2")?[i]:[],emotion:F.includes("\u6b63\u9762")?["positive"]:["negative"]},window.open("/tab/detail?"+encodeURIComponent(JSON.stringify(k))))}if("xAxis"===o){var R,x,w,P,Z,I;switch(F){case"\u6307\u6807\u597d\u8bc4\u7387":case"\u6307\u6807\u5dee\u8bc4\u7387":case"NES":R=v,x="cmtAspectType",w=T,P="cmtData";break;case"\u6307\u6807\u58f0\u91cf":case"\u6307\u6807\u6b63\u9762\u58f0\u91cf":case"\u6307\u6807\u8d1f\u9762\u58f0\u91cf":R=y,x="volAspectType",w=b,P="volData";break;case"\u6307\u6807\u63d0\u53ca\u7387":R=C,x="menAspectType",w=_,P="menData";break;case"\u6307\u6807\u5360\u6bd4":R=E,x="perAspectType",w=N,P="perData"}if(R.includes("aspect2"))a.props.save(((Z={})[x]="aspect1",Z[P]=A,Z.tarRangedNames=void 0,Z));else a.props.save(((I={})[x]="aspect2",I[P]=w.filter((function(e){return e.aspect1===u})),I.tarRangedNames=void 0,I))}},a._handleOnSetSameRate=function(e,t){a.props.setSameRate({sameRateType:e.compareValue,cartType:t})},a._handleOnFilterChange=function(e,t){var n=a.props,o=n.save,c=n.fetchAspectData,i=n.fetchCountCard,l=n.fetchPositiveCard,s=n.fetchNegativeCard,u=n.fetchedAspectData;e.headerFilterParamsNew&&(JSON.stringify(e.dateFilter)!==JSON.stringify(a.props.dateFilter)&&o({headerFilterParamsNew:e.headerFilterParamsNew,analysisModel:e.analysisModel,selectAnalySisModel:t.fullInfo.analysisModel,dateFilter:e.dateFilter,dateRange:e.dateFilter.numOfDays+Math.random()}),c(e),i(e),l(e),s(e)),Object.keys(e).forEach((function(t){if(["cmtAspectType","cmtType","volAspectType","volType","menAspectType","perAspectType","aspectListType"].includes(t)){var a,n="cmtAspectType"===t?"cmtData":"volAspectType"===t?"volData":"menAspectType"===t?"menData":"perAspectType"===t?"perData":"";o(((a={})[t]=e[t],a[n||""]=u,a))}else M.includes(t)&&o((0,r.Z)({},M.reduce((function(e,t){return e[t]=!1,e}),{}),e.tarAspectType?["cmtAspectType","volAspectType","menAspectType","perAspectType"].reduce((function(t,a){return t[a]=e.tarAspectType,t}),{}):{},e))}))},a._handleOnFlavorChange=function(e){a.props.updateFlavors(e)},a.event={onFilterReady:a._handleOnFilterReady,onFilterChange:a._handleOnFilterChange,onFlavorChange:a._handleOnFlavorChange,onPageChange:a._handleOnPageChange,onPageSizeChange:a._handleOnPageSizeChange,onChartClick:a._handleOnChartClick,onSetSameRate:a._handleOnSetSameRate},a}(0,o.Z)(t,e);var a=t.prototype;return a.componentWillUnmount=function(){this.props.clean()},a.render=function(){return c.createElement(P,(0,r.Z)({},this.props,this.state,this.event))},t}(c.PureComponent);const V=(0,I.connect)((function(e){var t=e.loading,a=(0,n.Z)(e,z);return(0,r.Z)({},a[D.namespace],{loading:t.effects[D.namespace+"/fetchAspectData"]||!1,countLoading:t.effects[D.namespace+"/fetchCountCard"]||!1,postiveLoading:t.effects[D.namespace+"/fetchPositiveCard"]||!1,negativeLoading:t.effects[D.namespace+"/fetchNegativeCard"]||!1})}),(function(e){return{save:function(t){return e({type:D.namespace+"/save",payload:t})},clean:function(){return e({type:D.namespace+"/clean"})},fetchParams:function(t){return e({type:D.namespace+"/fetchParams",payload:t})},setSameRate:function(t){return e({type:D.namespace+"/setSameRate",payload:t})},fetchCountCard:function(t){return e({type:D.namespace+"/fetchCountCard",payload:t})},fetchPositiveCard:function(t){return e({type:D.namespace+"/fetchPositiveCard",payload:t})},fetchNegativeCard:function(t){return e({type:D.namespace+"/fetchNegativeCard",payload:t})},fetchAspectData:function(t){return e({type:D.namespace+"/fetchAspectData",payload:t})},updateFlavors:function(t){return e({type:D.namespace+"/updateFlavors",payload:t})}}}))(j)},25022:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(67294),r=a(92360),o=a(35303),c=a(45697),i=a.n(c),l=[{label:"10\u9879/\u9875",value:10},{label:"20\u9879/\u9875",value:20},{label:"40\u9879/\u9875",value:40},{label:"100\u9879/\u9875",value:100}];const s=function(e){var t=e.onPageChange,a=e.onSizeChange,c=e.total,i=void 0===c?0:c,s=e.pageIndex,u=e.pageSize,p=e.layout,m=e.className,d=e.currLength,f=0===i?0:(s-1)*u+1,g=0===i?0:d?f+d-1:f+u-1;return 0===i?null:n.createElement("div",{className:"yt-awp-pagination "+(m||"")},n.createElement("span",{className:"total_num"},n.createElement("span",null,f+" - "+g+" "),"\u9879\uff0c\u5171",n.createElement("span",null," "+i+" "),"\u9879"),n.createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},n.createElement(r.Pagination,{small:!0,pageSize:u,currentPage:s,pageCount:Math.ceil(i/u),layout:0===i?"":"prev, pager, next",onCurrentChange:t}),void 0===p||p.includes("sizes")?n.createElement(o.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:u||10,onChange:a},l.map((function(e,t){return n.createElement(o.Wx,{key:t,label:e.label,value:e.value},e.label)}))):null))};i().propTypes={onPageChange:i().func,onSizeChange:i().func,total:i().number,pageIndex:i().number,pageSize:i().number,layout:i().string,className:i().string}},71339:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(67294),r=a(92360),o=a(25022),c=a(45697),i=a.n(c),l=function(e){var t=e.data,a=e.total,c=void 0===a?0:a,i=e.loading,l=e.pageIndex,s=e.columns,u=e.pageSize,p=e.onPageChange,m=e.onPageSizeChange,d=e.onSortChange,f=e.defaultSort,g=e.className,h=void 0===g?"":g;return n.useEffect((function(){var e=document.getElementsByClassName("is-sortable")[0];f&&e&&e.classList.add(f.order)}),[f]),n.createElement("div",{className:"yt-awp-content-list "+h},n.createElement(r.Loading,{loading:i,className:"awp-content-loading"},n.createElement(r.Table,{defaultSort:f,columns:s,style:{width:"100%"},data:t,onSortChange:function(e){return d(e)}})),p&&n.createElement(o.Z,{onPageChange:p,onSizeChange:m,total:c,currLength:t.length,pageIndex:l,pageSize:u}))};l.propTypes={data:i().array,total:i().number,loading:i().bool,pageIndex:i().number,columns:i().array,pageSize:i().number,onPageChange:i().func,onPageSizeChange:i().func,onSortChange:i().func,defaultSort:i().any,className:i().string};const s=l},27310:(e,t,a)=>{a.d(t,{Z:()=>u});var n=a(94578),r=a(67294),o=a(45697),c=a.n(o),i=a(92360),l=function(e){var t=e.height;return r.createElement("div",{style:{background:"#fff",height:t,display:"flex",alignItems:"center",justifyContent:"center"}},"Template")},s=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).clientHeight=160,t.notShowList=[],t._handleOnCheckBoxChange=function(e,a){var n,r=t.props,o=r.onChange,c=r.showList;e?(n=c.slice()).push(a):n=c.filter((function(e){return e!==a})),o&&o(n)},t._renderEditableFrame=function(e,a){var n=t.props,o=n.editable,c=n.colNumber,l=void 0===c?1:c;return r.createElement("div",{id:e.key,key:e.key,style:{width:"calc("+100/l+"% - 12px)"},className:o?"child_editable":""},e,o&&r.createElement(i.Checkbox,{checked:a,className:"checkbox_style",onChange:function(a){return t._handleOnCheckBoxChange(a,e.key)}}))},t}(0,n.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.props.children,t=e instanceof Array?e[0]:e,a=document.getElementById(t.key);a&&(this.childHeight=a.clientHeight)},a.render=function(){var e=this,t=this.props,a=t.className,n=void 0===a?"":a,o=t.editable,c=void 0!==o&&o,i=t.orientation,s=void 0===i?"horiziontal":i,u=t.children,p=t.showList,m=void 0===p?[]:p,d=u instanceof Array?u:[u];return this.notShowList=[],r.createElement("div",{className:"yt_drag_layout_wrapper yt_drag_layout_"+s+" "+n},d.reduce((function(t,a,n){var o=m.indexOf(a.key);if(o>-1?t[o]=e._renderEditableFrame(a,!0):e.notShowList.push(a.key),n===d.length-1){var i=t.filter((function(e){return e}));return c&&e.notShowList.length>0&&e.notShowList.forEach((function(t){i.push(e._renderEditableFrame(r.createElement(l,{key:t,height:e.childHeight}),!1))})),i}return t}),[]))},t}(r.PureComponent);const u=s;s.propTypes={orientation:c().oneOf(["horizontal","vertical"]),colNumber:c().number,className:c().oneOfType([c().string,c().object]),editable:c().bool,showList:c().arrayOf(c().string),onChange:c().func}},94530:(e,t,a)=>{a.d(t,{Z:()=>k});var n=a(87462),r=a(63366),o=a(67294),c=a(25713),i=a(43036),l=a(45697),s=a.n(l),u=a(38263),p=a(57522),m=[{value:"WEEK",label:"\u5468"},{value:"MONTH",label:"\u6708"},{value:"QUATER",label:"\u5b63"},{value:"YEAR",label:"\u5e74"}],d=function(e){var t=e.value,a=e.getValue,n=o.useState(t),r=n[0],c=n[1];return o.createElement("div",{className:"yt_modal_dashboard_edit_wrapper"},o.createElement("div",{className:"content_item"},o.createElement("span",null,"\u540c\u6bd4\u7c7b\u578b"),o.createElement("span",null,o.createElement(u.ZP,{className:"content_item_select",value:(m.find((function(e){return e.value===r}))||{}).label,onChange:function(e){return function(e){c(e),setTimeout((function(){return a&&a(e)}),0)}(e)},inputIcon:o.createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},m.map((function(e){return o.createElement(u.ZP.Option,{value:e.value,key:e.value},e.label)}))))))},f=function(e){return new Promise((function(t,a){var r=e.value,c=(0,n.Z)({},e,{titleText:o.createElement("div",{className:"indicator_card_comfirm"},o.createElement("span",null,"\u540c\u6bd4\u8bbe\u7f6e"),o.createElement("span",{onClick:function(){return window.open("https://www.yuque.com/docs/share/5615d490-0056-4bb9-b208-bf747c9048c0")}},"\u67e5\u770b\u66f4\u591a")),content:o.createElement(d,(0,n.Z)({},e,{getValue:function(e){r=e}}))});c.onOk=function(){return t(r)},c.onCancel=a,(0,p.Z)(c)}))};const g=f;f.propTypes={getValue:s().func,value:s().string};var h=a(8201),v=a(39432),y=a(94644),C=a(29531),E=a.n(C),T=a(93162),b=function(e){return!["",null,void 0].includes(e)},_=[{title:"\u5bfc\u51fa\u56fe\u7247",type:"image"},{title:"\u5bfc\u51fa\u6570\u636e",type:"data"}],N=[{title:"\u8bbe\u7f6e\u540c\u6bd4",type:"compare"}],A=function(e){return e&&e.length>6?String(e).substring(0,6)+"...":e},S=function(e,t,a){if("image"===e)r=t,o=(0,y.UO)(a[0]&&a[0].name),new Promise((function(e){var t=r.offsetWidth,a=r.cloneNode(!0),n=document.createElement("canvas");n.width=12*t,n.height=1920,n.style.width=t+"px",n.style.height="160px",n.className="yt_trend_list_canvas",n.getContext("2d").scale(12,12),a.style.width=t+"px",a.style.height="160px",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.zIndex=-1,a.style.opacity=0,document.body.appendChild(a),E()(a,{allowTaint:!0,taintTest:!1,canvas:n,useCORS:!0,width:t,height:160,onrendered:function(e){document.body.appendChild(e);var t=e.toDataURL("png");(0,T.saveAs)(t,o,"image/png"),setTimeout((function(){document.body.removeChild(a),document.body.removeChild(document.querySelector(".yt_trend_list_canvas"))}),0)}})}));else if("data"===e){var n=[a.reduce((function(e,t){return[].concat(e,[[t.name,t.count]])}),[])];(0,y.aT)(n,a[0]&&a[0].name)}var r,o};var F=["data","tip","compare","onSetting","loading","paragraph","onMsgClick"];const k=function(e){var t=e.data,a=e.tip,l=e.compare,s=e.onSetting,u=e.loading,p=e.paragraph,m=e.onMsgClick,d=(0,r.Z)(e,F),f=o.useState(),y=f[0],C=f[1],E=function(e){return t&&t[e]?t[e]:{}},T=function(e){if(E(e).name){if(b(E(e).count)){var t=E(e).count;switch(E(e).format){case"myriad":t=(0,v.hE)(t);break;case"percent":a=t,t=b(null)?null:0===a?"0.00%":Math.abs(100*a).toFixed(2)+"%"}return t}return"--"}var a;return""},k=function(e){return"myriad"===E(e).format?E(e).count.toLocaleString():T(e)};return o.createElement("div",(0,n.Z)({className:"indicator_card"},d,{ref:function(e){return C(e)}}),o.createElement(h.Z,{data:t,className:"section_com",loading:u,paragraph:p},o.createElement("div",{className:"title_wrap"},o.createElement("span",{className:"chart_title"},o.createElement("span",{className:"chart_title_name"},E(0).name,a&&o.createElement(i.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:a},o.createElement("i",{className:"icon-cem_file1","data-html2canvas-ignore":!0})))),o.createElement("span",{className:"chart_title_buttons","data-html2canvas-ignore":!0},o.createElement(c.Z,{onClick:function(e){"compare"===e?g({value:l}).then((function(e){s&&s({compareValue:e})})):S(e,y,t)},options:_.concat(s?N:[])}))),o.createElement("div",{className:"section_mid"},o.createElement("p",null,o.createElement(i.Z,{placement:"top",overlay:k(0)},o.createElement("section",null,T(0)))),E(1).name||E(2).name?o.createElement("p",null,o.createElement("span",null,o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:E(1).name},o.createElement("section",{className:"name"},E(1).name))),o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:k(1)},o.createElement("section",null,T(1))),"boolean"===typeof E(1).rise&&o.createElement("i",{className:E(1).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"}))),o.createElement("span",null,o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:E(2).name},o.createElement("section",{className:"name"},E(2).name))),o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:k(2)},o.createElement("section",null,T(2))),"boolean"===typeof E(2).rise&&o.createElement("i",{className:E(2).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"})))):null),(E(3).name||E(4).name)&&o.createElement("div",{className:"section_bottom"},o.createElement("span",null,o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:E(3).name},o.createElement("section",{className:"name"},E(4).name?A(E(3).name):E(3).name))),o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:k(3)},o.createElement("section",null,T(3))))),E(4).name?o.createElement("span",null,o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:E(4).name},o.createElement("section",{className:"name"},A(E(4).name)))),o.createElement("span",null,o.createElement(i.Z,{placement:"top",overlay:k(4)},o.createElement("section",null,T(4))))):null,m&&o.createElement("span",{className:"toMsg",onClick:function(){return m(t)}},"\u67e5\u770b\u8be6\u60c5"))))}}}]);