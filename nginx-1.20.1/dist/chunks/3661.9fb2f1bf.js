"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[3661],{1145:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(87462),r=n(94578),o=n(67294),i=n(2271),l=n(43036),c=n(92360),s=n(8201),p=n(39432),u=n(61409),d=n(30381),f=n.n(d);const m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleOnFilter=function(){var e=n.state.show;n.setState({show:!e})},n.state={oriData:"",columns:[],prefixColumns:[{label:"",width:16,fixed:"left"}],columnRenders:{},headerRenders:{},entryName:"",visible:!1,show:!1},n}return(0,r.Z)(t,e),t.getDerivedStateFromProps=function(e,t){if((0,s.P)(e.data)&&JSON.stringify(t.oriData)!==JSON.stringify(e.data)){var n=[{label:e.type+"\u8bcd\u6761",prop:"name",width:110,fixed:"",checked:!0},{label:"\u8bcd\u6761\u72b6\u6001",prop:"from",width:80,fixed:"",checked:!0},{label:"SKU\u8bcd\u6761\u6570\u91cf",prop:"skuCount",width:80,fixed:"",checked:!0},{label:"\u6700\u65b0\u4fee\u6539\u65f6\u95f4",prop:"updatedAt",width:80,fixed:"",checked:!0},{label:"\u64cd\u4f5c",prop:"control",width:120,fixed:"right",checked:!0}],a="SPU"===e.type?n:n.filter((function(e){return"skuCount"!==e.prop})),r={name:function(e){return o.createElement("span",{title:e.name},e.name)},skuCount:function(e){return o.createElement("span",{style:{color:"#0847A6",cursor:"pointer"},onClick:function(){u.mW.push({pathname:"/account/project/base/sku",state:{spuId:e.id,spuName:e.name}})}},(0,p.hE)(e.skuCount))},updatedAt:function(e){return f()(e.updatedAt).format("YYYY-MM-DD HH:mm")},control:function(t,n,a){return"\u4e91\u542c"!==t.from&&o.createElement(o.Fragment,null,o.createElement("span",{style:{marginRight:12},className:"col-control",onClick:function(){e.onEdit(t,"edit")}},"\u4fee\u6539"),o.createElement("span",{style:{marginRight:12},className:"col-control",onClick:function(){e.onEdit(t,"copy")}},"\u590d\u5236"),o.createElement("span",{className:"col-control",onClick:function(){return e.onClickDelete(t)}},"\u5220\u9664"))}},i={from:function(e){return o.createElement(o.Fragment,null,"\u8bcd\u6761\u72b6\u6001",o.createElement(l.Z,{placement:"top",overlay:o.createElement("div",{style:{maxWidth:212}},"\u300c\u8bcd\u6761\u72b6\u6001\u300d\u6807\u8bc6\u8be5\u8bcd\u6761\u7684\u662f\u5426\u4e3a\u5f53\u524d\u9879\u76ee\u521b\u5efa\uff0c\u5982\u679c\u8bcd\u6761\u88ab\u7cfb\u7edf\u6536\u5f55\uff0c\u5219\u72b6\u6001\u7531\u201c\u5f53\u524d\u9879\u76ee\u201d\u8f6c\u53d8\u4e3a\u201c\u4e91\u542c\u201d")},o.createElement("span",{style:{marginLeft:4,color:"#979797"}},o.createElement("i",{className:"icon-cem_file1"}))))}};return e.data&&e.data.forEach((function(e,t){if(e.config){if(0===t){var n=[];Object.keys(JSON.parse(e.config)).forEach((function(e){!n.some((function(t){return t.title===e}))&&n.push({label:e,prop:e,width:80,fixed:"",checked:!0})})),a.splice.apply(a,[1,0].concat(n))}Object.keys(JSON.parse(e.config)).forEach((function(t){e[t]=o.createElement("span",{title:JSON.parse(e.config)[t].join("|")},JSON.parse(e.config)[t].join("|"))}))}})),{columns:a,columnRenders:r,headerRenders:i}}return null},t.prototype.render=function(){var e=this.props,t=e.type,n=e.data,r=e.total,l=e.pageIndex,s=e.pageSize,p=e.onPageChange,u=e.onPageSizeChange,d=(e.onEdit,e.entryVisible),f=e.entryName,m=e.onCancel,h=e.onDelete,g=this.state,v=g.prefixColumns,y=g.columns,b=g.columnRenders,C=g.headerRenders;return o.createElement(o.Fragment,null,o.createElement(i.Z,(0,a.Z)({},this.props,{data:n,prefixColumns:v,columns:y,columnRenders:b,headerRenders:C,savedKey:"SKU"===t?"product_setting_base_sku":"product_setting_base_spu",onPageChange:p,onPageSizeChange:u,pageIndex:l,pageSize:s,total:r})),o.createElement(c.Dialog,{className:"yt_product_setting_ignore_dialog_wrapper",size:"tiny",visible:d,title:"\u786e\u5b9a\u5220\u9664\u8bcd\u6761\u300c"+f+"\u300d\u8bcd\u6761\uff1f",closeOnClickModal:!1,onCancel:m},o.createElement(c.Dialog.Body,null,"\u5982\u679c\u6709\u5546\u54c1\u94fe\u63a5\u4f7f\u7528\u4e86\u6b64\u6761\u8bcd\u6761\uff0c\u5219\u76f8\u5e94\u7684\u4e3b\u9898\u503c\u4f1a\u88ab\u91cd\u7f6e\uff0c\u91cd\u7f6e\u65f6\uff0c\u5982\u679c\u7cfb\u7edf\u7a0b\u5e8f\u65e0\u6cd5\u5339\u914d\u65b0\u7684\u8bcd\u6761\uff0c\u5219\u76f8\u5e94\u7684\u4e3b\u9898\u503c\u4f1a\u6309\u201c\uff08\u7a7a\u767d\uff09\u201d\u8fdb\u884c\u6807\u8bb0"),o.createElement(c.Dialog.Footer,null,o.createElement(c.Button,{onClick:m},"\u53d6\u6d88"),o.createElement(c.Button,{type:"primary",onClick:h},"\u786e\u5b9a"))))},t}(o.PureComponent)},35535:(e,t,n)=>{n.d(t,{Z:()=>k});var a=n(63366),r=n(87462),o=n(94578),i=n(67294),l=n(55609),c=n(92360),s=n(19335),p=n(35303),u=n(35239),d=n(5133),f=n(30381),m=n.n(f),h=n(64396),g=["loading"],v=h.Z.product.setting.base.entryDrawer,y=h.Z.product.setting.base.spu,b=h.Z.product.setting.base.sku,C={visible:!1,isCopy:!1,copy:!1,isChange:!1,id:"",topicList:[],spuId:0,type:"",spuName:"",keyCode:0},E=function(e){function t(t){var n;return(n=e.call(this,t)||this).show=function(e){var t=e.type,a=e.spuId,r=e.spuName,o=e.id,i=e.copy;n.setState({visible:!0,spuId:a,type:t,spuName:r}),n.props.fetchTopic({type:t,valueFrom:u.t.get(u.V.curProject).id}).then((function(e){2e4===e.code&&n.setState({topicList:e.result.topicList},(function(){o?n.props.fetchTopicValue({id:o}).then((function(e){2e4===e.code&&n.setState({isCopy:i,copy:i,id:o})})):e.result.topicList.forEach((function(e,t){var a;n.props.editTopic(((a={index:t})["value"+t]="MULTI"===e.valueCheckbox?[]:void 0,a["title"+t]="(\u7a7a\u767d)",a))}))}))}))},n.onClose=function(){n.setState((0,r.Z)({},Object.assign({},C))),n.state.topicList.forEach((function(e,t){var a;n.props.editTopic(((a={index:t})["value"+t]="MULTI"===e.valueCheckbox?[]:void 0,a["title"+t]="(\u7a7a\u767d)",a))}))},n.renderItem=function(e,t){return"MULTI"===e.valueCheckbox?i.createElement(p.RS,{multiple:!0,tags:!0,onChange:function(a){n._handleOnMultiSelectChange(a,t,e)},value:n.props["value"+t]&&n.props["value"+t].length?n.props["title"+t]:[],optionLabelProp:"label",optionFilterProp:"label",placeholder:"\u8bf7\u9009\u62e9\u6216\u8005\u8f93\u5165"},e.list.filter((function(e){return"(\u7a7a\u767d)"!==e.name})).map((function(e){return i.createElement(p.Wx,{key:e.id,value:e.name,label:e.name},e.name)}))):"SINGLE"===e.valueCheckbox?"DATE"===e.valueType?i.createElement(c.DatePicker,{type:"calendar",value:n.props["value"+t]?new Date(n.props["title"+t][0]):null,placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",onChange:function(a){n._handleOnDateChange(m()(a).format("YYYY-MM-DD"),t,e)}}):i.createElement(p.RS,{tags:!0,multiple:!1,onChange:function(a){n._handleOnSelectChange(a,t,e)},value:n.props["value"+t]?n.props["title"+t][0]:[],optionLabelProp:"label",optionFilterProp:"label",placeholder:"\u8bf7\u9009\u62e9\u6216\u8005\u8f93\u5165"},e.list.filter((function(e){return"(\u7a7a\u767d)"!==e.name})).map((function(e){return i.createElement(p.Wx,{key:e.id,value:e.name,label:e.name},e.name)}))):null},n._handleOnDateChange=function(e,t,a){var r;(n.setState({isChange:e!==n.props["oriTitle"+t]}),"Invalid date"!==e&&e&&!a.list.find((function(t){return t.name===e})))?n.props.fetchAddTopic({ytIndustryTopicId:a.id,value:e}).then((function(a){var r;2e4===a.code&&n.props.editTopic(((r={index:t})["value"+t]=[a.result],r["title"+t]=[e],r))})):"Invalid date"!==e&&n.props.editTopic(((r={index:t})["value"+t]=[a.list.find((function(t){return t.name===e})).id],r["title"+t]=[e],r))},n._handleOnAdd=function(e,t,a,r){setTimeout((function(){e&&n.state.keyCode&&13===n.state.keyCode&&n.props.fetchAddTopic({ytIndustryTopicId:e.id,value:t}).then((function(o){var i;2e4===o.code&&(n.setState({keyCode:0}),n.props.editTopic(((i={index:a})["value"+a]="MULTI"===e.valueCheckbox?[].concat(e.list.filter((function(e){return r.indexOf(e.name)>-1})).map((function(e){return e.id})),[o.result]):[o.result],i["title"+a]="MULTI"===e.valueCheckbox?r:[t],i)))}))}),0)},n._handleOnMultiSelectChange=function(e,t,a){var r;n.setState({isChange:e!==n.props["oriTitle"+t]}),e&&e.length&&e.forEach((function(r){var o;a.list.find((function(e){return e.name===r}))?n.props.editTopic(((o={index:t})["value"+t]=a.list.filter((function(t){return e.indexOf(t.name)>-1})).map((function(e){return e.id})),o["title"+t]=a.list.filter((function(t){return e.indexOf(t.name)>-1})).map((function(e){return e.name})),o)):n._handleOnAdd(a,r,t,e)})),!e.length&&n.props.editTopic(((r={index:t})["value"+t]=[],r["title"+t]=["\u7a7a\u767d"],r))},n._handleOnSelectChange=function(e,t,a){var r;n.setState({isChange:e[e.length-1]!==n.props["oriTitle"+t]}),e&&e.length&&e.forEach((function(r){var o;a.list.find((function(e){return e.name===r}))?n.props.editTopic(((o={index:t})["value"+t]=[a.list.find((function(e){return e.name===r})).id],o["title"+t]=[r],o)):n._handleOnAdd(a,r,t,e)})),!e.length&&n.props.editTopic(((r={index:t})["value"+t]=void 0,r["title"+t]=["\u7a7a\u767d"],r))},n._handleOnCopy=function(e){n.setState({isCopy:e})},n._handleOnEnter=function(e){13===e.keyCode&&e.target.className&&n.setState({keyCode:e.keyCode})},n.onOk=function(){var e=n.state,t=e.type,a=e.isCopy,r=e.copy,o=e.isChange,i=e.id,l=e.topicList,c=e.spuId,s=n.props.compose;l.forEach((function(e,t){var a;n.props["value"+t]&&n.props["value"+t].length||n.props.editTopic(((a={index:t})["value"+t]=[e.list.find((function(e){return e.name.includes("(\u7a7a\u767d)")})).id],a["title"+t]=["(\u7a7a\u767d)"],a))})),setTimeout((function(){var e=""+[].concat(l.map((function(e,t){return s.indexOf(String(e.id))>-1&&n.props["title"+t]}))).filter((function(e){return!1!==e})).join(""),p=[].concat(l.map((function(e,t){return{topicId:e.id,topicValueIds:n.props["value"+t],topic:e.name,topicValues:n.props["title"+t]}})));if(p.every((function(e){return e.topicValues===["(\u7a7a\u767d)"]})))d.Z.error("\u4e3b\u9898\u503c\u4e0d\u80fd\u5168\u4e3a(\u7a7a\u767d)");else{var f={};if(f[t.toLocaleLowerCase()+"Name"]=e.replaceAll(" ",""),i)if(r){if(!o)return void d.Z.error("\u8bcd\u6761\u5df2\u5b58\u5728");n.props.fetchAdd({name:e,configList:p,spuId:c,callback:function(){n.props["fetch"+t+"List"]({pageIndex:1,type:t}),a?n.setState({id:""}):n.onClose()}}).then((function(e){2e4===e.data.code&&(f[t.toLocaleLowerCase()+"Id"]=e.data.result,u.t.set(u.V.newEntry,f))}))}else n.props.fetchAdd({id:i,name:e,configList:p,spuId:c,callback:function(){n.props["fetch"+t+"List"]({pageIndex:1,type:t}),a?n.setState({id:""}):n.onClose()}}).then((function(e){2e4===e.data.code&&u.t.set(u.V.newEntry,f)}));else n.props.fetchAdd({name:e,configList:p,spuId:c,callback:function(){n.props["fetch"+t+"List"]({pageIndex:1,type:t}),!a&&n.onClose()}}).then((function(e){2e4===e.data.code&&(f[t.toLocaleLowerCase()+"Id"]=e.data.result,u.t.set(u.V.newEntry,f))}))}}),0)},n.state=(0,r.Z)({},Object.assign({},C)),n.event={},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){var n=this.props.topicList,a=this.state.topicList;n&&JSON.stringify(n)!==JSON.stringify(a)&&this.setState({topicList:n})},n.componentDidMount=function(){window.addEventListener("keydown",this._handleOnEnter)},n.componentWillUnmount=function(){window.removeEventListener("keydown",this._handleOnEnter)},n.render=function(){var e=this,t=this.state,n=t.type,a=t.visible,r=t.isCopy,o=t.id,l=t.copy,p=t.topicList,u=t.spuName,d=this.props,f=d.split,m=d.compose,h=d.loading,g="SPU"===n?"SPU\u8bcd\u6761":"\u300c"+u+"\u300d\u7684SKU\u8bcd\u6761";return i.createElement(s.Z,{className:"yt_product_subscribe_entry_drawer_wrapper",width:527,closeable:!0,title:(o&&!l?"SPU"===n?"\u4fee\u6539":"\u7f16\u8f91":"SPU"===n?"\u7533\u8bf7\u521b\u5efa":"\u65b0\u5efa")+g,visible:a,maskClosable:!0,placement:"right",onClose:this.onClose,footer:i.createElement("div",{className:"entry_drawer_footer"},i.createElement(c.Checkbox,{checked:r,onChange:function(t){e.setState({isCopy:t})}},"\u590d\u5236\u65b0\u5efa\u53e6\u4e00\u4e2a"),i.createElement(c.Button,{onClick:this.onClose},"\u53d6\u6d88"),i.createElement(c.Button,{type:"primary",onClick:this.onOk},"\u786e\u5b9a"))},i.createElement(c.Loading,{loading:h,style:{height:"100%"}},i.createElement("div",{className:"top"},i.createElement("span",null,n,"\u8bcd\u6761"),i.createElement("span",{dangerouslySetInnerHTML:{__html:""+[].concat(p.map((function(t,n){return m.indexOf(String(t.id))>-1&&e.props["title"+n]}))).filter((function(e){return!1!==e})).join(" "===f?"&nbsp;":f)}})),i.createElement("h4",null,"\u4e3b\u9898\u503c"),i.createElement("div",{className:"topic_list_content"},p.map((function(t,n){return i.createElement("div",{className:"item",key:t.id},i.createElement("div",{className:"title "+(m.indexOf(String(t.id))>-1?"isRequired":"")},t.name),e.renderItem(t,n))})))))},t}(i.PureComponent);const k=(0,l.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,g);return(0,r.Z)({},n[v],{loading:t.effects[v+"/fetchTopicValue"]||t.effects[v+"/fetchTopic"]||!1})}),(function(e){return{fetchTopic:function(t){return e({type:v+"/fetchTopic",payload:t})},fetchTopicValue:function(t){return e({type:v+"/fetchTopicValue",payload:t})},editTopic:function(t){return e({type:v+"/editTopic",payload:t})},fetchAdd:function(t){return e({type:v+"/fetchAdd",payload:t})},fetchSPUList:function(t){return e({type:y+"/fetchList",payload:t})},fetchSKUList:function(t){return e({type:b+"/fetchList",payload:t})},fetchAddTopic:function(t){return e({type:v+"/fetchAddTopic",payload:t})}}}),null,{withRef:!0})(E)},55815:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(94578),r=n(67294),o=n(45697),i=n.n(o),l=n(43036),c=n(61409),s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,r=n.beforeJump;e!==a.length-1&&(r?new Promise((function(e,t){return r(e,t)})).then((function(){c.mW.push({pathname:a[e].url,state:a[e].state})})):c.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,o=t.rightContent,i=t.className,c=t.overlay;return r.createElement("div",{className:"breadcumb-wrapper "+i},n instanceof Array?r.createElement("div",{className:"breadcrumb-left"},r.createElement("div",null,n.map((function(t,a){return r.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),r.createElement("span",null,a||n[n.length-1].title,c&&r.createElement(l.Z,{placement:"top",overlay:c},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):r.createElement("div",{className:"normal-title"},n,c&&r.createElement(l.Z,{placement:"top",overlay:c},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),o||"")},t}(r.Component);s.propTypes={className:i().string,title:i().oneOfType([i().string,i().arrayOf(i().shape({title:i().string,url:i().string,state:i().object}))]).isRequired,overlay:i().oneOfType([i().string,i().node]),mainTitle:i().oneOfType([i().string,i().node]),beforeJump:i().func,rightContent:i().node};const p=s},61918:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(67294),r=n(45697),o=n.n(r),i=function(e){var t=e.className,n=e.onClear,r=e.onSearch,o=e.placeholder,i=e.style,l=e.defValue,c=e.signal,s=a.useState(l),p=s[0],u=s[1];a.useEffect((function(){u(l)}),[l,c]);return a.createElement("div",{style:i,className:"yt_search_input_wrapper "+(t||"")},a.createElement("input",{placeholder:o,value:p,onKeyDown:function(e){13===e.keyCode&&r(p)},onChange:function(e){return u(e.target.value)},autoComplete:"off"}),p&&a.createElement("i",{className:"icon-cem_log-off",onClick:function(){u(""),n&&n("")}}),a.createElement("i",{className:"icon-cem_small-search",onClick:function(){return r(p)}}))};i.propTypes={className:o().string,onSearch:o().func.isRequired,placeholder:o().string,style:o().object,defValue:o().string,signal:o().any,onClear:o().func};const l=i},37841:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(67294),r=n(45697),o=n.n(r),i=function(e){var t=e.activeKey,n=e.options,r=e.onTabClick;return a.createElement("div",{className:"tabs"},n.map((function(e,n){return a.createElement("div",{key:n,className:t===e.value?"active-tab":"",onClick:function(){return t!==e.value&&r(e.value,e)}},e.key||e.label)})))};i.propTypes={activeKey:o().oneOfType([o().string,o().number]),options:o().arrayOf(o().shape({key:o().string,value:o().oneOfType([o().string,o().number])})).isRequired,onTabClick:o().func.isRequired};const l=i},19335:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(63366),r=n(87462),o=n(94578),i=n(67294),l=n(24444),c=n(45697),s=n.n(c),p=["visible","headerStyle","closeable","bodyStyle","drawerStyle","footer","footerStyle","closable","push","title"],u=i.createContext(null),d={distance:180},f=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).state={push:!1},t.parentDrawer=void 0,t.destroyClose=void 0,t.push=function(){t.props.push&&t.setState({push:!0})},t.pull=function(){t.props.push&&t.setState({push:!1})},t.onDestroyTransitionEnd=function(){t.getDestroyOnClose()&&(t.props.visible||(t.destroyClose=!0,t.forceUpdate()))},t.getDestroyOnClose=function(){return t.props.destroyOnClose&&!t.props.visible},t.getPushDistance=function(){var e,n=t.props.push;return e="boolean"===typeof n?n?d.distance:0:n.distance,parseFloat(String(e||0))},t.getPushTransform=function(e){var n=t.getPushDistance();return"left"===e||"right"===e?"translateX("+("left"===e?n:-n)+"px)":"top"===e||"bottom"===e?"translateY("+("top"===e?n:-n)+"px)":void 0},t.renderHeader=function(){var e=t.props,n=e.title,a=e.headerStyle,r=e.closeable,o=e.onClose;return n||r?i.createElement("div",{className:n?"yt-drawer-header":"yt-drawer-header-no-title",style:a},n&&i.createElement("div",{className:"yt-drawer-title"},n),r&&i.createElement("i",{className:"yt-drawer-close iconfont icon-cem_cancel",onClick:o})):""},t.renderBody=function(){var e=t.props,n=e.visible,a=e.drawerStyle,o=e.bodyStyle;if(t.destroyClose&&!n)return"";t.destroyClose=!1;var l={};return t.getDestroyOnClose()&&(l.opacity=0,l.transition="opacity .3s"),i.createElement("div",{className:"yt-drawer-wrapper-body",style:(0,r.Z)({},l,a),onTransitionEnd:t.onDestroyTransitionEnd},t.renderHeader(),i.createElement("div",{className:"yt-drawer-body",style:o},t.props.children),t.renderFooter())},t.renderFooter=function(){var e=t.props,n=e.footer,a=e.footerStyle;return n?i.createElement("div",{className:"yt-drawer-footer",style:a},n):""},t.getRcDrawerStyle=function(){var e=t.props,n=e.zIndex,a=e.placement,o=e.mask,i=e.style,l=t.state.push,c=o?{}:t.getOffsetStyle();return(0,r.Z)({zIndex:n,transform:l?t.getPushTransform(a):void 0},c,i)},t}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.visible&&this.parentDrawer&&this.parentDrawer.push()},n.componentDidUpdate=function(e){var t=this.props.visible;e.visible!==t&&this.parentDrawer&&(t?this.parentDrawer.push():this.parentDrawer.pull())},n.componentWillUnmount=function(){this.parentDrawer&&(this.parentDrawer.pull(),this.parentDrawer=null)},n.getOffsetStyle=function(){var e=this.props,t=e.placement,n=e.width,a=e.height,r=e.visible,o=e.mask;if(!r&&!o)return{};var i={};return"left"===t||"right"===t?i.width=n:i.height=a,i},n.render=function(){var e=this,t=this.props,n=t.visible,o=(t.headerStyle,t.closeable,t.bodyStyle,t.drawerStyle,t.footer,t.footerStyle,t.closable,t.push,t.title,(0,a.Z)(t,p)),c=(0,r.Z)({open:n},o);return i.createElement(u.Consumer,null,(function(t){return e.parentDrawer=t,i.createElement(u.Provider,{value:e},i.createElement(l.Z,(0,r.Z)({handler:!1,prefixCls:"yt-drawer"},c,{open:e.props.visible,getContainer:e.parentDrawer?e.parentDrawer:null,style:e.getRcDrawerStyle()}),e.renderBody()))}))},t}(i.Component);f.defaultProps={closable:!0,placement:"right",maskClosable:!1,mask:!0,level:null,keyboard:!0,push:d};const m=f;f.propTypes={visible:s().bool,className:s().string,width:s().number,onClose:s().func,maskClosable:s().bool,level:s().object,keyboard:s().bool,push:s().oneOfType([s().object,s().bool]),placement:s().oneOf(["left","top","right","bottom"]),title:s().oneOfType([s().string,s().node]),headerStyle:s().object,closeable:s().bool,bodyStyle:s().object,drawerStyle:s().object,footer:s().oneOfType([s().string,s().node]),footerType:s().object}},2271:(e,t,n)=>{n.d(t,{Z:()=>Z});var a=n(63366),r=n(87462),o=n(43144),i=n(94578),l=n(23279),c=n.n(l),s=n(67294),p=n(92360),u=n(35303),d=n(45697),f=n.n(d),m=[{label:"10\u9879/\u9875",value:10},{label:"20\u9879/\u9875",value:20},{label:"40\u9879/\u9875",value:40},{label:"100\u9879/\u9875",value:100}];const h=function(e){var t=e.onPageChange,n=e.onSizeChange,a=e.total,r=void 0===a?0:a,o=e.pageIndex,i=e.pageSize,l=e.currLength,c=e.layout,d=e.className,f=0===r?0:(o-1)*i+1,h=0===r?0:f+l-1;return 0===r?null:s.createElement("div",{className:"yt-awp-pagination "+(d||"")},s.createElement("span",{className:"total_num"},s.createElement("span",null,f+" - "+h+" "),"\u9879\uff0c\u5171",s.createElement("span",null," "+r+" "),"\u9879"),s.createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},s.createElement(p.Pagination,{small:!0,pageSize:i,currentPage:o,pageCount:Math.ceil(r/i),layout:0===r?"":"prev, pager, next",onCurrentChange:t}),void 0===c||c.includes("sizes")?s.createElement(u.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:i||10,onChange:n},m.map((function(e,t){return s.createElement(u.Wx,{key:t,label:e.label,value:e.value},e.label)}))):null))};f().propTypes={onPageChange:f().func,onSizeChange:f().func,total:f().number,pageIndex:f().number,pageSize:f().number,currLength:f().number,layout:f().string,className:f().string};var g=n(8201),v=n(15861),y=n(87757),b=n.n(y),C=n(49722);function E(){return(E=(0,v.Z)(b().mark((function e(t){var n,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,a=t.key,e.abrupt("return",C.h.post("/default/value/find",{projectId:n,key:a}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=(0,v.Z)(b().mark((function e(t){var n,a,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,a=t.value,r=t.key,e.abrupt("return",C.h.post("/default/value/update",{projectId:n,key:r,value:a}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(39432),S=n(43036),_=n(51474),O=n(87219),x=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setShowFalse=function(){n.setState({show:!1})},n._handleParentClick=function(e){n.state.show&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n._handleOnTriggerClick=function(){setTimeout((function(){n.setState({show:!n.state.show})}),0)},n._renderOptionItem=function(e,t,a,r,o,i){var l=n.state.maxLabelWidth,c=n.props,p=c.value,u=c.savedKey,d=p.find((function(t){return t.prop===e.prop}));return s.createElement("div",{className:"opt_item "+(t?"draggable":""),key:e.prop},t&&s.createElement("i",{className:"icon-cem_move my_handle"}),s.createElement("div",{className:"opt_content",style:{width:l,marginLeft:t?0:12}},s.createElement("div",{className:"item_label",onClick:function(t){t.stopPropagation(),n._handleOnItemClick(e.prop)}},s.createElement("span",{className:"icon_checkbox "+(d&&d.checked?"checkbox_checked":"")}),s.createElement("span",null,e.label)),s.createElement("div",{className:"item_control",style:{display:"product_setting_link"===u?"none":"block"}},s.createElement(S.Z,{placement:"top",overlay:a},s.createElement("span",{onClick:function(t){return r(t,e.prop)}},s.createElement("i",{className:(t?"icon-cem_up":"icon-cem_up-and-down")+" fun_icon_a"}))),s.createElement(S.Z,{placement:"top",overlay:o},s.createElement("span",{onClick:function(t){return i(t,e.prop)},style:{marginLeft:4}},s.createElement("i",{className:"icon-cem_down fun_icon_b"}))))))},n._handleOnItemClick=function(e){var t=n.props,a=t.value,r=t.onChange;r&&r((0,O.ZP)(a,(function(t){var n=t.find((function(t){return t.prop===e}));n&&(n.checked=!n.checked)})))},n._handleOnFilxedLeftClick=function(e,t){e.stopPropagation(),n._handleOnFixedChange(t,"left")},n._handleOnCancelFixedClick=function(e,t){e.stopPropagation(),n._handleOnFixedChange(t,"")},n._handleOnFixedRightClick=function(e,t){e.stopPropagation(),n._handleOnFixedChange(t,"right")},n._handleOnFixedChange=function(e,t){var a=n.props,r=a.value,o=a.onChange;o&&o((0,O.ZP)(r,(function(n){var a=n.find((function(t){return t.prop===e}));a&&(a.fixed=t)})))},n.state={show:!1,value:[],leftOpts:[],normalOpts:[],rightOpts:[],maxLabelWidth:t.value.reduce((function(e,t){return Math.max((0,w.jD)(t.label,14)+56+16+16,e)}),0)},n}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,t){if(JSON.stringify(e.value)!==JSON.stringify(t.value)){var n=e.value.reduce((function(t,n){var a=1;return"left"===n.fixed&&(a=0),"right"===n.fixed&&(a=2),t[a].push(e.value.find((function(e){return e.prop===n.prop}))),t}),[[],[],[]]),a=n[0],r=n[1],o=n[2];return{value:e.value,leftOpts:a,normalOpts:r,rightOpts:o,maxLabelWidth:e.value.reduce((function(e,t){return Math.max((0,w.jD)(t.label,14)+56+16+16,e)}),0)}}return null};var n=t.prototype;return n.componentDidMount=function(){var e=this;window.addEventListener("click",this._setShowFalse);var t=document.querySelectorAll("#draggable_zone");t.length&&t.forEach((function(t){_.default.create(t,{group:"draggable_zone",animation:150,filter:".undraggable",draggable:".draggable",handle:".my_handle",onEnd:function(t){var n=e.props,a=n.value,r=n.onChange,o=t.newIndex,i=t.oldIndex;if(o!==i){var l=a.filter((function(e){return"left"===e.fixed})),c=a.filter((function(e){return"right"===e.fixed})),s=(0,O.ZP)(a.filter((function(e){return!e.fixed})),(function(e){var t=e.splice(i,1)[0];e.splice(o,0,t)}));r&&r([].concat(l,s,c))}}})}))},n.componentWillUnmount=function(){window.removeEventListener("click",this._setShowFalse)},n.render=function(){var e=this,t=this.state,n=t.show,a=t.leftOpts,r=t.normalOpts,o=t.rightOpts,i=this.props,l=i.className,c=i.title;return s.createElement("div",{className:"yt_columns_selector_wrapper "+(l||""),onClick:this._handleParentClick},s.createElement("div",{className:"trigger "+(n?"sel":""),onClick:this._handleOnTriggerClick},c||"\u5217",s.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:n?"rotate(-180deg)":""}})),s.createElement("div",{className:"options "+(n?"active":"")},a.length>0&&s.createElement(s.Fragment,null,s.createElement("div",{className:"opt_label"},"\u56fa\u5b9a\u5728\u5de6\u4fa7"),a.map((function(t){return e._renderOptionItem(t,!1,"\u4e0d\u56fa\u5b9a",e._handleOnCancelFixedClick,"\u56fa\u5b9a\u5728\u5217\u5c3e",e._handleOnFixedRightClick)}))),(a.length>0||o.length>0)&&s.createElement("div",{className:"opt_label"},"\u4e0d\u56fa\u5b9a"),s.createElement("div",{id:"draggable_zone",style:{visibility:r.length>0}},r.map((function(t){return e._renderOptionItem(t,!0,"\u56fa\u5b9a\u5728\u5217\u5934",e._handleOnFilxedLeftClick,"\u56fa\u5b9a\u5728\u5217\u5c3e",e._handleOnFixedRightClick)}))),o.length>0&&s.createElement(s.Fragment,null,s.createElement("div",{className:"opt_label"},"\u56fa\u5b9a\u5728\u53f3\u4fa7"),o.map((function(t){return e._renderOptionItem(t,!1,"\u4e0d\u56fa\u5b9a",e._handleOnCancelFixedClick,"\u56fa\u5b9a\u5728\u5217\u5934",e._handleOnFilxedLeftClick)})))))},t}(s.PureComponent);const N=x;x.propTypes={className:f().string,title:f().string,value:f().arrayOf(f().shape({label:f().string,prop:f().string,fixed:f().string,checked:f().bool})),onChange:f().func};var T,P,L=n(35239),I=["data","total","loading","savedKey","pageIndex","pageSize","onPageChange","onPageSizeChange","className"],D=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleOnResize=function(){var e=document.querySelector(".yt-listview-wrapper");e&&n.setState({tableWidth:e.clientWidth-5})},n._handleOnColumnsChange=function(e){n.setState({columns:e},(function(){n.props.savedKey&&function(e){return k.apply(this,arguments)}({projectId:L.t.get(L.V.curProject).id,key:n.props.savedKey,value:JSON.stringify(e.map((function(e){return{prop:e.prop,checked:e.checked,fixed:e.fixed}})))}).then((function(e){e.data}))}))},n.handleRoKey=function(e){var t=n.props.rowKeyProp;return t&&e&&e[t]?e[t]:JSON.stringify(e)},n.state={talbeWidth:0,columns:t.columns||[],loadingSave:!0},n}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,t){};var n=t.prototype;return n.componentDidMount=function(){var e=this;window.addEventListener("resize",c()(this._handleOnResize,150)),this._handleOnResize();var t=this.props,n=t.savedKey,a=t.columns;n&&function(e){return E.apply(this,arguments)}({projectId:L.t.get(L.V.curProject).id,key:n}).then((function(t){var n,o=t.data;if(2e4===o.code)try{n=a.map((function(e,t){var n=JSON.parse(o.result).filter((function(t){var n=t.prop;return e.prop===n}));return n&&n.length>0?(0,r.Z)({},e,n[0]):e})).filter((function(e){return e}))}catch(i){}finally{e.setState({columns:n||e.state.columns,loadingSave:!1})}}))},n.componentWillUnmount=function(){window.removeEventListener("resize",this._handleOnResize)},n.componentDidUpdate=function(e,t){var n=this;JSON.stringify(e.columns)!==JSON.stringify(this.props.columns)&&this.props.columns.length>0&&this.setState({columns:this.props.columns.reduce((function(e,t,a){var o=n.state.columns.findIndex((function(e){var n=e.prop;return t.prop===n}));return e.splice(o>-1?o:a,0,(0,r.Z)({},t,n.state.columns[o])),e}),[]).filter((function(e){return e}))})},n.render=function(){var e=this.props,t=e.data,n=e.total,o=void 0===n?0:n,i=e.loading,l=e.savedKey,c=e.pageIndex,u=e.pageSize,d=e.onPageChange,f=e.onPageSizeChange,m=e.className,v=void 0===m?"":m,y=(0,a.Z)(e,I),b=this.state,C=b.columns,E=b.loadingSave;return s.createElement(g.Z,{data:t,className:"yt-listview-wrapper "+v,loading:l&&E||i},(0,g.P)(t)&&s.createElement(s.Fragment,null,s.createElement(p.Table,(0,r.Z)({},y,{columns:l?this.columns:this.props.columns,data:t,rowKey:this.handleRoKey})),d&&s.createElement(h,{onPageChange:d,onSizeChange:f,total:o,currLength:t.length,pageIndex:c,pageSize:u}),l&&s.createElement(N,{className:"column_selector",value:C,savedKey:l,onChange:this._handleOnColumnsChange})))},(0,o.Z)(t,[{key:"columns",get:function(){var e=this.state,t=e.tableWidth,n=e.columns,a=this.props,r=a.columnRenders,o=void 0===r?{}:r,i=a.headerRenders,l=void 0===i?{}:i,c=a.prefixColumns,s=0,p=0,u=0,d=[].concat(void 0===c?[]:c,JSON.parse(JSON.stringify(n.filter((function(e){var t=e.checked;return void 0===t||t})))));if(d.forEach((function(e){u+=e.width,e.fixed?s+=e.width:p+=e.width;var t=o[e.prop];t&&(e.render=t);var n=l[e.prop];n&&(e.renderHeader=n)})),t>u){var f=t-s;d.forEach((function(e){void 0!==e.checked&&!e.checked||e.fixed||(e.width=e.width/p*f)}))}return d}}]),t}(s.PureComponent);D.propTypes={className:f().string,savedKey:f().string.isRequired,rowKeyProp:f().string,data:f().any.isRequired,total:f().number,fixedHeight:f().bool,loading:f().bool,pageIndex:f().number,pageSize:f().number,onPageChange:f().func,onPageSizeChange:f().func,columnRenders:f().shape((T={},T[f().string]=f().func,T)),headerRenders:f().shape((P={},P[f().string]=f().func,P)),prefixColumns:f().arrayOf(f().shape({label:f().string,prop:f().string,fixed:f().oneOf(["","left","right"]),width:f().number,checked:f().bool})),columns:f().arrayOf(f().shape({label:f().string,prop:f().string,fixed:f().oneOf(["","left","right"]),width:f().number,checked:f().bool})).isRequired};const Z=D}}]);