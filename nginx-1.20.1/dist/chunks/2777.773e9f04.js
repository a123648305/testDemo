(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[2777],{15959:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"html-76bb61"},7474:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"html-01c246"},36072:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"html-25a64c"},9912:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"html-b14689"},38323:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"html-462f02"},79494:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"html-4d6354"},22777:(e,t,_)=>{"use strict";_.r(t),_.d(t,{default:()=>f});var n=_(37316),o=_.n(n),a=_(67154),r=_.n(a),t=_(85354),s=_.n(t),n=_(67294),k=_.n(n),a=_(55609),i=_(61193),m=_(61409),I=_(92360),t=_(48926),l=_.n(t),t=_(87757),c=_.n(t),u=_(62887),p=_(97189),S=function(t){function e(e){var n=t.call(this,e)||this;n.handlePreSubmit=function(e){n.props.login({username:(0,p.getQuery)("username"),accessToken:(0,p.getQuery)("access_token"),source:(0,p.getQuery)("source")})},n.handleSubmit=l()(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=new FormData(document.getElementById("form-login"))).append("_lv","2"),n.setState({form:{username:t.get("username"),password:t.get("password")}}),n.props.login({username:t.get("username"),password:(0,u.Qo)(t.get("password")),openId:n.props.openId});case 4:case"end":return e.stop()}},e)})),n.onUserChange=function(e){e=e.target.value;n.setState({showUser:0<e.length,form:r()({},n.state.form,{username:e})})},n.onPasswordChange=function(e){e=e.target.value;n.setState({form:r()({},n.state.form,{password:e}),showClear:0<e.length})},n.handleClear=function(){n.setState({form:{password:""},showClear:!1})},n.handleEnter=function(e){"Enter"===e.key&&n.state.showUser&&n.state.showClear&&n.handleSubmit()};e=e.location;return(0,p.getQuery)("username")&&(0,p.getQuery)("access_token")&&(0,p.getQuery)("source")&&n.handlePreSubmit(),n.state={error:void 0,show:!1,isFirst:!(!e.state||!e.state.isFirst)&&e.state.isFirst,showClear:!1,showUser:!1,form:{username:"",password:""}},n}s()(e,t);var n=e.prototype;return n.componentDidMount=function(){var e=this;this.timer=setInterval(function(){["input:-internal-autofill-selected","input:-webkit-autofill"].some(function(e){return document.querySelector(e)})&&(e.setState({showClear:!0,showUser:!0}),clearInterval(e.timer))},10),setTimeout(function(){return clearInterval(e.timer)},1e4)},n.componentWillUnmount=function(){this.props.save({visible:!1})},n.render=function(){var t=this,e=this.state,n=e.show,o=e.isFirst,a=e.showClear,r=e.showUser,s=e.form,i=s.username,l=s.password,c=this.props,u=c.isBind,e=c.slogan,s=c.loginLoading,c=c.loginStatus;return k().createElement(k().Fragment,null,k().createElement("div",{className:"main-panel normal-panel"},k().createElement("form",{ref:function(e){return t.loginRef=e},id:"form-login"},k().createElement("h2",{className:"login_title"},!u&&e||!u&&"登录",u&&"授权成功，请绑定账号",o&&k().createElement("div",{className:"title_tips"},"你的密码已经修改成功，请重新登录！")),k().createElement("div",{className:"input-wrap input-top"},k().createElement("input",{type:"text",name:"username",value:i,className:s?"input_disabled":"",disabled:s,onChange:this.onUserChange,placeholder:"请输入云听账号",ref:function(e){return t.userRef=e},onKeyDown:this.handleEnter})),k().createElement("div",{className:"input-wrap input-pwd"},k().createElement("input",{type:n?"text":"password",name:"password",value:l,onChange:this.onPasswordChange,placeholder:"请输入密码",required:!0,className:s?"input_disabled":"",disabled:s,autoComplete:"off",ref:function(e){return t.passwordRef=e},onKeyDown:this.handleEnter}),k().createElement("i",{className:"icon-cem_log-off",onClick:this.handleClear,style:{display:a?"inline-block":"none"}}),k().createElement("svg",{t:"1590140127784",onClick:function(){t.setState({show:!t.state.show})},id:"pw-btn",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9122"},k().createElement("path",{d:"M640 512a128 128 0 1 0-128 128 128 128 0 0 0 128-128z m-204.8 0a76.8 76.8 0 1 1 76.8 76.8A76.8 76.8 0 0 1 435.2 512z",fill:n?"#0847a6":"#8c8c8c","p-id":"9123"}),k().createElement("path",{d:"M512 153.6Q229.376 153.6 0 512a1552.384 1552.384 0 0 0 168.96 208.896l35.84-37.376A1349.12 1349.12 0 0 1 61.952 512C201.216 307.2 350.72 204.8 512 204.8s311.808 102.4 450.56 307.2c-139.264 204.8-289.28 307.2-450.56 307.2a399.872 399.872 0 0 1-208.384-59.904l-26.112 44.032A451.072 451.072 0 0 0 512 870.4q282.624 0 512-358.4-229.376-358.4-512-358.4z",fill:n?"#0847a6":"#8c8c8c","p-id":"9124"})))),this.state.error&&k().createElement("div",{className:"error"},this.state.error),k().createElement(I.Button,{className:"login-btn "+(r&&a&&"login-btn-hover"),disabled:!r||!a,onClick:this.handleSubmit,loading:s},s?c:u?"绑定并登录":"登录"),k().createElement("span",{className:"forget-psw",onClick:function(){m.mW.push("/reset")}},"忘记密码")))},e}(k().PureComponent),t=_(79361),d=_.n(t),b=function(n){function e(e){var t=n.call(this,e)||this;return t.checkBindState=function(e){t.props.loginCheck({token:e}).then(function(e){e.result.status,"SUCCESS"===e.result.status&&(t.timer&&(clearInterval(t.timer),t.timer=null),t.props.login({token:e.result.token,needNprogress:!0})),"NO_BINDING"===e.result.status&&(t.timer&&(clearInterval(t.timer),t.timer=null),t.props.setIsMail(!0),t.props.setIsBind(!0),t.props.setOpenId(e.result.openid)),"REFUSED"===e.result.status&&t.props.setIsMail(!0)})},t.state={wechatUrl:""},t}s()(e,n);var t=e.prototype;return t.componentDidMount=function(){var t=this;this.props.getQrcode().then(function(e){2e4===e.code&&t.setState({wechatUrl:e.result.url},function(){t.timer=setInterval(function(){t.checkBindState(e.result.token)},3e3)})})},t.componentWillUnmount=function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.props.setIsBind(!1),this.props.setOpenId(void 0)},t.render=function(){var e=this.state.wechatUrl;return k().createElement("div",{className:"main-panel normal-panel"},k().createElement("h2",{className:"login_title"},"扫码登录",k().createElement("div",{className:"title_tips"},"请使用微信扫描二维码")),e?k().createElement("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"48px"}},k().createElement(d(),{value:e,size:252})):k().createElement("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"48px"}},"网络出现异常"))},e}(k().Component),N=_(15959),U=u.U[parseInt(6*Math.random())];const g=function(e){var t=e.login,n=e.loginCheck,o=e.getQrcode,a=e.logoImg,r=e.wechatUrl,s=e.qrcode,i=e.location,l=e.slogan,c=e.visible,u=e.onResetPsw,m=e.save,p=e.loginLoading,d=e.loginStatus,g=k().useState(!0),h=g[0],f=g[1],w=k().useState(!1),v=w[0],y=w[1],e=k().useState(!0),E=e[0],C=e[1],g=k().useState(void 0),w=g[0],e=g[1],g=_(E?h?38323:9912:h?36072:7474);return k().createElement("div",{className:"yt_dblogin_wrap",id:"particles"},k().createElement("div",{id:"login_panel_left"},k().createElement("div",{className:"yt_logo-cem"},k().createElement("img",{src:a,alt:"logo.png",id:"yt_logo_img",onClick:function(){return window.open("https://www.yuntingai.com")}})),k().createElement("div",{className:"login_panel_container"},k().createElement("div",{className:"top_login_way"},k().createElement("span",{style:{display:h?"none":"inline-block",transition:"all .3s"}},E?"扫码登录":"账户登录"),k().createElement("img",{src:g,onClick:function(){C(!E)},onMouseEnter:function(){f(!1)},onMouseLeave:function(){f(!0)},alt:"login.png"})),E?k().createElement(S,{login:t,location:i,openId:w,isBind:v,slogan:l,save:m,loginLoading:p,loginStatus:d}):k().createElement(b,{login:t,loginCheck:n,getQrcode:o,setIsMail:C,setIsBind:y,setOpenId:e,isMail:E,qrcode:s,wechatUrl:r}),-1===window.navigator.userAgent.indexOf("Chrome")&&k().createElement("p",{className:"browser_tips"},"- 为避免可视化效果不兼容，推荐使用 Chrome 浏览器 -")),k().createElement("p",{className:"rights"},"© 2020 深圳视界信息技术有限公司 All rights reserved.粤ICP备14092314号"),k().createElement(I.Dialog,{title:k().createElement("span",null,k().createElement("i",{className:"icon-cem_warning",style:{color:"#D96969",fontSize:"20px",paddingRight:"10px"}}),"你的密码已过期，请重置密码"),size:"tiny",visible:c,onCancel:function(){m&&m({visible:!1})},className:"reset_dialog",top:"35%"},k().createElement(I.Dialog.Footer,null,k().createElement(I.Button,{onClick:function(){m&&m({visible:!1})}},"取消"),k().createElement(I.Button,{type:"primary",onClick:u},"前往重置密码")))),k().createElement("div",{id:"login_img_right",style:{backgroundImage:"url("+N+")"}},k().createElement("h2",{dangerouslySetInnerHTML:{__html:U.word}}),k().createElement("img",{src:U.img,width:"100%",style:{marginTop:"50px"}})))};var h=_(64396).Z.userLogin,n=function(t){function e(e){var n=t.call(this,e)||this;return n._handleOnResetPsw=function(){var e=n.props,t=e.getCheckCode,e=e.email;t({email:e}),m.mW.replace({pathname:"/set",state:{email:e}})},n.state={logoImg:i.Z.getUser()&&i.Z.getUser().accountLogo?i.Z.getUser().accountLogo:"//yunting-1251101074.coscd.myqcloud.com/account_logo/"+window.location.hostname+"/130_130.png"},n.event={onResetPsw:n._handleOnResetPsw},n}s()(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.getSlogan({host:window.location.hostname}),document.getElementById("yt_logo_img")&&(document.getElementById("yt_logo_img").onerror=function(e){document.getElementById("yt_logo_img").src=_(79494)})},n.componentWillUnMount=function(){this.props.clean()},n.render=function(){return k().createElement(g,r()({},this.props,this.state,this.event))},e}(n.Component);const f=(0,a.connect)(function(e){var t=e.loading,e=o()(e,["loading"]);return r()({},e[h],{loginLoading:t.effects[h+"/login"]||!1})},function(t){return{getSlogan:function(e){return t({type:h+"/getSlogan",payload:e})},login:function(e){return t({type:h+"/login",payload:e})},getCheckCode:function(e){return t({type:h+"/getCheckCode",payload:e})},getQrcode:function(){return t({type:h+"/getQrcode"})},loginCheck:function(e){return t({type:h+"/loginCheck",payload:e})},save:function(e){return t({type:h+"/save",payload:e})},clean:function(e){return t({type:h+"/clean",payload:e})}}})(n)}}]);