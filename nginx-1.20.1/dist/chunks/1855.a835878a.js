"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1855],{76214:(e,t,n)=>{n.d(t,{Z:()=>b});n(43378);var a=n(62443),o=n(67294),i=n(8201),r=n(98191),l=n(60496),s=n(87462),c=n(94644),p=n(39432),u=n(87300),d=n(70715),h=["\u6b63\u9762","\u4e2d\u6027","\u8d1f\u9762"],f=function(e,t,n){var a=JSON.parse(JSON.stringify(e)),o=new Array(3).fill([]),i=[],r=new Array(3),l=[],s=a.reduce((function(e,t){return e+t.total}),0);return a.map((function(e,a,c){var u=e.total/s,d=e.dataList.map((function(e,o){var r=c[0].dataList[o].total+c[1].dataList[o].total+c[2].dataList[o].total,s=0===r?e.total:e.total/r;return e.originTime=e.time,e.time=(0,p.Sn)(n,e.time),e.value=t?s:e.total,e.precentValue=s,e.barSum=r,0===a&&i.push(e.time),l.push(r),e})),h="";return"1"===e.key&&(h="\u6b63\u9762",o[0]=d,r[0]={name:h,value:e.total,total:e.total,precentValue:u}),"0"===e.key&&(h="\u4e2d\u6027",o[1]=d,r[1]={name:h,value:e.total,total:e.total,precentValue:u}),"-1"===e.key&&(h="\u8d1f\u9762",o[2]=d,r[2]={name:h,value:e.total,total:e.total,precentValue:u}),e})),{xAxisData:i,pieData:r,data:o,barDataVals:l}},m=function(e,t,n,a,o,i,r){var l=["#60DDA9","#5B8FF9","#F08A8A"],c="RATIO"===t,m=f(e,c,o),v=m.xAxisData,g=m.pieData,x=m.data,b=(m.barDataVals,function(e){return e.map((function(e){return(0,s.Z)({},e,{tooltip:{trigger:"item",formatter:function(e,t,o){return setTimeout((function(){var i=e.seriesName,l=e.data,c=(l.name,l.time),p=l.total,d=l.precentValue,h="\n              <div style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;position:relative;\">\n                <span style='position:absolute;width:40px;height:150px;left:-40px;top:-30px;'></span>\n                <span style='position:absolute;width:40px;height:150px;right:-40px;top:-30px;'></span>\n              </div>\n              <span style=\"font-size: 12px; color: #262626; font-weight: 400;\">"+c+"</span>",f=["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+e.marker+"</span>"+i+"</div><div style='color: #262626;margin-left: 10px;'>\n              "+p+" ("+(100*d).toFixed(2)+"%)\n                </div></div>"];o(t,r?(0,u.r)(h,f,[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return r((0,s.Z)({},e,{eomtionsType:C(i)}),""+n+a)}}],"yt_new_tooltip_wrapper"):(0,u.r)(h,f))}),0)}}})}))}),C=function(e){var t;return null==(t=y.find((function(t){return t.title===e})))?void 0:t.value};return{color:l,graphic:[{type:"group",top:24,left:20,silent:!0,children:[{type:"text",left:10,style:{text:n,font:"bolder 14px "+d.I8,fill:"#262626"}},{type:"text",left:(0,p.jD)(n)+12,style:{text:a,font:"normal 14px "+d.I8,fill:"#8C8C8C"}}]}],grid:{left:"40%",right:48,top:90,containLabel:!0},legend:{left:16,top:52,itemWidth:10,itemHeight:10,itemGap:16,icon:"circle",data:h},xAxis:{type:"category",data:v,nameTextStyle:{color:"#626262"},axisLabel:{formatter:function(e){return e}},axisPointer:{type:"shadow",label:{show:!1}}},yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return c?(100*e).toFixed(2)+"%":e}},splitNumber:4,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},tooltip:{trigger:"axis",showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,n,a,o){var i=o.contentSize,r=o.viewSize,l=e[0]<r[0]/2?0:-1,s=e[1]<r[1]/2?-.5:-1,c=e[0]<r[0]/2?12:-12;return[e[0]+l*i[0]+c,e[1]+s*i[1]]},formatter:function(e,t,o){return e.length?setTimeout((function(){var n=e[0].axisValue,a=e.map((function(e){var t=e.marker,n=e.seriesName,a=e.data,o=(a.name,a.value);return{name:t+' <span style="color: #8C8C8C;display: inline-block;width: 66px;">'+n+'</span> <span style="float: right;color: #262626;position: relative;">\n                    '+a.total+" ("+(100*a.precentValue).toFixed(2)+"%)</span>",value:o}})).map((function(e){return e.name})),i='<span span style = "font-size: 12px; color: #262626; font-weight: 400;" >'+n+"</span>";o(t,(0,u.r)(i,a))}),0):setTimeout((function(){var i=e.data,l=i.name,c=i.total,p=(i.precentValue,e.seriesType),d=e.marker,h=e.percent;"pie"!==p||o(t,r?(0,u.r)(""+l,["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+d+"</span>\n                      \u6570\u91cf</div><div style='color: #262626;margin-left: 10px;'>\n                      "+c+" ("+h+"%)\n                      </div></div> "],[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return r((0,s.Z)({},e,{eomtionsType:C(l)}),""+n+a)}}],"yt_new_tooltip_wrapper"):(0,u.r)(""+l,["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+d+"</span>\n                      \u6570\u91cf</div><div style='color: #262626;margin-left: 10px;'>\n                      "+c+" ("+h+"%)\n                      </div></div> "]))}),0)}},dataZoom:{show:!0,bottom:16,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"},series:[{type:"pie",smooth:!0,datasetIndex:0,hoverOffset:0,center:["17%","60%"],radius:["25%","35%"],itemStyle:{smooth:!0,normal:{borderWidth:0,borderColor:"#fff",smooth:!0},emphasis:{borderWidth:0,shadowBlur:0,shadowOffsetX:0}},label:{show:!0,position:"outside",color:"#262626",rich:{value:{fontSize:12,lineHeight:18,color:"#262626",align:"left"}},formatter:function(e){var t=e.data,n=t.name,a=t.total;t.precentValue;return[""+n,a+" ("+e.percent+"%)"].join("\n")}},labelLine:{show:!0,smooth:!0,length:18},avoidLabelOverlap:!0,data:g,tooltip:{trigger:"item"}},{type:"bar",name:"\u6b63\u9762",smooth:!0,showSymbol:!0,symbolSize:1,stack:"Ad",barMaxWidth:24,barMinWidht:24,itemStyle:{color:l[0]},emphasis:{focus:"series"},data:b(x[0])},{type:"bar",name:"\u4e2d\u6027",smooth:!0,showSymbol:!0,symbolSize:1,stack:"Ad",barMaxWidth:24,barMinWidht:24,itemStyle:{color:l[1]},emphasis:{focus:"series"},data:b(x[1])},{type:"bar",name:"\u8d1f\u9762",smooth:!0,showSymbol:!0,symbolSize:1,stack:"Ad",barMaxWidth:24,barMinWidht:24,itemStyle:{color:l[2]},emphasis:{focus:"series"},data:b(x[2])}]}},v=function(e,t,n,a,o,i){if("image"===t)(0,c._v)(e,a);else if("data"===t){var r="RATIO"===o,l=f(n,r,i).data,s=[["\u65f6\u95f4"].concat(h)];l[0].map((function(e,t){var n=r?(100*e.precentValue).toFixed(2)+"%":e.total,a=r?(100*l[1][t].precentValue).toFixed(2)+"%":l[1][t].total,o=r?(100*l[2][t].precentValue).toFixed(2)+"%":l[2][t].total;return s.push([e.time,n,a,o]),e}));var p=[s];(0,c.aT)(p,a)}},g=[{title:"\u6bd4\u4f8b",value:"RATIO"},{title:"\u6570\u91cf",value:"COUNT"}],y=[{title:"\u8d1f\u9762",value:"negative"},{title:"\u6b63\u9762",value:"positive"},{title:"\u4e2d\u6027",value:"neutral"}],x=n(50976);const b=function(e){var t,n,s=e.loading,c=e.title,p=e.subTitle,u=e.cCountType,d=e.ctimeType,h=e.chartData,f=e.onTimeTypeChange,y=e.onMsgClick,b=e.dateOptions,C=(0,o.useState)(u),w=C[0],O=C[1],D=(0,o.useState)(!1),_=(D[0],D[1],(0,o.useState)(null)),T=_[0],E=_[1];(0,o.useEffect)((function(){var e=(0,i.P)(h)?m(h,w,c,p,d,0,y):{};e&&T&&T.setOption(e)}),[h,T]);return(0,o.useEffect)((function(){t=setInterval((function(){if(T){clearInterval(t);var e=T._dom.children,a=e[0],o=e[1];a.addEventListener("mouseleave",(function(e){n=setTimeout((function(){n&&(o.style.display="none")}),2e3)})),o&&o.addEventListener("mouseenter",(function(e){n=void 0}))}}),200)}),[]),o.createElement("div",{className:"emotionTrend_box"},o.createElement(i.Z,{data:h,loading:s,style:{height:"100%"},renderTitle:o.createElement(r.Z,{title:c,data:h},o.createElement(l.Z,{options:g,activeObj:w,rightHook:!0,onChange:function(e){T.clear();var t=m(h,e,c,p,d,0,y);T.setOption(t),O(e)}}),d&&o.createElement(l.Z,{options:b,activeObj:d,rightHook:!0,onChange:function(e){return f&&f({emotionsTimeType:e})}}),o.createElement("div",{className:"icons"},o.createElement("div",{className:"icon"},o.createElement(a.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},o.createElement("i",{className:"icon-daochu",onClick:function(){return v(T,"data",h,"\u8bc4\u8bba\u60c5\u611f\u5206\u5e03\u548c\u8d70\u52bf\uff08\u6765\u81ea\u6709\u6548\u8bc4\u8bba\uff09",w,d)}}))),o.createElement("div",{className:"icon"},o.createElement(a.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},o.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return v(T,"image",h,"\u8bc4\u8bba\u60c5\u611f\u5206\u5e03\u548c\u8d70\u52bf\uff08\u6765\u81ea\u6709\u6548\u8bc4\u8bba\uff09",w,d)}})))))},o.createElement(x.Z,{onChartReady:function(e){return E(e)},theme:"yt_multi_color_10",option:{},opts:{devicePixelRatio:2},style:{width:"100%",height:"100%"}})))}},69719:(e,t,n)=>{n.d(t,{Z:()=>w});n(43378);var a=n(62443),o=n(97326),i=n(94578),r=n(67294),l=n(60496),s=n(8201),c=n(87462),p=n(70715),u=n(87300),d=n(39432),h={n:"\u540d\u8bcd",a:"\u5f62\u5bb9\u8bcd",un:"\u5176\u4ed6"},f=[{title:"\u6bd4\u4f8b",value:"rate"},{title:"\u6570\u91cf",value:"count"}],m={n:"#1890FF",a:"#FF9835",un:"#60DDA9"},v=n(18077),g=Object.values(h).reduce((function(e,t,n,a){var o="";a.slice(0,n).map((function(e){return o+=e}));var i=(0,d.jD)(o,12)+48*n,r={type:"circle",left:i,top:.5,shape:{cx:5,cy:4,r:5},style:{fill:Object.values(m)[n]}},l={type:"text",left:i+16,style:{text:t,fill:"#8C8C8C",font:"400 12px "+p.I8}};return e.push(r,l),e}),[]);const y=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).chartRef=void 0,t.barDatas=void 0,t.getChartRef=function(e){return t.chartRef=e},t}(0,i.Z)(t,e);var n=t.prototype;return n.renderChart=function(e,t,n,a,o,i,r){this.setValue(e,n),this.chartRef.clear(),this.chartRef.setOption(this.getOption(t,n,a,o,i,r))},n.setValue=function(e,t){this.barDatas={positiveData:"count"===t?e.sort((function(e,t){return t.positiveCount-e.positiveCount})).slice(0,10):e.sort((function(e,t){return t.posRate-e.posRate})).slice(0,10),negativeData:"count"===t?e.sort((function(e,t){return t.negativeCount-e.negativeCount})).slice(0,10):e.sort((function(e,t){return t.negRate-e.negRate})).slice(0,10)}},n.getOption=function(e,t,n,a,o,i){var r=this,l=n?100:60;return{title:{top:20,text:e},grid:[{x:"3%",y:l+50,bottom:40,width:"40%"},{x:"53%",y:l+50,bottom:40,width:"40%"}],tooltip:{trigger:"item",showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",formatter:function(e,t,n){var a=e.marker,o=e.name,l=(e.value,e.data),s=e.seriesName;return setTimeout((function(){var c=(0,d.hE)(l[s+"Count"]),p=(100*l[s.substring(0,3)+"Rate"]).toFixed(2),h=(0,v.v)({onOk:function(){return r.props.onWordModalView(o)}});n(t,(0,u.r)("<span>\n                  <span style='vertical-align: bottom'>"+a+"</span>\n                  "+o+"\n                  <span style='position:absolute;width:30px;height:250px;top:-50px;left:-36px;'></span>\n                  <span style='position:absolute;width:30px;height:250px;top:-50px;right:-38px;'></span>\n                  "+h+"\n                  <br/>\n                </span>",["<div>\n                    <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                      <div>"+("positive"===s?"\u6b63\u9762":"\u8d1f\u9762")+"</div>\n                      <div style='color: #262626;margin-left: 30px;'>\n                        "+c+" ("+p+"%)\n                      </div>\n                    </div>\n                    <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                      <div>\u603b\u6570\u91cf</div>\n                      <div style='color: #262626;margin-left: 30px;'>\n                        "+l.total+"\n                      </div>\n                    </div>\n                  </div>"],i?[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return r.handleOnMsgClick(e)}}]:void 0,"yt_new_tooltip_wrapper"))}),0)}},graphic:[{type:"group",top:60,left:"3%",silent:!0,children:n?g:[]},{type:"group",top:l,left:"3%",silent:!0,children:[{type:"text",left:15,style:{text:"TOP 10 \u70ed\u8bcd",font:"bolder 12px "+p.I8,fill:"#262626"}},{type:"text",left:100,style:{text:"(\u6765\u81ea\u6b63\u9762\u6709\u6548"+o+")",font:"normal 12px "+p.I8,fill:"#8C8C8C"}}]},{type:"group",top:l,left:"53%",silent:!0,children:[{type:"text",left:15,style:{text:"TOP 10 \u70ed\u8bcd",font:"bolder 12px "+p.I8,fill:"#262626"}},{type:"text",left:100,style:{text:"(\u6765\u81ea\u8d1f\u9762\u6709\u6548"+o+")",font:"normal 12px "+p.I8,fill:"#8C8C8C"}}]}],xAxis:["positive","negative"].map((function(e,t){return{gridIndex:t,axisTick:{show:!1,alignWithLabel:!0},nameTextStyle:{color:"#262626"},axisPointer:{type:"none",label:{show:!1}},axisLabel:{interval:0,formatter:function(t,n){var a=r.barDatas[e+"Data"][n].pos;return a?"{"+a+"|"+t+"}":t},rich:{n:{color:"#1890FF"},a:{color:"#FF9835"},un:{color:"#60DDA9"}}},data:r.barDatas[e+"Data"].map((function(e){return e.name}))}})),yAxis:["positive","negative"].map((function(e,t){return{gridIndex:t,axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1,lineStyle:{color:"#E8E8E8",type:"dashed"}}}})),series:["positive","negative"].map((function(e,n){return{type:"bar",name:e,barWidth:30,xAxisIndex:n,yAxisIndex:n,data:r.barDatas[e+"Data"].map((function(n){return(0,c.Z)({},n,{value:"count"===t?n[e+"Count"]:n[e.substring(0,3)+"Rate"],escore:["positive"===e?1:-1],label:{show:a,position:"top",color:"#262626",formatter:function(e){var n=e.value;return"count"===t?n:(100*n).toFixed(2)+"%"}}})}))}}))}},t}(r.Component);var x=n(98191),b=n(50976),C=n(94644),w=function(e){function t(t){var n;return(n=e.call(this,t)||this).renderChart=function(){var t=n.props,a=t.data,i=t.title,r=t.enablePos,l=t.titleWords,c=t.onMsgClick,p=n.state.showLabel,u=n.state.formulaType;(0,s.P)(a)&&n.chartRef&&e.prototype.renderChart.call((0,o.Z)(n),a,i,u,r,p,l,c)},n._handleOnMoreClick=function(e){var t=n.props,a=t.data,o=t.onConfig,i=t.title,r=n.state.formulaType;if(n.chartRef&&"image"===e)(0,C._v)(n.chartRef,i);else if((0,s.P)(a)&&"data"===e){var l,c,p,u;"rate"===r?(l="posRate",c="negRate",p="\u6b63\u9762\u6bd4\u4f8b",u="\u8d1f\u9762\u6bd4\u4f8b"):"count"===r&&(l="positiveCount",c="negativeCount",p="\u6b63\u9762\u6570\u91cf",u="\u8d1f\u9762\u6570\u91cf");var d=n.barDatas.positiveData.reduce((function(e,t,n){0===n&&t.pos&&e[0].push("\u8bcd\u6027");var a=t[l],o=[t.name,"rate"===r?(100*a).toFixed(2)+"%":a];return t.pos&&o.push(h[t.pos]),e.push(o),e}),[["\u70ed\u8bcd",p]]),f=n.barDatas.negativeData.reduce((function(e,t,n){0===n&&t.pos&&e[0].push("\u8bcd\u6027");var a=t[c],o=[t.name,"rate"===r?(100*a).toFixed(2)+"%":a];return t.pos&&o.push(h[t.pos]),e.push(o),e}),[["\u70ed\u8bcd",u]]);(0,C.aT)([[].concat(d,[""],f)],i)}else"config"===e&&o&&o()},n._handleOnStatChange=function(e){n.setState({formulaType:e},(function(){return n.renderChart()}))},n._handleOnMouseover=function(e){var t=e.componentType,n=e.componentSubType,a=e.name,o=e.data;"series"===t&&"bar"===n&&window.postMessage({from:"product_overview_double_bar_chart",action:"mouseover",pos:o.pos,param:{name:a,componentType:t,componentSubType:"wordCloud"}})},n._handleOnMouseout=function(e){var t=e.componentType,n=e.componentSubType;"series"===t&&"bar"===n&&window.postMessage({from:"product_overview_double_bar_chart",action:"mouseout",param:{componentType:t,componentSubType:"wordCloud"}})},n.handleOnMsgClick=function(e){var t=n.props,a=t.title;(0,t.onMsgClick)(e,a)},n.state={formulaType:"count",showLabel:!0},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,n=t[0],a=t[1];n.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(a.style.display="none")}),2e3)})),a&&a.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200)},n.componentDidUpdate=function(e,t){var n=e.data,a=this.props.data,o=t.showLabel,i=this.state.showLabel;JSON.stringify(n)!==JSON.stringify(a)&&this.renderChart(),o!==i&&this.renderChart(),!(0,s.P)(a)&&this.chartRef&&(this.chartRef=void 0)},n.render=function(){var e=this,t=this.state,n=t.formulaType,o=t.showLabel,i=this.props,c=i.data,p=i.title,u=i.titleOverlay,d=i.loading,h=i.enablePos,m=i.onFilterChange;return r.createElement(r.Fragment,null,r.createElement(s.Z,{className:"yt_app_comment_overview_feedback_hotword",loading:d,data:c,renderTitle:r.createElement(x.Z,{title:p,data:c,titleOverlay:u},r.createElement(l.Z,{options:f,activeObj:n,rightHook:!0,onChange:this._handleOnStatChange}),r.createElement("div",{className:"icons"},r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u8bcd\u6027\u533a\u5206",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-cixingqufen "+(h?"active":""),onClick:function(){return m({feedbackEnablePos:!h})}}))),r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u663e\u793a\u56fe\u8868\u6807\u7b7e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-tubiaobiaoqian "+(o?"active":""),onClick:function(){e.setState({showLabel:!o})}}))),r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-daochu",onClick:function(){return e._handleOnMoreClick("data")}}))),r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e._handleOnMoreClick("image")}})))))},r.createElement(b.Z,{theme:"yt_pos_neg",option:{},style:{height:"100%",width:"100%"},onChartReady:this.getChartRef,onEvents:{mouseover:this._handleOnMouseover,mouseout:this._handleOnMouseout}})))},t}(y)},83118:(e,t,n)=>{n.d(t,{Z:()=>M});n(43378);var a=n(62443),o=n(97326),i=n(94578),r=n(67294),l=n(8201),s=n(60496),c=n(98191),p=n(50976),u=n(43036),d=n(92360),h=["#5B8FF9","#60DDA9","#F6BD15","#F08A8A","#78D3F8","#65789B","#F6903D","#028685","#7262FD","#9661BC"],f={n:"#1890FF",a:"#FF9835",un:"#60DDA9"},m={n:"\u540d\u8bcd",a:"\u5f62\u5bb9\u8bcd",un:"\u5176\u4ed6"};const v=function(e){var t=e.data,n=e.filterData,a=e.style,o=e.getRef,i=t.slice(0,n),l=r.useState(1),s=l[0],c=l[1],p=i.slice(40*(s-1),40*s);return r.createElement("div",{className:"wordlist-wrapper",style:a,ref:o},r.createElement("div",{className:"title"},"\u8bcd\u9891\u8868"),r.createElement("div",{className:"list"},p.map((function(e,t){var n,a=t+1+40*(s-1),o=e.pos?f[e.pos]:a<11?h[t%h.length]:"#8c8c8c";return r.createElement(u.Z,{key:e.name+"_"+t,placement:"top",overlay:r.createElement(r.Fragment,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:(n=o,'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+n+';"></span> '+e.name)}}),e.pos&&r.createElement("div",null,"\u8bcd\u6027\uff1a"+m[e.pos]))},r.createElement("div",{className:"item"},r.createElement("span",{className:"index",style:{background:o}},a),r.createElement("span",{className:"name"},e.name),r.createElement("span",{className:"precent"},function(e,t){return e?e/1e4<1?e:e/1e8<1?(e/1e4).toFixed(t||0)+"\u4e07":(e/1e8).toFixed(t||0)+"\u4ebf":0}(e.total)," (",(100*e.precent).toFixed(2)+"%",")")))}))),r.createElement("div",{className:"pagination"},r.createElement(d.Pagination,{layout:"prev, pager, next",small:!0,total:i.length,pageSize:40,currentPage:s,onCurrentChange:function(e){return c(e)}})))};var g=n(87462),y=n(70715),x=n(87300),b=n(39432),C={n:"#1890FF",a:"#FF9835",un:"#60DDA9",pos:"#60DDA9",neu:"#1890ff",neg:"#F08A8A"},w={n:"\u540d\u8bcd",a:"\u5f62\u5bb9\u8bcd",un:"\u5176\u4ed6"},O=[{type:"image",title:"\u5bfc\u51fa\u56fe\u7247"},{type:"data",title:"\u5bfc\u51fa\u6570\u636e"},{type:"config",title:"\u504f\u597d\u8bbe\u7f6e"}],D=[{title:"TOP 10 ",value:10},{title:"TOP 20 ",value:20},{title:"TOP 30 ",value:30},{title:"TOP 50 ",value:50},{title:"TOP 100 ",value:100}],_=[{title:"\u8bcd\u4e91",value:1,icon:"icon-cem_cloud-new"},{title:"\u6c14\u6ce1",value:0,icon:"icon-cem_hotspot"},{title:"\u8868\u683c",value:2,icon:"icon-cem_form"}],T=n(18077),E=["#5B8FF9","#60DDA9","#F6BD15","#F08A8A","#78D3F8","#65789B","#F6903D","#028685","#7262FD","#9661BC"],R=E,k=["#60DDA9","#5B8FF9","#F08A8A"],F=function(e){return'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+e+';"></span>'},S=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).chartRef=void 0,t.tableRef=void 0,t.graphPieData=void 0,t.wordData=void 0,t.enablePos=!1,t.posArr=Object.keys(w),t.onFilterData=void 0,t.getChartRef=function(e){return t.chartRef=e},t.getTableRef=function(e){return t.tableRef=e},t}(0,i.Z)(t,e);var n=t.prototype;return n.renderChart=function(e,t,n,a,o,i){this.enablePos=n,this.onFilterData=a,this.titleWords=o,this.onMsgClick=i,this.setValue(e),this.updateChart(t)},n.setValue=function(e){this.wordData=e.map((function(e){return(0,g.Z)({},e,{value:Math.sqrt(e.total),escore:[-1,0,1]})}));var t=Math.sqrt(e[0].total);this.graphPieData=e.slice(0,10).map((function(e){return(0,g.Z)({},e,{rate:Math.sqrt(e.total)/t})}))},n.updateWordChart=function(e,t,n){this.chartRef.clear();var a=e.map((function(e){return(0,g.Z)({},e,{value:Math.sqrt(e.total),escore:[-1,0,1]})}));a=a.slice(0,t),this.enablePos&&(this.posArr=n,a=a.filter((function(e){return n.includes(e.pos)}))),this.wordData=a,this.chartRef.setOption(this.getWordCloudOption())},n.updateChart=function(e){this.chartRef&&(this.chartRef.clear(),0===e?(this.chartRef.setOption(this.getGraphOption()),this.chartRef.setOption(this.getPieOption())):1===e&&this.chartRef.setOption(this.getWordCloudOption()))},n.getGraphOption=function(){var e=this.chartRef.getHeight()-60,t=this.chartRef.getWidth()-60,n=t>e?e:t;return{series:[{type:"graph",layout:"force",silent:!0,animation:!1,legendHoverLink:!1,force:{repulsion:[.4*n,.8*n],gravity:.11,layoutAnimation:!1},data:this.graphPieData.map((function(e){return{symbolSize:e.rate*n/3}}))}]}},n.getPieOption=function(){var e=this,t=this.chartRef.getHeight(),n=this.chartRef.getWidth(),a=n>t?t:n;return{color:k,tooltip:{showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,n,a,o){var i=o.contentSize,r=o.viewSize,l=e[0]<r[0]/2?0:-1,s=e[1]<r[1]/2?-.5:-1;return[e[0]+l*i[0]+(l?-10:10),e[1]+s*i[1]]},formatter:function(t,n,a){return setTimeout((function(){var o,i,r=t.marker,l=t.data,s=l.value,c=l.name,p=l.total;if("label"!==c)o=r+" "+c,i=["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                  <div>\u6570\u91cf</div>\n                  <div style='color: #262626;margin-left: 30px;'>\n                    "+s+" ("+(s/p*100).toFixed(2)+"%)\n                  </div>\n                </div>"];else{var u=(0,T.v)({onOk:function(){return e.props.onWordModalView(p.name)}});o=p.name+"\uff1a"+p.total+" "+u,i=["<div>\n                  <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                    <div>"+F(C.neg)+" \u8d1f\u9762</div>\n                    <div style='color: #262626;margin-left: 30px;'>\n                      "+p.negativeCount+" ("+(100*p.negRate).toFixed(2)+"%)\n                    </div>\n                  </div>\n                  <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                    <div>"+F(C.neu)+" \u4e2d\u6027</div>\n                    <div style='color: #262626;margin-left: 30px;'>\n                      "+p.neutralCount+" ("+(100*p.neuRate).toFixed(2)+"%)\n                    </div>\n                  </div>\n                  <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                    <div>"+F(C.pos)+" \u6b63\u9762</div>\n                    <div style='color: #262626;margin-left: 30px;'>\n                      "+p.positiveCount+" ("+(100*p.posRate).toFixed(2)+"%)\n                    </div>\n                  </div>\n                </div>"]}a(n,(0,x.r)(o,i,e.onMsgClick?[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return e._handleOnMsgClick(t)}}]:void 0))}),0)}},graphic:[{type:"group",top:24,left:20,silent:!0,children:[{type:"text",left:10,style:{text:"TOP 10 \u70ed\u8bcd",font:"bolder 14px "+y.I8,lineWidth:4,fill:"#262626"}},{type:"text",left:(0,b.jD)("TOP 10 \u70ed\u8bcd")+22,style:{text:"(\u6765\u81ea\u6709\u6548"+this.titleWords+")",font:"normal 14px "+y.I8,fill:"#8C8C8C"}}]}],series:this.chartRef._zr.storage._displayList.map((function(t,n){var o=e.graphPieData[n],i=o.rate*a/3*.35,r=e.chartRef.convertToPixel({seriesIndex:0},[t.transform[4]+30,t.transform[5]+30]),l=26*o.rate,s=l*o.name.length>2*(i-10)?2*(i-10)/o.name.length:l;return{type:"pie",name:o.name,center:r,hoverOffset:4,radius:[i-5,i],label:{normal:{show:!0,position:"center",formatter:"{a|"+o.name+"}",rich:{a:{color:o.pos?C[o.pos]:"#262626",fontSize:s,fontFamily:y.I8}}}},itemStyle:{shadowBlur:10,shadowColor:"rgba(155,155,155,0.5)",borderColor:"#ffffff",borderWidth:.5},data:[{value:o.positiveCount,name:"\u6b63\u9762",realName:o.name,total:o.total,escore:[1],emotion:["positive"],pos:o.pos},{value:o.neutralCount,name:"\u4e2d\u6027",realName:o.name,total:o.total,escore:[0],emotion:["neutral"],pos:o.pos},{value:o.negativeCount,name:"\u8d1f\u9762",realName:o.name,total:o.total,escore:[-1],emotion:["negative"],pos:o.pos},{value:0,name:"label",total:o,realName:o.name,escore:[-1,0,1]}]}}))}},n.getWordCloudOption=function(){var e=this,t=Object.values(w).reduce((function(t,n,a,o){var i="";o.slice(0,a).map((function(e){return i+=e}));var r=(0,b.jD)(i,12)+48*a,l=Object.keys(w)[a],s={type:"circle",left:r,top:.5,shape:{cx:5,cy:4,r:5},style:{fill:e.enablePos&&e.posArr.includes(l)?Object.values(C)[a]:"#e5e5e5"}},c={type:"text",left:r+16,style:{text:n,fill:e.enablePos&&e.posArr.includes(l)?"#8C8C8C":"#e5e5e5",font:"400 12px "+y.I8},onclick:function(){return e.onFilterData(l)}};return t.push(s,c),t}),[]);return{graphic:[{type:"group",top:60,left:"3%",silent:!1,children:this.enablePos?t:[]},{type:"group",top:24,left:20,silent:!0,children:[{type:"text",left:10,style:{text:"\u70ed\u8bcd",font:"bolder 14px "+y.I8,fill:"#262626"}},{type:"text",left:(0,b.jD)("\u70ed\u8bcd")+22,style:{text:"(\u6765\u81ea\u6709\u6548"+this.titleWords+")",font:"normal 14px "+y.I8,fill:"#8C8C8C"}}]}],tooltip:{showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,n,a,o){var i=o.contentSize,r=o.viewSize,l=e[0]<r[0]/2?0:-1,s=e[1]<r[1]/2?-.5:-1;return[e[0]+l*i[0]+(l?-10:10),e[1]+s*i[1]]},formatter:function(t,n,a){return setTimeout((function(){var o=t.marker,i=t.data,r=i.name,l=i.total,s=(i.pos,i.precent,i.positiveCount,i.posRate,i.negativeCount,i.negRate,i.neutralCount,i.neuRate,["<div>\n                <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                  <div>\u6570\u91cf</div>\n                  <div style='color: #262626;margin-left: 20px;'>\n                    "+l+"\n                  </div>\n                </div>\n              </div>"]),c=(0,T.v)({onOk:function(){return e.props.onWordModalView(r)}});a(n,(0,x.r)(o+' <span style="font-weight: bold">'+r+"</span>\n                "+c+"\n                ",s,e.onMsgClick?[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return e._handleOnMsgClick(t)}}]:void 0,"yt_new_tooltip_wrapper"))}),0)}},series:[{type:"wordCloud",name:"overview-wordcloud",gridSize:12,sizeRange:[16,50],rotationRange:[0,0],width:"100%",height:"90%",data:this.wordData,textStyle:{normal:{color:function(e){var t=e.dataIndex,n=e.data.pos;return n?C[n]:E[t%R.length]}},emphasis:{color:"#D8D8D8"}}}]}},t}(r.PureComponent),N=n(94644),P=function(e,t,n,a){setTimeout((function(){var o={type:t,seriesIndex:0,seriesName:"overview-wordcloud"};a?o.dataIndex=a:n&&(o.name=n),e.dispatchAction(o)}),0)},M=function(e){function t(t){var n;return(n=e.call(this,t)||this).renderChart=function(){var t=n.props,a=t.data,i=t.enablePos,r=t.titleWords,s=t.onMsgClick,c=n.state.type;(0,l.P)(a)&&n.chartRef&&e.prototype.renderChart.call((0,o.Z)(n),a,c,i,n.handleFilterData,r,s)},n.handleFilterData=function(e){var t=n.state.top,a=n.state.posArr,o=n.props.data;a.includes(e)?a=a.filter((function(t){return t!==e})):a.push(e),n.updateWordChart(o,t,a),n.setState({posArr:a})},n._handleOnMessageReceive=function(e){var t=e.data;if(n.chartRef&&"product_overview_double_bar_chart"===t.from)if("mouseover"===t.action){var a=n.wordData.findIndex((function(e){return e.name===t.param.name&&e.pos===t.pos}));a>-1&&(t.param.dataIndex=a),n._handleOnMouseOver(t.param)}else"mouseout"===t.action&&n._handleOnMouseOut(t.param)},n.handleOnTopChange=function(e){var t=n.state,a=t.top,o=t.posArr,i=n.props.data;a!==e&&(n.updateWordChart(i,e,o),n.setState({top:e}))},n._handleOnTopChange=function(e){var t=n.props.data,a=void 0;if(100!==e){a=[];for(var o=t.length-1;o>=e;o--)a.push(t[o].name)}n.setState({top:e,hightlightNames:a},(function(){1===n.state.type&&(P(n.chartRef,"downplay",void 0),a&&P(n.chartRef,"highlight",a))}))},n._handleOnMoreClick=function(e){var t=n.props,a=t.data,o=t.onConfig,i=n.state.type,r=0===i?"TOP10\u70ed\u8bcd":1===i?"\u70ed\u8bcd":"\u8bcd\u9891\u8868";if("image"===e)2===i&&n.tableRef?(0,N.Mx)(n.tableRef,r):n.chartRef&&(0,N._v)(n.chartRef,r);else if((0,l.P)(a)&&"data"===e){var s=(0===i?n.graphPieData:n.wordData).reduce((function(e,t,n){0===n&&t.pos&&e[0].splice(1,0,"\u8bcd\u6027");var a=[t.name,t.total,t.positiveCount,(100*t.posRate).toFixed(2)+"%",t.neutralCount,(100*t.neuRate).toFixed(2)+"%",t.negativeCount,(100*t.negRate).toFixed(2)+"%"];return t.pos&&a.splice(1,0,w[t.pos]),e.push(a),e}),[["\u70ed\u8bcd","\u603b\u6570\u91cf","\u6b63\u9762\u6570\u91cf","\u6b63\u9762\u6bd4\u4f8b","\u4e2d\u6027\u6570\u91cf","\u4e2d\u6027\u6bd4\u4f8b","\u8d1f\u9762\u6570\u91cf","\u8d1f\u9762\u6bd4\u4f8b"]]);(0,N.aT)([s],r)}else"config"===e&&o&&o()},n._handleOnTypeChange=function(e){n.state.type!==e&&n.setState({type:e},(function(){2!==e&&setTimeout((function(){n.updateChart(e)}),100)}))},n._resetChart=function(){var e=n.state.type;0===e&&n.updateChart(e),n.shouldNotCallOutside=!1},n._handleOnMouseOver=function(e){var t=e.componentType,a=e.componentSubType,o=e.name,i=e.dataIndex;1===n.state.type&&(n.shouldNotCallOutside=!0,"series"===t&&"wordCloud"===a&&(P(n.chartRef,"downplay",o),P(n.chartRef,"showTip",o,i)))},n._handleOnMouseOut=function(e){var t=e.componentType,a=e.componentSubType;if(1===n.state.type){n.shouldNotCallOutside=!0;var o=n.state.hightlightNames;"series"===t&&"wordCloud"===a&&(P(n.chartRef,"downplay",void 0),o&&P(n.chartRef,"highlight",o),P(n.chartRef,"hideTip",void 0))}},n._handleFinished=function(){if(1===n.state.type&&!n.shouldNotCallOutside){var e=n.state.hightlightNames;!n.lastFinishTimeoutId&&n.setState({wcReady:!1}),n.lastFinishTimeoutId&&clearTimeout(n.lastFinishTimeoutId),n.lastFinishTimeoutId=setTimeout((function(){n.setState({wcReady:!0},(function(){e&&(P(n.chartRef,"downplay",void 0),P(n.chartRef,"highlight",e))})),n.lastFinishTimeoutId=void 0}),100)}},n._handleOnMsgClick=function(e){var t=n.state.type,a=n.props.titleWords;n.props.onMsgClick(e,0===t?"TOP10\u70ed\u8bcd\uff08\u6765\u81ea\u6709\u6548"+a+"\uff09":1===t?"\u70ed\u8bcd\uff08\u6765\u81ea\u6709\u6548"+a+"\uff09":"")},n.lastFinishTimeoutId=void 0,n.shouldNotCallOutside=!1,n.state={type:1,top:100,posArr:Object.keys(w),wcReady:!1,hightlightNames:void 0},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,n=t[0],a=t[1];n.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(a.style.display="none")}),2e3)})),a&&a.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200)},n.componentWillUnmount=function(){},n.componentDidUpdate=function(e,t){var n=e.data,a=this.props.data;JSON.stringify(n)!==JSON.stringify(a)&&this.renderChart(),!(0,l.P)(a)&&this.chartRef&&(this.chartRef=void 0)},n.render=function(){var e=this,t=this.props,n=t.data,o=t.title,i=t.loading,u=t.className,d=void 0===u?"":u,h=t.enableConfig,f=t.enablePos,m=t.onFilterChange,g=this.state,y=g.type,x=(g.wcReady,g.top);return!h&&O.splice(2,1),r.createElement(r.Fragment,null,r.createElement(l.Z,{className:"yt_app_comment_overview_hotword "+d,data:n,loading:i,renderTitle:r.createElement(c.Z,{title:o,data:n},0!==y&&r.createElement(s.Z,{options:D,activeObj:x,rightHook:!0,onChange:this.handleOnTopChange}),r.createElement(s.Z,{options:_,activeObj:y,rightHook:!0,onChange:this._handleOnTypeChange}),r.createElement("div",{className:"icons"},r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u8bcd\u6027\u533a\u5206",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-cixingqufen "+(f?"active":""),onClick:function(){return m({hotwordEnablePos:!f})}}))),r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-daochu",onClick:function(){return e._handleOnMoreClick("data")}}))),r.createElement("div",{className:"icon"},r.createElement(a.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e._handleOnMoreClick("image")}})))))},r.createElement(p.Z,{theme:"yt_multi_color_10",option:{},onChartReady:this.getChartRef,style:{width:"100%",height:"100%",display:2!==y?"block":"none"},onEvents:{finished:this._handleFinished,mouseover:this._handleOnMouseOver,mouseout:this._handleOnMouseOut}}),(0,l.P)(n)&&r.createElement(v,{getRef:this.getTableRef,data:n,filterData:x,style:{display:2===y?"block":"none"}})))},t}(S)}}]);