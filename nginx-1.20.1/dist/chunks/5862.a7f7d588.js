(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[5862],{75862:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var a=n(94578),i=n(67294),o=n(92360),r=n(5133),l=n(49722),s=n(12518),c=n(12234),p=n(88308),d=n(5747),m=n(61193),u=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).state={form:{title:"",slogan:""},rules:{slogan:{trigger:"blur"},title:{message:"\u8bf7\u8f93\u5165\u7f51\u9875title",trigger:"blur"}},sideLogo:"images/yun_ting",loginLogo:"images/yunting_no_text",uploadPic:"",sideCropShow:!1,sideCropLoading:!1,loginCropShow:!1,loginCropLoading:!1,NPSCropShow:!1,NPSCropLoading:!1},t.loginCropConfirm=function(e){t.setState({loginCropLoading:!0},(function(n){var a=window.location.hostname+"/-130_130.png",i={base64Code:e,fileName:a,type:"Account_Logo"};i=JSON.stringify(i),l.v.post("upload/head",i,{headers:{"Content-Type":"application/json"}}).then((function(e){var n=e.data.result+"?_="+(new Date).getTime(),a=m.Z.getUser();a.accountLogo=n,m.Z.register(a),r.Z.success(e.data.msg),t.setState({loginCropShow:!1,uploadPic:"",loginCropLoading:!1})}))}))},t.NPSCropConfirm=function(e){t.setState({NPSCropLoading:!0},(function(n){var a=window.location.hostname+"/-130_130.png",i={base64Code:e,fileName:a,type:"NPS_LOGO"};i=JSON.stringify(i),l.v.post("upload/head",i,{headers:{"Content-Type":"application/json"}}).then((function(e){e.data.result,(new Date).getTime();r.Z.success(e.data.msg),t.setState({NPSCropShow:!1,uploadPic:"",NPSCropLoading:!1})}))}))},t.uploadIco=function(e){var t=e.target,n=t.files[0];if(!/\.(ico)$/i.test(n.name))return r.Z.error("\u8bf7\u4e0a\u4f20ico\u683c\u5f0f\u7684\u56fe\u7247");var a=new FileReader;a.readAsDataURL(n),a.onload=function(e){var n=e.target.result,a=window.location.hostname+"/-64_64.ico",i=new FormData;i.append("base64Code",n),i.append("fileName",a);var o={base64Code:n,fileName:a};o=JSON.stringify(o),t.value="",l.v.post("upload/web_title",o,{headers:{"Content-Type":"application/json"}}).then((function(e){document.querySelector("link[rel='icon']").setAttribute("href",e.data.result+"?_="+(new Date).getTime()),r.Z.success(e.data.msg)}))}},t.faciconUploadFn=function(e){t.refs.faciconUpload.click()},t.sideLogoUploadFn=function(e){t.refs.sideLogoUpload.click()},t.loginLogoUploadFn=function(e){t.refs.loginLogoUpload.click()},t.NPSLogoUploadFn=function(e){t.refs.NPSLogoUpload.click()},t}(0,a.Z)(t,e);var u=t.prototype;return u.componentDidMount=function(){var e=this;l.h.get("/account/basic_info/list").then((function(t){var n={},a=t.data.result;a.slogan&&(n.slogan=a.slogan),e.setState({form:n}),e.onChange("title",a.webTitle)}))},u.onChange=function(e,t){var n;this.setState({form:Object.assign(this.state.form,(n={},n[e]=t,n))})},u.handleNameSubmit=function(e,t){var n=this,a=this.state.form;this.refs.form.validate((function(i){if(!i)return!1;var o;n.setState({form:Object.assign(a,(o={},o[e]=t,o))},(function(t){"slogan"===e?l.h.post("/account/slogan/update",{slogan:a.slogan}).then((function(e){n.setState({sloganEditable:!1}),r.Z.info(e.data.msg)})):"title"===e&&l.h.post("/account/web_title/update",{webTitle:a.title}).then((function(e){n.setState({titleEditable:!1}),r.Z.info(e.data.msg),localStorage.setItem("cem-web-tile",a.title)}))}))}))},u.sloganCancel=function(){this.setState({sloganEditable:!1,form:Object.assign(this.state.form,{slogan:this.state.slogan})})},u.titleCancel=function(){this.setState({titleEditable:!1,form:Object.assign(this.state.form,{title:this.state.title})})},u.startLoginCrop=function(e){var t=this,n=e.target,a=new FileReader;a.readAsDataURL(n.files[0]),a.onload=function(e){var n=e.target.result;t.setState({uploadPic:n,loginCropShow:!0})}},u.startNPSCrop=function(e){var t=this,n=e.target,a=new FileReader;a.readAsDataURL(n.files[0]),a.onload=function(e){var n=e.target.result;t.setState({uploadPic:n,NPSCropShow:!0})}},u.startSideCrop=function(e){var t=this,n=e.target,a=new FileReader;a.readAsDataURL(n.files[0]),a.onload=function(e){var n=e.target.result;t.setState({uploadPic:n,sideCropShow:!0})}},u.sideCropConfirm=function(e){var t=this;this.setState({sideCropLoading:!0},(function(n){var a=window.location.hostname+"/-128_45.png",i=new FormData;i.append("base64Code",e),i.append("fileName",a);var o={base64Code:e,fileName:a};o=JSON.stringify(o),l.v.post("upload/head",o,{headers:{"Content-Type":"application/json"}}).then((function(e){var n=document.querySelector(".log_img"),a=e.data.result+"?_="+(new Date).getTime();n.setAttribute("src",a);var i=m.Z.getUser();i.accountHead=a,m.Z.register(i),r.Z.success(e.data.msg),t.setState({sideCropShow:!1,uploadPic:"",sideCropLoading:!1})}))}))},u.render=function(){var e=this,t=this.state,a=t.sideLogo,r=t.loginLogo,l=t.sloganEditable,m=t.titleEditable,u=t.form,g=t.sideCropShow,f=t.sideCropLoading,h=t.loginCropShow,E=t.loginCropLoading,v=t.uploadPic,N=t.NPSCropShow,C=t.NPSCropLoading,S=document.documentElement.clientHeight-46-48-24;return i.createElement("div",{className:"flex-col common-wrapper"},i.createElement(s.Z,{title:"\u81ea\u5b9a\u4e49\u8bbe\u7f6e"}),i.createElement("div",{className:"set-list common-padding-12"},i.createElement("div",{style:{minHeight:S,backgroundColor:"#fff"}},i.createElement(o.Form,{model:this.state.form,rules:this.state.rules,className:"inforForm",ref:"form",labelWidth:"200px",labelPosition:"left"},i.createElement(o.Form.Item,{label:"\u767b\u5f55\u9875\u9762\u6807\u8bed",prop:l?"slogan":""},i.createElement(p.Z,{id:"editSlogan",value:u.slogan,empty:!0,placeholder:"(\u65e0)",name:"slogan",confirm:function(t){return e.handleNameSubmit("slogan",t)}})),i.createElement(o.Form.Item,{label:"\u7f51\u9875\u9876\u90e8\u6807\u9898",prop:m?"title":""},i.createElement(p.Z,{id:"editTitle",value:u.title,name:"title",confirm:function(t){return e.handleNameSubmit("title",t)}}))),i.createElement("div",{className:"desc"},i.createElement("p",null,i.createElement("span",{className:"desc-title"},"\u6dfb\u52a0\u7f51\u9875\u9876\u90e8\u56fe\u6807"),i.createElement("span",null,"\u4ec5\u652f\u6301ico\u683c\u5f0f\uff0c\u6587\u4ef6\u5c0f\u4e8e1M")),i.createElement("div",{className:"side-logo logo-upload"},i.createElement("div",{onClick:this.faciconUploadFn,className:"bar"},i.createElement(c.l,{name:"add-to"}),"\u8bf7\u4e0a\u4f20\u56fe\u6807"),i.createElement("div",{className:"example"},i.createElement("span",null,"\u793a\u4f8b:")," ",i.createElement("img",{src:n(25810)("./"+r+".png"),alt:""}))),i.createElement("p",null,i.createElement("span",{className:"desc-title"},"\u6dfb\u52a0\u4fa7\u8fb9\u680f\u6807\u8bc6"),i.createElement("span",null,"\u4ec5\u652f\u6301png\u683c\u5f0f\uff0c\u6587\u4ef6\u5c0f\u4e8e1M\uff08\u77e9\u5f62\u56fe\uff09\uff0c\u5efa\u8bae\u5c3a\u5bf8\uff1a186*45")),i.createElement("div",{className:"side-logo logo-upload"},i.createElement("div",{onClick:this.sideLogoUploadFn,className:"bar"},i.createElement(c.l,{name:"add-to"}),"\u8bf7\u4e0a\u4f20\u56fe\u7247"),i.createElement("div",{className:"example"},i.createElement("span",null,"\u793a\u4f8b:")," ",i.createElement("img",{src:n(25810)("./"+a+".png"),alt:""}))),i.createElement("p",null,i.createElement("span",{className:"desc-title"},"\u6dfb\u52a0\u767b\u5f55/\u6fc0\u6d3b\u9875\u9762\u6807\u8bc6"),i.createElement("span",null,"\u4ec5\u652f\u6301png\u683c\u5f0f\uff0c\u6587\u4ef6\u5c0f\u4e8e1M\uff08\u77e9\u5f62\u56fe\uff09\uff0c\u5efa\u8bae\u5c3a\u5bf8\uff1a130*130")),i.createElement("div",{className:"login-logo logo-upload"},i.createElement("div",{onClick:this.loginLogoUploadFn,className:"bar"},i.createElement(c.l,{name:"add-to"}),"\u8bf7\u4e0a\u4f20\u56fe\u7247"),i.createElement("div",{className:"example"},i.createElement("span",null,"\u793a\u4f8b:")," ",i.createElement("img",{src:n(25810)("./"+r+".png"),alt:""}))),i.createElement("p",null,i.createElement("span",{className:"desc-title"},"\u6dfb\u52a0NPS\u95ee\u5377logo"),i.createElement("span",null,"\u4ec5\u652f\u6301png\u683c\u5f0f\uff0c\u6587\u4ef6\u5c0f\u4e8e1M\uff08\u77e9\u5f62\u56fe\uff09\uff0c\u5efa\u8bae\u5c3a\u5bf8\uff1a110*110")),i.createElement("div",{className:"login-logo logo-upload"},i.createElement("div",{onClick:this.NPSLogoUploadFn,className:"bar"},i.createElement(c.l,{name:"add-to"}),"\u8bf7\u4e0a\u4f20\u56fe\u7247"),i.createElement("div",{className:"example"},i.createElement("span",null,"\u793a\u4f8b:")," ",i.createElement("img",{src:n(25810)("./"+r+".png"),alt:""}))),i.createElement("input",{type:"file",hidden:!0,ref:"faciconUpload",accept:"image/x-icon",onChange:function(t){return e.uploadIco(t)}}),i.createElement("input",{type:"file",hidden:!0,ref:"sideLogoUpload",accept:"images/png",onChange:function(t){return e.startSideCrop(t)}}),i.createElement("input",{type:"file",hidden:!0,ref:"loginLogoUpload",accept:"images/png",onChange:function(t){return e.startLoginCrop(t)}}),i.createElement("input",{type:"file",hidden:!0,ref:"NPSLogoUpload",accept:"images/png",onChange:function(t){return e.startNPSCrop(t)}})))),g&&i.createElement(d.Z,{src:v,title:"\u4e0a\u4f20\u4fa7\u8fb9\u680f\u56fe\u6807",loading:f,confirm:this.sideCropConfirm.bind(this),cancel:function(t){e.setState({sideCropShow:!1})},aspectRatio:75/18}),h&&i.createElement(d.Z,{src:v,title:"\u4e0a\u4f20\u767b\u5f55/\u6fc0\u6d3b\u9875\u9762\u6807\u8bc6",loading:E,confirm:this.loginCropConfirm.bind(this),cancel:function(t){e.setState({loginCropShow:!1})}}),N&&i.createElement(d.Z,{src:v,title:"\u4e0a\u4f20NPS\u95ee\u5377logo",loading:C,confirm:this.NPSCropConfirm.bind(this),cancel:function(t){e.setState({NPSCropShow:!1})}}))},t}(i.Component)},12234:(e,t,n)=>{"use strict";n.d(t,{l:()=>p});var a=n(87462),i=n(63366),o=n(94578),r=n(67294),l=n(94184),s=n.n(l),c=["className","name"],p=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.name,o=(0,i.Z)(e,c),l=s()("icon",["cem-"+n],t);return r.createElement("svg",(0,a.Z)({className:l},o),r.createElement("use",{xlinkHref:"#icon-cem-"+n}))},t}(r.Component)},5747:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(94578),i=n(67294),o=n(45697),r=n.n(o),l=n(94184),s=n.n(l),c=n(55761),p=n(92360),d=n(5133),m=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).state={src:t.props.src,preCropPic:"",once:!0,fileName:t.props.fileName},t}(0,a.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e,t){this.setState({uploadPic:e.uploadPic},(function(e){}))},n._crop=function(){var e=this.props.refName,t=this.refs[e].getCroppedCanvas().toDataURL();this.setState({preCropPic:t})},n.profilePicUpload=function(e){var t=this.props.reUpload,n=this,a=e.target.files[0];if(a.size/1024>1024)return d.Z.error("\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e1M"),!1;var i=new FileReader;i.readAsDataURL(a),i.onload=function(e){n.setState({src:e.target.result,fileName:a.name}),t&&t(e.target.result)}},n.render=function(){var e=this.state,t=e.src,n=e.preCropPic,a=this.props,o=a.title,r=a.tip,l=a.style,d=a.className,m=a.loading,u=a.refName,g=a.aspectRatio,f=a.accept,h=a.confirm,E=a.cancel,v=a.borderRadius,N=this.state.fileName,C="cropper-pic-wrap";d&&(C=s()("cropper-pic-wrap",d));var S=s()("pre-pic",{"border-radius":v}),b=1;return g&&"[object Number]"===Object.prototype.toString.call(b)&&(b=g),i.createElement("div",{className:C},i.createElement("div",{className:"crop-wrap"},i.createElement(p.Loading,{loading:m},i.createElement("div",{className:"crop-title"},i.createElement("span",null,o),i.createElement("i",{className:"icon-cem_cancel",onClick:function(){return E(n)}})),i.createElement("div",{className:"crop-cont"},i.createElement(c.Z,{ref:u,src:t,style:l,aspectRatio:b,guides:!1,crop:this._crop.bind(this)}),i.createElement("div",{className:"option-cont"},i.createElement("div",{className:"pre-cont"},i.createElement("img",{className:S,src:n})),i.createElement("div",{className:"pre-tip"},"\u9884\u89c8"),i.createElement("div",{className:"reupload-cont"},i.createElement(p.Button,{type:"primary",onClick:function(){return document.getElementById("reupload").click()}},"\u91cd\u65b0\u4e0a\u4f20"),i.createElement("input",{type:"file",id:"reupload",hidden:!0,accept:f,onChange:this.profilePicUpload.bind(this)})))),i.createElement("p",{className:"crop-tip"},r),i.createElement("div",{className:"crop-option"},i.createElement(p.Button,{onClick:function(){E(n)}},"\u53d6\u6d88"),i.createElement(p.Button,{type:"primary",onClick:function(){h(n,N)}},"\u786e\u5b9a")))),i.createElement("div",{className:"crop-bg"}))},t}(i.Component);m.propTypes={show:r().bool,title:r().string,tip:r().string,src:r().string,refName:r().string,accept:r().string,confirm:r().func,cancel:r().func,reUpload:r().func,borderRadius:r().bool,loading:r().bool,fileName:r().string},m.defaultProps={show:!1,src:"",title:"\u4e0a\u4f20\u56fe\u7247",accept:"images/png",tip:"\u4ec5\u652f\u6301png\u683c\u5f0f\uff0c\u6587\u4ef6\u5c0f\u4e8e1M",refName:"cropper"+(new Date).getTime(),style:{height:263,width:263},borderRadius:!1,loading:!1,fileName:""}},88308:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var a=n(94578),i=n(67294),o=n(45697),r=n.n(o),l=n(5133),s=n(43036),c=n(94184),p=n.n(c),d={value:r().string,id:r().any.isRequired,enter:r().bool,blurFun:r().func,name:r().string,empty:r().bool,placeholder:r().string,type:r().string,confirmNoChange:r().func},m={value:"",enter:!0,name:"\u540d\u79f0",empty:!1,placeholder:"",cancel:function(e,t){},confirm:function(e,t){},type:"normal"},u=function(e){function t(t){var n;(n=e.call(this,t)||this).enter=function(e){n.props.enter&&13===e.keyCode&&n.confirmEdit()};var a=n.props.value;return n.state={isEdit:!1,curValue:a||"",lastVal:a||"",hover:!1,canEdit:!1},n}(0,a.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var t=this;e.value!==this.state.lastVal&&e.value&&this.setState({curValue:e.value,lastVal:e.value}),!0!==e.canEdit||this.state.canEdit||this.setState({canEdit:!0},(function(e){t.toEdit()}))},n.componentDidMount=function(){var e=this;document.body.addEventListener("click",(function(t){var n=t.target||window.event.srcElement,a=e.props.className,i="edit-input-wrap";a&&(i=a.split(" ")[0]);(function(e,t){for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!n.call(e,t);)e=e.parentElement;return e})(n,"."+i)||e.cancelEdit()}))},n.changeName=function(){var e=this.props.id,t=document.getElementById(e).value;this.setState({curValue:t})},n.toEdit=function(){var e=this.state,t=e.isEdit,n=(e.canEdit,this.props.id);t||this.setState({isEdit:!0,hover:!0},(function(e){var t=document.getElementById(n);setTimeout((function(){t.focus()}))}))},n.checkEdit=function(){"normal"===this.props.type&&this.toEdit()},n.cancelEdit=function(){var e=this.state,t=e.curValue,n=e.lastVal,a=e.isEdit,i=e.canEdit,o=this.props.cancel;a&&(i&&this.setState({canEdit:!1}),this.setState({isEdit:!1,hover:!1,curValue:n},(function(e){o&&o(t,n)})))},n.borderShow=function(){var e=this.state.hover;"normal"!==this.props.type||e||this.setState({hover:!0})},n.borderHide=function(){var e=this.state,t=e.hover,n=e.isEdit;"normal"===this.props.type&&t&&!n&&this.setState({hover:!1})},n.confirmEdit=function(){var e=this.state,t=e.curValue,n=e.lastVal,a=e.canEdit,i=this.props,o=i.confirm,r=i.id,s=i.name,c=i.empty,p=i.confirmNoChange,d=i.inputType,m=document.getElementById(r);""!==String(t).replace(/\s/g,"")||c||"remark"===d?(""===String(t).replace(/\s/g,"")&&c||"remark"==d?(this.setState({isEdit:!1,hover:!1,lastVal:t},(function(e){m.blur()})),o&&o(t,n)):n===t?this.setState({isEdit:!1,hover:!1},(function(e){m.blur()})):(this.setState({isEdit:!1,hover:!1,lastVal:t},(function(e){m.blur()})),o&&o(t,n)),a&&(p&&p(t),this.setState({canEdit:!1}))):(l.Z.warning(s+"\u4e0d\u80fd\u4e3a\u7a7a"),this.setState({curValue:n},(function(e){m.focus()})))},n.render=function(){var e=this.props,t=e.id,n=e.style,a=e.className,o=e.placeholder,r=this.state,l=r.isEdit,c=r.curValue,d=r.hover,m=p()(["edit-input-wrap",a]),u=p()(["edit-input-cont",{hover:d,"is-edit":l}]),g=p()(["edit-input",{disabled:!l}]);return i.createElement("div",{className:m,style:n},i.createElement("div",{className:u,onMouseEnter:this.borderShow.bind(this),onMouseLeave:this.borderHide.bind(this),onClick:this.checkEdit.bind(this)},i.createElement("input",{id:t,className:g,type:"text",value:c,title:c,placeholder:o,style:n,disabled:!l,onInput:this.changeName.bind(this),onKeyDown:this.enter.bind(this)}),d&&!l&&i.createElement(s.Z,{placement:"top",overlay:"\u7f16\u8f91"},i.createElement("div",{className:"btn-wrap",title:"\u7f16\u8f91"},i.createElement("i",{className:"name-edit edit-btn icon-cem_edit"}))),d&&l&&i.createElement("div",{className:"btn-wrap"},i.createElement(s.Z,{placement:"top",overlay:"\u53d6\u6d88"},i.createElement("i",{className:"cancel-edit edit-btn icon-cem_delete",onClick:this.cancelEdit.bind(this),title:"\u53d6\u6d88"})),i.createElement(s.Z,{placement:"top",overlay:"\u786e\u8ba4"},i.createElement("i",{className:"confirm-edit edit-btn icon-cem_check-out",onClick:this.confirmEdit.bind(this),title:"\u786e\u8ba4"})))))},t}(i.Component);u.propTypes=d,u.defaultProps=m;const g=u},12518:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(94578),i=n(67294),o=n(45697),r=n.n(o),l=n(61409),s=n(92360),c=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props.title;e!==n.length-1&&l.mW.go(e-n.length+1)},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.rightContent;return i.createElement("div",{className:"secondary-header"},n instanceof Array?i.createElement(s.Breadcrumb,{className:"breadcrumb-style",separator:""},n.map((function(t,n){return i.createElement(s.Breadcrumb.Item,{key:n},i.createElement("span",{onClick:function(){return e._handleBreadcrumbClick(n)}},t))}))):i.createElement("div",{className:"normal-title"},n),a&&a)},t}(i.Component);c.propTypes={title:r().oneOfType([r().string,r().array]).isRequired,rightContent:r().node};const p=c},25810:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=25810,e.exports=t}}]);