"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[949],{70949:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(87462),i=n(97326),r=n(94578),s=n(67294),o=n(92360),l=n(5133),c=n(29383),m=n(49722),d=n(12518),u=function(e){function t(){var t;return(t=e.call(this)||this).addTopic=function(e){e.preventDefault(),""!==t.state.form.name?m.h.post("/topics/add",t.state.form).then((function(e){l.Z.success("\u6dfb\u52a0\u6210\u529f"),t.setState({connectDialogVisible:!1,form:{projectId:t.state.projects[0].id,name:""}}),t.getMessageList()})):l.Z.warning("\u8bf7\u8f93\u5165\u6d88\u606f\u8def\u7531\u540d\u79f0")},t.showDialog=function(){var e=t.state,n=e.form,i=e.selectItem;t.setState({form:(0,a.Z)({},n,{projectId:i.id})},(function(e){return t.setState({connectDialogVisible:!0})}))},t.state={connectDialogVisible:!1,all:"",used:"",form:{name:"",projectId:""},users:[],columns:[{label:"\u5f00\u542f",prop:"name",render:function(e,n,a){return s.createElement("div",null,s.createElement(o.Switch,{value:e.openRemind,onChange:t.handleSwitch.bind((0,i.Z)(t),e),onColor:"#0747A6",offColor:"#CCCCCC",onText:"",offText:"",width:40}))}},{label:"\u6587\u4ef6\u5939",render:function(e,t,n){return s.createElement("span",null,e.idNameVO.name)}},{label:"\u63a8\u9001\u65b9\u5f0f",width:180,render:function(e,n,a){return s.createElement("span",null,s.createElement(o.Checkbox,{disabled:!e.openRemind,checked:"EMAIL"===e.remindType,onChange:t.changeRemindWay.bind((0,i.Z)(t),e,"EMAIL"),label:"\u90ae\u4ef6"}))}}],messagesRoutes:[]},t}(0,r.Z)(t,e);var n=t.prototype;return n.onChange=function(e,t){var n;this.setState({form:Object.assign(this.state.form,(n={},n[e]=t,n))})},n.getMessageList=function(){var e=this;m.h.get("/folder/message/remind/list").then((function(t){var n=t.data.result;e.setState({messagesRoutes:n})}))},n.handleSwitch=function(e){var t=this;m.h.post("/folder/message/remind/update",{id:e.idNameVO.id,openRemind:!e.openRemind,remindType:"EMAIL"}).then((function(e){t.getMessageList()}))},n.changeRemindWay=function(e,t){var n=this;m.h.post("/folder/message/remind/update",{id:e.idNameVO.id,openRemind:!0,remindType:e.remindType===t?"NONE":t}).then((function(e){n.getMessageList()}))},n.componentDidMount=function(){this.getMessageList()},n.render=function(){var e=this,t=this.state;t.used,t.all;return s.createElement("div",null,s.createElement(d.Z,{title:"\u6d88\u606f\u63d0\u9192"}),s.createElement("div",{className:"messageRemind"},s.createElement("div",{className:"topicTable"},s.createElement(c.Z,{columns:this.state.columns,data:this.state.messagesRoutes?this.state.messagesRoutes:[]})),s.createElement(o.Dialog,{title:"\u89c4\u5219",size:"tiny",visible:this.state.connectDialogVisible,onCancel:function(){return e.setState({connectDialogVisible:!1})}},s.createElement(o.Dialog.Body,null,s.createElement(o.Form,{model:this.state.form},s.createElement(o.Form.Item,{label:"\u89c4\u5219\u540d",prop:"name"},s.createElement(o.Input,{value:this.state.form.name,onChange:this.onChange.bind(this,"name")}),s.createElement("i",null,"*")))),s.createElement(o.Dialog.Footer,{className:"dialog-footer"},s.createElement(o.Button,{onClick:function(){return e.setState({connectDialogVisible:!1})}},"\u53d6 \u6d88"),s.createElement(o.Button,{type:"primary",onClick:this.addTopic},"\u786e \u5b9a")))))},t}(s.Component)},12518:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(94578),i=n(67294),r=n(45697),s=n.n(r),o=n(61409),l=n(92360),c=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props.title;e!==n.length-1&&o.mW.go(e-n.length+1)},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.rightContent;return i.createElement("div",{className:"secondary-header"},n instanceof Array?i.createElement(l.Breadcrumb,{className:"breadcrumb-style",separator:""},n.map((function(t,n){return i.createElement(l.Breadcrumb.Item,{key:n},i.createElement("span",{onClick:function(){return e._handleBreadcrumbClick(n)}},t))}))):i.createElement("div",{className:"normal-title"},n),a&&a)},t}(i.Component);c.propTypes={title:s().oneOfType([s().string,s().array]).isRequired,rightContent:s().node};const m=c}}]);