"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[2538],{2538:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(87462),l=n(94578),r=n(67294),i=n(29383),o=n(55815),c=n(13713),s=n(92360),m=n(5133),u=n(35303),p=n(37841),d=n(43036),h=n(35239),g=n(49722),f=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleInputChange=function(e){n.setState({searchText:e})},n.handleKeyUp=function(e){e.stopPropagation(),13===e.keyCode&&n.setState({pageIndex:1},(function(){return n.fetchList()}))},n.switchPage=function(e){n.setState({pageIndex:e},(function(){return n.fetchList()}))},n.switchPageSize=function(e){n.setState({pageSize:e,pageIndex:1},(function(){return n.fetchList()}))},n.fetchList=function(){var e=n.state,t=e.type,l=e.searchText,r=e.pageIndex,i=e.pageSize,o=e.projectId,c=t?{keyValue:l,type:t,projectId:o,pageIndex:r,pageSize:i}:{keyValue:l,projectId:o,pageIndex:r,pageSize:i};n.setState({loading:!0},(function(){g.h.post("/userConfig/invalid/list",(0,a.Z)({},c)).then((function(e){if(2e4===e.data.code){var t=e.data.result,a=t.count,l=t.result;n.setState({loading:!1,data:l,total:a})}})).catch((function(e){n.setState({loading:!1})}))}))},n.addUselessMsg=function(){var e=n.state.projectId,t=n.state.form,a=t.type,l=t.content;0!==l.length?g.h.post("/userConfig/add",{projectId:e,type:a,keyName:"",keyValue:l}).then((function(e){2e4===e.data.code&&(m.Z.success("\u6dfb\u52a0\u6210\u529f"),n.handleCancel(),n.fetchList())})):m.Z.warning("\u8bf7\u8f93\u5165\u5339\u914d\u5185\u5bb9")},n.deleteUselessMsg=function(){var e=n.state.targetItem.id;g.h.post("/userConfig/delete?id="+e).then((function(e){2e4===e.data.code&&(m.Z.success("\u5220\u9664\u6210\u529f"),n.handleCancel(),n.fetchList())}))},n.handleConfirm=function(e){switch(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.state.dialogType){case"add":n.addUselessMsg();break;case"delete":n.deleteUselessMsg()}},n.handleCancel=function(){n.setState({dialogShow:!1,targetItem:{id:""},form:{type:"CONTAIN",content:""},tempArray:[]})},n.changeType=function(e){n.setState({type:e,pageIndex:1},(function(){return n.fetchList()}))},n.handleKeywordInput=function(e){var t=n.state,l=t.form,r=t.tempArray;"CONTAIN"===l.type&&0===r.length&&n.setState({form:(0,a.Z)({},l,{content:e})})},n.handleClearContent=function(){var e=n.state,t=e.form,l=e.tempArray;"CONTAIN"===t.type&&0===l.length&&n.setState({form:(0,a.Z)({},t,{content:""})})},n.handleFormTypeChange=function(e){n.setState({form:{type:e,content:""},tempArray:[]})},n.handleFormContentChange=function(e){var t=n.state.form;n.setState({form:(0,a.Z)({},t,{content:e})})},n.handleTagChange=function(e){var t=n.state.form;n.setState({form:(0,a.Z)({},t,{content:e.join(" ")}),tempArray:e})},n.state={projectId:h.t.get(h.V.backProjectConfig).id,searchText:"",type:"",dialogShow:!1,dialogType:"add",loading:!1,targetItem:{id:""},form:{type:"CONTAIN",content:""},tempArray:[],columns:[{label:"",prop:"paddingLeft",width:50},{label:"\u6d88\u606f\u5185\u5bb9",prop:"keyValue",minWidth:180,align:"left",render:function(e){return r.createElement("div",{className:"content"},e.keyValue)}},{label:"\u5339\u914d\u65b9\u5f0f",prop:"type",minWidth:60,align:"left",render:function(e){return r.createElement("div",{className:"content"},"\u88ab\u5305\u542b"===e.type?"\u5305\u542b":"\u76f8\u4f3c\u5ea6")}},{label:"\u6d88\u606f\u6570\u91cf",prop:"count",minWidth:120,align:"left",render:function(e,t,n){return r.createElement(d.Z,{overlay:"\u70b9\u51fb\u67e5\u770b\u8fd130\u5929\u7684\u6d88\u606f",placement:"top"},r.createElement("span",{className:"operation",onClick:function(){return window.open("/account/project/uselessMsg/detail?"+encodeURIComponent("type=custom&id="+e.id))}},e.count))}},{label:"\u6dfb\u52a0\u65f6\u95f4",prop:"createDate",minWidth:120,align:"left"},{label:"\u64cd\u4f5c",prop:"handle",minWidth:30,align:"left",render:function(e){return r.createElement("span",{className:"operation",onClick:function(){return n.setState({dialogShow:!0,dialogType:"delete",targetItem:{id:e.id}})}},"\u5220\u9664")}},{label:"",prop:"paddingRight",width:50}],data:[],pageIndex:1,pageSize:20,total:0},n}(0,l.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.fetchList(),window.addEventListener("click",this.handleClearContent)},n.componentWillUnmount=function(){window.removeEventListener("click",this.handleClearContent)},n.render=function(){var e=this,t=this.state,n=t.searchText,l=t.dialogShow,m=t.dialogType,h=t.columns,g=t.loading,f=t.pageIndex,y=t.pageSize,v=t.data,C=t.total,E=t.type,b=t.form,N=t.tempArray,k=[{key:"\u5168\u90e8",value:""},{key:"\u5305\u542b",value:"CONTAIN"},{key:"\u76f8\u4f3c\u5ea6",value:"SIMILAR"}],S=document.documentElement.clientHeight-46-78-24,I=r.createElement("span",{className:"page-title"},r.createElement("span",null,"\u81ea\u5b9a\u4e49\u65e0\u6548\u6d88\u606f"),r.createElement(d.Z,{overlay:r.createElement("span",null,"\u81ea\u5b9a\u4e49\u65e0\u6548\u6d88\u606f\uff0c\u662f\u901a\u8fc7\u624b\u52a8\u7684\u65b9\u5f0f\u914d\u7f6e\u6ee1\u8db3\u4e00\u5b9a\u76f8\u4f3c\u5ea6\u6216\u8005\u5185\u5bb9\u5168\u5339\u914d\u7684\u65e0\u6548\u6d88\u606f\uff0c\u662f\u5bf9\u667a\u80fd\u8bc6\u522b\u7b97\u6cd5\u7684\u6709\u6548\u8865\u5145\u3002",r.createElement("br",null),"\u88ab\u8bc6\u522b\u7684\u65e0\u6548\u6d88\u606f\u5c06\u4e0d\u4f1a\u5728\u6d88\u606f\u6a21\u5757\u4e2d\u5c55\u793a\u548c\u7edf\u8ba1\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6d1e\u5bdf\u6a21\u5757\u7edf\u8ba1\u5206\u6790\u3002"),placement:"bottom",overlayClassName:"page-title-pop"},r.createElement("i",{className:"cem-icon icon-cem_problem"})));return r.createElement("div",{className:"useless-msg-wrapper"},r.createElement(o.Z,{title:(0,c.u)({title:"\u81ea\u5b9a\u4e49\u65e0\u6548\u6d88\u606f"}),mainTitle:I,rightContent:r.createElement(s.Button,{type:"primary",onClick:function(){return e.setState({dialogShow:!0,dialogType:"add"})}},"\u6dfb\u52a0\u65e0\u6548\u6d88\u606f")}),r.createElement("div",{className:"useless-msg-body"},r.createElement("div",{style:{backgroundColor:"#fff",minHeight:S}},r.createElement("div",{className:"useless-msg-search"},r.createElement("div",{className:"search-input-wrapper"},r.createElement(s.Input,{value:n,placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f\u5185\u5bb9",onChange:this.handleInputChange,onKeyUp:this.handleKeyUp,icon:"search",onIconClick:function(){e.setState({pageIndex:1},(function(){return e.fetchList()}))}})),r.createElement(p.Z,{activeKey:E,options:k,onTabClick:this.changeType})),r.createElement(s.Loading,{loading:g,text:"\u62fc\u547d\u52a0\u8f7d\u4e2d"},r.createElement(i.Z,{columns:h,data:v,total:C,pagePosition:"down",pageSize:y,currentPage:f,onPage:this.switchPage,pageSizeSelectorShow:!0,onPageSizeChange:this.switchPageSize,notLimit:!0})))),r.createElement(s.Dialog,{title:"edit"===m?"":"add"===m?"\u6dfb\u52a0\u65e0\u6548\u6d88\u606f":"",customClass:"add"===m?"add-dialog":"",size:"tiny",visible:l,onCancel:function(){return e.handleCancel()},lockScroll:!0},r.createElement(s.Dialog.Body,null,"delete"===m&&r.createElement(r.Fragment,null,r.createElement("div",{className:"dialog-title"},r.createElement("i",{className:"icon-cem_warning",style:{color:"#D96969"}}),"\u786e\u5b9a\u5220\u9664\u6b64\u65e0\u6548\u6d88\u606f\uff1f"),r.createElement("div",{className:"delete-tips"},"\u88ab\u5220\u9664\u7684\u65e0\u6548\u6d88\u606f\u5c06\u5728\u6d88\u606f\u6a21\u5757\u4e2d\u5c55\u793a\uff0c\u4e5f\u5c06\u88ab\u6d1e\u5bdf\u6a21\u5757\u7edf\u8ba1\u5206\u6790")),"add"===m&&r.createElement(r.Fragment,null,r.createElement("div",{className:"form-item"},r.createElement("label",null,"\u5339\u914d\u65b9\u5f0f"),r.createElement(u.RS,(0,a.Z)({},{multiple:!1,tags:!1,optionFilterProp:"label",optionLabelProp:"label",showSearch:!1},{value:b.type,onChange:this.handleFormTypeChange}),k.slice(1,3).map((function(e,t){return r.createElement(u.Wx,{key:t,label:e.key,value:e.value},e.key)})))),r.createElement("div",{className:"form-item"},r.createElement("label",null,"\u5339\u914d\u5185\u5bb9"),"CONTAIN"===b.type?r.createElement(u.RS,{value:N,onChange:this.handleTagChange,multiple:!0,tags:!0,placeholder:"\u591a\u4e2a\u5173\u952e\u8bcd\u6309\u56de\u8f66\u5373\u53ef",dropdownStyle:{visibility:"hidden"},onSearch:this.handleKeywordInput}):r.createElement(s.Input,{type:"textarea",value:b.content,autosize:{minRows:4,maxRows:4},onChange:this.handleFormContentChange,placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd"})),r.createElement("div",{className:"form-item"},r.createElement("label",null),r.createElement("div",null,"CONTAIN"===b.type?"\u88ab\u5305\u542b\uff1a\u5f53\u6d88\u606f\u5185\u5bb9\u5305\u542b\u5339\u914d\u5185\u5bb9\u65f6\uff0c\u4f1a\u5c06\u6d88\u606f\u8bc6\u522b\u4e3a\u65e0\u6548\u6d88\u606f":"\u76f8\u4f3c\u5ea6\uff1a\u5f53\u6d88\u606f\u5185\u5bb9\u4e0e\u5339\u914d\u5185\u5bb9\u76f8\u4f3c\u5ea6\u8fbe\u523070%\u4ee5\u4e0a\u65f6\uff0c\u4f1a\u5c06\u6d88\u606f\u8bc6\u522b\u4e3a\u65e0\u6548\u6d88\u606f")))),r.createElement(s.Dialog.Footer,{className:"dialog-footer"},r.createElement(s.Button,{onClick:function(){return e.handleCancel()}},"\u53d6\u6d88"),r.createElement(s.Button,{type:"primary",onClick:this.handleConfirm},"\u786e\u5b9a"))))},t}(r.PureComponent)},13713:(e,t,n)=>{n.d(t,{u:()=>l});var a=n(35239),l=function(e){var t=e.title,n=e.url,l=a.t.get(a.V.backProjectConfig).name;return n&&-1!==n.indexOf("memberlist")?[{title:l,url:"/account/project/preview"},{title:"\u7528\u6237\u7ec4",url:"/account/project/usergroup"},{title:t,url:n}]:[{title:l,url:"/account/project/preview"},{title:t,url:n}]}},55815:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(94578),l=n(67294),r=n(45697),i=n.n(r),o=n(43036),c=n(61409),s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,l=n.beforeJump;e!==a.length-1&&(l?new Promise((function(e,t){return l(e,t)})).then((function(){c.mW.push({pathname:a[e].url,state:a[e].state})})):c.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,r=t.rightContent,i=t.className,c=t.overlay;return l.createElement("div",{className:"breadcumb-wrapper "+i},n instanceof Array?l.createElement("div",{className:"breadcrumb-left"},l.createElement("div",null,n.map((function(t,a){return l.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),l.createElement("span",null,a||n[n.length-1].title,c&&l.createElement(o.Z,{placement:"top",overlay:c},l.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):l.createElement("div",{className:"normal-title"},n,c&&l.createElement(o.Z,{placement:"top",overlay:c},l.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),r||"")},t}(l.Component);s.propTypes={className:i().string,title:i().oneOfType([i().string,i().arrayOf(i().shape({title:i().string,url:i().string,state:i().object}))]).isRequired,overlay:i().oneOfType([i().string,i().node]),mainTitle:i().oneOfType([i().string,i().node]),beforeJump:i().func,rightContent:i().node};const m=s},37841:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67294),l=n(45697),r=n.n(l),i=function(e){var t=e.activeKey,n=e.options,l=e.onTabClick;return a.createElement("div",{className:"tabs"},n.map((function(e,n){return a.createElement("div",{key:n,className:t===e.value?"active-tab":"",onClick:function(){return t!==e.value&&l(e.value,e)}},e.key||e.label)})))};i.propTypes={activeKey:r().oneOfType([r().string,r().number]),options:r().arrayOf(r().shape({key:r().string,value:r().oneOfType([r().string,r().number])})).isRequired,onTabClick:r().func.isRequired};const o=i}}]);