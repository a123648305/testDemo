"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[7740],{57740:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(87462),s=n(94578),l=n(67294),r=n(49722),i=n(92360),u=n(61409),c=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},o=function(e){function t(){var t;return(t=e.call(this)||this).fetchData=function(){var e=t.state,n=e.id,a=e.uniqueKey;r.h.post("/nps/find-for-answer-page",{id:n,uniqueKey:a}).then((function(e){e.data.result||u.mW.push("/notFind"),("EXPIRE"===e.data.result.status||e.data.result.submitted)&&t.setState({step:3}),t.setState({show:e.data.result,loading:!1,uniqueKey:e.data.result.uniqueKey})}))},t.renderStep1=function(){var e=t.state,s=e.submit,r=e.submit.score,u=e.show;return l.createElement("div",{className:"wrap"},l.createElement("header",null,l.createElement("img",{src:u.logoUrl||n(69903),alt:""})),l.createElement("h4",null,u.title),l.createElement("h5",null,u.description),l.createElement("div",{className:"line"}),l.createElement("div",{className:"content"},l.createElement("div",{className:"title"},"1."+u.scoreQuestion),l.createElement("div",{className:"score"},l.createElement("ul",null,new Array(11).fill(0).map((function(e,n){return l.createElement("li",{className:r===n?"sel":"",key:n,onClick:function(){return t.setState({submit:(0,a.Z)({},s,{score:n})})}},n)}))),l.createElement("p",null,l.createElement("span",null,"0\uff1a\u4e0d\u53ef\u80fd"),l.createElement("span",null,"10\uff1a\u6781\u6709\u53ef\u80fd")))),l.createElement(i.Button,{disabled:null===r,className:"button",type:"primary",onClick:function(){return t.setState({step:2})}},"\u4e0b\u4e00\u9898(1/2)"))},t.renderStep2=function(){var e=t.state,n=e.submit,s=e.show;return l.createElement("div",{className:"wrap_2"},l.createElement("h4",null,"2."+s.adviceQuestion.replace(/#\u5206\u503c#/g," "+n.score+"\u5206 ")),l.createElement("div",{className:"content"},l.createElement("textarea",{placeholder:"\u60a8\u7684\u5b9d\u8d35\u610f\u89c1\u5c06\u662f\u6211\u4eec\u6539\u8fdb\u7684\u65b9\u5411",onChange:function(e){return t.setState({submit:(0,a.Z)({},n,{advice:e.target.value})})}})),l.createElement(i.Button,{className:"button",type:"primary",disabled:!n.advice&&null===n.score,onClick:t.submit},"\u63d0\u4ea4"))},t.finish=function(){return l.createElement("div",{className:"wrap_3 "+("EXPIRE"===t.state.show.status?"expire":"")},l.createElement("header",null,l.createElement("i",{className:"EXPIRE"===t.state.show.status?"icon-cem_cancel":"icon-cem_complete1"})),l.createElement("h4",null,"EXPIRE"===t.state.show.status?"\u8be5\u95ee\u5377\u5df2\u8fc7\u671f":"\u611f\u8c22\u60a8\u7684\u53cd\u9988"),l.createElement("h5",null,"\u60a8\u7684\u5efa\u8bae\u662f\u6211\u4eec\u6539\u8fdb\u7684\u65b9\u5411"))},t.submit=function(){if("DISPATCHED"===t.state.show.status){var e=t.state,n=e.submit,s=e.id,l=e.uniqueKey;t.setState({loading:!0}),r.h.post("/nps/submit",(0,a.Z)({},n,{id:s,uniqueKey:l})).then((function(){t.setState({loading:!1,step:3})}))}else t.setState({step:3})},t.state={loading:!0,step:1,show:{logoUrl:"",title:"IQOO Neo \u624b\u673a\u5ba2\u6237\u63a8\u8350\u5ea6\u8c03\u67e5",description:"\u6211\u7528\u767e\u5206\u52aa\u529b\uff0c\u671f\u5f85\u60a8\u768410\u5206\u63a8\u8350\uff0c\u611f\u8c22\u60a8\u7684\u5b9d\u8d35\u610f\u89c1",scoreQuestion:"\u60a8\u5411\u670b\u53cb\u6216\u540c\u4e8b\u63a8\u8350\u6211\u4eec\u7684\u53ef\u80fd\u6027\u6709\u591a\u5927\uff1f",adviceQuestion:"\u80fd\u544a\u8bc9\u6211\u4eec\u4f60\u7ed99\u5206\u7684\u7406\u7531\u5417\uff1f",status:""},submit:{score:null,advice:""},id:c("id")||"",uniqueKey:c("uniqueKey")||""},t}(0,s.Z)(t,e);var o=t.prototype;return o.componentDidMount=function(){this.fetchData()},o.render=function(){var e=this.state,t=e.step,n=e.loading,a=e.show;return l.createElement("div",{className:"nps_answer"},n&&l.createElement(i.Loading,{loading:!0,fullscreen:!0}),l.createElement("div",{className:"wrap_base"},"UN_DISPATCH"===a.status&&3!==t&&l.createElement("div",{className:"tips"},"\u63d0\u793a\uff1a\u5f53\u524d\u4e3a\u9884\u89c8\u9875\u9762\uff0c\u56de\u7b54\u5c06\u4e0d\u8bb0\u5165\u7ed3\u679c"),!n&&(1===t?this.renderStep1():2===t?this.renderStep2():this.finish())))},t}(l.Component)},69903:(e,t,n)=>{e.exports=n.p+"img/14b04ce3a8d466a5927e.png"}}]);