(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8938],{32610:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});var a=t(37316),n=t.n(a),a=t(67154),r=t.n(a),a=t(85354),l=t.n(a),a=t(67294),z=t.n(a),a=t(55609),v=t(48577),F=t(67133),O=t(19731),E=t(89604),_={SCENE_USE_SCENE:"「使用场合」从消息中提取出与「使用场合」相关的信息。例如「买了这个吸尘器，拖地板很干净」，说明使用场景是「地板」。",SCENE_USE:"「用途」从消息中提取出与「用途」相关的信息。例如「我买来打游戏的」，说明用途是「游戏」。",SCENE_BUY_DECISION:"「购买决策」从消息中提取出与「购买决策」相关的信息。例如「好用，真的好用。同事一直推荐」，说明购买决策是「推荐」。"};const i=function(e){var a=e.type,t=e.dateOptions,n=e.filterReady,l=e.filterChange,r=e.onFilterChange,i=e.onFlavorChange,o=e.onMsgClick,p=e.trendData,c=e.fetchingTrendData,s=e.timeType,f=e.fTimeType,u=e.analyzeLineData,y=e.analyzeBarData,h=e.fetchingAnalyzeLineData,d=e.fetchingAnalyzeBarData,g=e.alzName,m=e.alzOptions,D=e.alzTimeType,T=e.alzFTimeType,C=e.barData,e=e.fetchingBarData;return z().createElement("div",{className:"yt_explore_scene_usage_wrapper"},z().createElement(v.Z,{onReady:n,onChange:l,pageType:a,advanceAuthority:!1,touchData:["电商评论"],selectValue:"电商评论",valueConf:["fullInfo"],showList:["fullDate","screening","save","sourceSearch"],hasHour:!0},z().createElement("div",{className:"content"},z().createElement(O.Z,{data:p,loading:c,timeType:s,fTimeType:f,timeOptions:t,onFilterChange:r,onFlavorChange:i,onMsgClick:o,title:"标签数量",titleOverlay:z().createElement("div",null,z().createElement("p",null,"场景标签提及率 = 提及了场景标签去重后的消息数量 ÷ 消息总量"),z().createElement("p",null,"标签数量计算说明：如果一条消息中出现一个场景标签就计1，同一个场景标签在一个消息中不重复计数。"))}),z().createElement(F.Z,{title:"标签分布",tips:_[a],data:C,loading:e,onMsgClick:o}),z().createElement(E.Z,{analyzeLineData:u,analyzeBarData:y,fetchingAnalyzeLineData:h,fetchingAnalyzeBarData:d,timeOptions:t,alzTimeType:D,alzFTimeType:T,alzOptions:m,alzName:g,onFilterChange:r,onFlavorChange:i,onMsgClick:o}))))};var o=t(35239),p=t(97194),h=t(81408),d=t(2786),c=t(64396).Z.explore.scene.usage,t=function(a){function e(e){var y=a.call(this,e)||this;return y._handleFilterReady=function(e,a){var t=(0,p.X)(e.dateFilter.numOfDays,!0),n=t.dateOptions,t=t.defaultDateType;y.props.fetchParams({projectId:o.t.get(o.V.curProject).id,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:e.dateFilter,dateOptions:n,defaultDateType:t,pageType:y.props.type,alzIdKey:h.v1[y.props.type],filterValues:a.fullInfo.filterValue})},y._handleFilterChange=function(e,a,t){var n=(0,p.X)(e.dateFilter.numOfDays,!0),l=n.dateOptions,n=n.defaultDateType;y.props.fetchDatas(r()({},e,{dateOptions:l,defaultDateType:n,timeType:n,alzTimeType:n,filterValues:a.fullInfo.filterValue}))},y._handleOnFilterChange=function(e){var a=y.props,t=a.oLineData,n=a.oBarData,a=a.alzOptions;e.timeType&&y.props.fetchTrendData(e),e.alzTimeType&&y.props.fetchAnalyzeLineData(e),e.alzName&&(a=(0,h.dR)(r()({oLineData:t,oBarData:n,alzOptions:a},e)),y.props.save(r()({},e,a)))},y._handleOnFlavorChange=function(e){e.fTimeType||e.alzFTimeType,y.props.setDefaultValue(e)},y._handleOnMsgClick=function(e,a){var t=y.props,n=t.projectId,l=t.dateFilter,r=t.headerFilterParamsNew,i=t.type,o=t.oLineData,p=t.alzTimeType,c=t.alzName,s=t.filterValues,f=e.name,u=e.componentSubType,t=e.data,e={id:i,label:h.$5[i],values:[c]},s={projectId:n,dateFilter:(0,d.X_)(u,l,f,o[0].data.map(function(e){return e.name}),p),headerFilterParamsNew:"bar"===u&&"标签分布"===a?(0,h.gt)(r,h.$5[i],f):"line"===u?(0,h.gt)(r,h.$5[i],c):"bar"===u&&"共同提及的其他场景标签"===a?(0,h.gt)(r,t[0],f.split(":")[1],"",e):r,filterModel:{project:[n],messageCategory:["COMMENT"]},filterTip:null,filterValues:"bar"===u&&"标签分布"===a?(0,h.gt)(s,h.$5[i],f,!0):"line"===u?(0,h.gt)(s,h.$5[i],c,!0):"bar"===u&&"共同提及的其他场景标签"===a?(0,h.gt)(s,t[0],f.split(":")[1],!0,e):s};window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(s)))},setTimeout(function(){return y.props.save({pageType:y.props.type})},0),y.state={},y.events={filterReady:y._handleFilterReady,filterChange:y._handleFilterChange,onFilterChange:y._handleOnFilterChange,onFlavorChange:y._handleOnFlavorChange,onMsgClick:y._handleOnMsgClick},y}l()(e,a);var t=e.prototype;return t.componentWillUnmount=function(){this.props.clean()},t.render=function(){return z().createElement(i,r()({},this.props,this.state,this.events))},e}(z().Component);const s=(0,a.connect)(function(e){var a=e.loading,e=n()(e,["loading"]);return r()({},e[c],{fetchingTrendData:a.effects[c+"/fetchTrendData"]||!1,fetchingBarData:a.effects[c+"/fetchBarData"]||!1,fetchingAnalyzeLineData:a.effects[c+"/fetchAnalyzeLineData"]||!1,fetchingAnalyzeBarData:a.effects[c+"/fetchAnalyzeBarData"]||!1})},function(a){return{save:function(e){return a({type:c+"/save",payload:e})},clean:function(){return a({type:c+"/clean"})},setDefaultValue:function(e){return a({type:c+"/setDefaultValue",payload:e})},fetchDatas:function(e){return a({type:c+"/fetchDatas",payload:e})},fetchParams:function(e){return a({type:c+"/fetchParams",payload:e})},fetchTrendData:function(e){return a({type:c+"/fetchTrendData",payload:e})},fetchBarData:function(e){return a({type:c+"/fetchBarData",payload:e})},fetchAnalyzeLineData:function(e){return a({type:c+"/fetchAnalyzeLineData",payload:e})},fetchAnalyzeBarData:function(e){return a({type:c+"/fetchAnalyzeBarData",payload:e})}}})(t)}}]);