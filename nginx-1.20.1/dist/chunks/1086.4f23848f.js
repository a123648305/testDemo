"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1086],{61086:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(94578),r=a(67294),n=a(49722),o=a(92360),l=a(5133),i=(a(61193),a(12518)),c=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleSubmit=function(e){e.preventDefault(),a.refs.form.validate((function(e){if(!e)return!1;var t=a.state.form,s=t.oldPass,r=t.pass,o=t.checkPass;o&&r===o&&n.h.post("settings/password/update",{oldPassword:s,newPassword:o}).then((function(e){l.Z.success("\u64cd\u4f5c\u6210\u529f");var t=a.state.form;for(var s in t)t[s]="";a.setState({form:t})}))}))},a.handleReset=function(e){var t=a.state.form;""===t.pass&&""===t.oldPass&&""===t.checkPass?l.Z.warning("\u6ca1\u6709\u4efb\u4f55\u6539\u52a8!"):a.setState({form:Object.assign(a.state.form,{oldPass:"",pass:"",checkPass:""})}),a.refs.form.resetFields()},a.state={form:{oldPass:"",pass:"",checkPass:""},rules:{oldPass:[{message:"\u8bf7\u8f93\u5165\u539f\u5bc6\u7801",trigger:"blur",required:!0}],pass:[{message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801",trigger:"blur",required:!0},{validator:function(e,t,s){t&&""!==a.state.form.checkPass?(a.refs.form.validateField("checkPass"),s()):s()}}],checkPass:[{message:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",trigger:"blur",required:!0},{validator:function(e,t,s){""===t?s():t!==a.state.form.pass?s(new Error("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4!")):s()}}]}},a}(0,s.Z)(t,e);var a=t.prototype;return a.onChange=function(e,t){var a;this.setState({form:Object.assign(this.state.form,(a={},a[e]=t,a))})},a.render=function(){var e=this.state.refresh;return r.createElement("div",null,r.createElement(i.Z,{title:"\u8d26\u53f7\u5bc6\u7801",refresh:e}),r.createElement(o.Layout.Row,{className:"personal-container"},r.createElement(o.Layout.Col,{span:"24"},r.createElement(o.Form,{model:this.state.form,rules:this.state.rules,ref:"form",labelWidth:"100px",labelPosition:"left"},r.createElement(o.Form.Item,{label:"\u5bc6\u7801",prop:"oldPass"},r.createElement(o.Input,{type:"password",value:this.state.form.oldPass,onChange:this.onChange.bind(this,"oldPass"),autoComplete:"off"})),r.createElement(o.Form.Item,{label:"\u65b0\u5bc6\u7801",prop:"pass"},r.createElement(o.Input,{type:"password",value:this.state.form.pass,onChange:this.onChange.bind(this,"pass"),autoComplete:"off"})),r.createElement(o.Form.Item,{label:"\u786e\u8ba4\u5bc6\u7801",prop:"checkPass"},r.createElement(o.Input,{type:"password",value:this.state.form.checkPass,onChange:this.onChange.bind(this,"checkPass"),autoComplete:"off"})),r.createElement(o.Form.Item,{className:"footer"},r.createElement(o.Button,{type:"primary",onClick:this.handleSubmit},"\u63d0\u4ea4"),r.createElement(o.Button,{onClick:this.handleReset},"\u6e05\u7a7a"))))))},t}(r.Component)},12518:(e,t,a)=>{a.d(t,{Z:()=>m});var s=a(94578),r=a(67294),n=a(45697),o=a.n(n),l=a(61409),i=a(92360),c=function(e){function t(){for(var t,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this)._handleBreadcrumbClick=function(e){var a=t.props.title;e!==a.length-1&&l.mW.go(e-a.length+1)},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.title,s=t.rightContent;return r.createElement("div",{className:"secondary-header"},a instanceof Array?r.createElement(i.Breadcrumb,{className:"breadcrumb-style",separator:""},a.map((function(t,a){return r.createElement(i.Breadcrumb.Item,{key:a},r.createElement("span",{onClick:function(){return e._handleBreadcrumbClick(a)}},t))}))):r.createElement("div",{className:"normal-title"},a),s&&s)},t}(r.Component);c.propTypes={title:o().oneOfType([o().string,o().array]).isRequired,rightContent:o().node};const m=c}}]);