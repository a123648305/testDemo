"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[5292],{5292:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(97326),c=n(94578),i=n(67294),r=n(92360),s=n(5133),l=n(29383),m=n(49722),o=n(55815),u=n(60530),h=n(61409),f=function(e){function t(){var t;return(t=e.call(this)||this).state={all:"",used:"",form:{name:""},columns:[{label:"",prop:"paddingLeft",width:16},{label:"\u56e2\u961f",prop:"name",width:290,render:function(e,t,n){return i.createElement("span",null,e.name)}},{label:"\u6210\u5458",prop:"updatedAt",render:function(e,t,n){return i.createElement("span",null,e.count)}},{label:"\u64cd\u4f5c",width:190,render:function(e,n,c){return i.createElement("span",null,i.createElement("span",{className:"operation_columns",onClick:t.editTeam.bind((0,a.Z)(t),c)},"\u7f16\u8f91"),i.createElement("span",{className:"operation_columns",onClick:t.deleteTeam.bind((0,a.Z)(t),c)},"\u5220\u9664"))}}],selTeamName:"",teams:[],create:!1,teamName:""},t}(0,c.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.getTeamList()},n.selTeamName=function(e){var t=this.state.teams;t.forEach((function(e){return e.sel=!1})),t[e].sel=!0,this.setState({teams:t,selTeamName:t[e].name},(function(t){return document.querySelectorAll(".topicName")[e].select()}))},n.changeName=function(e){var t=this.state.teams;t[e].name=document.querySelectorAll(".topicName")[e].value,this.setState({teams:t})},n.closeInput=function(e){var t=this,n=this.state.teams;n.forEach((function(e){return e.sel=!1})),void 0===n[e].name||""===String(n[e].name).replace(/ /g,"")?(s.Z.warning("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),n[e].name=this.state.selTeamName):this.state.selTeamName===n[e].name&&s.Z.warning("\u540d\u79f0\u672a\u53d1\u751f\u6539\u53d8"),this.setState({teams:n},(function(){t.state.selTeamName!==n[e].name&&m.h.post("/team/update",{id:n[e].id,name:n[e].name}).then((function(e){s.Z.success("\u4fee\u6539\u6210\u529f"),t.getTeamList()})).catch((function(e){t.getTeamList()}))}))},n.onChange=function(e,t){var n;this.setState({form:Object.assign(this.state.form,(n={},n[e]=t,n))})},n.editTeam=function(e){var t=this.state.teams[e],n=t.id,a=t.name;h.mW.push({pathname:"/account/team/edit",state:{id:n,name:a}})},n.deleteTeam=function(e){var t=this;r.MessageBox.confirm("\u5220\u9664\u540e\u65e0\u6cd5\u6062\u590d, \u662f\u5426\u7ee7\u7eed?","\u63d0\u793a",{type:"warning"}).then((function(n){m.h.post("/team/delete",{id:t.state.teams[e].id}).then((function(e){s.Z.success("\u5220\u9664\u6210\u529f"),t.getTeamList()}))}))},n.createTeam=function(){this.setState({create:!0})},n.getTeamList=function(){var e=this;m.h.get("/team/list").then((function(t){e.setState({teams:t.data.result.list,used:t.data.result.used,all:t.data.result.limit})}))},n.content=function(){return i.createElement("ul",{className:"team-infos"},i.createElement("li",{className:"team-info"},i.createElement("span",{className:"info-name"},"\u56e2\u961f\u540d\u79f0"),i.createElement(r.Input,{className:"info-value team-name",onChange:this.onChangeName.bind(this),onKeyDown:this.enter.bind(this),placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9"})))},n.onChangeName=function(e){this.setState({teamName:e})},n.enter=function(e){13===e.keyCode&&this.confirm()},n.confirm=function(e){var t=this,n=this.state.teamName;e.preventDefault(),""!==n?m.h.post("/team/add",{name:n}).then((function(e){t.setState({teamId:e.data.result},(function(t){h.mW.push({pathname:"/account/team/edit",state:{id:e.data.result,name:n}})}))})):s.Z.warning("\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0")},n.cancel=function(){this.setState({teamName:"",create:!1})},n.render=function(){var e=this.state,t=e.columns,n=e.teams,a=e.create,c=document.documentElement.clientHeight-46-54-24;return i.createElement("div",{className:"flex-col"},i.createElement("div",{className:"container flex-other common-wrapper"},i.createElement(o.Z,{title:"\u56e2\u961f",rightContent:i.createElement(r.Button,{type:"primary",onClick:this.createTeam.bind(this)},"\u521b\u5efa\u56e2\u961f")}),i.createElement("div",{className:"common-padding-12"},i.createElement("div",{style:{minHeight:c,backgroundColor:"#fff"}},i.createElement(l.Z,{className:"team-table",columns:t,data:n||[],start:1,end:n.length,total:n.length})))),a&&i.createElement(u.Z,{title:"\u521b\u5efa\u56e2\u961f",content:this.content(),cancelFun:this.cancel.bind(this),confirmFun:this.confirm.bind(this)}))},t}(i.Component)},55815:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(94578),c=n(67294),i=n(45697),r=n.n(i),s=n(43036),l=n(61409),m=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,c=n.beforeJump;e!==a.length-1&&(c?new Promise((function(e,t){return c(e,t)})).then((function(){l.mW.push({pathname:a[e].url,state:a[e].state})})):l.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,i=t.rightContent,r=t.className,l=t.overlay;return c.createElement("div",{className:"breadcumb-wrapper "+r},n instanceof Array?c.createElement("div",{className:"breadcrumb-left"},c.createElement("div",null,n.map((function(t,a){return c.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),c.createElement("span",null,a||n[n.length-1].title,l&&c.createElement(s.Z,{placement:"top",overlay:l},c.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):c.createElement("div",{className:"normal-title"},n,l&&c.createElement(s.Z,{placement:"top",overlay:l},c.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),i||"")},t}(c.Component);m.propTypes={className:r().string,title:r().oneOfType([r().string,r().arrayOf(r().shape({title:r().string,url:r().string,state:r().object}))]).isRequired,overlay:r().oneOfType([r().string,r().node]),mainTitle:r().oneOfType([r().string,r().node]),beforeJump:r().func,rightContent:r().node};const o=m},60530:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),c=n(67294),i=n(45697),r=n.n(i),s=n(92360),l={picShow:r().bool,confirmShow:r().bool,cancelShow:r().bool,confirmFun:r().func,cancelFun:r().func},m={picShow:!0,src:n(13761),confirmShow:!0,cancelShow:!0,confirmFun:function(){},cancelFun:function(){},confirmName:"\u4e0b\u4e00\u6b65",cancelName:"\u53d6\u6d88"},o=function(e){function t(t){return e.call(this,t)||this}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,n=e.content,a=e.src,i=e.picShow,r=e.confirmName,l=e.confirmFun,m=e.confirmShow,o=e.cancelName,u=e.cancelFun,h=e.cancelShow;return c.createElement("div",{className:"confirm-model-wrap-main"},c.createElement("div",{className:"confirm-model"},c.createElement("h4",{className:"model-title"},t),c.createElement("div",{className:"model-content"},n),c.createElement("div",{className:"option-btns"},m&&c.createElement(s.Button,{type:"primary",onClick:l},r),h&&c.createElement(s.Button,{onClick:u},o))),i&&c.createElement("div",{className:"pic-wrap"},c.createElement("img",{src:a})))},t}(c.Component);o.propTypes=l,o.defaultProps=m;const u=o},13761:(e,t,n)=>{e.exports=n.p+"img/6f99ea838aec443b64e0.png"}}]);