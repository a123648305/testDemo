"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[385],{1486:(e,t,n)=>{n.d(t,{u:()=>r});var a=n(35239),r=function(e){var t=e.title,n=e.url;return[{title:a.t.get(a.V.backProjectConfig).name,url:"/account/project/preview"},{title:t,url:n}]}},20385:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(87462),r=n(63366),l=n(94578),c=n(67294),o=n(92360),i=n(55815),s=n(53754),u=n(43036),m=n(26687),p=n(29383),d=n(52727),h=n(61409),f=n(1486),g=n(30381),v=n.n(g),y=n(39432),C="YYYY-MM-DD HH:mm:ss",E={QUE_ANS:"\u95ee\u7b54",BBS:"\u8bba\u575b",SOCIAL:"\u793e\u4ea4\u5a92\u4f53",SELF:"\u5185\u5bb9\u7535\u5546",NEWS:"\u65b0\u95fb\u5a92\u4f53",COMPLAINT:"\u6295\u8bc9\u5e73\u53f0",VIDEO:"\u89c6\u9891"},k={is:"\u5176\u4e2d\u4e00\u4e2a",in:"\u5176\u4e2d\u4e00\u4e2a",notin:"\u4e0d\u4e3a\u5176\u4e2d\u4efb\u4e00\u4e2a",like:"\u5305\u542b",notlike:"\u4e0d\u5305\u542b"},b=function(e){function t(){var t;return(t=e.call(this)||this).init=function(){var e=t.state.columns.filter((function(e){return e.checked}));t.setState({selectedColumns:e})},t.getContentWidth=function(){t.timer&&clearTimeout(t.timer),t.timer=setTimeout((function(){var e=document.querySelector("#right-wrap")?document.querySelector("#right-wrap").clientWidth-162:0;t.setState({tableWidth:e})}),500)},t.handleOnBtnClick=function(e,n){var a=t.props,r=a.messageCategory,l=a.save;switch(e){case"add":case"edit":h.mW.push({pathname:location.pathname+"/edit",state:{messageType:r,id:"edit"===e?n.id:"",name:"edit"===e?n.name:"",sourceId:"edit"!==e||"QUE_ANS"===r&&"NEWS"===r?"":n.sourceId,syncKey:"edit"===e?n.syncKey:""}});break;case"delete":l({modalShow:!0,targetUrl:n})}},t.handleOnInputChange=function(e){t.props.save({searchText:e})},t.handleOnKeyDown=function(e){var n=t.props,a=n.save,r=n.fetchUrlList;e.stopPropagation(),13===e.nativeEvent.keyCode&&(a({pageIndex:1}),r())},t.handleUrlChange=function(e){var n=t.props,a=n.save,r=n.avaUrls,l=n.fetchUrlList;a({selectedUrls:r.filter((function(t){return e.includes(t.id)})),pageIndex:1}),l()},t.handlePlatformChange=function(e){var n=t.props,a=n.save,r=n.fetchUrlList;a({selectedPlatforms:e,pageIndex:1}),r()},t.handleSiwtchPage=function(e){var n=t.props,a=n.save,r=n.fetchUrlList;a({pageIndex:e}),r()},t.handleSiwtchPageSize=function(e){var n=t.props,a=n.save,r=n.fetchUrlList;a({pageIndex:1,pageSize:e}),r()},t.hanldeSort=function(e){var n=e.prop,a=e.order,r=t.props,l=r.save,c=r.fetchUrlList;l({sortName:n&&"updatedAt"===n?"UPDATED_AT":"CREATED_AT",sortType:a&&"ascending"===a?"ASC":"DESC",pageIndex:1}),c()},t.getRuleType=function(e){for(var t="",n=Object.keys(k),a=0;a<n.length;a++)if(Object.prototype.hasOwnProperty.call(e,n[a])){t=n[a];break}return t},t.getPopupContent=function(e){var n=!1;return e.forEach((function(e){"notin"===t.getRuleType(e)&&(n=!0)})),c.createElement("div",{className:"url-rule-popup-wrapper"},c.createElement("div",{className:"url-rule-popup-title"},"\u94fe\u63a5\u89c4\u5219"),e.map((function(e,a){var r=t.getRuleType(e);return c.createElement("div",{className:"url-rule-popup-item",key:a},c.createElement("span",{style:{width:n?"120px":"80px"}},e.name+" "+k[r]),c.createElement("span",{style:{width:n?"calc(100% - 120px)":"calc(100% - 80px)"}},"in"===r&&Object.prototype.hasOwnProperty.call(e,"inValue")?e.inValue.join("\uff0c"):"notin"===r&&Object.prototype.hasOwnProperty.call(e,"notinValue")?e.notinValue.join("\uff0c"):e[r].join("\uff0c")))})))},t.getRulesView=function(e,n){try{var a=t.state.tableWidth;if("string"===typeof n||Array.isArray(n)&&Object.prototype.hasOwnProperty.call(n[0],"contain")){var r=[];if("string"===typeof n)r=[n];else for(var l=0;l<n.length;l++){var o=n[l],i=o.contain,s=o.notContain;r=r.concat(i).concat(s)}return c.createElement("div",{className:"rule-item ellipsis",style:{maxWidth:1*a/6+"px"}},c.createElement("span",null,{"\u77e5\u4e4e":"\u5173\u952e\u8bcd","\u65b0\u6d6a\u5fae\u535a":"\u641c\u7d22\u8bcd","\u767e\u5ea6\u8d34\u5427":"\u8d34\u5427\u540d"}[e]||"\u4e13\u680f"),c.createElement("span",null,"|"),c.createElement("span",{title:r.join("\uff0c")},r.join("\uff0c")))}return n&&n.slice(0,2).map((function(e,r){var l=t.getRuleType(e);return c.createElement(c.Fragment,{key:r},c.createElement("div",{className:"rule-item ellipsis",style:{maxWidth:1*a/6+"px"}},c.createElement("span",null,e.name+" "+k[l]),c.createElement("span",null,"|"),c.createElement("span",{title:"\u5e73\u53f0"===e.name?e[l+"Value"].join("\uff0c"):e[l].join("\uff0c")},"\u5e73\u53f0"===e.name?e[l+"Value"].join("\uff0c"):e[l].join("\uff0c"))),n.length>0&&1===r&&c.createElement(u.Z,{overlay:function(){return t.getPopupContent(n)},placement:"top",overlayClassName:"url-rule-popup"},c.createElement("span",{className:"detail"},"\u8be6\u60c5")))}))}catch(m){console.error(m)}},t.getSelectedColumns=function(e){var n=e.filter((function(e){return e.checked})),a=[{label:"",width:45}].concat(n,[{label:"",width:45}]);t.setState({columns:e,selectedColumns:a})},t.state={tableWidth:0,columns:[{label:"",width:16,checked:!0},{label:"\u94fe\u63a5\u540d\u79f0",checked:!0,render:function(e){var t=e.name;return c.createElement("span",{className:"ellipsis",title:t},t)}},{label:"\u94fe\u63a5\u89c4\u5219",checked:!0,render:function(e){var n=e.sourceName,a=e.syncKey;return t.getRulesView(n,a)}},{label:"\u5e73\u53f0",prop:"sourceName",checked:!0,render:function(e){var t=e.sourceName;return c.createElement("span",{className:"ellipsis"},t)}},{label:"\u603b\u6570\u636e\u91cf",checked:!0,render:function(e){var t=e.total;return t?y.ZP.getApproximateNum(t):c.createElement("i",{className:"icon-cem_line",style:{color:"rgb(191, 191, 191)",fontSize:20}})}},{label:"30\u5929\u6570\u636e\u8d8b\u52bf",checked:!0,render:function(e){var t=e.dateList;return t&&t.length>0?c.createElement(d.Z,{loading:!1,chartData:t}):c.createElement("i",{className:"icon-cem_line",style:{color:"rgb(191, 191, 191)",fontSize:20}})}},{label:"\u521b\u5efa\u65f6\u95f4",minWidth:145,prop:"createdAt",sortable:"custom",checked:!1,render:function(e){var t=e.createdAt;return c.createElement("span",null,v()(t).format(C))}},{label:"\u4fee\u6539\u65f6\u95f4",minWidth:145,prop:"updatedAt",sortable:"custom",checked:!0,render:function(e){var t=e.updateAt;return c.createElement("span",null,v()(t).format(C))}},{label:"\u64cd\u4f5c",checked:!0,render:function(e){return c.createElement("div",{className:"operation"},c.createElement("span",{onClick:function(){return t.handleOnBtnClick("edit",e)}},"\u7f16\u8f91"),c.createElement("span",{onClick:function(){return t.handleOnBtnClick("delete",e)}},"\u5220\u9664"))}},{label:"",width:16,checked:!0}]},t}(0,l.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.getContentWidth(),this.init(),window.addEventListener("resize",this.getContentWidth)},n.componentWillUnmount=function(){window.addEventListener("resize",this.getContentWidth)},n.render=function(){var e=this,t=this.props,n=t.type,a=t.loading,r=t.modalShow,l=t.data,u=t.total,d=t.pageIndex,h=t.pageSize,g=t.avaUrls,v=t.selectedUrls,y=t.avaPlatforms,C=t.selectedPlatforms,k=t.fetchUrlList,b=t.deleteUrl,S=t.save,N=this.state,w=N.columns,x=N.selectedColumns,P=(0,f.u)({title:E[n],url:""});return c.createElement("div",{className:"data_url_wrapper"},c.createElement(i.Z,{title:P}),c.createElement("div",{className:"data_url_body"},c.createElement("div",null,c.createElement("div",{className:"data_url_filter"},c.createElement(o.Input,{placeholder:"\u8bf7\u8f93\u5165\u89c4\u5219\u5173\u952e\u8bcd",icon:"search",onChange:this.handleOnInputChange,onKeyDown:this.handleOnKeyDown,onIconClick:k}),c.createElement(s.Z,{title:"\u94fe\u63a5\u540d\u79f0",options:g,value:v.length>0?v.map((function(e){return e.id})):[],onChange:this.handleUrlChange}),"NEWS"!==n&&c.createElement(s.Z,{title:"\u5e73\u53f0",options:y,value:C,onChange:this.handlePlatformChange}),c.createElement(o.Button,{type:"primary",onClick:function(){return e.handleOnBtnClick("add")}},"\u65b0\u589e\u5173\u952e\u8bcd\u94fe\u63a5")),c.createElement(o.Loading,{loading:a},c.createElement("div",{className:"table-zone"},c.createElement(m.Z,{ref:function(t){return e.selectableColumns=t},multiSave:{name:"connection_list"},columns:w.filter((function(e){return e.label})),getShowColumns:this.getSelectedColumns}),c.createElement(p.Z,{columns:x,data:l,total:u,pagePosition:"down",pageSize:h,currentPage:d,onPage:this.handleSiwtchPage,pageSizeSelectorShow:!0,onPageSizeChange:this.handleSiwtchPageSize,onSortChange:this.hanldeSort,notLimit:!0}))))),c.createElement(o.Dialog,{className:"data_url_delete_dialog",title:"\u786e\u5b9a\u5220\u9664\u6b64\u300c\u6570\u636e\u94fe\u63a5\u300d\uff1f",size:"tiny",visible:r,onCancel:function(){return S({modalShow:!1})},lockScroll:!1},c.createElement(o.Dialog.Body,null,c.createElement("div",{className:"dialog-content"},"\u5220\u9664\u540e\uff0c\u4e0e\u4e4b\u5173\u8054\u7684\u6d88\u606f\u4e5f\u5c06\u4ece\u9879\u76ee\u4e2d\u5220\u9664\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\u3002")),c.createElement(o.Dialog.Footer,{className:"dialog-footer"},c.createElement(o.Button,{onClick:function(){return S({modalShow:!1})}},"\u53d6\u6d88"),c.createElement(o.Button,{type:"primary",onClick:b},"\u786e\u5b9a"))))},t}(c.Component),S=n(35239),N=n(55609),w=n(64396),x=["loading"],P=w.Z.project.dataUrlList,L=function(e){function t(){return e.apply(this,arguments)||this}(0,l.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.save,n=e.type,a=e.fetchUrlNameList,r=e.fetchPlatformList,l=e.fetchUrlList,c=S.t.get(S.V.backProjectConfig).id;t&&t({projectId:c,messageCategory:n}),a(),"NEWS"===n||r(),l()},n.componentWillUnmount=function(){var e=this.props.resetState;e&&e()},n.render=function(){return c.createElement(b,this.props)},t}(c.Component);const U=(0,N.connect)((function(e){var t=e.loading,n=(0,r.Z)(e,x);return(0,a.Z)({},n[P],{loading:t.effects[P+"/fetchTrendChartData"]||!1})}),(function(e){return{fetchUrlNameList:function(){return e({type:P+"/fetchUrlNameList"})},fetchPlatformList:function(){return e({type:P+"/fetchPlatformList"})},fetchUrlList:function(){return e({type:P+"/fetchUrlList"})},deleteUrl:function(){return e({type:P+"/deleteUrl"})},save:function(t){return e({type:P+"/save",payload:t})},resetState:function(){return e({type:P+"/resetState"})}}}))(L)},24473:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(87462),r=n(63366),l=n(94578),c=n(67294),o=n(45697),i=n.n(o),s=n(94184),u=n.n(s),m=["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"],p=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.prefixCls,l=t.children,o=t.className,i=t.block,s=t.indeterminate,p=t.value,d=t.checked,h=t.defaultChecked,f=t.onChange,g=t.disabled,v=(0,r.Z)(t,m),y={value:p,checked:d,defaultChecked:h,onChange:f,disabled:g},C=u()(n,((e={})[n+"-disabled"]=y.disabled,e[n+"-block"]=i,e[n+"-indeterminate"]=s,e),o);return c.createElement("label",(0,a.Z)({tabIndex:y.disabled?-1:0,className:C},v),c.createElement("input",(0,a.Z)({type:"checkbox",className:n+"-input"},y)),c.createElement("span",{className:n+"-status"}),l&&c.createElement("span",{className:n+"-text",title:l},l))},t}(c.Component);p.propTypes={prefixCls:i().string,value:i().oneOfType([i().string,i().number]),checked:i().bool,defaultChecked:i().bool,onChange:i().func,indeterminate:i().bool,disabled:i().bool,block:i().bool},p.defaultProps={prefixCls:"wt-checkbox"};const d=p},85151:(e,t,n)=>{n.d(t,{Jg:()=>a.Z,CS:()=>h});var a=n(24473),r=n(87462),l=n(63366),c=n(94578),o=n(67294),i=n(45697),s=n.n(i),u=n(94184),m=n.n(u),p=["prefixCls","children","className","onChange","values","checkedList","block"],d=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).handleCheckBoxChange=function(e){var n=t.props.onChange;n&&n(e)},t}return(0,c.Z)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,a=n.prefixCls,c=n.children,i=n.className,s=(n.onChange,n.values),u=n.checkedList,d=n.block,h=(0,l.Z)(n,p);return e=s?s.map((function(e,n){var a=0!==u.length&&-1!==u.indexOf(e);return o.createElement(Checkbox,{key:n,value:e,checked:a,onChange:function(e){return t.handleCheckBoxChange(e)},block:d},e)})):o.Children.map(c,(function(e,n){if(e){var a=e.props,r=a.value,l=0!==u.length&&-1!==u.indexOf(r);return o.cloneElement(e,{checked:l,key:n,block:a.block||d,onChange:function(){var e=a.value;t.handleCheckBoxChange(e)}})}})),o.createElement("div",(0,r.Z)({className:m()(a,i)},h),e)},t}(o.Component);d.defaultProps={prefixCls:"wt-checkbox-group"},d.propTypes={onChange:s().func,values:s().array,block:s().bool};const h=d;var f=function(e){var t={};return Object.keys(e).forEach((function(n){/^data\-.+$/.test(n)&&(t[n]=e[n])})),t},g=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.Z)(t,e),t.prototype.render=function(){var e=this.props,t=f(e);return o.createElement("label",{className:e.className,title:e.children},o.createElement("div",{className:"checkbox"},o.createElement("input",(0,r.Z)({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),o.createElement("div",{className:"checkbox-body"})),"\xa0",o.createElement("span",null,e.children))},t}(o.Component);g.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}},55815:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),r=n(67294),l=n(45697),c=n.n(l),o=n(43036),i=n(61409),s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,r=n.beforeJump;e!==a.length-1&&(r?new Promise((function(e,t){return r(e,t)})).then((function(){i.mW.push({pathname:a[e].url,state:a[e].state})})):i.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,l=t.rightContent,c=t.className,i=t.overlay;return r.createElement("div",{className:"breadcumb-wrapper "+c},n instanceof Array?r.createElement("div",{className:"breadcrumb-left"},r.createElement("div",null,n.map((function(t,a){return r.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),r.createElement("span",null,a||n[n.length-1].title,i&&r.createElement(o.Z,{placement:"top",overlay:i},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):r.createElement("div",{className:"normal-title"},n,i&&r.createElement(o.Z,{placement:"top",overlay:i},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),l||"")},t}(r.Component);s.propTypes={className:c().string,title:c().oneOfType([c().string,c().arrayOf(c().shape({title:c().string,url:c().string,state:c().object}))]).isRequired,overlay:c().oneOfType([c().string,c().node]),mainTitle:c().oneOfType([c().string,c().node]),beforeJump:c().func,rightContent:c().node};const u=s},26687:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(87462),r=n(94578),l=n(67294),c=n(85151),o=n(35239),i=function(e){function t(t){var n;return(n=e.call(this,t)||this).openMenu=function(){n.setState({menuState:!n.state.menuState})},n.onChange=function(e){var t,a=n.props,r=a.columns,l=a.getShowColumns,c=a.multiSave;r&&r[e]&&((t=r.slice(0))[e].checked=!t[e].checked);var i=c?c.name:"",s=o.t.get(o.V.storageColumns)?o.t.get(o.V.storageColumns):{};s[i]=t,o.t.set(o.V.storageColumns,s),l&&l(t),n.resize(),n.setState({columns:t})},n.competeSelectMenuItem=function(e){var t=n.props.multiSave,a=t?t.name:"",r=n.props.columns,c=o.t.get(o.V.storageColumns)?o.t.get(o.V.storageColumns)[a]:[];if(c&&0!==c.length)"price_check"===a?c.map((function(e,t){return e.render=r.filter((function(t){return t.label===e.label})).length>0?r.filter((function(t){return t.label===e.label}))[0].render:function(t,n,a){return l.createElement("span",null,t[e.prop])}})):c.map((function(e,t){return e.render=function(e,n,a){return l.createElement("span",null,e.configDetails[t]&&e.configDetails[t].topicValue)}})),r=c.slice(0);else if(e&&e.every((function(e){return e.label&&e.prop})))r=e;else{var i=[];e&&e.forEach((function(e,t){i.push({label:e.topicTypeValue,checked:!1,render:function(e,n,a){return l.createElement("span",null,e.configDetails[t].topicValue)}})})),r=i.slice(0)}return n.setState({columns:r}),r},n.resize=function(){var e=document.querySelector(".connection-table .is-sortable");if(e){var t=n.getStyle(e,"width"),a=document.body.offsetWidth,r=n.state.columns;if(a>800&&r.length>2&&parseInt(t)<275)for(var l=0;l<r.length-2;l++)if(r[l].checked)return void n.onChange(l)}},n.close=function(e){n.state.menuState&&n.setState({menuState:!1})},n.state={menuState:!1,multiSave:null,columns:t.columns.map((function(e){return!e.checked&&(e.checked=!1),e}))},n}(0,r.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){this.setState((0,a.Z)({},e))},n.getStyle=function(e,t){return e.style[t]?e.style[t]:e.currentStyle?e.currentStyle[t]:getComputedStyle(e,null)[t]},n.componentDidMount=function(){window.addEventListener("click",this.close),window.addEventListener("resize",this.resize,!1)},n.componentWillUnmount=function(){window.removeEventListener("resize",this.resize,!1),window.removeEventListener("click",this.close)},n.render=function(){var e=this,t=this.state.columns;return l.createElement("div",{className:"menu-wrapper",onClick:function(e){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()}},l.createElement("span",{className:"el-dropdown-link "+(this.state.menuState?"sel":""),onClick:this.openMenu},"\u5217",l.createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:this.state.menuState?"rotate(-180deg)":""}})),this.state.menuState&&l.createElement("div",{className:"menuList"},l.createElement("ul",null,0===t.length?l.createElement("li",{style:{color:"#8c8c8c"}},"\u65e0\u53ef\u9009\u62e9\u5185\u5bb9"):t.map((function(t,n){return l.createElement("li",{key:n},l.createElement(c.Jg,{key:n,value:t.label,checked:t.checked,onChange:e.onChange.bind(e,n),block:!0},t.label))})))))},t}(l.Component)}}]);