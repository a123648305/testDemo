(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[5585],{89578:(e,t,n)=>{"use strict";n.r(t)},52110:(e,t,n)=>{var i=n(92360).Message;e.exports=function(e){"use strict";var t=window.document,n=window,o=e;if(o&&"undefined"==typeof o.draggable){var a=o.util.dom,r="getSelection"in n?function(){n.getSelection().removeAllRanges()}:function(){t.selection.empty()},s=2,d=100,l=80;o.draggable=function(e){this.jm=e,this.e_canvas=null,this.canvas_ctx=null,this.shadow=null,this.shadow_w=0,this.shadow_h=0,this.active_node=null,this.target_node=null,this.target_direct=null,this.client_w=0,this.client_h=0,this.offset_x=0,this.offset_y=0,this.hlookup_delay=0,this.hlookup_timer=0,this.capture=!1,this.moved=!1},o.draggable.prototype={init:function(){this._create_canvas(),this._create_shadow(),this._event_bind()},resize:function(){this.jm.view.e_nodes.appendChild(this.shadow),this.e_canvas.width=this.jm.view.size.w-4,this.e_canvas.height=this.jm.view.size.h-4},_create_canvas:function(){var e=t.createElement("canvas");this.jm.view.e_panel.appendChild(e);var n=e.getContext("2d");this.e_canvas=e,this.canvas_ctx=n},_create_shadow:function(){var e=t.createElement("jmnode");e.style.visibility="hidden",e.style.zIndex="3",e.style.cursor="move",e.style.opacity="0.7",this.shadow=e},reset_shadow:function(e){var t=this.shadow.style;this.shadow.innerHTML=e.innerHTML,t.left=e.style.left,t.top=e.style.top,t.width=e.style.width,t.height=e.style.height,t.backgroundImage=e.style.backgroundImage,t.backgroundSize=e.style.backgroundSize,t.transform=e.style.transform,this.shadow_w=this.shadow.clientWidth,this.shadow_h=this.shadow.clientHeight},show_shadow:function(){this.moved||(this.shadow.style.visibility="visible")},hide_shadow:function(){this.shadow.style.visibility="hidden"},_magnet_shadow:function(e){e&&(this.canvas_ctx.lineWidth=s,this.canvas_ctx.strokeStyle="rgba(0,0,0,0.3)",this.canvas_ctx.lineCap="round",this._clear_lines(),this._canvas_lineto(e.sp.x,e.sp.y,e.np.x,e.np.y))},_clear_lines:function(){this.canvas_ctx.clearRect(0,0,this.jm.view.size.w,this.jm.view.size.h)},_canvas_lineto:function(e,t,n,i){this.canvas_ctx.beginPath(),this.canvas_ctx.moveTo(e,t),this.canvas_ctx.lineTo(n,i),this.canvas_ctx.stroke()},_lookup_close_node:function(){var e,t,n=this,i=this.jm.get_root(),a=i.get_location(),r=i.get_size(),d=a.x+r.w/2,l=this.shadow_w,c=this.shadow_h,h=this.shadow.offsetLeft,u=this.shadow.offsetTop,_=h+l/2>=d?o.direction.right:o.direction.left,f=this.jm.mind.nodes,p=null,v=Number.MAX_VALUE,m=0,g=null,y=null,w=null,b={};for(var x in Object.keys(f).forEach((function(e){f[e].data.level+1===n.active_node.data.level&&!1!==f[e]._data.layout.visible&&(b[e]=f[e])})),b){var E,k;if((p=b[x]).isroot||p.direction==_){if(p.id==this.active_node.id)continue;e=p.get_size(),t=p.get_location(),_==o.direction.right?(m=Math.abs(h-t.x-e.w)+Math.abs(u+c/2-t.y-e.h/2),E={x:t.x+e.w-s,y:t.y+e.h/2},k={x:h+s,y:u+c/2}):(m=Math.abs(h+l-t.x)+Math.abs(u+c/2-t.y-e.h/2),E={x:t.x+s,y:t.y+e.h/2},k={x:h+l-s,y:u+c/2}),m<v&&(g=p,y=E,w=k,v=m)}}var j=null;return g&&(j={node:g,direction:_,sp:w,np:y}),j},lookup_close_node:function(){var e=this._lookup_close_node();e&&this.active_node.data.level===e.node.data.level+1&&(this._magnet_shadow(e),this.target_node=e.node,this.target_direct=e.direction)},_event_bind:function(){var e=this,t=!1,n=this.jm.view.container;a.add_event(n,"mousedown",(function(n){var i=n||event;setTimeout((function(){t&&e.dragstart.call(e,i)}),30)})),a.add_event(n,"mousemove",(function(n){t=!0;var i=n||event;e.drag.call(e,i)})),a.add_event(n,"mouseup",(function(n){t=!1;var i=n||event;e.dragend.call(e,i)})),a.add_event(n,"touchstart",(function(t){var n=t||event;e.dragstart.call(e,n)})),a.add_event(n,"touchmove",(function(t){var n=t||event;e.drag.call(e,n)})),a.add_event(n,"touchend",(function(t){var n=t||event;e.dragend.call(e,n)}))},dragstart:function(e){if(this.jm.get_editable()&&!this.capture){this.active_node=null;var t=this.jm.view,i=e.target||event.srcElement;if("jmnode"==i.tagName.toLowerCase()){var o=t.get_binded_nodeid(i);if(o){var a=this.jm.get_node(o);if(!a.isroot){this.reset_shadow(i),this.active_node=a,this.offset_x=(e.clientX||e.touches[0].clientX)-i.offsetLeft,this.offset_y=(e.clientY||e.touches[0].clientY)-i.offsetTop,this.client_hw=Math.floor(i.clientWidth/2),this.client_hh=Math.floor(i.clientHeight/2),0!=this.hlookup_delay&&n.clearTimeout(this.hlookup_delay),0!=this.hlookup_timer&&n.clearInterval(this.hlookup_timer);var r=this;this.hlookup_delay=n.setTimeout((function(){r.hlookup_delay=0,r.hlookup_timer=n.setInterval((function(){r.lookup_close_node.call(r)}),l)}),d),this.capture=!0}}}}},drag:function(e){if(this.jm.get_editable()&&this.capture){e.preventDefault(),this.show_shadow(),this.moved=!0,r();var t=(e.clientX||e.touches[0].clientX)-this.offset_x,n=(e.clientY||e.touches[0].clientY)-this.offset_y;this.client_hw,this.client_hh;this.shadow.style.left=t+"px",this.shadow.style.top=n+"px",r()}},dragend:function(e){if(this.jm.get_editable()){if(this.capture){if(0!=this.hlookup_delay&&(n.clearTimeout(this.hlookup_delay),this.hlookup_delay=0,this._clear_lines()),0!=this.hlookup_timer&&(n.clearInterval(this.hlookup_timer),this.hlookup_timer=0,this._clear_lines()),this.moved){var t=this.active_node,o=this.target_node,a=this.target_direct;1!==t.parent.children.length?this.move_node(t,o,a):t.parent!==o&&o&&i.warning("\u4e00\u4e2a\u679d\u5e72\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u672b\u7ea7\u6307\u6807\uff0c\u5982\u679c\u4e0d\u9700\u8981\u8be5\u679d\u5e72\uff0c\u5220\u9664\u5373\u53ef")}this.hide_shadow()}this.moved=!1,this.capture=!1}},move_node:function(e,t,n){var i=this.shadow.offsetTop;if(t&&e&&!o.node.inherited(e,t)){for(var a=t.children,r=a.length,s=null,d=Number.MAX_VALUE,l=null,c="_last_";r--;)if((s=a[r]).direction==n&&s.id!=e.id){var h=s.get_location().y-i;h>0&&h<d&&(d=h,l=s,c="_first_")}l&&(c=l.id),this.jm.move_node(e.id,c,t.id,n)}this.active_node=null,this.target_node=null,this.target_direct=null},jm_event_handle:function(e,t){e===o.event_type.resize&&this.resize()}};var c=new o.plugin("draggable",(function(e){var t=new o.draggable(e);t.init(),e.add_event_listener((function(e,n){t.jm_event_handle.call(t,e,n)}))}));o.register_plugin(c)}}},86277:(e,t,n)=>{!function(t){var n="jsMind",i="0.4.6",o="hizzgdev@163.com",a=function(){},r="undefined"===typeof console?{log:a,debug:a,error:a,warn:a,info:a}:console;if(e.exports||"undefined"==typeof t.jsMind){var s=t.document,d=function(e){return s.createElement(e)},l=function(e,t){e.hasChildNodes()?e.firstChild.nodeValue=t:e.appendChild(s.createTextNode(t))},c=function(e,t){t instanceof HTMLElement?(e.innerHTML="",e.appendChild(t)):e.innerHTML=t};"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)===e});var h={container:"",editable:!1,theme:null,mode:"full",support_html:!0,view:{engine:"canvas",hmargin:100,vmargin:50,line_width:2,line_color:"#555"},layout:{hspace:30,vspace:20,pspace:13},default_event_handle:{enable_mousedown_handle:!0,enable_click_handle:!0,enable_dblclick_handle:!0},shortcut:{enable:!0,handles:{},mapping:{addchild:45,addbrother:13,editnode:113,delnode:46,toggle:32,left:37,up:38,right:39,down:40}}},u=function e(t){e.current=this,this.version=i;var n={};e.util.json.merge(n,h),e.util.json.merge(n,t),n.container?(this.options=n,this.inited=!1,this.mind=null,this.event_handles=[],this.init()):r.error("the options.container should not be null or empty.")};u.direction={left:-1,center:0,right:1},u.event_type={show:1,resize:2,edit:3,select:4},u.key={meta:8192,ctrl:4096,alt:2048,shift:1024},(u.node=function(e,t,n,i,o,a,s,d){e?"number"==typeof t?("undefined"===typeof d&&(d=!0),this.id=e,this.index=t,this.topic=n,this.data=i||{},this.isroot=o,this.parent=a,this.direction=s,this.expanded=!!d,this.children=[],this._data={}):r.error("invalid node index"):r.error("invalid nodeid")}).compare=function(e,t){var n=e.index,i=t.index;return n>=0&&i>=0?n-i:-1==n&&-1==i?0:-1==n?1:-1==i?-1:0},u.node.inherited=function(e,t){if(e&&t){if(e.id===t.id)return!0;if(e.isroot)return!0;for(var n=e.id,i=t;!i.isroot;)if((i=i.parent).id===n)return!0}return!1},u.node.prototype={get_location:function(){var e=this._data.view;return{x:e.abs_x,y:e.abs_y}},get_size:function(){var e=this._data.view;return{w:e.width,h:e.height}}},(u.mind=function(){this.name=null,this.author=null,this.version=null,this.root=null,this.selected=null,this.nodes={}}).prototype={get_node:function(e){return e in this.nodes?this.nodes[e]:(r.warn("the node[id="+e+"] can not be found"),null)},set_root:function(e,t,n){null==this.root?(this.root=new u.node(e,0,t,n,!0),this._put_node(this.root)):r.error("root node is already exist")},add_node:function(e,t,n,i,o,a,s){if(!u.util.is_node(e)){var d=this.get_node(e);return d?this.add_node(d,t,n,i,o,a,s):(r.error("the parent_node[id="+e+"] can not be found."),null)}var l=o||-1,c=null;if(e.isroot){var h=u.direction.right;c=new u.node(t,l,n,i,!1,e,h,s)}else c=new u.node(t,l,n,i,!1,e,e.direction,s);return this._put_node(c)?(e.children.push(c),this._reindex(e)):(r.error("fail, the nodeid '"+c.id+"' has been already exist."),c=null),c},insert_node_before:function(e,t,n,i){if(!u.util.is_node(e)){var o=this.get_node(e);return o?this.insert_node_before(o,t,n,i):(r.error("the node_before[id="+e+"] can not be found."),null)}var a=e.index-.5;return this.add_node(e.parent,t,n,i,a)},get_node_before:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.get_node_before(t):(r.error("the node[id="+e+"] can not be found."),null)}if(e.isroot)return null;var n=e.index-2;return n>=0?e.parent.children[n]:null},insert_node_after:function(e,t,n,i){if(!u.util.is_node(e)){var o=this.get_node(e);return o?this.insert_node_after(o,t,n,i):(r.error("the node_after[id="+e+"] can not be found."),null)}var a=e.index+.5;return this.add_node(e.parent,t,n,i,a)},get_node_after:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.get_node_after(t):(r.error("the node[id="+e+"] can not be found."),null)}if(e.isroot)return null;var n=e.index;return e.parent.children.length>=n?e.parent.children[n]:null},move_node:function(e,t,n,i){if(!u.util.is_node(e)){var o=this.get_node(e);return o?this.move_node(o,t,n,i):(r.error("the node[id="+e+"] can not be found."),null)}return n||(n=e.parent.id),this._move_node(e,t,n,i)},_flow_node_direction:function(e,t){"undefined"===typeof t?t=e.direction:e.direction=t;for(var n=e.children.length;n--;)this._flow_node_direction(e.children[n],t)},_move_node_internal:function(e,t){if(e&&t)if("_last_"==t)e.index=-1,this._reindex(e.parent);else if("_first_"==t)e.index=0,this._reindex(e.parent);else{var n=t?this.get_node(t):null;null!=n&&null!=n.parent&&n.parent.id==e.parent.id&&(e.index=n.index-.5,this._reindex(e.parent))}return e},_move_node:function(e,t,n,i){if(e&&n){if(e.parent.id!=n){for(var o=e.parent.children,a=o.length;a--;)if(o[a].id==e.id){o.splice(a,1);break}this._reindex(e.parent),e.parent=this.get_node(n),e.parent.children.push(e)}e.parent.isroot?i==u.direction.left?e.direction=i:e.direction=u.direction.right:e.direction=e.parent.direction,this._move_node_internal(e,t),this._flow_node_direction(e)}return e},remove_node:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.remove_node(t):(r.error("the node[id="+e+"] can not be found."),!1)}if(!e)return r.error("fail, the node can not be found"),!1;if(e.isroot)return r.error("fail, can not remove root node"),!1;null!=this.selected&&this.selected.id==e.id&&(this.selected=null);for(var n=e.children,i=n.length;i--;)this.remove_node(n[i]);n.length=0;for(var o=e.parent.children,a=o.length;a--;)if(o[a].id==e.id){o.splice(a,1);break}for(var s in this._reindex(e.parent),delete this.nodes[e.id],e)delete e[s];return e=null,!0},_put_node:function(e){return e.id in this.nodes?(r.warn("the nodeid '"+e.id+"' has been already exist."),!1):(this.nodes[e.id]=e,!0)},_reindex:function(e){if(e instanceof u.node){e.children.sort(u.node.compare);for(var t=0;t<e.children.length;t++)e.children[t].index=t+1}}},u.format={node_tree:{example:{meta:{name:n,author:o,version:i},format:"node_tree",data:{id:"root",topic:"jsMind Example"}},get_mind:function(e){var t=u.format.node_tree,n=new u.mind;return n.name=e.meta.name,n.author=e.meta.author,n.version=e.meta.version,t._parse(n,e.data),n},get_data:function(e){var t=u.format.node_tree,n={};return n.meta={name:e.name,author:e.author,version:e.version},n.format="node_tree",n.data=t._buildnode(e.root),n},_parse:function(e,t){var n=u.format.node_tree,i=n._extract_data(t);if(e.set_root(t.id,t.topic,i),"children"in t)for(var o=t.children,a=0;a<o.length;a++)n._extract_subnode(e,e.root,o[a])},_extract_data:function(e){var t={};for(var n in e)"id"!=n&&"topic"!=n&&"children"!=n&&"direction"!=n&&"expanded"!=n&&(t[n]=e[n]);return t},_extract_subnode:function(e,t,n){var i=u.format.node_tree,o=i._extract_data(n),a=null;t.isroot&&(a="left"==n.direction?u.direction.left:u.direction.right);var r=e.add_node(t,n.id,n.topic,o,null,a,n.expanded);if("children"in n)for(var s=n.children,d=0;d<s.length;d++)i._extract_subnode(e,r,s[d])},_buildnode:function(e){var t=u.format.node_tree;if(e instanceof u.node){var n={id:e.id,topic:e.topic,expanded:e.expanded};if(e.parent&&e.parent.isroot&&(n.direction=e.direction==u.direction.left?"left":"right"),null!=e.data){var i=e.data;for(var o in i)n[o]=i[o]}var a=e.children;if(a.length>0){n.children=[];for(var r=0;r<a.length;r++)n.children.push(t._buildnode(a[r]))}return n}}},node_array:{example:{meta:{name:n,author:o,version:i},format:"node_array",data:[{id:"root",topic:"jsMind Example",isroot:!0}]},get_mind:function(e){var t=u.format.node_array,n=new u.mind;return n.name=e.meta.name,n.author=e.meta.author,n.version=e.meta.version,t._parse(n,e.data),n},get_data:function(e){var t=u.format.node_array,n={};return n.meta={name:e.name,author:e.author,version:e.version},n.format="node_array",n.data=[],t._array(e,n.data),n},_parse:function(e,t){var n=u.format.node_array,i=t.slice(0);i.reverse();var o=n._extract_root(e,i);o?n._extract_subnode(e,o,i):r.error("root node can not be found")},_extract_root:function(e,t){for(var n=u.format.node_array,i=t.length;i--;)if("isroot"in t[i]&&t[i].isroot){var o=t[i],a=n._extract_data(o);return e.set_root(o.id,o.topic,a),t.splice(i,1),o.id}return null},_extract_subnode:function(e,t,n){for(var i=u.format.node_array,o=n.length,a=null,r=null,s=0;o--;)if((a=n[o]).parentid==t){r=i._extract_data(a);var d=null,l=a.direction;l&&(d="left"==l?u.direction.left:u.direction.right),e.add_node(t,a.id,a.topic,r,null,d,a.expanded),n.splice(o,1),s++;var c=i._extract_subnode(e,a.id,n);c>0&&(o=n.length,s+=c)}return s},_extract_data:function(e){var t={};for(var n in e)"id"!=n&&"topic"!=n&&"parentid"!=n&&"isroot"!=n&&"direction"!=n&&"expanded"!=n&&(t[n]=e[n]);return t},_array:function(e,t){u.format.node_array._array_node(e.root,t)},_array_node:function(e,t){var n=u.format.node_array;if(e instanceof u.node){var i={id:e.id,topic:e.topic,expanded:e.expanded};if(e.parent&&(i.parentid=e.parent.id),e.isroot&&(i.isroot=!0),e.parent&&e.parent.isroot&&(i.direction=e.direction==u.direction.left?"left":"right"),null!=e.data){var o=e.data;for(var a in o)i[a]=o[a]}t.push(i);for(var r=e.children.length,s=0;s<r;s++)n._array_node(e.children[s],t)}}},freemind:{example:{meta:{name:n,author:o,version:i},format:"freemind",data:'<map version="1.0.1"><node ID="root" TEXT="freemind Example"/></map>'},get_mind:function(e){var t=u.format.freemind,n=new u.mind;n.name=e.meta.name,n.author=e.meta.author,n.version=e.meta.version;var i=e.data,o=t._parse_xml(i),a=t._find_root(o);return t._load_node(n,null,a),n},get_data:function(e){var t=u.format.freemind,n={};n.meta={name:e.name,author:e.author,version:e.version},n.format="freemind";var i=[];return i.push('<map version="1.0.1">'),t._buildmap(e.root,i),i.push("</map>"),n.data=i.join(" "),n},_parse_xml:function(e){var t=null;window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e));return t},_find_root:function(e){for(var t=e.childNodes,n=null,i=null,o=0;o<t.length;o++)if(1==(i=t[o]).nodeType&&"map"==i.tagName){n=i;break}if(n){var a=n.childNodes;n=null;for(o=0;o<a.length;o++)if(1==(i=a[o]).nodeType&&"node"==i.tagName){n=i;break}}return n},_load_node:function(e,t,n){var i=u.format.freemind,o=n.getAttribute("ID"),a=n.getAttribute("TEXT");if(null==a)for(var r=n.childNodes,s=null,d=0;d<r.length;d++)if(1==(s=r[d]).nodeType&&"richcontent"===s.tagName){a=s.textContent;break}var l=i._load_attributes(n),c=!("expanded"in l)||"true"==l.expanded;delete l.expanded;var h=n.getAttribute("POSITION"),_=null;h&&(_="left"==h?u.direction.left:u.direction.right),t?e.add_node(t,o,a,l,null,_,c):e.set_root(o,a,l);var f=n.childNodes,p=null;for(d=0;d<f.length;d++)1==(p=f[d]).nodeType&&"node"==p.tagName&&i._load_node(e,o,p)},_load_attributes:function(e){for(var t=e.childNodes,n=null,i={},o=0;o<t.length;o++)1==(n=t[o]).nodeType&&"attribute"===n.tagName&&(i[n.getAttribute("NAME")]=n.getAttribute("VALUE"));return i},_buildmap:function(e,t){var n=u.format.freemind,i=null;e.parent&&e.parent.isroot&&(i=e.direction===u.direction.left?"left":"right"),t.push("<node"),t.push('ID="'+e.id+'"'),i&&t.push('POSITION="'+i+'"'),t.push('TEXT="'+e.topic+'">'),t.push('<attribute NAME="expanded" VALUE="'+e.expanded+'"/>');var o=e.data;if(null!=o)for(var a in o)t.push('<attribute NAME="'+a+'" VALUE="'+o[a]+'"/>');for(var r=e.children,s=0;s<r.length;s++)n._buildmap(r[s],t);t.push("</node>")}}},u.util={is_node:function(e){return!!e&&e instanceof u.node},ajax:{_xhr:function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return e},_eurl:function(e){return encodeURIComponent(e)},request:function(e,t,n,i,o){var a=u.util.ajax,s=null,d=[];for(var l in t)d.push(a._eurl(l)+"="+a._eurl(t[l]));d.length>0&&(s=d.join("&"));var c=a._xhr();c&&(c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status||0==c.status){if("function"===typeof i){var e=u.util.json.string2json(c.responseText);i(null!=e?e:c.responseText)}}else"function"===typeof o?o(c):r.error("xhr request failed.",c)},n=n||"GET",c.open(n,e,!0),c.setRequestHeader("If-Modified-Since","0"),"POST"==n?(c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.send(s)):c.send())},get:function(e,t){return u.util.ajax.request(e,{},"GET",t)},post:function(e,t,n){return u.util.ajax.request(e,t,"POST",n)}},dom:{add_event:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}},file:{read:function(e,t){var n=new FileReader;n.onload=function(){"function"===typeof t&&t(this.result,e.name)},n.readAsText(e)},save:function(e,n,i){var o;if("function"===typeof t.Blob)o=new Blob([e],{type:n});else{var a=new(t.BlobBuilder||t.MozBlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder);a.append(e),o=a.getBlob(n)}if(navigator.msSaveBlob)navigator.msSaveBlob(o,i);else{var r=(t.URL||t.webkitURL).createObjectURL(o),l=d("a");if("download"in l){l.style.visibility="hidden",l.href=r,l.download=i,s.body.appendChild(l);var c=s.createEvent("MouseEvents");c.initEvent("click",!0,!0),l.dispatchEvent(c),s.body.removeChild(l)}else location.href=r}}},json:{json2string:function(e){if(JSON)try{return JSON.stringify(e)}catch(t){return r.warn(t),r.warn("can not convert to string"),null}},string2json:function(e){if(JSON)try{return JSON.parse(e)}catch(t){return r.warn(t),r.warn("can not parse to json"),null}},merge:function(e,t){for(var n in t)n in e?"object"!==typeof e[n]||"[object object]"!=Object.prototype.toString.call(e[n]).toLowerCase()||e[n].length?e[n]=t[n]:u.util.json.merge(e[n],t[n]):e[n]=t[n];return e}},uuid:{newid:function(){return((new Date).getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}},text:{is_empty:function(e){return!e||0==e.replace(/\s*/,"").length}}},u.prototype={init:function(){if(!this.inited){this.inited=!0;var e=this.options,t={mode:e.mode,hspace:e.layout.hspace,vspace:e.layout.vspace,pspace:e.layout.pspace},n={container:e.container,support_html:e.support_html,engine:e.view.engine,hmargin:e.view.hmargin,vmargin:e.view.vmargin,line_width:e.view.line_width,line_color:e.view.line_color};this.data=new u.data_provider(this),this.layout=new u.layout_provider(this,t),this.view=new u.view_provider(this,n),this.shortcut=new u.shortcut_provider(this,e.shortcut),this.data.init(),this.layout.init(),this.view.init(),this.shortcut.init(),this._event_bind(),u.init_plugins(this)}},enable_edit:function(){this.options.editable=!0},disable_edit:function(){this.options.editable=!1},enable_event_handle:function(e){this.options.default_event_handle["enable_"+e+"_handle"]=!0},disable_event_handle:function(e){this.options.default_event_handle["enable_"+e+"_handle"]=!1},get_editable:function(){return this.options.editable},set_theme:function(e){var t=this.options.theme;this.options.theme=e||null,t!=this.options.theme&&(this.view.reset_theme(),this.view.reset_custom_style())},_event_bind:function(){this.view.add_event(this,"mousedown",this.mousedown_handle),this.view.add_event(this,"click",this.click_handle),this.view.add_event(this,"dblclick",this.dblclick_handle)},mousedown_handle:function(e){if(this.options.default_event_handle.enable_mousedown_handle){var t=e.target||event.srcElement,n=this.view.get_binded_nodeid(t);n?"jmnode"==t.tagName.toLowerCase()&&this.select_node(n):this.select_clear()}},click_handle:function(e){if(this.options.default_event_handle.enable_click_handle){var t=e.target||event.srcElement;if(this.view.is_expander(t)){var n=this.view.get_binded_nodeid(t);n&&this.toggle_node(n)}}},dblclick_handle:function(e){if(this.options.default_event_handle.enable_dblclick_handle&&this.get_editable()){var t=e.target||event.srcElement,n=this.view.get_binded_nodeid(t);if("root"===n)return;n&&"jmnode"===t.tagName.toLowerCase()&&this.begin_edit(n)}},begin_edit:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.begin_edit(t):(r.error("the node[id="+e+"] can not be found."),!1)}this.get_editable()?this.view.edit_node_begin(e):r.error("fail, this mind map is not editable.")},end_edit:function(){this.view.edit_node_end()},toggle_node:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.toggle_node(t):void r.error("the node[id="+e+"] can not be found.")}e.isroot||(this.view.save_location(e),this.layout.toggle_node(e),this.view.relayout(),this.view.restore_location(e))},expand_node:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.expand_node(t):void r.error("the node[id="+e+"] can not be found.")}e.isroot||(this.view.save_location(e),this.layout.expand_node(e),this.view.relayout(),this.view.restore_location(e))},collapse_node:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.collapse_node(t):void r.error("the node[id="+e+"] can not be found.")}e.isroot||(this.view.save_location(e),this.layout.collapse_node(e),this.view.relayout(),this.view.restore_location(e))},expand_all:function(){this.layout.expand_all(),this.view.relayout()},collapse_all:function(){this.layout.collapse_all(),this.view.relayout()},expand_to_depth:function(e){this.layout.expand_to_depth(e),this.view.relayout()},_reset:function(){this.view.reset(),this.layout.reset(),this.data.reset()},_show:function(e){var t=e||u.format.node_array.example;this.mind=this.data.load(t),this.mind?(r.debug("data.load ok"),this.view.load(),r.debug("view.load ok"),this.layout.layout(),r.debug("layout.layout ok"),this.view.show(!0),r.debug("view.show ok"),this.invoke_event_handle(u.event_type.show,{data:[e]})):r.error("data.load error")},show:function(e){this._reset(),this._show(e)},get_meta:function(){return{name:this.mind.name,author:this.mind.author,version:this.mind.version}},get_data:function(e){var t=e||"node_tree";return this.data.get_data(t)},get_root:function(){return this.mind.root},get_node:function(e){return this.mind.get_node(e)},add_node:function(e,t,n,i){if(this.get_editable()){var o=this.mind.add_node(e,t,n,i);return o&&(this.view.add_node(o),this.layout.layout(),this.view.show(!1),this.view.reset_node_custom_style(o),this.expand_node(e),this.invoke_event_handle(u.event_type.edit,{evt:"add_node",data:[e.id,t,n,i],node:t})),o}return r.error("fail, this mind map is not editable"),null},insert_node_before:function(e,t,n,i){if(this.get_editable()){var o=u.util.is_node(e)?e.id:e,a=this.mind.insert_node_before(e,t,n,i);return a&&(this.view.add_node(a),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(u.event_type.edit,{evt:"insert_node_before",data:[o,t,n,i],node:t})),a}return r.error("fail, this mind map is not editable"),null},insert_node_after:function(e,t,n,i){if(this.get_editable()){var o=u.util.is_node(e)?e.id:e,a=this.mind.insert_node_after(e,t,n,i);return a&&(this.view.add_node(a),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(u.event_type.edit,{evt:"insert_node_after",data:[o,t,n,i],node:t})),a}return r.error("fail, this mind map is not editable"),null},remove_node:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.remove_node(t):(r.error("the node[id="+e+"] can not be found."),!1)}if(this.get_editable()){if(e.isroot)return r.error("fail, can not remove root node"),!1;var n=e.id,i=e.parent.id,o=this.get_node(i);return this.view.save_location(o),this.view.remove_node(e),this.mind.remove_node(e),this.layout.layout(),this.view.show(!1),this.view.restore_location(o),this.invoke_event_handle(u.event_type.edit,{evt:"remove_node",data:[n],node:i}),!0}return r.error("fail, this mind map is not editable"),!1},update_node:function(e,t){if(this.get_editable())if(u.util.text.is_empty(t))r.warn("fail, topic can not be empty");else{var n=this.get_node(e);if(n){if(n.topic===t)return r.info("nothing changed"),void this.view.update_node(n);n.topic=t,this.view.update_node(n),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(u.event_type.edit,{evt:"update_node",data:[e,t],node:e})}}else r.error("fail, this mind map is not editable")},move_node:function(e,t,n,i){if(this.get_editable()){var o=this.mind.move_node(e,t,n,i);o&&(this.view.update_node(o),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(u.event_type.edit,{evt:"move_node",data:[e,t,n,i],node:e}))}else r.error("fail, this mind map is not editable")},select_node:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.select_node(t):void r.error("the node[id="+e+"] can not be found.")}this.layout.is_visible(e)&&(this.mind.selected=e,this.view.select_node(e),this.invoke_event_handle(u.event_type.select,{evt:"select_node",data:[],node:e.id}))},get_selected_node:function(){return this.mind?this.mind.selected:null},select_clear:function(){this.mind&&(this.mind.selected=null,this.view.select_clear())},is_node_visible:function(e){return this.layout.is_visible(e)},find_node_before:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.find_node_before(t):void r.error("the node[id="+e+"] can not be found.")}if(e.isroot)return null;var n=null;if(e.parent.isroot)for(var i=e.parent.children,o=null,a=null,s=0;s<i.length;s++)a=i[s],e.direction===a.direction&&(e.id===a.id&&(n=o),o=a);else n=this.mind.get_node_before(e);return n},find_node_after:function(e){if(!u.util.is_node(e)){var t=this.get_node(e);return t?this.find_node_after(t):void r.error("the node[id="+e+"] can not be found.")}if(e.isroot)return null;var n=null;if(e.parent.isroot){for(var i=e.parent.children,o=!1,a=null,s=0;s<i.length;s++)if(a=i[s],e.direction===a.direction){if(o){n=a;break}e.id===a.id&&(o=!0)}}else n=this.mind.get_node_after(e);return n},set_node_style:function(e,t){if(!this.get_editable())return r.error("fail, this mind map is not editable"),null;var n=this.mind.get_node(e);n&&(t&&(n.data.style=Object.assign(n.data.style,t)),this.view.reset_node_custom_style(n))},set_node_color:function(e,t,n){if(!this.get_editable())return r.error("fail, this mind map is not editable"),null;var i=this.mind.get_node(e);i&&(t&&(i.data.style["background-color"]=t),n&&(i.data.style["foreground-color"]=n),this.view.reset_node_custom_style(i))},set_node_font_style:function(e,t,n,i){if(!this.get_editable())return r.error("fail, this mind map is not editable"),null;var o=this.mind.get_node(e);o&&(t&&(o.data.style["font-size"]=t),n&&(o.data.style["font-weight"]=n),i&&(o.data.style["font-style"]=i),this.view.reset_node_custom_style(o),this.view.update_node(o),this.layout.layout(),this.view.show(!1))},set_node_background_image:function(e,t,n,i,o){if(!this.get_editable())return r.error("fail, this mind map is not editable"),null;var a=this.mind.get_node(e);a&&(t&&(a.data.style["background-image"]=t),n&&(a.data.style.width=n),i&&(a.data.style.height=i),o&&(a.data.style["background-rotation"]=o),this.view.reset_node_custom_style(a),this.view.update_node(a),this.layout.layout(),this.view.show(!1))},set_node_background_rotation:function(e,t){if(!this.get_editable())return r.error("fail, this mind map is not editable"),null;var n=this.mind.get_node(e);if(n){if(!n.data.style["background-image"])return r.error("fail, only can change rotation angle of node with background image"),null;n.data.style["background-rotation"]=t,this.view.reset_node_custom_style(n),this.view.update_node(n),this.layout.layout(),this.view.show(!1)}},resize:function(){this.view.resize()},add_event_listener:function(e){"function"===typeof e&&this.event_handles.push(e)},clear_event_listener:function(){this.event_handles=[]},invoke_event_handle:function(e,n){var i=this;t.setTimeout((function(){i._invoke_event_handle(e,n)}),0)},_invoke_event_handle:function(e,t){for(var n=this.event_handles.length,i=0;i<n;i++)this.event_handles[i](e,t)}},(u.data_provider=function(e){this.jm=e}).prototype={init:function(){r.debug("data.init")},reset:function(){r.debug("data.reset")},load:function(e){var t=null,n=null;return"node_array"==(t="object"===typeof e?e.format?e.format:"node_tree":"freemind")?n=u.format.node_array.get_mind(e):"node_tree"==t?n=u.format.node_tree.get_mind(e):"freemind"==t?n=u.format.freemind.get_mind(e):r.warn("unsupported format"),n},get_data:function(e){var t=null;return"node_array"==e?t=u.format.node_array.get_data(this.jm.mind):"node_tree"==e?t=u.format.node_tree.get_data(this.jm.mind):"freemind"==e?t=u.format.freemind.get_data(this.jm.mind):r.error("unsupported "+e+" format"),t}},(u.layout_provider=function(e,t){this.opts=t,this.jm=e,this.isside="side"==this.opts.mode,this.bounds=null,this.cache_valid=!1}).prototype={init:function(){r.debug("layout.init")},reset:function(){r.debug("layout.reset"),this.bounds={n:0,s:0,w:0,e:0}},layout:function(){r.debug("layout.layout"),this.layout_direction(),this.layout_offset()},layout_direction:function(){this._layout_direction_root()},_layout_direction_root:function(){var e=this.jm.mind.root,t=null;"layout"in e._data?t=e._data.layout:(t={},e._data.layout=t);var n=e.children,i=n.length;if(t.direction=u.direction.center,t.side_index=0,this.isside)for(var o=i;o--;)this._layout_direction_side(n[o],u.direction.right,o);else{o=i;for(var a=null;o--;)(a=n[o]).direction==u.direction.left?this._layout_direction_side(a,u.direction.left,o):this._layout_direction_side(a,u.direction.right,o)}},_layout_direction_side:function(e,t,n){var i=null;"layout"in e._data?i=e._data.layout:(i={},e._data.layout=i);var o=e.children,a=o.length;i.direction=t,i.side_index=n;for(var r=a;r--;)this._layout_direction_side(o[r],t,r)},layout_offset:function(){var e=this.jm.mind.root,t=e._data.layout;t.offset_x=0,t.offset_y=0,t.outer_height=0;for(var n=e.children,i=n.length,o=[],a=[],r=null;i--;)(r=n[i])._data.layout.direction==u.direction.right?a.unshift(r):o.unshift(r);t.left_nodes=o,t.right_nodes=a,t.outer_height_left=this._layout_offset_subnodes(o),t.outer_height_right=this._layout_offset_subnodes(a),this.bounds.e=e._data.view.width/2,this.bounds.w=0-this.bounds.e,this.bounds.n=0,this.bounds.s=Math.max(t.outer_height_left,t.outer_height_right)},_layout_offset_subnodes:function(e){for(var t=0,n=e.length,i=n,o=null,a=0,r=null,s=0,d=null;i--;)r=(o=e[i])._data.layout,null==d&&(d=o.parent._data),a=this._layout_offset_subnodes(o.children),o.expanded||(a=0,this.set_visible(o.children,!1)),a=Math.max(o._data.view.height,a),r.outer_height=a,r.offset_y=s-a/2,r.offset_x=this.opts.hspace*r.direction+d.view.width*(d.layout.direction+r.direction)/2,o.parent.isroot||(r.offset_x+=this.opts.pspace*r.direction),s=s-a-this.opts.vspace,t+=a;n>1&&(t+=this.opts.vspace*(n-1)),i=n;for(var l=t/2;i--;)(o=e[i])._data.layout.offset_y+=l;return t},_layout_offset_subnodes_height:function(e){for(var t=0,n=e.length,i=n,o=null,a=0,r=null,s=0,d=null;i--;)r=(o=e[i])._data.layout,null==d&&(d=o.parent._data),a=this._layout_offset_subnodes_height(o.children),o.expanded||(a=0),a=Math.max(o._data.view.height,a),r.outer_height=a,r.offset_y=s-a/2,s=s-a-this.opts.vspace,t+=a;n>1&&(t+=this.opts.vspace*(n-1)),i=n;for(var l=t/2;i--;)(o=e[i])._data.layout.offset_y+=l;return t},get_node_offset:function(e){var t=e._data.layout,n=null;if("_offset_"in t&&this.cache_valid?n=t._offset_:(n={x:-1,y:-1},t._offset_=n),-1==n.x||-1==n.y){var i=t.offset_x,o=t.offset_y;if(!e.isroot){var a=this.get_node_offset(e.parent);i+=a.x,o+=a.y}n.x=i,n.y=o}return n},get_node_point:function(e){var t=e._data.view,n=this.get_node_offset(e),i={};return i.x=n.x+t.width*(e._data.layout.direction-1)/2,i.y=n.y-t.height/2,i},get_node_point_in:function(e){return this.get_node_offset(e)},get_node_point_out:function(e){var t=e._data.layout,n=null;if("_pout_"in t&&this.cache_valid?n=t._pout_:(n={x:-1,y:-1},t._pout_=n),-1==n.x||-1==n.y)if(e.isroot)n.x=0,n.y=0;else{var i=e._data.view,o=this.get_node_offset(e);n.x=o.x+(i.width+this.opts.pspace)*e._data.layout.direction,n.y=o.y}return n},get_expander_point:function(e){var t=this.get_node_point_out(e),n={};return e._data.layout.direction==u.direction.right?n.x=t.x-this.opts.pspace:n.x=t.x,n.y=t.y-Math.ceil(this.opts.pspace/2),n},get_min_size:function(){var e=this.jm.mind.nodes,t=null,n=null;for(var i in e)t=e[i],(n=this.get_node_point_out(t)).x>this.bounds.e&&(this.bounds.e=n.x),n.x<this.bounds.w&&(this.bounds.w=n.x);return{w:this.bounds.e-this.bounds.w,h:this.bounds.s-this.bounds.n}},toggle_node:function(e){e.isroot||(e.expanded?this.collapse_node(e):this.expand_node(e))},expand_node:function(e){e.expanded=!0,this.part_layout(e),this.set_visible(e.children,!0),this.jm.invoke_event_handle(u.event_type.show,{evt:"expand_node",data:[],node:e.id})},collapse_node:function(e){e.expanded=!1,this.part_layout(e),this.set_visible(e.children,!1),this.jm.invoke_event_handle(u.event_type.show,{evt:"collapse_node",data:[],node:e.id})},expand_all:function(){var e,t=this.jm.mind.nodes,n=0;for(var i in t)(e=t[i]).expanded||(e.expanded=!0,n++);if(n>0){var o=this.jm.mind.root;this.part_layout(o),this.set_visible(o.children,!0)}},collapse_all:function(){var e,t=this.jm.mind.nodes,n=0;for(var i in t)(e=t[i]).expanded&&!e.isroot&&(e.expanded=!1,n++);if(n>0){var o=this.jm.mind.root;this.part_layout(o),this.set_visible(o.children,!0)}},expand_to_depth:function(e,t,n){if(!(e<1))for(var i=t||this.jm.mind.root.children,o=n||1,a=i.length,r=null;a--;)r=i[a],o<e&&(r.expanded||this.expand_node(r),this.expand_to_depth(e,r.children,o+1)),o==e&&r.expanded&&this.collapse_node(r)},part_layout:function(e){var t=this.jm.mind.root;if(t){var n=t._data.layout;e.isroot?(n.outer_height_right=this._layout_offset_subnodes_height(n.right_nodes),n.outer_height_left=this._layout_offset_subnodes_height(n.left_nodes)):e._data.layout.direction==u.direction.right?n.outer_height_right=this._layout_offset_subnodes_height(n.right_nodes):n.outer_height_left=this._layout_offset_subnodes_height(n.left_nodes),this.bounds.s=Math.max(n.outer_height_left,n.outer_height_right),this.cache_valid=!1}else r.warn("can not found root node")},set_visible:function(e,t){for(var n=e.length,i=null;n--;)(i=e[n])._data.layout,i.expanded?this.set_visible(i.children,t):this.set_visible(i.children,!1),i.isroot||(i._data.layout.visible=t)},is_expand:function(e){return e.expanded},is_visible:function(e){var t=e._data.layout;return!("visible"in t&&!t.visible)}},(u.graph_canvas=function(e){this.opts=e.opts,this.e_canvas=d("canvas"),this.e_canvas.className="jsmind",this.canvas_ctx=this.e_canvas.getContext("2d"),this.size={w:0,h:0}}).prototype={element:function(){return this.e_canvas},set_size:function(e,t){this.size.w=e,this.size.h=t,this.e_canvas.width=e,this.e_canvas.height=t},clear:function(){this.canvas_ctx.clearRect(0,0,this.size.w,this.size.h)},draw_line:function(e,t,n){var i=this.canvas_ctx;i.strokeStyle=this.opts.line_color,i.lineWidth=this.opts.line_width,i.lineCap="round",this._bezier_to(i,t.x+n.x,t.y+n.y,e.x+n.x,e.y+n.y)},copy_to:function(e,t){e.drawImage(this.e_canvas,0,0),t&&t()},_bezier_to:function(e,t,n,i,o){e.beginPath(),e.moveTo(t,n),e.bezierCurveTo(t+2*(i-t)/3,n,t,o,i+2,o),e.stroke()},_line_to:function(e,t,n,i,o){e.beginPath(),e.moveTo(t,n),e.lineTo(i,o),e.stroke()}},(u.graph_svg=function(e){this.view=e,this.opts=e.opts,this.e_svg=u.graph_svg.c("svg"),this.e_svg.setAttribute("class","jsmind"),this.size={w:0,h:0},this.lines=[]}).c=function(e){return s.createElementNS("http://www.w3.org/2000/svg",e)},u.graph_svg.prototype={element:function(){return this.e_svg},set_size:function(e,t){this.size.w=e,this.size.h=t,this.e_svg.setAttribute("width",e),this.e_svg.setAttribute("height",t)},clear:function(){for(var e=this.lines.length;e--;)this.e_svg.removeChild(this.lines[e]);this.lines.length=0},draw_line:function(e,t,n){var i=u.graph_svg.c("path");i.setAttribute("stroke",this.opts.line_color),i.setAttribute("stroke-width",this.opts.line_width),i.setAttribute("fill","transparent"),this.lines.push(i),this.e_svg.appendChild(i),this._bezier_to(i,t.x+n.x,t.y+n.y,e.x+n.x,e.y+n.y)},copy_to:function(e,t){var n=new Image;n.onload=function(){e.drawImage(n,0,0),t&&t()},n.src="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(this.e_svg))},_bezier_to:function(e,t,n,i,o){e.setAttribute("d","M"+t+" "+n+" C "+(t+2*(i-t)/3)+" "+n+", "+t+" "+o+", "+i+" "+o)},_line_to:function(e,t,n,i,o){e.setAttribute("d","M "+t+" "+n+" L "+i+" "+o)}},(u.view_provider=function(e,t){this.opts=t,this.jm=e,this.layout=e.layout,this.container=null,this.e_panel=null,this.e_nodes=null,this.size={w:0,h:0},this.selected_node=null,this.editing_node=null,this.graph=null}).prototype={init:function(){var e,t;if(r.debug("view.init"),this.container=(t=this.opts.container)&&"object"===typeof t&&1===t.nodeType&&"object"===typeof t.style&&"object"===typeof t.ownerDocument?this.opts.container:(e=this.opts.container,s.getElementById(e)),this.container){this.e_panel=d("div"),this.e_nodes=d("jmnodes"),this.e_editor=d("input"),this.graph="svg"===this.opts.engine.toLowerCase()?new u.graph_svg(this):new u.graph_canvas(this),this.e_panel.className="jsmind-inner",this.e_panel.appendChild(this.graph.element()),this.e_panel.appendChild(this.e_nodes),this.e_editor.className="jsmind-editor",this.e_editor.type="text",this.actualZoom=1,this.zoomStep=.1,this.minZoom=.5,this.maxZoom=2.1;var n=this;u.util.dom.add_event(this.e_editor,"keydown",(function(e){var t=e||event;13==t.keyCode&&(n.edit_node_end(),t.stopPropagation())})),u.util.dom.add_event(this.e_editor,"blur",(function(e){n.edit_node_end()})),this.container.appendChild(this.e_panel)}else r.error("the options.view.container was not be found in dom")},add_event:function(e,t,n){u.util.dom.add_event(this.e_nodes,t,(function(t){var i=t||event;n.call(e,i)}))},get_binded_nodeid:function(e){if(null==e)return null;var t=e.tagName.toLowerCase();return"jmnodes"==t||"body"==t||"html"==t?null:"jmnode"==t||"jmexpander"==t?e.getAttribute("nodeid"):this.get_binded_nodeid(e.parentElement)},is_expander:function(e){return"jmexpander"==e.tagName.toLowerCase()},reset:function(){r.debug("view.reset"),this.selected_node=null,this.clear_lines(),this.clear_nodes(),this.reset_theme()},reset_theme:function(){var e=this.jm.options.theme;this.e_nodes.className=e?"theme-"+e:""},reset_custom_style:function(){var e=this.jm.mind.nodes;for(var t in e)this.reset_node_custom_style(e[t])},load:function(){r.debug("view.load"),this.init_nodes()},expand_size:function(){var e=this.layout.get_min_size(),t=e.w+2*this.opts.hmargin,n=e.h+2*this.opts.vmargin,i=this.e_panel.clientWidth,o=this.e_panel.clientHeight;i<t&&(i=t),o<n&&(o=n),this.size.w=i,this.size.h=o},init_nodes_size:function(e){var t=e._data.view;t.width=t.element.clientWidth,t.height=t.element.clientHeight},init_nodes:function(){var e=this.jm.mind.nodes,t=s.createDocumentFragment();for(var n in e)this.create_node_element(e[n],t);for(var n in this.e_nodes.appendChild(t),e)this.init_nodes_size(e[n])},add_node:function(e){this.create_node_element(e,this.e_nodes),this.init_nodes_size(e)},create_node_element:function(e,t){var n=null;"view"in e._data?n=e._data.view:(n={},e._data.view=n);var i=d("jmnode");if(e.isroot)i.className="root";else{var o=d("jmexpander");l(o,"-"),o.setAttribute("nodeid",e.id),o.style.visibility="hidden",t.appendChild(o),n.expander=o}e.topic&&(this.opts.support_html?c(i,e.topic):l(i,e.topic)),i.setAttribute("nodeid",e.id),i.style.visibility="hidden",this._reset_node_custom_style(i,e.data),t.appendChild(i),n.element=i},remove_node:function(e){null!=this.selected_node&&this.selected_node.id==e.id&&(this.selected_node=null),null!=this.editing_node&&this.editing_node.id==e.id&&(e._data.view.element.removeChild(this.e_editor),this.editing_node=null);for(var t=e.children,n=t.length;n--;)this.remove_node(t[n]);if(e._data.view){var i=e._data.view.element,o=e._data.view.expander;this.e_nodes.removeChild(i),this.e_nodes.removeChild(o),e._data.view.element=null,e._data.view.expander=null}},update_node:function(e){var t=e._data.view,n=t.element;e.topic&&(this.opts.support_html?c(n,e.topic):l(n,e.topic)),t.width=n.clientWidth,t.height=n.clientHeight},select_node:function(e){this.selected_node&&(this.selected_node._data.view.element.className=this.selected_node._data.view.element.className.replace(/\s*selected\b/i,""),this.reset_node_custom_style(this.selected_node)),e&&(this.selected_node=e,e._data.view.element.className+=" selected",this.clear_node_custom_style(e))},select_clear:function(){this.select_node(null)},get_editing_node:function(){return this.editing_node},is_editing:function(){return!!this.editing_node},edit_node_begin:function(e){if(e.topic){null!=this.editing_node&&this.edit_node_end(),this.editing_node=e;var t=e._data.view.element,n=e.topic;getComputedStyle(t);this.e_editor.value=n,t.appendChild(this.e_editor),t.style.zIndex=5,this.e_editor.focus(),this.e_editor.select()}else r.warn("don't edit image nodes")},edit_node_end:function(){if(null!=this.editing_node){var e=this.editing_node;this.editing_node=null;var t=e._data.view.element,n=this.e_editor.value;t.style.zIndex="auto",t.removeChild(this.e_editor),u.util.text.is_empty(n)||e.topic===n?this.opts.support_html?c(t,e.topic):l(t,e.topic):this.jm.update_node(e.id,n)}},get_view_offset:function(){var e=this.layout.bounds;return{x:(this.size.w-e.e-e.w)/2,y:this.size.h/2}},resize:function(){this.graph.set_size(1,1),this.e_nodes.style.width="1px",this.e_nodes.style.height="1px",this.expand_size(),this._show()},_show:function(){this.graph.set_size(this.size.w-4,this.size.h-4),this.e_nodes.style.width=this.size.w-4+"px",this.e_nodes.style.height=this.size.h-4+"px",this.show_nodes(),this.show_lines(),this.jm.invoke_event_handle(u.event_type.resize,{data:[]})},zoomIn:function(){return this.setZoom(this.actualZoom+this.zoomStep)},zoomOut:function(){return this.setZoom(this.actualZoom-this.zoomStep)},setZoom:function(e){if(e<this.minZoom||e>this.maxZoom)return!1;this.actualZoom=e;for(var t=0;t<this.e_panel.children.length;t++)this.e_panel.children[t].style.transform="scale("+e+")",this.e_panel.children[t].style.transformOrigin="left top";return this.show(!0),!0},_center_root:function(){var e=this.e_panel.clientWidth,t=this.e_panel.clientHeight;if(this.size.w>e){var n=this.get_view_offset();this.e_panel.scrollLeft=n.x-e/2}this.size.h>t&&(this.e_panel.scrollTop=(this.size.h-t)/2)},show:function(e){r.debug("view.show"),this.expand_size(),this._show(),e&&this._center_root()},relayout:function(){this.expand_size(),this._show()},save_location:function(e){var t=e._data.view;t._saved_location={x:parseInt(t.element.style.left)-this.e_panel.scrollLeft,y:parseInt(t.element.style.top)-this.e_panel.scrollTop}},restore_location:function(e){var t=e._data.view;this.e_panel.scrollLeft=parseInt(t.element.style.left)-t._saved_location.x,this.e_panel.scrollTop=parseInt(t.element.style.top)-t._saved_location.y},clear_nodes:function(){var e=this.jm.mind;if(null!=e){var t=e.nodes,n=null;for(var i in t)(n=t[i])._data.view.element=null,n._data.view.expander=null;this.e_nodes.innerHTML=""}},show_nodes:function(){var e=this.jm.mind.nodes,t=null,n=null,i=null,o=null,a=null,r="-",s=null,d=this.get_view_offset();for(var c in e)n=(s=(t=e[c])._data.view).element,i=s.expander,this.layout.is_visible(t)?(this.reset_node_custom_style(t),o=this.layout.get_node_point(t),s.abs_x=d.x+o.x,s.abs_y=d.y+o.y,n.style.left=d.x+o.x+"px",n.style.top=d.y+o.y+"px",n.style.display="",n.style.visibility="visible",!t.isroot&&t.children.length>0&&(r=t.expanded?"-":"+",a=this.layout.get_expander_point(t),i.style.left=d.x+a.x+2+"px",i.style.top=d.y+a.y+"px",i.style.display="",i.style.visibility="visible",l(i,r)),t.isroot||0!=t.children.length||(i.style.display="none",i.style.visibility="hidden")):(n.style.display="none",i.style.display="none")},reset_node_custom_style:function(e){this._reset_node_custom_style(e._data.view.element,e.data)},_reset_node_custom_style:function(e,t){var n=t.style,i=void 0===n?{}:n;if("hover_border_color"in i&&e.style.setProperty("--hover_border_color",i.hover_border_color),"background-color"in i&&(e.style.setProperty("--hover_bgc_color",i["background-color"]),e.style.backgroundColor=i["background-color"]),"color"in i&&(e.style.color=i.color),"width"in i&&(e.style.width=i.width+"px"),"height"in i&&(e.style.height=i.height+"px"),"font-size"in i&&(e.style.fontSize=i["font-size"]+"px"),"font-weight"in i&&(e.style.fontWeight=i["font-weight"]),"font-style"in i&&(e.style.fontStyle=i["font-style"]),"border-radius"in i&&(e.style.borderRadius=i["border-radius"]),"border"in i&&(e.style.border=i.border),"background-image"in i){var o=i["background-image"];if(o.startsWith("data")&&i.width&&i.height){var a=new Image;a.onload=function(){var t=d("canvas");t.width=e.clientWidth,t.height=e.clientHeight;if(t.getContext){t.getContext("2d").drawImage(this,2,2,e.clientWidth,e.clientHeight);var n=t.toDataURL();e.style.backgroundImage="url("+n+")"}},a.src=o}else e.style.backgroundImage="url("+o+")";e.style.backgroundSize="99%","background-rotation"in i&&(e.style.transform="rotate("+i["background-rotation"]+"deg)")}},clear_node_custom_style:function(e){var t=e._data.view.element;t.style.backgroundColor="",t.style.color=""},clear_lines:function(){this.graph.clear()},show_lines:function(){this.clear_lines();var e=this.jm.mind.nodes,t=null,n=null,i=null,o=this.get_view_offset();for(var a in e)(t=e[a]).isroot||"visible"in t._data.layout&&!t._data.layout.visible||(n=this.layout.get_node_point_in(t),i=this.layout.get_node_point_out(t.parent),this.graph.draw_line(i,n,o))}},(u.shortcut_provider=function(e,t){this.jm=e,this.opts=t,this.mapping=t.mapping,this.handles=t.handles,this._newid=null,this._mapping={}}).prototype={init:function(){for(var e in u.util.dom.add_event(s,"keydown",this.handler.bind(this)),this.handles.addchild=this.handles.addchild||this.handle_addchild,this.handles.addbrother=this.handle_addbrother,this.handles.editnode=this.handle_editnode,this.handles.delnode=this.handle_delnode,this.handles.toggle=this.handle_toggle,this.handles.up=this.handle_up,this.handles.down=this.handle_down,this.handles.left=this.handle_left,this.handles.right=this.handle_right,this.mapping)this.mapping[e]&&e in this.handles&&(this._mapping[this.mapping[e]]=this.handles[e]);"function"===typeof this.opts.id_generator?this._newid=this.opts.id_generator:this._newid=u.util.uuid.newid},enable_shortcut:function(){this.opts.enable=!0},disable_shortcut:function(){this.opts.enable=!1},handler:function(e){if(9==e.which&&e.preventDefault(),!this.jm.view.is_editing()){var t=e||event;if(!this.opts.enable)return!0;var n=t.keyCode+(t.metaKey<<13)+(t.ctrlKey<<12)+(t.altKey<<11)+(t.shiftKey<<10);n in this._mapping&&this._mapping[n].call(this,this.jm,e)}},handle_addchild:function(e,t){var n=e.get_selected_node();if(n){var i=this._newid();e.add_node(n,i,"New Node")&&(e.select_node(i),e.begin_edit(i))}},handle_addbrother:function(e,t){var n=e.get_selected_node();if(n&&!n.isroot){var i=this._newid();e.insert_node_after(n,i,"New Node")&&(e.select_node(i),e.begin_edit(i))}},handle_editnode:function(e,t){var n=e.get_selected_node();n&&e.begin_edit(n)},handle_delnode:function(e,t){var n=e.get_selected_node();n&&!n.isroot&&(e.select_node(n.parent),e.remove_node(n))},handle_toggle:function(e,t){var n=t||event,i=e.get_selected_node();i&&(e.toggle_node(i.id),n.stopPropagation(),n.preventDefault())},handle_up:function(e,t){var n=t||event,i=e.get_selected_node();if(i){var o=e.find_node_before(i);if(!o){var a=e.find_node_before(i.parent);a&&a.children.length>0&&(o=a.children[a.children.length-1])}o&&e.select_node(o),n.stopPropagation(),n.preventDefault()}},handle_down:function(e,t){var n=t||event,i=e.get_selected_node();if(i){var o=e.find_node_after(i);if(!o){var a=e.find_node_after(i.parent);a&&a.children.length>0&&(o=a.children[0])}o&&e.select_node(o),n.stopPropagation(),n.preventDefault()}},handle_left:function(e,t){this._handle_direction(e,t,u.direction.left)},handle_right:function(e,t){this._handle_direction(e,t,u.direction.right)},_handle_direction:function(e,t,n){var i=t||event,o=e.get_selected_node(),a=null;if(o){if(o.isroot){for(var r=o.children,s=[],d=0;d<r.length;d++)r[d].direction===n&&s.push(d);a=r[s[Math.floor((s.length-1)/2)]]}else if(o.direction===n){var l=(s=o.children).length;l>0&&(a=s[Math.floor((l-1)/2)])}else a=o.parent;a&&e.select_node(a),i.stopPropagation(),i.preventDefault()}}},u.plugin=function(e,t){this.name=e,this.init=t},u.plugins=[],u.register_plugin=function(e){e instanceof u.plugin&&u.plugins.push(e)},u.init_plugins=function(e){t.setTimeout((function(){u._init_plugins(e)}),0)},u._init_plugins=function(e){for(var t=u.plugins.length,n=null,i=0;i<t;i++)"function"===typeof(n=u.plugins[i].init)&&n(e)},u.show=function(e,t){var n=new u(e);return n.show(t),n},e.exports=u}else r.log("jsMind has been already exist.")}("undefined"!==typeof window?window:n.g)},86737:e=>{e.exports=function(e){"use strict";var t=window,n=e;if(n&&"undefined"==typeof n.screenshot){var i=t.document,o=function(e){return i.createElement(e)},a=function(e,t){return e.getPropertyValue(t)},r=function(e){var t=a(e,"visibility"),n=a(e,"display");return"hidden"!==t&&"none"!==n},s={rect:function(e,t,n,i,o,a){i<2*a&&(a=i/2),o<2*a&&(a=o/2),e.moveTo(t+a,n),e.arcTo(t+i,n,t+i,n+o,a),e.arcTo(t+i,n+o,t,n+o,a),e.arcTo(t,n+o,t,n,a),e.arcTo(t,n,t+i,n,a)},text_multiline:function(e,t,n,i,o,a,r){var s="",d=t.length,l=t.split(""),c=null;e.textAlign="left",e.textBaseline="top";for(var h=0;h<d;h++)c=s+l[h],e.measureText(c).width>o&&h>0?(e.fillText(s,n,i),s=l[h],i+=r):s=c;e.fillText(s,n,i)},text_ellipsis:function(e,t,n,i,o,a){var r=i+a/2;t=s.fittingString(e,t,o);e.textAlign="left",e.textBaseline="middle",e.fillText(t,n,r,o)},fittingString:function(e,t,n){var i=e.measureText(t).width,o=e.measureText("\u2026").width;if(i<=n||i<=o)return t;for(var a=t.length;i>=n-o&&a-- >0;)t=t.substring(0,a),i=e.measureText(t).width;return t+"\u2026"},image:function(e,t,n,i,o,a,r,d,l){var c=new Image;c.onload=function(){e.save(),e.translate(n,i),e.save(),e.beginPath(),s.rect(e,0,0,o,a,r),e.closePath(),e.clip(),e.translate(o/2,a/2),e.rotate(d*Math.PI/180),e.drawImage(c,-o/2,-a/2),e.restore(),e.restore(),l&&l()},c.src=t}};n.screenshot=function(e){this.jm=e,this.canvas_elem=null,this.canvas_ctx=null,this._inited=!1},n.screenshot.prototype={init:function(){if(!this._inited){var e=o("canvas");e.style.position="fixed",e.style.top="-1000px";var t=e.getContext("2d");this.canvas_elem=e,this.canvas_ctx=t,document.body.appendChild(e),this._inited=!0,this.resize()}},shoot:function(e){this.init(),this._draw(function(){e&&e(),this.clean()}.bind(this))},shootDownload:function(){this.shoot(function(){this._download()}.bind(this))},shootAsDataURL:function(e){this.shoot(function(){e&&e(this.canvas_elem.toDataURL())}.bind(this))},resize:function(){this._inited&&(this.canvas_elem.width=this.jm.view.size.w,this.canvas_elem.height=this.jm.view.size.h)},clean:function(){var e=this.canvas_elem;this.canvas_ctx.clearRect(0,0,e.width,e.height)},_draw:function(e){var t=this.canvas_ctx;t.textAlign="left",t.textBaseline="top",this._draw_bg(),this._draw_lines(function(){this._draw_nodes(e)}.bind(this))},_draw_bg:function(){var e=this.canvas_elem,t=this.canvas_ctx;t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height)},_watermark:function(){var e=this.canvas_elem,n=this.canvas_ctx;n.textAlign="right",n.textBaseline="bottom",n.fillStyle="#000",n.font="11px Verdana,Arial,Helvetica,sans-serif",n.fillText("hizzgdev.github.io/jsmind",e.width-5.5,e.height-2.5),n.textAlign="left",n.fillText(t.location,5.5,e.height-2.5)},_draw_lines:function(e){this.jm.view.graph.copy_to(this.canvas_ctx,e)},_draw_nodes:function(e){var n,i=this.jm.mind.nodes;for(var o in i)n=i[o],this._draw_node(n);!function o(){new Date;var a=!0;for(var r in i)a&=(n=i[r]).ready;a?t.setTimeout(e,200):t.setTimeout(o,200)}()},_draw_node:function(e){var t=this.canvas_ctx,n=e._data.view,i=n.element,o=getComputedStyle(i);if(r(o)){var d=a(o,"background-color"),l=parseInt(a(o,"border-top-left-radius")),c=a(o,"color"),h=parseInt(a(o,"padding-left")),u=parseInt(a(o,"padding-right")),_=parseInt(a(o,"padding-top")),f=parseInt(a(o,"padding-bottom")),p=a(o,"text-overflow"),v=a(o,"font-style")+" "+a(o,"font-variant")+" "+a(o,"font-weight")+" "+a(o,"font-size")+"/"+a(o,"line-height")+" "+a(o,"font-family"),m={x:n.abs_x,y:n.abs_y,w:n.width+1,h:n.height+1},g={x:m.x+h,y:m.y+_,w:m.w-h-u,h:m.h-_-f};if(t.font=v,t.fillStyle=d,t.beginPath(),s.rect(t,m.x,m.y,m.w,m.h,l),t.closePath(),t.fill(),t.fillStyle=c,"background-image"in e.data){var y=a(o,"background-image").slice(5,-2);e.ready=!1;var w=0;"background-rotation"in e.data&&(w=e.data["background-rotation"]),s.image(t,y,m.x,m.y,m.w,m.h,l,w,(function(){e.ready=!0}))}if(e.topic)if("ellipsis"===p)s.text_ellipsis(t,e.topic,g.x,g.y,g.w,g.h);else{var b=parseInt(a(o,"line-height"));s.text_multiline(t,e.topic,g.x,g.y,g.w,g.h,b)}n.expander&&this._draw_expander(n.expander),"background-image"in e.data||(e.ready=!0)}else e.ready=!0},_draw_expander:function(e){var t=this.canvas_ctx,n=getComputedStyle(e);if(r(n)){var i=a(n,"left"),o=a(n,"top"),s=a(n,"font"),d=parseInt(i),l=parseInt(o),c="+"===e.innerHTML;t.lineWidth=1,t.beginPath(),t.font=s,t.strokeStyle="#E5E5E5",t.arc(d+7,l+7,5,0,2*Math.PI,!0),t.stroke(),t.moveTo(d+10,l+7),t.strokeStyle="#8C8C8C",t.lineTo(d+4,l+7),c&&(t.moveTo(d+7,l+4),t.lineTo(d+7,l+10)),t.closePath(),t.stroke()}},_download:function(){var e=this.canvas_elem,t=this.jm.mind.name+".png";if(navigator.msSaveBlob&&e.msToBlob){var n=e.msToBlob();navigator.msSaveBlob(n,t)}else{var a=this.canvas_elem.toDataURL(),r=o("a");if("download"in r){r.style.visibility="hidden",r.href=a,r.download=t,i.body.appendChild(r);var s=i.createEvent("MouseEvents");s.initEvent("click",!0,!0),r.dispatchEvent(s),i.body.removeChild(r)}else location.href=a}},jm_event_handle:function(e,t){e===n.event_type.resize&&this.resize()}};var d=new n.plugin("screenshot",(function(e){var t=new n.screenshot(e);e.screenshot=t,e.shoot=function(){t.shoot()},e.add_event_listener((function(e,n){t.jm_event_handle.call(t,e,n)}))}));n.register_plugin(d)}}},85585:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F});var i=n(63366),o=n(87462),a=n(94578),r=n(18446),s=n.n(r),d=n(67294),l=n(64396),c=n(55815),h=n(8201),u=n(61409),_=n(35239),f=n(92360),p=n(43036);const v=function(e){var t=e.list,n=e.keyword,i=e.x,o=void 0===i?-100:i,a=e.y,r=void 0===a?-100:a,s=e.onSelect,l=document.querySelector("#jsmind_container")||{scrollTop:0},c=l.scrollTop,h=l.scrollLeft,u=t.filter((function(e){return!n||-1!==e.name.toLowerCase().indexOf(n.trim().toLowerCase())}));return d.createElement("div",{className:"TipList",style:{top:r-c,left:o-h}},d.createElement("ul",null,u.length?u.map((function(e){return d.createElement("li",{key:e.id,onMouseUp:function(){return s(e.name)}},e.name)})):d.createElement("li",{style:{pointerEvents:"none"}},"\u6682\u65e0\u6570\u636e")))};var m=n(94644),g=n(36490),y=n(86277),w=n(52110),b=n(86737);w(y),b(y),n(89578);const x=function(e){function t(t){var n;return(n=e.call(this,t)||this).showErr=function(){var e=n.jm.mind.nodes;Object.keys(e).filter((function(t){return e[t].data.level===n.props.maxLevel})).forEach((function(t){e[t].topic===g.WS&&n.jm.set_node_style(e[t].id,{border:"1px solid #D96969"})}))},n.testLevelNode=function(e,t,i){return Object.values(n.jm.mind.nodes).filter((function(n){return n.data.level===e&&n.id!==t})).map((function(e){return e.topic})).includes(i)},n.addLeafNode=function(e,t){if(n.curSelect){var i=n.props.maxLevel,o={level:i};n.curSelect.data.level===i&&(n.curSelect.topic===g.WS?(n.jm.update_node(n.curSelect.id,t),setTimeout((function(){return n.jm.set_node_style(n.curSelect.id,{"border-radius":"4px"})}),100),n.jm.set_node_style(n.curSelect.id,{border:""})):n.jm.insert_node_after(n.curSelect.id,e,t,(0,g.$P)(o,i))),n.curSelect.data.level===i-1&&n.jm.add_node(n.curSelect.id,e,t,(0,g.$P)(o,i)),setTimeout((function(){return n.props.onDataChange({data:n.jm.get_data().data})}),100)}},n.addIndex=function(e){n.jm.update_node(n.curSelect.id,e)},n.createBrotherNode=function(){var e=n.props.maxLevel;if(n.curSelect){!function t(i,o,a){var r={level:a,style:{"border-radius":a===e?"14px":"4px",border:a===e?"1px solid #D96969":""}},s=function(){for(var e=Object.values(n.jm.mind.nodes).filter((function(e){return e.data.level===a})),t=1,i=g.$W[a]+"\u7ea7\u6307\u6807"+(e.length+t);e.some((function(e){return e.topic===i}));)t++,i=g.$W[a]+"\u7ea7\u6307\u6807"+(e.length+t);return i};i===n.curSelect.id?n.jm.insert_node_after(i,o,a===e?g.WS:s(),(0,g.$P)(r,e)):n.jm.add_node(i,o,a===e?g.WS:s(),(0,g.$P)(r,e)),a<e&&t(o,(new Date).getTime()+Math.random(),a+1)}(n.curSelect.id,(new Date).getTime()+Math.random(),n.curSelect.data.level)}},n.createNode=function(){var e=n.props.maxLevel;if(n.curSelect&&n.curSelect.data.level<e){!function t(i,o,a){var r={level:a,style:{"border-radius":a===e?"14px":"4px",border:a===e?"1px solid #D96969":""}};n.jm.add_node(i,o,a===e?g.WS:function(){for(var e=Object.values(n.jm.mind.nodes).filter((function(e){return e.data.level===a})),t=1,i=g.$W[a]+"\u7ea7\u6307\u6807"+(e.length+t);e.some((function(e){return e.topic===i}));)t++,i=g.$W[a]+"\u7ea7\u6307\u6807"+(e.length+t);return i}(),(0,g.$P)(r,e)),a<e&&t(o,(new Date).getTime()+Math.random(),a+1)}(n.curSelect.id,(new Date).getTime()+Math.random(),n.curSelect.data.level+1)}},n.deleteNode=function(){n.curSelect&&(n.jm.find_node_before(n.curSelect.id)||n.jm.find_node_after(n.curSelect.id))&&(n.jm.remove_node(n.curSelect.id),n.curSelect=null)},n.closeNode=function(){n.curSelect&&n.jm.collapse_node(n.curSelect.id)},n.openNode=function(){n.curSelect&&n.jm.expand_node(n.curSelect.id)},n.adapt=function(){},n.real=function(){},n.zoomIn=function(){n.jm.view.zoomIn(),n.setState({scale:2===n.state.scale?2:Number((n.state.scale+.1).toFixed(1))}),n.jm.resize()},n.zoomOut=function(){n.jm.view.zoomOut(),n.setState({scale:.5===n.state.scale?.5:Number((n.state.scale-.1).toFixed(1))}),n.jm.resize()},n.downloadImg=function(){n.jm.screenshot.shootDownload()},n.downloadExcel=function(){var e=function e(t,n){if(void 0===n&&(n=[]),t.children){var i=[];return t.children.forEach((function(o){i.push(e(o,[].concat(n,[t.topic])))})),i}return[].concat(n,[t.topic])}(n.jm.get_data().data).flat(n.props.maxLevel-1),t=e[0][0];e.forEach((function(e){return e.shift()})),e.unshift(new Array(n.props.maxLevel).fill().map((function(e,t){return g.$W[t+1]+"\u7ea7\u6307\u6807"}))),(0,m.aT)([e],t)},n.state={showTip:!1,keyword:"",scale:1},n.event={},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props,n=t.maxLevel,i={meta:{name:t.name,author:"wangshuzhao@skieer.com",version:"0.2"},format:"node_tree",data:this.props.data},o={container:"jsmind_container",mode:"side",editable:!0,view:{engine:"canvas",hmargin:80,vmargin:30,line_width:1,line_color:"#E5E5E5"},shortcut:{enable:!1,handles:{addchild:this.createNode}}},a=y.show(o,i);this.jm=a,document.querySelector(".jsmind_wrap").addEventListener("click",(function(){e.curSelect=a.get_selected_node(),e.props.curSelectChange({curSelect:e.curSelect}),setTimeout((function(){return e.props.onDataChange({data:a.get_data().data})}),100)})),a.view.e_editor.addEventListener("focus",(function(){e.preValue=a.view.e_editor.value,e.preId=e.curSelect.id,e.curSelect.data.level===n&&e.setState({showTip:!0,keyword:""})})),a.view.e_editor.addEventListener("compositionstart",(function(t){e.isComposition=!0})),a.view.e_editor.addEventListener("compositionend",(function(t){e.isComposition=!1,t.target.value.length>8&&(f.Message.warning("\u6700\u591a\u8f93\u51658\u4e2a\u5b57\u7b26"),t.target.value=t.target.value.substring(0,8))})),a.view.e_editor.addEventListener("input",(function(t){e.isComposition||t.target&&!e.isComposition&&t.target.value.length>8&&(t.target.value=t.target.value.substring(0,8),f.Message.warning("\u6700\u591a\u8f93\u51658\u4e2a\u5b57\u7b26")),e.curSelect.data.level===n&&e.setState({keyword:a.view.e_editor.value})})),a.view.e_editor.addEventListener("blur",(function(t){if(e.curSelect.data.level===n){var i=a.view.e_editor.value,o=e.curSelect;setTimeout((function(){var t=e.curSelect&&e.curSelect.topic||i;!Array.isArray(e.props.indexList)||t!==g.WS&&!e.props.indexList.some((function(e){return e.name===t}))?(f.Message.warning("\u8bf7\u9009\u62e9\u5217\u8868\u4e2d\u5b58\u5728\u7684\u6307\u6807\u6dfb\u52a0"),a.update_node(e.preId,e.preValue)):t!==g.WS&&e.testLevelNode(o.data.level,e.preId,t)?(f.Message.warning("\u540c\u7ea7\u522b\u6307\u6807\u4e0d\u80fd\u91cd\u540d\uff01"),a.update_node(e.preId,e.preValue)):t!==g.WS&&a.set_node_style(e.preId,{"border-radius":"4px"}),e.jm.set_node_style(o.id,{border:""}),e.setState({showTip:!1})}),100)}else e.testLevelNode(e.curSelect.data.level,e.curSelect.id,t.target.value)&&(f.Message.warning("\u540c\u7ea7\u522b\u6307\u6807\u4e0d\u80fd\u91cd\u540d\uff01"),a.update_node(e.preId,e.preValue))})),setTimeout((function(){return e.props.onDataChange({data:a.get_data().data})}),100)},n.render=function(){var e=this,t=this.createBrotherNode,n=this.createNode,i=this.deleteNode,o=(this.closeNode,this.openNode,this.adapt,this.real,this.downloadImg),a=this.downloadExcel,r=this.addIndex,s=this.zoomIn,l=this.zoomOut,c=this.curSelect,h=this.state,u=h.keyword,_=h.showTip,f=h.scale,m=this.props,y=m.maxLevel,w=m.indexList,b=(c||{_data:{view:{abs_x:0,abs_y:0}}})._data,x=c&&"root"!==c.id,E=c&&c.data.level!==y,k=c&&c.parent&&1!==c.parent.children.length;return d.createElement("div",{className:"jsmind_wrap"},d.createElement("div",{className:"top_tip"},d.createElement("div",{className:"aspect"},g.bc.slice(0,y+1).map((function(e,t){return d.createElement("div",{className:"name",key:t},d.createElement("span",{style:{background:t===y?g.bc[g.bc.length-1]:e}}),d.createElement("span",null,t===y?g.h1[t]+"\uff08\u672b\u7ea7\uff09":g.h1[t]+(t===y-1?"\uff08\u6b21\u672b\u7ea7\uff09":"")))}))),d.createElement("div",{className:"download"},d.createElement(p.Z,{overlay:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.5,placement:"top"},d.createElement("i",{className:"icon-cem_picture-download",onClick:o})),d.createElement(p.Z,{overlay:"\u5bfc\u51faexcel",mouseEnterDelay:.5,placement:"top"},d.createElement("i",{className:"icon-cem_excel-analysis",onClick:a})))),d.createElement("div",{className:"jsmind_wrap"},d.createElement("div",{className:"tool"},d.createElement(p.Z,{overlay:"\u521b\u5efa\u540c\u7ea7\u679d\u5e72",mouseEnterDelay:.5,placement:"top"},d.createElement("svg",{className:"icon "+(x?"":"cantSel"),"aria-hidden":"true",onClick:t},x?d.createElement("use",{className:"normal",xlinkHref:"#icon-cem_create-siblings"}):d.createElement("use",{className:"normal",xlinkHref:"#icon-cem_create-siblings-fiben"}),d.createElement("use",{className:"hover",xlinkHref:"#icon-cem_create-siblings-color"}))),d.createElement(p.Z,{overlay:"\u521b\u5efa\u4e0b\u7ea7\u679d\u5e72",mouseEnterDelay:.5,placement:"top"},d.createElement("svg",{className:"icon "+(E?"":"cantSel"),"aria-hidden":"true",onClick:n},E?d.createElement("use",{className:"normal",xlinkHref:"#icon-cem_create-subordinates"}):d.createElement("use",{className:"normal",xlinkHref:"#icon-cem_create-subordinates-fiben"}),d.createElement("use",{className:"hover",xlinkHref:"#icon-cem_create-subordinates-color"}))),d.createElement(p.Z,{overlay:"\u5220\u9664",mouseEnterDelay:.5,placement:"top"},d.createElement("svg",{className:"icon "+(k?"":"cantSel"),"aria-hidden":"true",onClick:i},k?d.createElement("use",{className:"normal",xlinkHref:"#icon-cem_delete-indicator-tree"}):d.createElement("use",{className:"normal",xlinkHref:"#icon-cem_delete-indicator-tree-fiben"}),d.createElement("use",{className:"hover",xlinkHref:"#icon-cem_delete-indicator-tree-color"}))),d.createElement(p.Z,{overlay:"\u653e\u5927\u89c6\u56fe",mouseEnterDelay:.5,placement:"top"},d.createElement("svg",{className:"icon enlarge","aria-hidden":"true",onClick:s},d.createElement("use",{className:"normal",xlinkHref:"#icon-cem_enlarge-new"}),d.createElement("use",{className:"hover",xlinkHref:"#icon-cem_enlarge-new-color"}))),d.createElement("span",{className:"scale"},(100*f).toFixed(0)+"%"),d.createElement(p.Z,{overlay:"\u7f29\u5c0f\u89c6\u56fe",mouseEnterDelay:.5,placement:"top"},d.createElement("svg",{className:"icon","aria-hidden":"true",onClick:l},d.createElement("use",{className:"normal",xlinkHref:"#icon-cem_narrow-new"}),d.createElement("use",{className:"hover",xlinkHref:"#icon-cem_narrow-new-color"})))),_&&Array.isArray(w)&&0!==b.view.abs_x&&d.createElement(v,{list:w.filter((function(t){return!(0,g.XV)(e.props.data).includes(t.name)})),keyword:u,x:b.view.abs_x*f+2,y:b.view.abs_y*f+28*f,onSelect:r}),d.createElement("div",{id:"jsmind_container"})))},t}(d.Component);var E=n(61918),k=n(53754);const j=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={aspectName:"",msgType:void 0,nodeList:void 0},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.pageSize;this.props.data&&this.setState({nodeList:this.props.data})},n.componentDidUpdate=function(e,t){var n=e.data,i=this.props.data;JSON.stringify(n)!==JSON.stringify(i)&&this.setState({nodeList:i})},n.render=function(){var e=this,t=this.state,n=t.aspectName,i=t.msgType,o=t.nodeList,a=this.props,r=a.addedName,s=a.loading,l=a.data,c=a.onNodeClick,u=a.level,_=a.maxLevel,f=a.msgTypeList,v=a.msgTypeOpts,m=o&&o instanceof Array&&o.length>0&&o.filter((function(e){return e.name.includes(n)})).filter((function(e){return(0,g.iU)(i,f,l).some((function(t){return e.name===t}))}));return d.createElement(h.Z,{className:"yt_aspect_tree_edit_node_wrapper",data:l,loading:s},d.createElement("div",{className:"search_wrap"},d.createElement(E.Z,{placeholder:"\u641c\u7d22\u6307\u6807\u540d\u79f0",defValue:n,onSearch:function(t){e.scrollRef&&(e.scrollRef.scrollTop=0),e.setState({aspectName:t})},onClear:function(t){e.scrollRef&&(e.scrollRef.scrollTop=0),e.setState({aspectName:t})},style:{width:168}})),d.createElement("div",{className:"select_wrap"},d.createElement(k.Z,{title:"\u6d88\u606f\u7c7b\u578b",options:v,value:i,onChange:function(t){e.scrollRef&&(e.scrollRef.scrollTop=0),e.setState({msgType:t})}})),d.createElement("p",null,"\u6307\u6807\u540d\u79f0"),d.createElement("div",{className:"list_content_wrap",ref:function(t){return e.scrollRef=t}},m&&r.length>0&&m.length>0&&m.map((function(e){return e.name})).every((function(e){return r.indexOf(e)>=0}))?d.createElement("div",{className:"empty-block"},"\u5168\u5c40\u6307\u6807\u5df2\u5168\u90e8\u6dfb\u52a0\u5230\u5f53\u524d\u6307\u6807\u6811"):m&&m.length>0?m.map((function(e,t){return d.createElement("div",{key:e.id,className:"content "+(u&&u===_||u&&u===_-1?"":"not_add"),style:{display:r.includes(e.name)?"none":"flex"}},d.createElement(d.Fragment,null,u&&u===_||u&&u===_-1?d.createElement(p.Z,{placement:"topLeft",overlayClassName:"aspect_tree_node_topLeft_overlay",overlay:d.createElement("div",{style:{maxWidth:212,transition:"all 0.8s"}},d.createElement("div",{style:{fontSize:14,fontWeight:"bold"}},"\u5168\u5c40\u6307\u6807\uff1a",e.name),d.createElement("div",{style:{color:"#626262",paddingTop:4,width:180}},"\u6570\u636e\u7c7b\u578b\uff1a",e.categoryRates&&e.categoryRates.map((function(e){return(v.find((function(t){return t.id===e.category}))||{}).name})).join("\uff0c")))},d.createElement("div",{className:"left"},d.createElement("div",null,e.name),d.createElement("div",{className:"category ellipsis"},e.categoryRates&&e.categoryRates.map((function(e){return(v.find((function(t){return t.id===e.category}))||{}).name})).join("\uff0c")))):d.createElement("div",{className:"left"},d.createElement("div",null,e.name),d.createElement("div",{className:"category ellipsis"},e.categoryRates&&e.categoryRates.map((function(e){return(v.find((function(t){return t.id===e.category}))||{}).name})).join("\uff0c")))),d.createElement("i",{className:"icon-cem_add-to",style:{fontSize:16},onClick:function(){(u&&u===_||u&&u===_-1)&&c(e.id,e.name)}}))})):d.createElement("div",{className:"empty-block"},"\u6682\u65e0\u6570\u636e")))},t}(d.PureComponent);var N=n(55609),S=n(74981),C=(n(97138),n(24203),n(45697)),T=n.n(C),L=n(76010),z=function(e){var t=e.onChange,n=e.value,i=e.placeHolder,o=e.style,a=void 0===o?{}:o,r=(0,L.Z)(n||"",{value:n,onChange:t}),s=r[0],l=r[1];return d.createElement(S.ZP,{style:a,className:"yt_code_editor_warapper",mode:"javascript",theme:"github",placeholder:i,value:s,onChange:l,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})};const M=z;z.propTypes={style:T().object,onChange:T().func,placeHolder:T().string,value:T().string};var D=n(84204),O=n.n(D);function I(e,t){return void 0===t&&(t=1),Object.keys(e).reduce((function(n,i){return e[i]instanceof Array?Math.max(t+1,n):Math.max(I(e[i],t+1),n)}),t)}function A(e,t,n){return void 0===n&&(n=1),e.children?e.children.reduce((function(i,o){var a=A(o,t,n+1);return"string"===typeof a?n===t?(i[e.topic]||(i[e.topic]=[]),i[e.topic].push(a)):t>n&&(i[a]={}):"object"===typeof a&&Object.keys(a).forEach((function(e){i[o.topic]||(i[o.topic]={}),o.topic===e?i[o.topic]=a[e]:i[o.topic][e]=a[e]})),i}),{}):e.topic}function Z(e,t){return e instanceof Array?e.reduce((function(e,n){return!(!n||!t[n])&&(e.push({topic:n,id:t[n]}),e)}),[]):Object.keys(e).reduce((function(n,i){var o=Z(e[i],t);if(!o||!n)return!1;var a={topic:i,id:Math.floor(Math.random()*(new Date).getTime()),children:o};return n.push(a),n}),[])}var R={wrap_line_length:80},W=l.Z.productExperience.aspectSystem.treeEdit,P={visible:!1,editing:!1,data:{},maxLevel:0,callback:void 0,errMsg:"",aspectDict:{}},H=function(e){function t(t){var n;return(n=e.call(this,t)||this).showDialog=function(){n.setState({visible:!0})},n._handleOnCancel=function(){n.setState({visible:!1},(function(){setTimeout((function(){n.setState(JSON.parse(JSON.stringify(P)))}),200)}))},n._handleOnConfrim=function(){var e,t=n.state,i=t.liteData,a=t.aspectDict,r=n.props,s=r.maxLevel,d=r.data,l=!0;try{e=JSON.parse(i)}catch(_){l=!1}l?I(e)!==s&&(l=!1,n.setState({errMsg:"\u5c42\u7ea7\u4e0d\u6b63\u786e"})):n.setState({errMsg:"\u6570\u636e\u683c\u5f0f\u9519\u8bef"});var c=Z(e,a);if(c||(l=!1,n.setState({errMsg:"\u5b58\u5728\u975e\u6cd5\u53f6\u5b50\u6570\u636e"})),l){var h={id:d.id,topic:d.topic,children:c},u=(0,g.j)(h);n.props.save((0,o.Z)({},u,{showTree:!1})),setTimeout((function(){n.props.save({showTree:!0})}),200),n._handleOnCancel()}},n._handleOnEditorChange=function(e){n.setState({liteData:e})},n._handleOnFormat=function(){n.setState({liteData:O()(n.state.liteData,R)})},n.state=JSON.parse(JSON.stringify(P)),n}return(0,a.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return t.visible&&!t.editing?{aspectDict:e.indexList.reduce((function(e,t){return e[t.name]=t.id,e}),{}),liteData:O()(JSON.stringify(A(e.data,e.maxLevel)),R),editing:!0}:null},t.prototype.render=function(){var e=this.state,t=e.visible,n=e.liteData,i=e.errMsg;return d.createElement(f.Dialog,{className:"aspect_system_advance_wrapper",size:"tiny",visible:t,title:d.createElement("span",{style:{}},"\u7f16\u8f91\u6307\u6807\u6811",d.createElement(p.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:d.createElement(d.Fragment,null,d.createElement("div",null,"\u5982\u679c\u4f60\u9700\u8981\u5feb\u901f\u521b\u5efa\u6307\u6807\u6811\uff0c\u4e14\u4f60\u4e86\u89e3Json\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u6b64\u529f\u80fd\u3002\u5982\u679c\u64cd\u4f5c\u6709\u7591\u95ee\uff0c\u8bf7\u8054\u7cfb\u5ba2\u6237\u6210\u529f\u3002"),d.createElement("div",null,"\u90d1\u91cd\u58f0\u660e\uff1a\u6b64\u529f\u80fd\u662f\u9488\u5bf9\u6709\u4e00\u5b9a\u7f16\u7a0b\u7406\u89e3\u80fd\u529b\u7684\u7528\u6237\u51c6\u5907\u7684\u3002"))},d.createElement("i",{className:"icon-cem_file1",style:{marginLeft:4,color:"#8C8C8C",fontSize:14}}))),closeOnClickModal:!1,onCancel:this._handleOnCancel},d.createElement(f.Dialog.Body,null,d.createElement("div",{className:i?"error":""},d.createElement(M,{value:n,onChange:this._handleOnEditorChange,style:{height:350}}),i&&d.createElement("span",{className:"error_msg"},i))),d.createElement(f.Dialog.Footer,null,d.createElement(f.Button,{onClick:this._handleOnFormat},"\u683c\u5f0f\u5316"),d.createElement(f.Button,{type:"primary",onClick:this._handleOnConfrim},"\u786e\u5b9a")))},t}(d.PureComponent);const B=(0,N.connect)((function(e){var t=(0,o.Z)({},e)[W];return{data:t.data,maxLevel:t.maxLevel,indexList:t.indexList}}),(function(e){return{save:function(t){return e({type:W+"/save",payload:t})}}}),null,{withRef:!0})(H);var J=function(e){function t(t){var n;return(n=e.call(this,t)||this).event={},n}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.data,i=t.maxLevel,o=t.curSelectNode,a=t.curSelectChange,r=t.showTree,s=t.fetchingNode,l=t.indexList,p=t.msgTypeList,v=t.msgList,m=t.onDataChange,y=t.onAdvanceClick,w=t.getAdvanceRef,b=t.name,E=t.getMind,k=t.fetchingTree,N=t.saveingTree;return d.createElement("div",{className:"product_experience_tree_edit"},d.createElement(c.Z,{title:[{title:_.t.get(_.V.backProjectConfig).name,url:"/account/project/preview"},{title:"\u6307\u6807\u6811",url:"/account/project/aspectSystem/tree"},{title:b,url:""}],rightContent:d.createElement("div",null,d.createElement(f.Button,{type:"primary",onClick:y},"\u9ad8\u7ea7\u6a21\u5f0f"),d.createElement("span",{style:{margin:"0 16px",color:"#E5E5E5"}},"|"),d.createElement(f.Button,{onClick:function(){return u.mW.go(-1)}},"\u53d6\u6d88"),d.createElement(f.Button,{type:"primary",onClick:this.props.save},"\u4fdd\u5b58")),overlay:d.createElement("div",null,d.createElement("a",{style:{color:"#0847A6"},target:"_blank",rel:"noopener noreferrer",href:"https://www.yuque.com/docs/share/81b0f257-2352-4fa8-abc7-d63ca9167f0e?#\u300a\u300c\u6307\u6807\u6811\u300d\u529f\u80fd\u8bf4\u660e\u300b"},"\u529f\u80fd\u8bf4\u660e"))}),d.createElement("div",{className:"mind_wrap"},d.createElement("div",{className:"mind"},d.createElement(h.Z,{data:r?{}:void 0,loading:k||N,style:{height:"100%"}},r&&d.createElement(x,{ref:E,name:b,data:n,maxLevel:i,curSelectChange:a,indexList:l,onDataChange:m}))),d.createElement("div",{className:"list"},d.createElement(j,{level:o&&o.data&&o.data.level,maxLevel:i,onNodeClick:function(t,n){e.props.mind.addLeafNode(t,n)},data:l,msgTypeOpts:v,msgTypeList:p,addedName:(0,g.XV)(n),loading:s}))),d.createElement(B,{ref:w}))},t}(d.Component);const V=J;var X=["loading"],U=l.Z.productExperience.aspectSystem.treeEdit,q=function(e){function t(t){var n;(n=e.call(this,t)||this)._handelDataChange=function(e){0===n.time?(n.props.dataChange(e),n.data=JSON.parse(JSON.stringify(e)),n.time++):s()(n.data,e)||(n.props.dataChange(e),n.data=JSON.parse(JSON.stringify(e)),n.leaveTest=!0)},n._handelSave=function(){(0,g.Dz)(n.props.data)?n.props.saveTree().then((function(e){n.leaveTest=!1,f.Message.success("\u4fdd\u5b58\u6210\u529f")})):(n.mind.showErr(),f.Message.error("\u8bf7\u5b8c\u5584\u672b\u7ea7\u8282\u70b9"))},n._handleOnAdvanceClick=function(){n.advanceRef&&n.advanceRef.wrappedInstance&&n.advanceRef.wrappedInstance.showDialog()},n.routerWillLeave=function(e){return!n.leaveTest||"\u4fe1\u606f\u8fd8\u672a\u4fdd\u5b58\uff0c\u786e\u8ba4\u8981\u79bb\u5f00\uff1f"},t.location||u.mW.push("/notFind");var i=t.location.state||t.location.query,o=i.name,a=i.level,r=i.module,d=i.id,l=i.moduleName;return n.props.save({name:o,id:d,moduleName:l,projectId:_.t.get(_.V.backProjectConfig).id}),d||o&&a||u.mW.push("/notFind"),d?n.props.fetchTree():n.props.save({data:(0,g.kp)(l,Number(a)),showTree:!0,maxLevel:Number(a),module:r}),n.time=0,n.event={onDataChange:n._handelDataChange,onAdvanceClick:n._handleOnAdvanceClick,getAdvanceRef:function(e){return n.advanceRef=e},getMind:function(e){return n.mind=e},save:n._handelSave},n.props.fetchMsgType(),n.props.fetchNodeList(),n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.router.setRouteLeaveHook(this.props.route,this.routerWillLeave)},n.componentWillUnmount=function(){this.props.clean()},n.render=function(){return d.createElement(V,(0,o.Z)({},this.props,this.event,{mind:this.mind}))},t}(d.Component);const F=(0,N.connect)((function(e){var t=e.loading,n=(0,i.Z)(e,X);return(0,o.Z)({},n[U],{fetchingNode:t.effects[U+"/fetchNodeList"]||!1,fetchingTree:t.effects[U+"/fetchTree"]||!1,saveingTree:t.effects[U+"/saveTree"]||!1})}),(function(e){return{save:function(t){return e({type:U+"/save",payload:t})},clean:function(t){return e({type:U+"/clean",payload:t})},fetchTree:function(t){return e({type:U+"/fetchTree",payload:t})},fetchNodeList:function(t){return e({type:U+"/fetchNodeList",payload:t})},fetchMsgType:function(t){return e({type:U+"/fetchMsgType",payload:t})},curSelectChange:function(t){return e({type:U+"/curSelectChange",payload:t})},dataChange:function(t){return e({type:U+"/dataChange",payload:t})},saveTree:function(t){return e({type:U+"/saveTree",payload:t})}}}))(q)},55815:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(94578),o=n(67294),a=n(45697),r=n.n(a),s=n(43036),d=n(61409),l=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._handleBreadcrumbClick=function(e){var n=t.props,i=n.title,o=n.beforeJump;e!==i.length-1&&(o?new Promise((function(e,t){return o(e,t)})).then((function(){d.mW.push({pathname:i[e].url,state:i[e].state})})):d.mW.push({pathname:i[e].url,state:i[e].state}))},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,i=t.mainTitle,a=t.rightContent,r=t.className,d=t.overlay;return o.createElement("div",{className:"breadcumb-wrapper "+r},n instanceof Array?o.createElement("div",{className:"breadcrumb-left"},o.createElement("div",null,n.map((function(t,i){return o.createElement("span",{className:t.url?"":"not_clickable",key:i,onClick:function(){return t.url&&i!==n.length-1&&e._handleBreadcrumbClick(i)}},t.title,i!==n.length-1&&" / ")}))),o.createElement("span",null,i||n[n.length-1].title,d&&o.createElement(s.Z,{placement:"top",overlay:d},o.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):o.createElement("div",{className:"normal-title"},n,d&&o.createElement(s.Z,{placement:"top",overlay:d},o.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),a||"")},t}(o.Component);l.propTypes={className:r().string,title:r().oneOfType([r().string,r().arrayOf(r().shape({title:r().string,url:r().string,state:r().object}))]).isRequired,overlay:r().oneOfType([r().string,r().node]),mainTitle:r().oneOfType([r().string,r().node]),beforeJump:r().func,rightContent:r().node};const c=l},61918:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(67294),o=n(45697),a=n.n(o),r=function(e){var t=e.className,n=e.onClear,o=e.onSearch,a=e.placeholder,r=e.style,s=e.defValue,d=e.signal,l=i.useState(s),c=l[0],h=l[1];i.useEffect((function(){h(s)}),[s,d]);return i.createElement("div",{style:r,className:"yt_search_input_wrapper "+(t||"")},i.createElement("input",{placeholder:a,value:c,onKeyDown:function(e){13===e.keyCode&&o(c)},onChange:function(e){return h(e.target.value)},autoComplete:"off"}),c&&i.createElement("i",{className:"icon-cem_log-off",onClick:function(){h(""),n&&n("")}}),i.createElement("i",{className:"icon-cem_small-search",onClick:function(){return o(c)}}))};r.propTypes={className:a().string,onSearch:a().func.isRequired,placeholder:a().string,style:a().object,defValue:a().string,signal:a().any,onClear:a().func};const s=r}}]);