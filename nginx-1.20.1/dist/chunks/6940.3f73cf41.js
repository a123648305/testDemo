"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6940],{16940:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var i=n(94578),a=n(67294),o=n(55815),s=n(61193),l=n(92360),r=n(5133),c=(n(47508),n(49722)),m=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleSubmit=function(e){e.preventDefault(),n.refs.form.validate((function(e){if(!e)return r.Z.error("\u8f93\u5165\u6709\u8bef"),!1;var t=n.state.form,i=t.email,a=t.role;t.teamIdList;c.h.post("/invite/email/send",{email:i,roleId:a}).then((function(e){r.Z.info("\u5df2\u5411"+i+"\u90ae\u7bb1\u53d1\u9001\u6fc0\u6d3b\u90ae\u4ef6\uff0c\u8bf7\u63d0\u9192\u8be5\u7528\u6237\u67e5\u6536\u90ae\u4ef6\u3002"),n.setState({dialogVisible:!1})}))}))},n.state={dialogVisible:!1,labelPosition:"left",form:{email:"",role:"",teamIdList:[]},rules:{email:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1",trigger:"blur"},{validator:function(e,t,n){/^[\w-.]+@[\w-]+(.[\w_-]+)+$/.test(t)?n():n(new Error("\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"))}}],role:[{required:!0,message:"\u8bf7\u7ed9\u8be5\u7528\u6237\u6307\u5b9a\u89d2\u8272",trigger:"change"}]},roleList:[],teamList:[]},n}(0,i.Z)(t,e);var n=t.prototype;return n.onChange=function(e,t){var n;this.setState({form:Object.assign(this.state.form,(n={},n[e]=t,n))})},n.getRoleList=function(){var e=this;c.h.get("/role/list").then((function(t){e.setState({roleList:[{name:"\u4f01\u4e1a\u7ba1\u7406\u5458",id:"2"},{name:"\u666e\u901a\u6210\u5458",id:"3"}].concat(t.data.result.list)})}))},n.getTeamList=function(){var e=this;c.h.get("/team/list").then((function(t){e.setState({teamList:t.data.result.list})}))},n.componentDidMount=function(){this.getRoleList(),this.getTeamList()},n.render=function(){var e=this;return a.createElement("div",{className:"invitePeople"},a.createElement(l.Dialog,{title:"\u9080\u8bf7\u7528\u6237",size:"tiny",visible:this.state.dialogVisible,onCancel:function(){return e.setState({dialogVisible:!1})}},a.createElement(l.Dialog.Body,null,a.createElement(l.Form,{model:this.state.form,rules:this.state.rules,ref:"form",labelPosition:this.state.labelPosition},a.createElement(l.Form.Item,{label:"\u90ae\u7bb1",prop:"email"},a.createElement(l.Input,{value:this.state.form.email,onChange:this.onChange.bind(this,"email")})),a.createElement(l.Form.Item,{label:"\u89d2\u8272",prop:"role"},a.createElement(l.Select,{value:this.state.form.rile,placeholder:"\u8bf7\u5206\u914d\u89d2\u8272",onChange:this.onChange.bind(this,"role")},this.state.roleList.map((function(e,t){return a.createElement(l.Select.Option,{key:e.id,label:e.name,value:e.id})})))))),a.createElement(l.Dialog.Footer,{className:"dialog-footer"},a.createElement(l.Button,{onClick:function(){return e.setState({dialogVisible:!1})}},"\u53d6 \u6d88"),a.createElement(l.Button,{type:"primary",onClick:this.handleSubmit},"\u786e \u5b9a"))),a.createElement(l.Button,{type:"primary",onClick:function(){return e.setState({dialogVisible:!0})},className:"invite"},"\u9080\u8bf7\u7528\u6237"))},t}(a.Component),u=[{title:"\u7528\u6237",url:"/account/user"},{title:"\u7528\u6237\u4fe1\u606f",url:"/account/user/userEdit"}],p=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.Z)(t,e),t.prototype.render=function(){return a.createElement("div",{className:"user-container common-wrapper"},a.createElement(o.Z,{title:-1===this.props.location.pathname.indexOf("userEdit")?"\u7528\u6237":u,rightContent:-1===this.props.location.pathname.indexOf("userEdit")&&s.Z.hasAuthority("USER_EDIT")?a.createElement(m,null):null}),this.props.children)},t}(a.PureComponent)},47508:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(87462),a=n(94578),o=n(67294),s=function(e){function t(){var t;return(t=e.call(this)||this).setShowSelFalse=function(){t.state.showSel&&t.setState({showSel:!1})},t.state={options:[{name:"",id:1,sel:""}],sel:[{name:""},{name:""}],value:"",showSel:!1},t}(0,a.Z)(t,e);var n=t.prototype;return n.selItem=function(e,t){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var n=this.state.options;n[t].sel=!n[t].sel,this.setState({options:n}),this.onChange()},n.onChange=function(){var e=[];JSON.parse(JSON.stringify(this.state.options)).forEach((function(t){t.sel&&(delete t.sel,e.push(t))})),this.props.onChange(e)},n.changeShow=function(e){var t=this;this.state.showSel&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout((function(){t.setState({showSel:!t.state.showSel})}),0)},n.componentWillReceiveProps=function(e,t){if(e.options||e.value){var n=JSON.parse(JSON.stringify(e.options)),i=JSON.parse(JSON.stringify(e.value));n.map((function(e){return i.forEach((function(t){e.id===t.id&&(e.sel=!0)})),e})),this.setState({options:n,value:i})}},n.componentDidMount=function(){var e=this;this.setState({options:this.props.options,value:this.props.value?this.props.value:[]},(function(){e.state.options.map((function(t){return e.state.value.forEach((function(e){t.id===e.id&&(t.sel=!0)})),t}))})),window.addEventListener("click",this.setShowSelFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this.setShowSelFalse)},n.render=function(){var e=this;return o.createElement("div",{className:"multiSelect",onClick:function(t){return e.changeShow(t)}},o.createElement("div",{className:"infor"},o.createElement("div",{className:"infor-content"},this.props.title&&o.createElement("a",null,this.props.title,"\uff1a"),function(){var t=[];return e.state.options.forEach((function(e,n){e.sel&&t.push((0,i.Z)({},e,{index:n}))})),t.length>0?t.map((function(t,n){return o.createElement("span",{className:t.disable?"tags disable":"tags",key:n,onClick:function(n){return e.selItem(n,t.index)}},t.name)})):o.createElement("a",null,e.props.noSelTip&&e.props.noSelTip)}(),o.createElement("i",{className:"el-icon-arrow-down",style:{transform:this.state.showSel?"rotate(-180deg)":"",top:this.state.showSel?"8px":""}}))),o.createElement("div",{className:"selItem",onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},style:{display:this.state.showSel?"block":"none"}},o.createElement("ul",null,this.state.options.length>0?this.state.options.map((function(t,n){return o.createElement("li",{className:(t.sel?"sel":"")+(t.disable?" disable":""),key:n,onClick:function(t){return e.selItem(t,n)}},o.createElement("span",null,t.name),o.createElement("i",{className:"cem-icon cem-icon-zhengque"}))})):o.createElement("div",{className:"noData"},"\u65e0\u6570\u636e"))))},t}(o.Component)},55815:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(94578),a=n(67294),o=n(45697),s=n.n(o),l=n(43036),r=n(61409),c=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this)._handleBreadcrumbClick=function(e){var n=t.props,i=n.title,a=n.beforeJump;e!==i.length-1&&(a?new Promise((function(e,t){return a(e,t)})).then((function(){r.mW.push({pathname:i[e].url,state:i[e].state})})):r.mW.push({pathname:i[e].url,state:i[e].state}))},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,i=t.mainTitle,o=t.rightContent,s=t.className,r=t.overlay;return a.createElement("div",{className:"breadcumb-wrapper "+s},n instanceof Array?a.createElement("div",{className:"breadcrumb-left"},a.createElement("div",null,n.map((function(t,i){return a.createElement("span",{className:t.url?"":"not_clickable",key:i,onClick:function(){return t.url&&i!==n.length-1&&e._handleBreadcrumbClick(i)}},t.title,i!==n.length-1&&" / ")}))),a.createElement("span",null,i||n[n.length-1].title,r&&a.createElement(l.Z,{placement:"top",overlay:r},a.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):a.createElement("div",{className:"normal-title"},n,r&&a.createElement(l.Z,{placement:"top",overlay:r},a.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),o||"")},t}(a.Component);c.propTypes={className:s().string,title:s().oneOfType([s().string,s().arrayOf(s().shape({title:s().string,url:s().string,state:s().object}))]).isRequired,overlay:s().oneOfType([s().string,s().node]),mainTitle:s().oneOfType([s().string,s().node]),beforeJump:s().func,rightContent:s().node};const m=c}}]);