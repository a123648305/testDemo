(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[4088],{70858:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});var a=t(37316),n=t.n(a),a=t(67154),r=t.n(a),a=t(85354),l=t.n(a),a=t(67294),C=t.n(a),v=t(48577),F=t(67133),O=t(19731),_=t(89604);const i=function(e){var a=e.pageType,t=e.dateOptions,n=e.filterReady,l=e.filterChange,r=e.onFilterChange,i=e.onFlavorChange,o=e.onMsgClick,c=e.trendData,p=e.fetchingTrendData,s=e.timeType,f=e.fTimeType,u=e.barData,h=e.fetchingBarData,d=e.analyzeLineData,y=e.analyzeBarData,g=e.fetchingAnalyzeLineData,m=e.fetchingAnalyzeBarData,D=e.alzName,T=e.alzOptions,z=e.alzTimeType,e=e.alzFTimeType;return C().createElement("div",{className:"yt_explore_scene_spokesperson_wrapper"},C().createElement(v.Z,{onReady:n,onChange:l,pageType:a,advanceAuthority:!1,touchData:["电商评论"],selectValue:"电商评论",valueConf:["fullInfo"],showList:["fullDate","screening","save","sourceSearch"],hasHour:!0},C().createElement("div",{className:"content"},C().createElement(O.Z,{data:c,loading:p,timeType:s,fTimeType:f,timeOptions:t,onFilterChange:r,onFlavorChange:i,onMsgClick:o,title:"标签数量",titleOverlay:C().createElement("div",null,C().createElement("p",null,"场景标签提及率 = 提及了场景标签去重后的消息数量 ÷ 消息总量"),C().createElement("p",null,"标签数量计算说明：如果一条消息中出现一个代言人就计1，同一个代言人在一条消息中重复提及时，标签数量不会重复计数。"))}),C().createElement(F.Z,{title:"标签分布",tips:"一个代言人会有一个艺名和多个昵称，统计标签数量时会包含艺名和昵称来统计，标签「代言人」是统计内容中命中关键词 “代言人”“我的偶像”“我偶像”“自己偶像”等的消息数量。",data:u,loading:h,onMsgClick:o}),C().createElement(_.Z,{analyzeLineData:d,analyzeBarData:y,fetchingAnalyzeLineData:g,fetchingAnalyzeBarData:m,timeOptions:t,alzTimeType:z,alzFTimeType:e,alzOptions:T,alzName:D,onFilterChange:r,onFlavorChange:i,onMsgClick:o}))))};var a=t(55609),o=t(35239),c=t(97194),h=t(81408),d=t(2786),p=t(64396).Z.explore.scene.spokesperson,t=function(a){function e(e){var u=a.call(this,e)||this;return u._handleFilterReady=function(e,a){var t=(0,c.X)(e.dateFilter.numOfDays,!0),n=t.dateOptions,t=t.defaultDateType;u.props.fetchParams({projectId:o.t.get(o.V.curProject).id,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:e.dateFilter,dateOptions:n,defaultDateType:t,filterValues:a.fullInfo.filterValue})},u._handleFilterChange=function(e,a,t){var n=(0,c.X)(e.dateFilter.numOfDays,!0),l=n.dateOptions,n=n.defaultDateType;u.props.fetchDatas(r()({},e,{dateOptions:l,defaultDateType:n,timeType:n,alzTimeType:n,filterValues:a.fullInfo.filterValue}))},u._handleOnFilterChange=function(e){var a=u.props,t=a.oLineData,n=a.oBarData,a=a.alzOptions;e.timeType&&u.props.fetchTrendData(e),e.alzTimeType&&u.props.fetchAnalyzeLineData(e),e.alzName&&(a=(0,h.dR)(r()({oLineData:t,oBarData:n,alzOptions:a},e)),u.props.save(r()({},e,a)))},u._handleOnFlavorChange=function(e){e.fTimeType||e.alzFTimeType,u.props.setDefaultValue(e)},u._handleOnMsgClick=function(e,a){var t=u.props,n=t.projectId,l=t.dateFilter,r=t.headerFilterParamsNew,i=t.oLineData,o=t.alzTimeType,c=t.alzName,p=t.filterValues,s=e.name,f=e.componentSubType,t=e.data,e={id:"SCENE_ENDORSER",label:"代言人",values:[c]},p={projectId:n,dateFilter:(0,d.X_)(f,l,s,i[0].data.map(function(e){return e.name}),o),headerFilterParamsNew:"bar"===f&&"标签分布"===a?(0,h.gt)(r,"代言人",s):"line"===f?(0,h.gt)(r,"代言人",c):"bar"===f&&"共同提及的其他场景标签"===a?(0,h.gt)(r,t[0],s.split(":")[1],"",e):r,filterModel:{project:[n],messageCategory:["COMMENT"]},filterTip:null,filterValues:"bar"===f&&"标签分布"===a?(0,h.gt)(p,"代言人",s,!0):"line"===f?(0,h.gt)(p,"代言人",c,!0):"bar"===f&&"共同提及的其他场景标签"===a?(0,h.gt)(p,t[0],s.split(":")[1],!0,e):p};window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(p)))},u.state={},u.events={filterReady:u._handleFilterReady,filterChange:u._handleFilterChange,onFilterChange:u._handleOnFilterChange,onFlavorChange:u._handleOnFlavorChange,onMsgClick:u._handleOnMsgClick},u}l()(e,a);var t=e.prototype;return t.componentWillUnmount=function(){this.props.clean()},t.render=function(){return C().createElement(i,r()({},this.props,this.state,this.events))},e}(C().Component);const s=(0,a.connect)(function(e){var a=e.loading,e=n()(e,["loading"]);return r()({},e[p],{fetchingTrendData:a.effects[p+"/fetchTrendData"]||!1,fetchingBarData:a.effects[p+"/fetchBarData"]||!1,fetchingAnalyzeLineData:a.effects[p+"/fetchAnalyzeLineData"]||!1,fetchingAnalyzeBarData:a.effects[p+"/fetchAnalyzeBarData"]||!1})},function(a){return{save:function(e){return a({type:p+"/save",payload:e})},clean:function(){return a({type:p+"/clean"})},setDefaultValue:function(e){return a({type:p+"/setDefaultValue",payload:e})},fetchParams:function(e){return a({type:p+"/fetchParams",payload:e})},fetchDatas:function(e){return a({type:p+"/fetchDatas",payload:e})},fetchTrendData:function(e){return a({type:p+"/fetchTrendData",payload:e})},fetchBarData:function(e){return a({type:p+"/fetchBarData",payload:e})},fetchAnalyzeLineData:function(e){return a({type:p+"/fetchAnalyzeLineData",payload:e})},fetchAnalyzeBarData:function(e){return a({type:p+"/fetchAnalyzeBarData",payload:e})}}})(t)}}]);