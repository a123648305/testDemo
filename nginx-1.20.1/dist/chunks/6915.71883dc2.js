(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6915],{86915:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(85354),o=n.n(a),t=n(67154),v=n.n(t),y=n(67294),E=n.n(y),C=n(92360),i=n(5133),k=n(29383),b=n(43036),S=n(12518),A=n(83425),a=n(45697),t=n.n(a),p=n(58341),a=n(30381),w=n.n(a),u=n(94157),a=n(94184),d=n.n(a),N=function(n){function e(e){var t=n.call(this,e)||this;return t.openPanel=function(e){t.state.panelShow&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout(function(){return t.setState({panelShow:!0})},0)},t.closePanel=function(){t.setState({panelShow:!1})},t.clear=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),"string"==typeof t.state.value?t.setState({value:""}):t.setState({value:["",""]})},t.handleMouseEnter=function(){var e=t.state.value;("string"==typeof e&&0<e.length||"object"==typeof e&&e[0]&&e[1])&&t.setState({hovering:!0})},t.handleMouseLeave=function(){t.setState({hovering:!1})},t.getDateRange=function(e){t.props.getDateRange(e)},t.state={panelShow:!1,value:e.value||[],type:e.type,disabledDate:e.disabledDate,disabled:e.disabled||!1,hovering:!1},t}o()(e,n);var t=e.prototype;return t.componentDidMount=function(){},t.UNSAFE_componentWillReceiveProps=function(e){this.setState(v()({},e))},t.componentWillUnmount=function(){},t.render=function(){var t=this,e=this.state,n=e.value,a=e.type,o=e.disabledDate,i=e.panelShow,l=e.disabled,c=e.hovering,s=e.hasHeader,r=[];n&&"object"==typeof n&&(r=n.map(function(e){return w()(e,"YYYY-MM-DD")}));e=d()(((e={"datepicker-wrapper":!0})[""+a]=!0,e.disabled=l,e.hovering=c,e));return E().createElement(u.Z,{ref:function(e){return t.trigger=e},action:["click"],popupAlign:{points:["tl","tl"],offset:[0,0]},popup:E().createElement(p.Z,{type:a,getDateRange:this.getDateRange,closePanel:this.closePanel,defaultSelectedValue:"calendar"===a?w()():r,disabledDate:o,hasHeader:s}),popupVisible:i},E().createElement("div",{className:e,onClick:!l&&this.openPanel,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},"calendar"===a&&E().createElement("input",{value:n||"",placeholder:"请选择日期"}),"rangeCalendar"===a&&E().createElement(y.Fragment,null,E().createElement("input",{value:n[0]||"",placeholder:"开始日期"}),E().createElement("span",null,"至"),E().createElement("input",{value:n[1]||"",placeholder:"结束日期"})),E().createElement("i",{className:"icon-cem_close-window"}),E().createElement("i",{className:"icon-cem_account-overview",onClick:this.clear})))},e}(E().Component);N.propTypes={type:t().string.isRequired,value:t().oneOfType([t().string,t().array]),getDateRange:t().func.isRequired,disabledDate:t().func,disabled:t().bool};function l(r){var p=[],u=JSON.parse(localStorage.getItem("filter-list")).list;return Object.keys(r).forEach(function(s){r[s]&&function(){switch(s){case"connConfig":for(var i=r[s],e=0;e<i.length;e++)!function(t){var e=u.filter(function(e){return e.id===i[t].id});if(e&&0<e.length){for(var n=[],a=0;a<e[0].values.length;a++)for(var o=0;o<i[t].values.length;o++)e[0].values[a].id===i[t].values[o]&&n.push(e[0].values[a].name);p.push({name:e[0].name,values:n})}}(e);break;case"source":case"expandTopic":var t=u.filter(function(e){return e.id===s});if(t&&0<t.length){for(var n=[],a=0;a<r[s].length;a++)for(var o=0;o<t[0].values.length;o++)r[s][a]===t[0].values[o].id&&n.push(t[0].values[o].name);p.push({name:t[0].name,values:n})}break;case"aspect":var l=r[s],c=l.aspect1,l=l.aspect2;p.push({name:"分析指标",values:0<c.length?c:l})}}()}),p}var c=n(36144),h=n(61193),s=n(97911),r=n(97189),f=function(t){function e(e){var c=t.call(this,e)||this;return c.changeState=function(e){c.setState(e,function(){c.updateFilter()})},c.clickCheckbox=function(e){var t=e.aspect1,n=e.aspect2,a=c.state.limit;a&&(t&&t.length>a||n&&n.length>a)?i.Z.warning("当前条件下最多支持选择"+a+"个分析指标"):c.setState(e)},c.updateFilter=function(){var e=c.state.aspectType,t=c.state,n=t.aspect1,t=t.aspect2;e&&n&&0<n.length?t=[]:0<t.length&&(n=[]),c.setState({aspect1:n,aspect2:t})},c.clickCancelBtn=function(){c.state.aspectShow&&c.props.closePanel()},c.orderAspect=function(e){for(var t=c.state.aspectList,n=[],a=[],o=0;o<t.length;o++){for(var i=!1,l=0;l<e.length;l++)if(t[o].name===e[l]){i=!0,n[l]=t[o];break}i||a.push(t[o])}c.setState({aspectList:n.concat(a)})},c.state={aspectShow:!1,aspectType:!0,aspect1:[],aspect2:[],rawAspectList:[],aspectList:[],projectId:e.projectId,model:e.model,ready:!1,limit:e.limit,panelWidth:e.panelWidth},c}o()(e,t);var n=e.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var t=e.aspectShow,n=e.limit,e=e.panelWidth;this.setState({aspectShow:t,limit:n,panelWidth:e})},n.componentDidMount=function(){this.getValue(),window.addEventListener("click",this.clickCancelBtn)},n.componentDidUpdate=function(){this.setLeftBlockHeight()},n.componentWillUnmount=function(){window.removeEventListener("click",this.clickCancelBtn)},n.setLeftBlockHeight=function(){var e=document.querySelectorAll(".analyse-aspect-panel-body .left .new-checkbox-panel .wt-checkbox-group .wt-checkbox"),t=document.querySelectorAll(".analyse-aspect-panel-body .right .new-checkbox-panel");if(e.forEach(function(e){return e.style.marginBottom="0"}),0<t.length)for(var n=t.length-1;0<=n;n--){var a=t[n].offsetHeight;36<a&&(e[n].style.marginBottom=a-36+"px")}},n.getValue=function(){var e=this.state,t=e.aspectType,n=e.aspect1,a=e.aspect2;if(e.ready)return{aspect1:t?n:[],aspect2:t?[]:a};t=this.props,a=t.projectId,t=t.model;this.fetchAspects(a,t)},n.getSndIndex=function(e){e=this.state.aspects[e];return e&&0<e.length&&this.setState({aspectType:!1,aspect1:[],aspect2:e}),e},n.setAspectFromOutside=function(e){this.setState(v()({aspectType:0<e.aspect1.length},e))},n.fetchAspects=function(n,a){var o=this,e=a.map(function(e){return c.h.post("filter/find",{filterTypes:["ASPECT"],projectId:n,type:e})});Promise.all(e).then(function(e){e.forEach(function(e){var t=e.data.result,e=o.state.rawAspectList;t.aspect&&o.setState({projectId:n,model:a,rawAspectList:e.concat(t.aspect)})}),o.formatData()})},n.formatData=function(){var n,a,e,t=this.state,o=t.model,i=t.aspect1,l=t.aspect2,c=t.rawAspectList,s=(t.limit,this.state),t=s.aspectShow,s=s.aspectType,c=c,r={};"BRAND"===o?(n=c.map(function(e){return e&&JSON.parse(e)}),(o=0)<=(a=h.Z.getAuthority()).indexOf("ANALYZE_PRODUCT")&&o++,0<=a.indexOf("ANALYZE_SERVER")&&o++,0<=a.indexOf("ANALYZE_MARKETING")&&o++,0===o?n.forEach(function(e){Object.keys(e).forEach(function(e,t){return r[t]=e})}):1===o?["ANALYZE_PRODUCT","ANALYZE_SERVER","ANALYZE_MARKETING"].forEach(function(e,t){0<=a.indexOf(e)&&Object.keys(n[t]).map(function(e,t){return r[t]=e})}):1<o&&(0<=a.indexOf("ANALYZE_PRODUCT")&&(1===(o=Object.keys(n[0])).length?r["产品"]=n[0][o[0]]:1<o.length&&(r["产品"]=n[0])),0<=a.indexOf("ANALYZE_SERVER")&&(1===(e=Object.keys(n[1])).length?r["服务"]=n[1][e[0]]:1<e.length&&(r["服务"]=n[1])),0<=a.indexOf("ANALYZE_MARKETING")&&(1===(e=Object.keys(n[2])).length?r["市场"]=n[2][e[0]]:1<e.length&&(r["市场"]=n[2])))):c&&c[0]&&c.forEach(function(e){r=Object.assign.apply(Object,[r].concat(JSON.parse(e)))});c=Object.keys(r).map(function(e,t){var a=r[e];return{id:t,name:e,contain:a.length?a:Object.keys(a).map(function(e,t){var n=a[e];return{id:t,name:e,contain:n.length?n:Object.keys(n)}})}});(s=c.length<=1?t=!1:s)&&!i.length||s||l.length||c&&c[0]&&c[0].contain.forEach(function(e){"object"==typeof e?l.push(e.name):l.push(e)}),this.changeState({aspectList:c,aspectShow:t,aspects:r,aspectType:s,aspect1:i,aspect2:l,ready:!0}),this.props.onChange()},n.handleClickBlock=function(e,t){var n=this.state,a=n.aspectType;n.aspectShow&&a!==e&&(n=document.querySelectorAll(".analyse-aspect-panel-body div"),a="disabled",e?this.hanldeClass("remove",n[1],a):this.hanldeClass("remove",n[0],a),e?this.setState({aspectType:e,aspect2:[]}):this.setState({aspectType:e,aspect1:[]}))},n.hanldeClass=function(e,t,n){("add"===e?(0,r.addClass):(0,r.removeClass))(t,n)},n.clickConfirmBtn=function(){this.props.onChange(),this.props.closePanel()},n.clearOptions=function(){this.setState({aspect1:[],aspect2:[]})},n.render=function(){var n=this,e=this.state,t=e.aspectList,a=e.aspectType,o=e.aspect1,i=e.aspect2,l=e.aspectShow,c=e.limit,e=e.panelWidth;return E().createElement("div",{className:"analyse-aspect-panel-wrapper",style:{display:l?"block":"none",width:e},onClick:function(e){return e.stopPropagation()}},E().createElement("div",{className:"analyse-aspect-panel-body"},E().createElement("div",{className:a?"left":"left disabled",onClick:function(e){return n.handleClickBlock(!0,e)}},E().createElement(s.Z,{changeState:function(e){return n.clickCheckbox({aspect1:e})},checkedList:o,ITEMS:t.map(function(e){return e.name||e}),categoryTitle:"一级指标",type:"vertical",limit:c})),E().createElement("div",{className:a?"right disabled":"right",onClick:function(e){return n.handleClickBlock(!1,e)}},E().createElement("div",null,"二级指标"),0<t.length&&t.map(function(e,t){return E().createElement(s.Z,{changeState:function(e){return n.clickCheckbox({aspect2:e})},checkedList:JSON.parse(JSON.stringify(i)),key:"aspect1-"+t,categoryTitle:e.name,ITEMS:e.contain.map(function(e){return e.name||e}),type:"horizontal",limit:c})}))),E().createElement("div",{className:"analyse-aspect-panel-footer"},E().createElement("span",{onClick:function(){return n.clearOptions()}},"清空全部选项"),E().createElement("div",null,E().createElement(C.Button,{type:"primary",onClick:function(){return n.clickConfirmBtn()}},"确定"),E().createElement("span",{className:"cancelBtn",onClick:function(){return n.clickCancelBtn()}},"取消"))))},e}(E().Component),O=function(t){function e(e){var n=t.call(this,e)||this;return n.closePanel=function(){n.setState({showPanel:!1})},n.handleAspectChange=function(){n.getFormatedValue(),n.props.onChange()},n.getFormatedValue=function(){var e,t;!n.panel||(t=n.panel.getValue())&&(e=t.aspect1,t=t.aspect2,n.setState({formatedValue:(0===e.length&&0===t.length?"请选择":0===e.length?"二级指标：":"一级指标：")+(0<e.length?e:t).join("，")}))},n.handleClear=function(e){e.stopPropagation(),n.panel&&n.panel.clearOptions(),setTimeout(function(){return n.getFormatedValue()},0)},n.getPanelWidth=function(){var e=document.getElementsByClassName("el-input__inner")&&document.getElementsByClassName("el-input__inner")[0].offsetWidth;n.setState({panelWidth:e})},n.state={showPanel:!0,formatedValue:"",showClearIcon:!1,panelWidth:0},n}o()(e,t);var n=e.prototype;return n.componentDidMount=function(){this.getPanelWidth()},n.togglePanel=function(e){var t=this,n=this.state.showPanel;n&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout(function(){return t.setState({showPanel:!n})},0)},n.getValue=function(){if(this.panel)return this.panel.getValue()},n.getSndIndex=function(e){return this.panel.getSndIndex(e)},n.setAspectFromOutside=function(e){return this.panel.setAspectFromOutside(e)},n.orderAspect=function(e){this.panel.orderAspect(e)},n.render=function(){var t=this,e=this.state,n=e.showPanel,a=e.formatedValue,o=e.showClearIcon,e=e.panelWidth;return E().createElement("div",{className:"analyse-aspect-wrapper analyse-aspect-wrapper-input-mode"},E().createElement("div",{className:"analyse-aspect-trigger analyse-aspect-trigger-input-mode",onClick:function(e){return t.togglePanel(e)},onMouseOver:function(){return t.setState({showClearIcon:!0})},onMouseLeave:function(){return t.setState({showClearIcon:!1})}},E().createElement(C.Input,{ref:function(e){return t.input=e},value:a}),o&&"请选择"!==a?E().createElement("i",{className:"icon-cem_delete",onClick:function(e){return t.handleClear(e)}}):E().createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:n?"rotate(180deg)":"",top:n?"4px":"5px"}})),E().createElement(f,v()({ref:function(e){t.panel=e},panelWidth:e,aspectShow:n,closePanel:this.closePanel},this.props,{onChange:this.handleAspectChange})))},e}(E().Component),t=n(55609),n=function(t){function e(e){var c=t.call(this,e)||this;return c.openCreateModal=function(){c.props.dispatch({type:"opinion/save",payload:{modalVisible:!0,step:1}})},c.confirmModal=function(){var e=c.props,t=e.opinion,n=t.step,a=t.filterModel,o=t.filterModel.aspect,t=t.dateRange,e=e.dispatch;1===n?(n=c.filterCondition.getReFormatValue(),0<Object.keys(n).length?(a.filter=n,e({type:"opinion/saveState",payload:{step:2,filterModel:a}}),0<Object.keys(o).length&&setTimeout(function(){c.analyseAspect&&c.analyseAspect.setAspectFromOutside(o)},0),c.filterCondition.saveList()):i.Z.warning("请至少选择一项筛选条件")):0<t.length?e({type:"opinion/createOpinionTask"}):i.Z.warning("请选择筛选时间")},c.cancelModal=function(){var e=c.props,t=e.opinion.step,e=e.dispatch;1===t?c.resetModal():e({type:"opinion/saveState",payload:{step:1}})},c.resetModal=function(){var e="YYYY-MM-DD";(0,c.props.dispatch)({type:"opinion/saveState",payload:{step:1,modalVisible:!1,filterModel:{filter:{},analysis:{},aspect:{}},dateRange:[w()().subtract(29,"days").format(e),w()().format(e)],analyseAspectShow:!1}})},c.onFilterConditionChange=function(e){},c.handleSort=function(e){var t=c.props.dispatch;e.prop;t({type:"opinion/saveState",payload:{sortType:"ascending"===e.order?"ASC":"DESC"}}),t({type:"opinion/fetchOpinionList"})},c.switchPage=function(e){var t=c.props.dispatch;t({type:"opinion/saveState",payload:{pageIndex:e}}),t({type:"opinion/fetchOpinionList"})},c.getFilterDateRange=function(e){(0,c.props.dispatch)({type:"opinion/saveState",payload:{dateRange:e}})},c.handleAnalyseObjChange=function(e){var t=c.props,n=t.opinion.filterModel;(0,t.dispatch)({type:"opinion/saveState",payload:{filterModel:v()({},n,{analysis:e})}})},c.handleAnalyseAspectChange=function(){var e=c.props,t=e.opinion.filterModel,n=e.dispatch;c.analyseAspect&&(e=c.analyseAspect.getValue(),n({type:"opinion/saveState",payload:{filterModel:v()({},t,{aspect:e})}}))},c.editOpinionTask=function(e){var t=e.date,n=t.from,a=t.to,o=e.filter,i=o.aspect,l=o.connConfig,t=o.source,e=o.messageType,o=o.content;(0,c.props.dispatch)({type:"opinion/saveState",payload:{filterModel:{aspect:i,filter:{connConfig:l,source:t,messageType:e,content:o}},dateRange:[n,a],modalVisible:!0}})},c.goDetail=function(e){e=e.id;window.open("/opinionDetail?id="+e)},c.showAnalyseAspect=function(e){e.stopPropagation(),(0,c.props.dispatch)({type:"opinion/saveState",payload:{analyseAspectShow:!0}})},c.state={columns:[{label:"典型意见任务批次",prop:"sequence",align:"center",sortable:!1,render:function(e){var t=location.hostname,n=e.sequence,a=e.filter,o=e.date,e=o.from,o=o.to,i=l(a);return i.push({name:"时间",values:e+" ~ "+o}),E().createElement(b.Z,{overlay:function(){return E().createElement("div",{className:"opinion-tip-wrapper"},E().createElement("div",{className:"opinion-tip-title"},"典型意见 ",t[0].toUpperCase(),"-",n),i.map(function(e,t){return E().createElement("div",{key:t,className:"opinion-tip-item"},E().createElement("label",null,e.name,"："),E().createElement("div",{title:Array.isArray(e.values)?e.values.join("，"):e.values},Array.isArray(e.values)?e.values.join("，"):e.values))}))},overlayClassName:"opinion-tip",placement:"bottomLeft"},E().createElement("span",null,t[0].toUpperCase(),"-",n))}},{label:"消息数",prop:"messageTotal",align:"center",sortable:!1},{label:"观点数",prop:"opinionTotal",align:"center",sortable:!1},{label:"状态",prop:"status",align:"center",sortable:!1,render:function(e){var t="";switch(e.status){case"ENABLE":t="待计算";break;case"DISABLE":case"FAILURE":t="创建失败";break;case"FINISH":t="计算完成";break;case"CALCULATING":t="计算中";break;case"EXPIRED":t="已过期"}return t}},{label:"特殊说明",prop:"statusDescription",align:"center",sortable:!1,render:function(e){var t=e.status,n=e.predictTime,a=e.opinionTotal,n=w()(n,"YYYY-MM-DD HH:mm:ss"),o=Math.round(w().duration(n.diff(w()())).as("minutes")),i="";switch(t){case"ENABLE":i="预计剩余"+o+"分钟";break;case"DISABLE":i="观点数量过"+(0===a?"少":"多")+"，创建失败";break;case"CALCULATING":i=0<=o?"预计剩余"+o+"分钟":"已超时"+-o+"分钟";break;default:i="无"}return i}},{label:"创建或重跑时间",minWidth:"138",prop:"createdTime",align:"center",sortable:!0},{label:"操作",prop:"operation",align:"left",sortable:!1,render:function(e){return E().createElement(y.Fragment,null,E().createElement("span",{className:"text-btn",onClick:function(){return c.editOpinionTask(e)}},"重跑"),"FINISH"===e.status&&E().createElement("span",{className:"text-btn",onClick:function(){return c.goDetail(e)}},"查看"))}}]},c}o()(e,t);var n=e.prototype;return n.componentDidMount=function(){(0,this.props.dispatch)({type:"opinion/fetchOpinionList"})},n.render=function(){var e,n,t=this,a=document.documentElement.clientHeight-46-52-30-38-20-24,o=E().createElement(y.Fragment,null,E().createElement("span",null,"可以同时计算5个任务，支持存放50个已经计算好的任务。超过50个，最早完成计算的任务将失效。如果需要，可重新计算。",E().createElement("a",{style:{color:"#0847A6"},href:"http://wiki.yuntingai.com/pages/viewpage.action?pageId=65609&os_username=yuntingguest&os_password=skieer@2019&os_cookie=true&login=%E7%99%BB%E5%BD%95&os_destination="},"了解更多"))),i=E().createElement("div",null,"典型意见",E().createElement(b.Z,{placement:"bottom",overlay:o},E().createElement("i",{className:"icon-cem_problem"}))),l=this.props,c=l.opinion,s=c.list,r=c.total,p=c.pageSize,u=c.pageIndex,d=c.modalVisible,h=c.step,f=c.filterModel,m=f.filter,g=f.aspect,o=c.dateRange,f=c.analyseAspectShow,c=l.tableLoading,l=localStorage.getItem("cem-projectId");return E().createElement("div",{className:"opinion-list-wrapper"},E().createElement(S.Z,{title:i}),E().createElement(C.Loading,{loading:c,text:"拼命加载中"},E().createElement(k.Z,{columns:this.state.columns,data:s,onSortChange:this.handleSort,total:r,pagePosition:"down",pageSize:p,currentPage:u,onPage:this.switchPage,maxHeight:a})),E().createElement(C.Dialog,{title:"创建典型意见任务",size:"large",visible:d,onCancel:this.resetModal,lockScroll:!0,customClass:"opinion-dialog-wrapper"},E().createElement(C.Dialog.Body,null,1===h?E().createElement(A.Z,{ref:function(e){return t.filterCondition=e},value:m?(e=m,n=[],Object.keys(e).forEach(function(t){"connConfig"===t||"tag"===t?e[t]&&e[t].forEach(function(e){n.push(v()({},e,{special:t}))}):"source"===t||"escore"===t||"messageType"===t||"content"===t?e[t]&&n.push({id:"content"!==t?t:"KEY_WORD",special:t,values:"content"!==t?e[t]:e[t][0].contain}):"connections"===t&&e[t]&&n.push({id:t,special:t,values:e[t]})}),n):[],type:"MARKETING",filter:["CONN_CONFIG","SOURCE","TAG","EXPAND_TOPIC"],filterConfig:[],onFilterChange:this.onFilterConditionChange,noBottom:!0,hideAdvanced:!0}):E().createElement(y.Fragment,null,E().createElement("div",{className:"form-item"},E().createElement("label",null,"筛选时间"),E().createElement(N,{type:"rangeCalender",value:o,getDateRange:this.getFilterDateRange,disabledDate:function(e){return e.isAfter(w()())}})),E().createElement("div",{className:"form-item"},E().createElement("label",null,"分析指标"),f?E().createElement(O,{ref:function(e){return t.analyseAspect=e},limit:null,value:g,model:["PRODUCT","MARKETING","SERVICE"],projectId:l,onChange:this.handleAnalyseAspectChange}):E().createElement("div",{className:"addBtn",onClick:this.showAnalyseAspect},"分析指标 +")))),E().createElement(C.Dialog.Footer,{className:"dialog-footer"},E().createElement(C.Button,{onClick:this.cancelModal},1===h?"取消":"上一步"),E().createElement(C.Button,{type:"primary",onClick:this.confirmModal},1===h?"下一步":"确定"))))},e}(y.PureComponent);const m=(0,t.connect)(function(e){return{opinion:e.opinion,tableLoading:e.loading.effects["opinion/fetchOpinionList"]}})(n)},97911:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(85354),o=n.n(t),t=n(67294),s=n.n(t),r=n(85151),l=n(5133),a=function(a){function e(){for(var i,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(i=a.call.apply(a,[this].concat(t))||this).handleCheckedAll=function(e){var t=i.props,n=t.ITEMS,a=t.changeState,t=t.checkedList,o=[];e.target.checked?(t.map(function(e){return o.push(e)}),n.filter(function(e){return o.indexOf(e)<0}).map(function(e){return o.push(e)})):t.filter(function(e){return n.indexOf(e)<0}).map(function(e){return o.push(e)}),a&&a(o)},i.handleChange=function(e){var t=i.props,n=t.changeState,a=t.checkedList,t=t.limit;Array.prototype.remove=function(e){e=this.indexOf(e);-1<e&&this.splice(e,1)},t?-1===a.indexOf(e)?a.length<t?a.push(e):l.Z.warning("当前条件下最多支持选择"+t+"个分析指标"):a.remove(e):-1===a.indexOf(e)?a.push(e):a.remove(e),n&&n(a)},i}return o()(e,a),e.prototype.render=function(){var t=this,e=this.props,n=e.ITEMS,a=e.categoryTitle,o=e.titles,i=e.checkedList,l=e.type,c=(e.limit,i.filter(function(e){return 0<=n.indexOf(e)})),e=!!c.length&&c.length===n.length,c=!!c.length&&c.length!==n.length;return s().createElement("div",{className:"vertical"===l?"new-checkbox-panel new-checkbox-panel-vertical":"new-checkbox-panel"},s().createElement(r.Jg,{checked:e,indeterminate:c,onChange:this.handleCheckedAll},a||"全选"),s().createElement(r.CS,{checkedList:i,onChange:function(e){return t.handleChange(e)}},n&&n.map(function(e,t){return s().createElement(r.Jg,{key:t,value:e},o?o[e]:e)})))},e}(t.Component)},24473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(67154),u=n.n(a),o=n(37316),d=n.n(o),t=n(85354),i=n.n(t),a=n(67294),h=n.n(a),o=n(45697),t=n.n(o),o=n(94184),f=n.n(o),a=function(e){function t(){return e.apply(this,arguments)||this}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.children,a=e.className,o=e.block,i=e.indeterminate,l=e.value,c=e.checked,s=e.defaultChecked,r=e.onChange,p=e.disabled,e=d()(e,["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"]),r={value:l,checked:c,defaultChecked:s,onChange:r,disabled:p},a=f()(t,((p={})[t+"-disabled"]=r.disabled,p[t+"-block"]=o,p[t+"-indeterminate"]=i,p),a);return h().createElement("label",u()({tabIndex:r.disabled?-1:0,className:a},e),h().createElement("input",u()({type:"checkbox",className:t+"-input"},r)),h().createElement("span",{className:t+"-status"}),n&&h().createElement("span",{className:t+"-text",title:n},n))},t}(a.Component);a.propTypes={prefixCls:t().string,value:t().oneOfType([t().string,t().number]),checked:t().bool,defaultChecked:t().bool,onChange:t().func,indeterminate:t().bool,disabled:t().bool,block:t().bool},a.defaultProps={prefixCls:"wt-checkbox"};const l=a},85151:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>a.Z,CS:()=>c});var a=n(24473),o=n(67154),s=n.n(o),i=n(37316),r=n.n(i),t=n(85354),l=n.n(t),o=n(67294),p=n.n(o),i=n(45697),t=n.n(i),i=n(94184),u=n.n(i),i=function(o){function e(){for(var n,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=o.call.apply(o,[this].concat(t))||this).handleCheckBoxChange=function(e){var t=n.props.onChange;t&&t(e)},n}return l()(e,o),e.prototype.render=function(){var o=this,e=this.props,t=e.prefixCls,n=e.children,a=e.className,i=(e.onChange,e.values),l=e.checkedList,c=e.block,e=r()(e,["prefixCls","children","className","onChange","values","checkedList","block"]),n=i?i.map(function(e,t){var n=0!==l.length&&-1!==l.indexOf(e);return p().createElement(Checkbox,{key:t,value:e,checked:n,onChange:function(e){return o.handleCheckBoxChange(e)},block:c},e)}):p().Children.map(n,function(e,t){if(e){var n=e.props,a=n.value,a=0!==l.length&&-1!==l.indexOf(a);return p().cloneElement(e,{checked:a,key:t,block:n.block||c,onChange:function(){var e=n.value;o.handleCheckBoxChange(e)}})}});return p().createElement("div",s()({className:u()(t,a)},e),n)},e}(o.Component);i.defaultProps={prefixCls:"wt-checkbox-group"},i.propTypes={onChange:t().func,values:t().array,block:t().bool};const c=i;var d=function(t){var n={};return Object.keys(t).forEach(function(e){/^data\-.+$/.test(e)&&(n[e]=t[e])}),n},o=function(e){function t(){return e.apply(this,arguments)||this}return l()(t,e),t.prototype.render=function(){var e=this.props,t=d(e);return p().createElement("label",{className:e.className,title:e.children},p().createElement("div",{className:"checkbox"},p().createElement("input",s()({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),p().createElement("div",{className:"checkbox-body"}))," ",p().createElement("span",null,e.children))},t}(o.Component);o.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}}}]);