"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1218],{21218:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(63366),r=n(97326),o=n(94578),c=n(67294),l=n(92360),i=n(29383),s=n(12518),u=n(43036),m=n(61193),p=n(61409),h=n(35239),d=n(39432),E=n(30381),g=n.n(E),C=n(55609),f=n(64396),N=["loading"],v=f.Z.projectAll,y=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={columns:[{label:"",prop:"paddingLeft",width:50},{label:"\u9879\u76ee\u540d\u79f0",prop:"name",render:function(e){return c.createElement("span",{className:"tableLink",onClick:function(t){return n.routerChange("/account/project/preview",e.name,e.id)}},e.name)}},{label:"\u6d88\u606f\u6570",prop:"messageTotal",renderHeader:function(){return c.createElement("span",null,"\u6d88\u606f\u6570",c.createElement(u.Z,{overlay:function(){return function(){var e=g()().subtract(1,"days").format("YYYY-MM-DD");return c.createElement(c.Fragment,null,c.createElement("div",null,"\u8fd9\u91cc\u4e3a\u4f60\u5c55\u793a\u7684\u6570\u636e\u662f\u6574\u4e2a\u9879\u76ee\u4e2d\u5168\u90e8\u6d88\u606f\uff0c\u4f46\u4e0d\u5305\u62ec \u88ab\u8bbe\u4e3a\u65e0\u6548\u6570\u636e\u4e14\u4e0d\u5c55\u793a\u7684\u6d88\u606f\u3002"),c.createElement("div",null,"\u8ba1\u7b97\u622a\u6b62\u65e5\u671f\u4e3a\u6628\u5929\uff08",e," 23\uff1a59\uff1a50\uff09"))}()},overlayClassName:"project-list-popover",placement:"bottom"},c.createElement("i",{className:"cem-icon icon-cem_problem",style:{marginLeft:"4px"}})))},render:function(e){return c.createElement("span",null,d.ZP.formatNumber(e.messageTotal)||0)}}],handle:{label:"\u64cd\u4f5c",prop:"operate",render:function(e,t,a){return c.createElement("div",{className:"operations topic-list-td"},m.Z.hasAuthority("PROJECT_EDIT")&&c.createElement("div",{className:"operation_columns",onClick:n.projectLinkManage.bind((0,r.Z)(n),e.id,e.name)},c.createElement("span",null,"\u6570\u636e\u94fe\u63a5")),c.createElement("div",{className:"operation_columns",onClick:function(t){return n.routerChange("/account/project/linkTopic",e.name,e.id)}},c.createElement("span",null,"\u4e3b\u9898")),c.createElement("div",{className:"operation_columns",onClick:function(t){return n.routerChange("/account/project/tag",e.name,e.id)}},c.createElement("span",null,"\u6807\u7b7e")),c.createElement("div",{className:"operation_columns",onClick:function(t){return n.routerChange("/account/project/messageRule",e.name,e.id)}},c.createElement("span",null,"\u6d88\u606f\u5904\u7406\u89c4\u5219")),c.createElement("div",{className:"operation_columns",onClick:function(t){return n.routerChange("/account/project/uselessMsg/smart",e.name,e.id)}},c.createElement("span",null,"\u65e0\u6548\u6d88\u606f")),c.createElement("div",{className:"operation_columns",onClick:function(t){return n.routerChange("/account/project/uselessWord",e.name,e.id)}},c.createElement("span",null,"\u65e0\u6548\u8bcd\u7ba1\u7406")),m.Z.hasAuthority("ASPECT_TREE_SETTING")&&c.createElement("div",{className:"operation_columns",onClick:function(t){return n.routerChange("/account/project/aspectSystem/global",e.name,e.id)}},c.createElement("span",null,"\u6307\u6807\u4f53\u7cfb")),m.Z.hasAuthority("WARNING_MANAGE")&&c.createElement("div",{className:"operation_columns",onClick:function(t){return n.routerChange("/account/project/warning/overview",e.name,e.id)}},c.createElement("span",null,"\u9884\u8b66\u7ba1\u7406")))}},hasPush:!1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){(0,this.props.dispatch)({type:v+"/getProjectList"}),this.checkAuthority(),localStorage.connection_filter="",localStorage.storage_columns&&localStorage.storage_columns.length>0&&(JSON.parse(localStorage.storage_columns).connect_list="")},n.routerChange=function(e,t,n){h.t.set(h.V.backProjectConfig,{name:t,id:n}),p.mW.push(e)},n.checkAuthority=function(){var e=this.state,t=e.hasPush,n=e.columns,a=e.handle;t||!m.Z.hasAuthority("PROJECT_EDIT")&&!m.Z.hasAuthority("PROJECT_DELETE")||(n.push(a),this.setState({columns:n,hasPush:!0}))},n.projectLinkManage=function(e,t){this.props.project.title;h.t.set(h.V.backProjectConfig,{name:t,id:e}),h.t.set(h.V.leaveRouter,this.props.location?this.props.location:"","session"),p.mW.push({pathname:"/account/project"+(m.Z.hasAuthority("COMMENT")||m.Z.hasAuthority("PRICE")?"/preview":m.Z.hasAuthority("CONNECTION_QUE_ANS")?"/que_ans":m.Z.hasAuthority("CONNECTION_BBS")?"/bbs":m.Z.hasAuthority("CONNECTION_SELF")?"/self":m.Z.hasAuthority("CONNECTION_SOCIAL")?"/social":m.Z.hasAuthority("CONNECTION_NEWS")?"/news":m.Z.hasAuthority("CONNECTION_COMPLAINT")?"/complaint":m.Z.hasAuthority("CONNECTION_VIDEO")?"/video":""),state:{name:t,title:[{title:"\u6240\u6709\u9879\u76ee",url:"/account/project"}]}})},n.render=function(){var e=this.state.columns,t=this.props,n=t.project,a=n.data,r=n.title,o=t.loading,u=document.documentElement.clientHeight-46-48-24;return c.createElement("div",{className:"flex-col"},c.createElement("div",{className:"flex-other container common-wrapper"},c.createElement(s.Z,{title:r}),c.createElement(l.Loading,{loading:o,text:"\u62fc\u547d\u52a0\u8f7d\u4e2d"},c.createElement("div",{className:"common-padding-12"},c.createElement("div",{style:{minHeight:u,backgroundColor:"#fff"}},c.createElement(i.Z,{columns:e,data:a||[],total:a.length}))))))},t}(c.Component);const _=(0,C.connect)((function(e){var t=e.loading;return{project:(0,a.Z)(e,N)[v],loading:t.effects[v+"/getProjectList"]}}))(y)},12518:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),r=n(67294),o=n(45697),c=n.n(o),l=n(61409),i=n(92360),s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props.title;e!==n.length-1&&l.mW.go(e-n.length+1)},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.rightContent;return r.createElement("div",{className:"secondary-header"},n instanceof Array?r.createElement(i.Breadcrumb,{className:"breadcrumb-style",separator:""},n.map((function(t,n){return r.createElement(i.Breadcrumb.Item,{key:n},r.createElement("span",{onClick:function(){return e._handleBreadcrumbClick(n)}},t))}))):r.createElement("div",{className:"normal-title"},n),a&&a)},t}(r.Component);s.propTypes={title:c().oneOfType([c().string,c().array]).isRequired,rightContent:c().node};const u=s}}]);