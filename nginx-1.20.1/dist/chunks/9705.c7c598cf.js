"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9705],{78500:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(63366),r=n(87462),c=n(94578),o=n(67294),i=n(61918),s=n(37841),p=n(43036),l=n(61409),u=n(92360),d=n(35535),h=n(1145),m={"\u5168\u90e8":"ALL","\u4e91\u542c":"YT","\u5f53\u524d\u9879\u76ee":"CURRENT"},g=Object.keys(m).map((function(e){return{key:e,value:m[e]}}));const f=function(e){var t=e.drawerVisible,n=e.spuName,a=e.spuId,r=e.loading,c=e.name,m=e.onFilterChange,f=e.type,y=e.entryList,b=e.total,v=e.pageIndex,C=e.pageSize,I=e.onDelete,_=e.onPageChange,E=e.onPageSizeChange,S=o.useState("ALL"),w=S[0],N=S[1],P=o.useState(void 0),L=P[0],j=P[1],k=o.useState(!1),z=k[0],Z=k[1],D=o.useState(""),V=D[0],O=D[1],q=o.useState(""),T=q[0],x=q[1];return o.useEffect((function(){L&&t&&L.wrappedInstance.show({spuName:n,spuId:a,type:f})}),[L,t]),o.createElement("div",{className:"project_base_spu"},o.createElement("div",{className:"yt_product_setting_subscribe_base_list_wrapper"},o.createElement("div",{className:"top_zone"},o.createElement("div",{className:"left_zone"},o.createElement(i.Z,{onSearch:function(e){return m({name:e})},onClear:function(e){return m({name:e})},placeholder:"\u641c\u7d22\u8bcd\u6761",defValue:c,style:{width:168}}),o.createElement(s.Z,{options:g,activeKey:w,onTabClick:function(e){N(e),m({tabType:e})}})),o.createElement("div",{className:"right_zone"},o.createElement(p.Z,{overlay:o.createElement("div",null,"\u5173\u4e8e\u8bcd\u6761\u5e93\uff0c",o.createElement(l.rU,{className:"yt-feedback-read-more",to:"https://www.yuque.com/docs/share/b6548b05-b10c-4c4a-a55c-be008b5672fa?# \u300a\u884c\u4e1a\u8bcd\u6761\u7ed3\u6784\u529f\u80fd\u8bf4\u660e\u300b",target:"_blank"},"\u4e86\u89e3\u66f4\u591a")),placement:"top"},o.createElement("i",{className:"icon-cem_file1",style:{marginRight:10,fontSize:14,color:"#979797"}})),o.createElement(u.Button,{type:"primary",onClick:function(){L.wrappedInstance.show({spuId:a,type:f,spuName:n})}},"\u7533\u8bf7"+f+"\u8bcd\u6761"))),f&&o.createElement(h.Z,{loading:r,data:y,total:b,pageIndex:v,pageSize:C,onPageChange:_,onPageSizeChange:E,onEdit:function(e,t){L&&L.wrappedInstance.show({id:e.id,copy:"copy"===t,type:f,spuId:a,spuName:n})},onDelete:function(){I(T),Z(!1)},onClickDelete:function(e){Z(!0),O(e.name),x(e.id)},entryVisible:z,entryName:V,onCancel:function(){Z(!1),O(""),x("")},type:f}),o.createElement(d.Z,{ref:j,type:f})))};var y=n(35239),b=n(55609),v=n(64396),C=n(55815),I=["loading"],_=v.Z.product.setting.public,E=v.Z.product.setting.base.sku,S=function(e){var t=e.title,n=e.url;return[{title:y.t.get(y.V.backProjectConfig).name,url:"/account/project/preview"},{title:"\u77e5\u8bc6\u5e93",url:"/account/project/base"},{title:t,url:n}]},w=function(e){function t(t){var n;(n=e.call(this,t)||this)._handleOnFilterChange=function(e){void 0!==e.name?n.props.fetchList({name:e.name,pageIndex:1}):e.tabType&&n.props.fetchList({projectIds:"ALL"===e.tabType?["yt",y.t.get(y.V.curProject).id]:"YT"===e.tabType?["yt"]:[y.t.get(y.V.curProject).id],name:n.props.name,pageIndex:1})},n._handleOnPageChange=function(e){n.props.fetchList({pageIndex:e,name:n.props.name})},n._handleOnPageSizeChange=function(e){n.props.fetchList({pageIndex:1,pageSize:e,name:n.props.name})},n._handleOnDelete=function(e){n.props.fetchDelete({ids:[e]})};var a=t.location,r=a.state||a.query||{},c=r.spuName;r.name;return n.state={spuName:c},n.event={onFilterChange:n._handleOnFilterChange,onPageChange:n._handleOnPageChange,onPageSizeChange:n._handleOnPageSizeChange,onDelete:n._handleOnDelete},t.save({drawerVisible:a.query&&a.query.drawerVisible,spuId:a.state&&a.state.spuId||a.query&&a.query.spuId}),t.titleChange([{title:"\u77e5\u8bc6\u5e93",url:"/account/project/base"},{title:"\u300c"+c+"\u300d\u7684SKU\u77e5\u8bc6",state:{type:""}}]),n}(0,c.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.location;this.props.fetchList({projectId:y.t.get(y.V.curProject).id,type:"SKU",projectIds:["yt",y.t.get(y.V.curProject).id],spuId:e.state&&e.state.spuId||e.query&&e.query.spuId})},n.componentWillUnmount=function(){this.props.clean()},n.render=function(){return o.createElement("div",{style:{height:"100%"}},o.createElement(C.Z,{title:S({title:"\u300c"+this.state.spuName+"\u300d\u7684SKU\u77e5\u8bc6"})}),o.createElement(f,(0,r.Z)({},this.props,this.state,this.event)))},t}(o.PureComponent);const N=(0,b.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,I);return(0,r.Z)({},n[E],{loading:t.effects[E+"/fetchList"]||!1})}),(function(e){return{save:function(t){return e({type:E+"/save",payload:t})},clean:function(t){return e({type:E+"/clean",payload:t})},fetchList:function(t){return e({type:E+"/fetchList",payload:t})},fetchDelete:function(t){return e({type:E+"/fetchDelete",payload:t})},titleChange:function(t){return e({type:_+"/titleChange",payload:t})}}}))(w)}}]);