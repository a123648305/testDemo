(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9729],{79729:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});function l(e){return e.map(function(e){return"FREE_EXPLORE_MSG_COMMENT"===e?{label:"电商评论",value:"FREE_EXPLORE_MSG_COMMENT"}:"FREE_EXPLORE_MSG_SERVICE"===e?{label:"客服会话",value:"FREE_EXPLORE_MSG_SERVICE"}:{label:"调查问卷",value:"FREE_EXPLORE_MSG_QUESTIONAIRE"}})}var n=a(37316),r=a.n(n),c=a(67154),o=a.n(c),i=(a(75314),a(11187)),s=a(85354),u=a.n(s),t=a(67294),d=a.n(t),n=a(55609),m=a(61409),p=a(35239),f=(a(30467),a(55673)),h=(a(58136),a(5789)),E=(a(89626),a(70302)),v=(a(89858),a(51024)),_=(a(35797),a(64749)),g=a(8201),y=a(50976),S=a(98191),c=a(45697),s=a.n(c),N=a(89744),c=function(e){var t=e.title,a=e.loading,n=e.data,e=d().useState(void 0),l=e[0],r=e[1];return d().useEffect(function(){var e;l&&(e=(0,N.R)(n,t),l.clear(),l.setOption(e))},[n,l]),d().createElement(g.Z,{data:n,className:"yt_explore_pie_line_chart_wrapper",loading:a,renderTitle:d().createElement(S.Z,{title:t,data:n})},d().createElement(y.Z,{theme:"yunting_explore_color",className:"yt_echarts_style",option:{},opts:{devicePixelRatio:2},style:{width:"100%",height:"100%"},onChartReady:function(e){return r(e)}}))};const D=c;c.propTypes={title:s().string,loading:s().bool,data:s().oneOfType([s().string,s().object]),onClick:s().func};a(14574);var C=a(56590),k=a(92360),s=a(64396),I=a(43036),R=a(39432),F=s.Z.explore.savaFilter,a=function(a){function e(e){var t=a.call(this,e)||this;return t.handleDeleteClick=function(e){(0,t.props.save)({modalShow:!0,target:e})},t.state={},t._event={},t}u()(e,a);var t=e.prototype;return t.componentDidMount=function(){(0,this.props.save)({projectId:p.t.get(p.V.curProject).id}),this.props.fetchSaveFilter()},t.render=function(){var n=this,e=this.props,t=e.filterData,a=e.save,l=e.modalShow,r=e.deleteUrl,e=e.target;return d().createElement("div",{className:"filter_list"},d().createElement("div",{className:"filter_list_header"},d().createElement("span",{className:"filter_list_header_title"},"保存的筛选器"),d().createElement("span",{className:"tip"},d().createElement(I.Z,{overlay:"最多可保存50个筛选器",placement:"top",mouseEnterDelay:.2},d().createElement("i",{className:"icon-cem_file1",style:{marginLeft:4,fontSize:14,color:"#979797",verticalAlign:"unset"}})))),t&&t.result&&0<t.result.length?d().createElement(C.default,{className:"filter_tab",itemLayout:"vertical",size:"small",pagination:{onChange:function(e){var t=n.props,a=t.save,t=t.fetchSaveFilter;a({pageIndex:e}),t()},pageSize:10,size:"small",total:t&&t.count,hideOnSinglePage:!0},dataSource:t&&t.result,renderItem:function(e){return d().createElement(C.default.Item,{key:e.id},d().createElement("span",{className:"filter_list_content"},d().createElement(m.rU,{to:"/explore/free/result?filterId="+e.id+"&query="+encodeURI(encodeURI(e.selected.replace(/#/g,"***"))),target:"_blank"},e.name)),d().createElement("span",{className:"filter_list_date"},(0,R.qS)(e.createdAt.split("T")[0])),d().createElement("span",{className:"filter_list_delete",onClick:function(){return n.handleDeleteClick(e)}},d().createElement("i",{className:"icon-cem_trash"})))}}):d().createElement("div",{className:"empty-block"},"无保存的筛选器"),d().createElement(k.Dialog,{className:"data_url_delete_dialog",title:"删除",size:"tiny",visible:l,onCancel:function(){return a({modalShow:!1})},lockScroll:!1},d().createElement(k.Dialog.Body,null,d().createElement("div",{className:"dialog-content"},"是否删除“",e&&e.name,"”筛选器")),d().createElement(k.Dialog.Footer,{className:"dialog-footer"},d().createElement(k.Button,{onClick:function(){return a({modalShow:!1})}},"取消"),d().createElement(k.Button,{type:"primary",onClick:r},"确定"))))},e}(t.Component);const b=(0,n.connect)(function(e){var t=e.loading,e=r()(e,["loading"]);return o()({},e[F],{loading:t.effects[F+"/fetchSaveFilter"]||!1})},function(t){return{save:function(e){return t({type:F+"/save",payload:e})},clean:function(){return t({type:F+"/clean"})},fetchSaveFilter:function(e){return t({type:F+"/fetchSaveFilter",payload:e})},deleteUrl:function(e){return t({type:F+"/deleteUrl",payload:e})}}})(a);var w=s.Z.explore.savaResult,a=function(a){function e(e){var t=a.call(this,e)||this;return t.handleDeleteClick=function(e){(0,t.props.save)({modalShow:!0,target:e})},t.state={},t._event={},t}u()(e,a);var t=e.prototype;return t.componentDidMount=function(){(0,this.props.save)({projectId:p.t.get(p.V.curProject).id}),this.props.fetchSaveFilter()},t.render=function(){var n=this,e=this.props,t=e.filterData,a=e.save,l=e.modalShow,r=e.deleteUrl,e=e.target;return d().createElement("div",{className:"filter_list"},d().createElement("div",{className:"filter_list_header"},d().createElement("span",{className:"filter_list_header_title"},"保存的探索结果"),d().createElement("span",{className:"tip"},d().createElement(I.Z,{overlay:"最多可保存50个探索结果",placement:"top",mouseEnterDelay:.2},d().createElement("i",{className:"icon-cem_file1",style:{marginLeft:4,fontSize:14,color:"#979797",verticalAlign:"unset"}})))),t&&t.result&&0<t.result.length?d().createElement(C.default,{className:"result_tab",itemLayout:"vertical",size:"small",pagination:{onChange:function(e){var t=n.props,a=t.save,t=t.fetchSaveFilter;a({pageIndex:e-1}),t()},pageSize:10,size:"small",total:t&&t.count,hideOnSinglePage:!0},dataSource:t&&t.result,renderItem:function(e){return d().createElement(C.default.Item,{key:e.id},d().createElement("span",{className:"filter_list_content "+("DONE"===e.status?"":"notClick")+" "},d().createElement(m.rU,{to:"/explore/free/result?recordId="+e.id,target:"_blank"},e.name)),d().createElement("span",{className:"filter_list_date"},"DONE"===e.status?(0,R.qS)(e.createdAt.split("T")[0]):"生成中"),d().createElement("span",{className:"filter_list_delete",onClick:function(){return n.handleDeleteClick(e)}},d().createElement("i",{className:"icon-cem_trash"})))}}):d().createElement("div",{className:"empty-block"},"无保存探索结果"),d().createElement(k.Dialog,{className:"data_url_delete_dialog",title:"删除",size:"tiny",visible:l,onCancel:function(){return a({modalShow:!1})},lockScroll:!1},d().createElement(k.Dialog.Body,null,d().createElement("div",{className:"dialog-content"},"是否删除“",e&&e.name,"”探索结果")),d().createElement(k.Dialog.Footer,{className:"dialog-footer"},d().createElement(k.Button,{onClick:function(){return a({modalShow:!1})}},"取消"),d().createElement(k.Button,{type:"primary",onClick:r},"确定"))))},e}(t.Component);const O=(0,n.connect)(function(e){var t=e.loading,e=r()(e,["loading"]);return o()({},e[w],{loading:t.effects[w+"/fetchSaveFilter"]||!1})},function(t){return{save:function(e){return t({type:w+"/save",payload:e})},clean:function(){return t({type:w+"/clean"})},fetchSaveFilter:function(e){return t({type:w+"/fetchSaveFilter",payload:e})},deleteUrl:function(e){return t({type:w+"/deleteUrl",payload:e})}}})(a);const x=function(e){var t=d().useState(void 0),a=t[0],n=t[1];return d().createElement("div",{className:"explore_wrap"},d().createElement("div",{className:"explore_search_wrapper"},d().createElement(v.default.Group,{compact:!0},e.touchData&&d().createElement(_.default,{options:l(e.touchData),defaultValue:l(e.touchData)[0].value,onChange:e.handleChange,size:"large"}),d().createElement(v.default,{style:{width:"50%"},placeholder:"请输入一个关键词开始探索",onPressEnter:function(){return e.handleSearch(a)},onChange:function(e){return n(e.target.value)},size:"large",suffix:d().createElement("span",{onClick:function(){return e.handleSearch(a)}},d().createElement("i",{className:"icon-cem_small-search",style:{color:"#8c8c8c"}}))}))),d().createElement(D,{title:"近7天数据概况",loading:!1,data:e.pieLineData}),d().createElement("div",{className:"site-card-wrapper"},d().createElement(f.default,{gutter:16},d().createElement(h.default,{span:12},d().createElement(E.Z,{bordered:!1},d().createElement(b,null))),d().createElement(h.default,{span:12},d().createElement(E.Z,{bordered:!1},d().createElement(O,null))))))};var z=s.Z.freedom,t=function(t){function e(e){var a=t.call(this,e)||this;return a._handleSearch=function(e){var t;e?(t=a.state.selectValue,m.mW.push({pathname:"/explore/free/result",state:{searchValue:e,selectValue:t}})):i.default.warning("请输入一个关键词!")},a._handleChange=function(e){a.setState({selectValue:e})},a.state={selectValue:e.touchData&&e.touchData[0]},a._event={handleSearch:a._handleSearch,handleChange:a._handleChange},a}u()(e,t);var a=e.prototype;return a.componentDidMount=function(){var e=this,t=p.t.get(p.V.curProject).id,a=this.props,n=a.fetch7DaysAllData,a=a.findTouchSpotByAccountId;n({projectId:t}),a().then(function(){e.setState({selectValue:e.props.touchData&&e.props.touchData[0]})})},a.render=function(){return d().createElement(x,o()({},this.state,this.props,this._event))},e}(t.Component);const A=(0,n.connect)(function(e){var t=e.loading,e=r()(e,["loading"]);return o()({},e[z],{loading:t.effects[z+"/fetch7DaysAllData"]||!1})},function(t){return{save:function(e){return t({type:z+"/save",payload:e})},clean:function(){return t({type:z+"/clean"})},fetch7DaysAllData:function(e){return t({type:z+"/fetch7DaysAllData",payload:e})},findTouchSpotByAccountId:function(e){return t({type:z+"/findTouchSpotByAccountId",payload:e})}}})(t)}}]);