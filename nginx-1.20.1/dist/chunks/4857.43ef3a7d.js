"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[4857],{34857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>xe});var n=a(63366),o=a(87462),i=a(94578),r=a(67294),l=a(64396),s=a(55609),c=a(35239),u=a(87219),d=a(35103),p=a(94530),m=a(8201),f=function(e,t,a){return(0,m.P)(e)?[{name:t,count:e.v1,format:t.includes("\u7387")?"percent":"myriad"},{},{},{name:a,count:e.v2,format:t.includes("\u5e26\u661f")?null:"myriad"}]:e},h={width:"100%",height:"160px"},v=function(e){return r.createElement("div",{style:{maxWidth:228}},e)};const y=function(e){var t=e.fetchingCardData,a=e.cardData,n=e.onMsgClick;return r.createElement("div",{className:"yt_comment_overview_card_wrapper"},r.createElement(p.Z,{tip:function(){return v("\u8bc4\u8bba\u5206\u4e3a\u6709\u6548\u548c\u65e0\u6548\u8bc4\u8bba\uff0c\u65e0\u6548\u8bc4\u8bba\u662f\u6307\u8bc4\u8bba\u5185\u5bb9\u4e3a\u201c\u8be5\u7528\u6237\u672a\u8bc4\u8bba\uff01\u201d\u7b49\u7b49\u7684\u8bc4\u8bba\u3002")},loading:t,style:h,data:f(null==a?void 0:a.allComment,"\u5168\u90e8\u8bc4\u8bba\u6570\u91cf","\u6709\u6548\u8bc4\u8bba\u6570\u91cf"),onMsgClick:function(e){return n(e,e[0].name)}}),r.createElement(p.Z,{tip:function(){return v("\u5e73\u5747\u661f\u7ea7\u662f\u5bf9\u6240\u6709\u5e26\u661f\u7ea7\u7684\u8bc4\u8bba\u505a\u661f\u7ea7\u5e73\u5747\u5f97\u51fa\u3002")},loading:t,style:h,data:f(null==a?void 0:a.withScoreComment,"\u5e26\u661f\u8bc4\u8bba\u6570\u91cf","\u8bc4\u8bba\u5e73\u5747\u661f\u7ea7"),onMsgClick:function(e){return n(e,e[0].name)}}),r.createElement(p.Z,{tip:function(){return v("\u8bc4\u8bba\u597d\u8bc4\u7387 = \u6b63\u9762\u6709\u6548\u8bc4\u8bba\u6570\u91cf \xf7 \u6709\u6548\u8bc4\u8bba\u6570\u91cf\u3002\u8bc4\u8bba\u53ea\u8ba1\u7b97\u6d88\u606f\u7c7b\u578b\u4e3a\u8bc4\u8bba\u548c\u56de\u590d\uff0c\u4e0d\u7edf\u8ba1\u5b98\u65b9\u56de\u590d\u3002")},loading:t,style:h,data:f(null==a?void 0:a.positiveComment,"\u8bc4\u8bba\u597d\u8bc4\u7387","\u6709\u6548\u8bc4\u8bba\u6570\u91cf"),onMsgClick:function(e){return n(e,e[0].name)}}),r.createElement(p.Z,{tip:function(){return v("\u8bc4\u8bba\u5dee\u8bc4\u7387 = \u8d1f\u9762\u6709\u6548\u8bc4\u8bba\u6570\u91cf \xf7 \u6709\u6548\u8bc4\u8bba\u6570\u91cf\u3002\u8bc4\u8bba\u53ea\u8ba1\u7b97\u6d88\u606f\u7c7b\u578b\u4e3a\u8bc4\u8bba\u548c\u56de\u590d\uff0c\u4e0d\u7edf\u8ba1\u5b98\u65b9\u56de\u590d\u3002")},loading:t,style:h,data:f(null==a?void 0:a.negativeComment,"\u8bc4\u8bba\u5dee\u8bc4\u7387","\u6709\u6548\u8bc4\u8bba\u6570\u91cf"),onMsgClick:function(e){return n(e,e[0].name)}}))};a(43378);var g=a(62443),x=a(98191),b=a(50361),C=a.n(b),E=a(39432),T=a(87300),w=a(70715),_=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).chartRef=void 0,t.source=void 0,t.lineSource=void 0,t.objNames=void 0,t.legendSelected=void 0,t.getChartRef=function(e){return t.chartRef=e},t.setValue=function(e,a){var n=e.map((function(e){return e.key+"\u661f"})),o=e.reduce((function(e,t){return e+t.total}),0),i=n.reduce((function(a,n){var i=e.find((function(e){return parseInt(e.key)===parseInt(n)}));return t.legendSelected?t.legendSelected[n]&&a.push([i.key+"\u661f",i.total,0===o?0:i.total/o]):a.push([i.key+"\u661f",i.total,0===o?0:i.total/o]),a}),[["\u661f\u7ea7","\u6570\u91cf","\u6bd4\u4f8b"]]),r=e.find((function(e){return e.total>0})).dataList.map((function(e){return[e.time]})),l=e.reduce((function(e,t){return t.dataList.forEach((function(t){return e.find((function(e){return e[0]===t.time})).push(t.total)})),e}),[].concat(r)),s=l.reduce((function(e,t,a){var n=t.reduce((function(e,t,a){return 0!==a?e+t:e}),0);return t.forEach((function(t,o){0!==o&&(e[a][o]=0===n?0:t/n)})),e}),C()(l)),c="ratio"===a?[["\u65e5\u671f"].concat(n)].concat(s):[["\u65e5\u671f"].concat(n)].concat(l);t.objNames=n,t.lineSource="ratio"===a?l:s,t.source=[i,c]},t.getOption=function(e,a,n,o,i,r,l,s){void 0===i&&(i="DAY"),void 0===r&&(r="count");var c=.8*l/(63*(t.source[1].length-1)),u="ratio"===r;return{graphic:[{type:"group",top:24,left:20,silent:!0,children:[{type:"text",left:10,style:{text:a,font:"bolder 14px "+w.I8,fill:"#262626"}},{type:"text",left:(0,E.jD)(a)+12,style:{text:n,font:"normal 14px "+w.I8,fill:"#8C8C8C"}}]}],dataset:t.source.map((function(e){return{source:e}})),legend:{left:16,top:52,itemWidth:10,itemHeight:10,itemGap:16,icon:"circle",data:t.objNames,selected:t.legendSelected},dataZoom:[{show:c<1,bottom:16,xAxisIndex:1,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"}],xAxis:[{type:"value",gridIndex:0,show:!1},{type:"category",gridIndex:1,boundaryGap:!1,axisLabel:{formatter:function(e){return(0,E.Sn)(i,e)}},axisPointer:{type:"line",label:{show:!1}},data:e.find((function(e){return e.total>0})).dataList.map((function(e){return e.time}))}],yAxis:[{type:"category",data:t.legendSelected?t.objNames.filter((function(e){return t.legendSelected[e]})):t.objNames,gridIndex:0,axisLabel:{color:"#626262"},axisPointer:{type:"none",label:{show:!1}}},{type:"value",axisLabel:{color:"#626262",formatter:function(e){return u?Math.round(100*e)+"%":(0,E.hE)(e)}},minInterval:u?void 0:1,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}},gridIndex:1}],grid:[{left:36,right:"70%",top:90,bottom:16,containLabel:!0},{left:"40%",right:48,top:90,bottom:c<1?52:16,containLabel:!0}],tooltip:{trigger:"axis",showDelay:20,hideDelay:10,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,a,n,o){var i=o.contentSize,r=o.viewSize,l=e[0]<r[0]/2?0:-1,s=e[1]<r[1]/2?-.5:-1,c=e[0]<r[0]/2?12:-12;return[e[0]+l*i[0]+c,e[1]+s*i[1]]},formatter:function(e,o,r){if(e.length)return setTimeout((function(){if("bar"!==e[0].seriesType){var l=e[0].axisValue,c=e.map((function(e){var a=e.marker,n=e.seriesName,o=e.data,i=e.seriesIndex,r=e.dataIndex;return{name:a+' <span style="color: #8C8C8C;display: inline-block;width: 66px;">'+n+'</span> <span style="float: right;color: #262626;position: relative;">\n                '+(u?""+t.lineSource[r][i]:""+(0,E.hE)(o.value))+"&nbsp;"+(u?"("+(100*o.value).toFixed(2)+"%)":"("+(100*t.lineSource[r][i]).toFixed(2)+"%)")+"</span>",value:o.value}})),d=c.sort((function(e,t){return t.value-e.value})).map((function(e){return e.name})),p='<span span style = "font-size: 12px; color: #262626; font-weight: 400;" > '+(0,E.Sn)(i,l)+"</span>";r(o,(0,T.r)(p,d))}else{var m=e[0],f=m.marker,h=m.data;r(o,(0,T.r)(""+h[0],["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+f+"</span>"+(u?"\u6bd4\u4f8b":"\u6570\u91cf")+"</div><div style='color: #262626;margin-left: 10px;'>\n                     "+(u?(100*h[2]).toFixed(2)+"%":(0,E.hE)(h[1]))+"\n                  </div></div> "],[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){s(e,""+a+n)}}],"yt_new_tooltip_wrapper"))}}),0)}},series:[{type:"bar",barMaxWidth:24,xAxisIndex:0,yAxisIndex:0,datasetIndex:0,barGap:"43%",encode:{x:1,y:0},data:t.source[0].slice(1),label:{show:!0,position:"right",fontSize:12,color:"#626262",formatter:function(e){var t=e.data;return(0,E.uf)(t[1])+" ("+(100*t[2]).toFixed(2)+"%)"}},itemStyle:{color:function(e){var a=e.dataIndex,n=e.name;if(t.legendSelected){var o=Object.keys(t.legendSelected);return w.M9[o.indexOf(n)]}return w.M9[a]}}}].concat(t.objNames.map((function(e,r){return{type:"line",xAxisIndex:1,yAxisIndex:1,name:e,smooth:!0,showSymbol:!0,symbolSize:2,stack:1,color:w.M9[r],areaStyle:{opacity:.05},data:t.source[1].slice(1).map((function(e){return{value:e[r+1],tooltip:{trigger:"item",formatter:function(e,o,r){return setTimeout((function(){var l=e.seriesName,c=e.name,d=e.data,p=e.marker,m=e.seriesIndex,f=e.dataIndex,h="\n                    <div style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;position:relative;\">\n                      <span style='position:absolute;width:40px;height:150px;left:-40px;top:-30px;'></span>\n                      <span style='position:absolute;width:40px;height:150px;right:-40px;top:-30px;'></span>\n                    </div>\n                    <span style=\"font-size: 12px; color: #262626; font-weight: 400;\">"+(0,E.Sn)(i,c)+"</span>",v=["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+p+"</span>"+l+"</div><div style='color: #262626;margin-left: 10px;'>\n                        "+(u?t.lineSource[f][m]+" ("+(100*d.value).toFixed(2)+"%)":d.value+" ("+(100*t.lineSource[f][m]).toFixed(2)+"%)")+"\n                      </div></div>"];r(o,(0,T.r)(h,v,[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){s(e,""+a+n)}}],"yt_new_tooltip_wrapper"))}),0)}},label:{show:o,position:"top",color:"#8C8C8C",formatter:function(e){var t=e.value;return u?(100*t).toFixed(2)+"%":(0,E.uf)(t)}}}}))}})))}},t}return(0,i.Z)(t,e),t.prototype.renderChart=function(e,t,a,n,o,i,r,l){this.setValue(e,i),this.chartRef.clear(),this.chartRef.setOption(this.getOption(e,t,a,n,o,i,r,l))},t}(r.PureComponent),F=a(50976),D=a(60496),O=a(94644),N=[{title:"\u6570\u91cf",value:"count"},{title:"\u6bd4\u4f8b",value:"ratio"}],S={"5\u661f":"\u4e94\u661f","4\u661f":"\u56db\u661f","3\u661f":"\u4e09\u661f","2\u661f":"\u4e8c\u661f","1\u661f":"\u4e00\u661f","0\u661f":"\u65e0\u661f","-1\u661f":"\u65e0\u661f"},k=function(e){function t(t){var a;return(a=e.call(this,t)||this).internalId=void 0,a.chartLeaveTimeout=void 0,a.handleOnLegendChange=function(e){var t=e.selected;a.legendSelected=t,a.renderChart()},a.handleOnMoreClick=function(e){var t=a.props,n=t.title,o=t.subTitle,i=t.data;"image"===e&&a.chartRef?(0,O._v)(a.chartRef,""+n+o):"data"===e&&(0,m.P)(i)&&(0,O.aT)([a.source[0].map((function(e){return e.map((function(e){return e%1?(100*e).toFixed(2)+"%":e}))})),a.source[1].map((function(e){return e.map((function(e){return e%1?(100*e).toFixed(2)+"%":e}))}))],""+n+o)},a.state={showLabel:!1},a}(0,i.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,a=t[0],n=t[1];a.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(n.style.display="none")}),2e3)})),n&&n.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200)},a.componentDidUpdate=function(e,t){var a=e.data,n=e.countType,o=e.timeType,i=this.props,r=i.data,l=i.countType,s=i.timeType,c=t.showLabel,u=this.state.showLabel;(0,m.P)(r)&&JSON.stringify(a)!==JSON.stringify(r)&&this.renderChart(),c===u&&n===l&&o===s||this.renderChart(),!(0,m.P)(r)&&this.chartRef&&(this.chartRef=void 0)},a.renderChart=function(){var t=this.props,a=t.data,n=t.title,o=t.subTitle,i=t.timeType,r=t.countType,l=t.onMsgClick,s=this.state.showLabel;(0,m.P)(a)&&this.chartRef&&0!==a.length&&e.prototype.renderChart.call(this,a,n,o,s,i,r,this.chartRef.getWidth(),l)},a.render=function(){var e=this,t=this.props,a=t.title,n=(t.subTitle,t.loading),o=t.data,i=t.timeOptions,l=t.timeType,s=(t.fTimeType,t.countType),c=(t.fCountType,t.onChange),u=(t.onFlavorChange,this.state.showLabel);return r.createElement(m.Z,{data:o,loading:n,className:"yt_comment_overview_barline_chart_wrapper",renderTitle:r.createElement(x.Z,{title:a,data:o},r.createElement(D.Z,{options:N,activeObj:s,rightHook:!0,onChange:function(e){return c({starTrendCountType:e})}}),r.createElement(D.Z,{options:i,activeObj:l,rightHook:!0,onChange:function(e){return c({starTrendTimeType:e})}}),r.createElement(g.default,{placement:"top",content:"\u663e\u793a\u56fe\u8868\u6807\u7b7e",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-tubiaobiaoqian "+(u?"active":""),onClick:function(){e.setState({showLabel:!u})}})),r.createElement(g.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-daochu",onClick:function(){return e.handleOnMoreClick("data")}})),r.createElement(g.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e.handleOnMoreClick("image")}})))},r.createElement(F.Z,{theme:"yt_multi_color_10",option:{},style:{width:"100%",height:"100%"},onEvents:{legendselectchanged:this.handleOnLegendChange},onChartReady:function(t){return e.chartRef=t}}))},t}(_);const P=k;var R=a(97326),M={n:"\u540d\u8bcd",a:"\u5f62\u5bb9\u8bcd",un:"\u5176\u4ed6"},I=[{title:"\u6bd4\u4f8b",value:"rate"},{title:"\u6570\u91cf",value:"count"}],Z={n:"#1890FF",a:"#FF9835",un:"#60DDA9"},L=Object.values(M).reduce((function(e,t,a,n){var o="";n.slice(0,a).map((function(e){return o+=e}));var i=(0,E.jD)(o,12)+48*a,r={type:"circle",left:i,top:.5,shape:{cx:5,cy:4,r:5},style:{fill:Object.values(Z)[a]}},l={type:"text",left:i+16,style:{text:t,fill:"#8C8C8C",font:"400 12px "+w.I8}};return e.push(r,l),e}),[]),A=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).chartRef=void 0,t.barDatas=void 0,t.handleOnMsgClick=void 0,t.getChartRef=function(e){return t.chartRef=e},t}(0,i.Z)(t,e);var a=t.prototype;return a.renderChart=function(e,t,a,n,o,i,r){this.setValue(e,a),this.chartRef.clear(),this.chartRef.setOption(this.getOption(t,a,n,o,i,r))},a.setValue=function(e,t){this.barDatas={positiveData:"count"===t?e.sort((function(e,t){return t.positiveCount-e.positiveCount})).slice(0,10):e.sort((function(e,t){return t.posRate-e.posRate})).slice(0,10),negativeData:"count"===t?e.sort((function(e,t){return t.negativeCount-e.negativeCount})).slice(0,10):e.sort((function(e,t){return t.negRate-e.negRate})).slice(0,10)}},a.getOption=function(e,t,a,n,i,r){var l=this,s=a?100:60;return{title:{top:20,text:e},grid:[{x:"3%",y:s+50,bottom:40,width:"40%"},{x:"53%",y:s+50,bottom:40,width:"40%"}],tooltip:{trigger:"item",showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",formatter:function(e,t,a){var n=e.marker,o=e.name,i=(e.value,e.data),s=e.seriesName;return setTimeout((function(){var c=(0,E.hE)(i[s+"Count"]),u=(100*i[s.substring(0,3)+"Rate"]).toFixed(2);a(t,(0,T.r)("<span>\n                  <span style='vertical-align: bottom'>"+n+"</span>\n                  "+o+"\n                  <span style='position:absolute;width:30px;height:250px;top:-50px;left:-36px;'></span>\n                  <span style='position:absolute;width:30px;height:250px;top:-50px;right:-38px;'></span>\n                  <br/>\n                </span>",["<div>\n                    <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                      <div>"+("positive"===s?"\u6b63\u9762":"\u8d1f\u9762")+"</div>\n                      <div style='color: #262626;margin-left: 30px;'>\n                        "+c+" ("+u+"%)\n                      </div>\n                    </div>\n                    <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                      <div>\u603b\u6570\u91cf</div>\n                      <div style='color: #262626;margin-left: 30px;'>\n                        "+i.total+"\n                      </div>\n                    </div>\n                  </div>"],r?[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return l.handleOnMsgClick(e)}}]:void 0,"yt_new_tooltip_wrapper"))}),0)}},graphic:[{type:"group",top:60,left:"3%",silent:!0,children:a?L:[]},{type:"group",top:s,left:"3%",silent:!0,children:[{type:"text",left:15,style:{text:"TOP 10 \u70ed\u8bcd",font:"bolder 12px "+w.I8,fill:"#262626"}},{type:"text",left:100,style:{text:"(\u6765\u81ea\u6b63\u9762\u6709\u6548"+i+")",font:"normal 12px "+w.I8,fill:"#8C8C8C"}}]},{type:"group",top:s,left:"53%",silent:!0,children:[{type:"text",left:15,style:{text:"TOP 10 \u70ed\u8bcd",font:"bolder 12px "+w.I8,fill:"#262626"}},{type:"text",left:100,style:{text:"(\u6765\u81ea\u8d1f\u9762\u6709\u6548"+i+")",font:"normal 12px "+w.I8,fill:"#8C8C8C"}}]}],xAxis:["positive","negative"].map((function(e,t){return{gridIndex:t,axisTick:{show:!1,alignWithLabel:!0},nameTextStyle:{color:"#262626"},axisPointer:{type:"none",label:{show:!1}},axisLabel:{interval:0,formatter:function(t,a){var n=l.barDatas[e+"Data"][a].pos;return n?"{"+n+"|"+t+"}":t},rich:{n:{color:"#1890FF"},a:{color:"#FF9835"},un:{color:"#60DDA9"}}},data:l.barDatas[e+"Data"].map((function(e){return e.name}))}})),yAxis:["positive","negative"].map((function(e,t){return{gridIndex:t,axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1,lineStyle:{color:"#E8E8E8",type:"dashed"}}}})),series:["positive","negative"].map((function(e,a){return{type:"bar",name:e,barWidth:30,xAxisIndex:a,yAxisIndex:a,data:l.barDatas[e+"Data"].map((function(a){return(0,o.Z)({},a,{value:"count"===t?a[e+"Count"]:a[e.substring(0,3)+"Rate"],escore:["positive"===e?1:-1],label:{show:n,position:"top",color:"#262626",formatter:function(e){var a=e.value;return"count"===t?a:(100*a).toFixed(2)+"%"}}})}))}}))}},t}(r.PureComponent);var j=function(e){function t(t){var a;return(a=e.call(this,t)||this).internalId=void 0,a.chartLeaveTimeout=void 0,a.renderChart=function(){var t=a.props,n=t.data,o=t.title,i=t.enablePos,r=t.titleWords,l=t.onMsgClick,s=a.state.showLabel,c=a.state.formulaType;(0,m.P)(n)&&a.chartRef&&e.prototype.renderChart.call((0,R.Z)(a),n,o,c,i,s,r,l)},a._handleOnMoreClick=function(e){var t=a.props,n=t.data,o=t.title,i=a.state.formulaType;if(a.chartRef&&"image"===e)(0,O._v)(a.chartRef,o);else if((0,m.P)(n)&&"data"===e){var r,l,s,c;"rate"===i?(r="posRate",l="negRate",s="\u6b63\u9762\u6bd4\u4f8b",c="\u8d1f\u9762\u6bd4\u4f8b"):"count"===i&&(r="positiveCount",l="negativeCount",s="\u6b63\u9762\u6570\u91cf",c="\u8d1f\u9762\u6570\u91cf");var u=a.barDatas.positiveData.reduce((function(e,t,a){0===a&&t.pos&&e[0].push("\u8bcd\u6027");var n=t[r],o=[t.name,"rate"===i?(100*n).toFixed(2)+"%":n];return t.pos&&o.push(M[t.pos]),e.push(o),e}),[["\u70ed\u8bcd",s]]),d=a.barDatas.negativeData.reduce((function(e,t,a){0===a&&t.pos&&e[0].push("\u8bcd\u6027");var n=t[l],o=[t.name,"rate"===i?(100*n).toFixed(2)+"%":n];return t.pos&&o.push(M[t.pos]),e.push(o),e}),[["\u70ed\u8bcd",c]]);(0,O.aT)([[].concat(u,[""],d)],o)}},a._handleOnStatChange=function(e){a.setState({formulaType:e},(function(){return a.renderChart()}))},a._handleOnMouseover=function(e){var t=e.componentType,a=e.componentSubType,n=e.name,o=e.data;"series"===t&&"bar"===a&&window.postMessage({from:"product_overview_double_bar_chart",action:"mouseover",pos:o.pos,param:{name:n,componentType:t,componentSubType:"wordCloud"}})},a._handleOnMouseout=function(e){var t=e.componentType,a=e.componentSubType;"series"===t&&"bar"===a&&window.postMessage({from:"product_overview_double_bar_chart",action:"mouseout",param:{componentType:t,componentSubType:"wordCloud"}})},a.handleOnMsgClick=function(e){var t=a.props,n=t.title;(0,t.onMsgClick)(e,n)},a.state={formulaType:"count",showLabel:!0},a}(0,i.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,a=t[0],n=t[1];a.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(n.style.display="none")}),2e3)})),n&&n.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200)},a.componentDidUpdate=function(e,t){var a=e.data,n=this.props.data,o=t.showLabel,i=this.state.showLabel;JSON.stringify(a)!==JSON.stringify(n)&&this.renderChart(),o!==i&&this.renderChart(),!(0,m.P)(n)&&this.chartRef&&(this.chartRef=void 0)},a.render=function(){var e=this,t=this.state,a=t.formulaType,n=t.showLabel,o=this.props,i=o.data,l=o.title,s=o.titleOverlay,c=o.loading,u=o.enablePos,d=o.onFilterChange;return r.createElement(r.Fragment,null,r.createElement(m.Z,{className:"yt_app_comment_overview_feedback_hotword",loading:c,data:i,renderTitle:r.createElement(x.Z,{title:l,data:i,titleOverlay:s},r.createElement(D.Z,{options:I,activeObj:a,rightHook:!0,onChange:this._handleOnStatChange}),r.createElement("div",{className:"icons"},r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u8bcd\u6027\u533a\u5206",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-cixingqufen "+(u?"active":""),onClick:function(){return d({feedbackEnablePos:!u})}}))),r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u663e\u793a\u56fe\u8868\u6807\u7b7e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-tubiaobiaoqian "+(n?"active":""),onClick:function(){e.setState({showLabel:!n})}}))),r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-daochu",onClick:function(){return e._handleOnMoreClick("data")}}))),r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e._handleOnMoreClick("image")}})))))},r.createElement(F.Z,{theme:"yt_pos_neg",option:{},style:{height:"100%",width:"100%"},onChartReady:this.getChartRef,onEvents:{mouseover:this._handleOnMouseover,mouseout:this._handleOnMouseout}})))},t}(A),V=a(43036),W=a(92360),z=["#5B8FF9","#60DDA9","#F6BD15","#F08A8A","#78D3F8","#65789B","#F6903D","#028685","#7262FD","#9661BC"],q={n:"#1890FF",a:"#FF9835",un:"#60DDA9"},H={n:"\u540d\u8bcd",a:"\u5f62\u5bb9\u8bcd",un:"\u5176\u4ed6"};const U=function(e){var t=e.data,a=e.filterData,n=e.style,o=e.getRef,i=t.slice(0,a),l=r.useState(1),s=l[0],c=l[1],u=i.slice(40*(s-1),40*s);return r.createElement("div",{className:"wordlist-wrapper",style:n,ref:o},r.createElement("div",{className:"title"},"\u8bcd\u9891\u8868"),r.createElement("div",{className:"list"},u.map((function(e,t){var a,n=t+1+40*(s-1),o=e.pos?q[e.pos]:n<11?z[t%z.length]:"#8c8c8c";return r.createElement(V.Z,{key:e.name+"_"+t,placement:"top",overlay:r.createElement(r.Fragment,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:(a=o,'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+a+';"></span> '+e.name)}}),e.pos&&r.createElement("div",null,"\u8bcd\u6027\uff1a"+H[e.pos]))},r.createElement("div",{className:"item"},r.createElement("span",{className:"index",style:{background:o}},n),r.createElement("span",{className:"name"},e.name),r.createElement("span",{className:"precent"},function(e,t){return e?e/1e4<1?e:e/1e8<1?(e/1e4).toFixed(t||0)+"\u4e07":(e/1e8).toFixed(t||0)+"\u4ebf":0}(e.total)," (",(100*e.precent).toFixed(2)+"%",")")))}))),r.createElement("div",{className:"pagination"},r.createElement(W.Pagination,{layout:"prev, pager, next",small:!0,total:i.length,pageSize:40,currentPage:s,onCurrentChange:function(e){return c(e)}})))};var Y={n:"#1890FF",a:"#FF9835",un:"#60DDA9",pos:"#60DDA9",neu:"#1890ff",neg:"#F08A8A"},B={n:"\u540d\u8bcd",a:"\u5f62\u5bb9\u8bcd",un:"\u5176\u4ed6"},G=[{type:"image",title:"\u5bfc\u51fa\u56fe\u7247"},{type:"data",title:"\u5bfc\u51fa\u6570\u636e"},{type:"config",title:"\u504f\u597d\u8bbe\u7f6e"}],J=[{title:"TOP 10 ",value:10},{title:"TOP 20 ",value:20},{title:"TOP 30 ",value:30},{title:"TOP 50 ",value:50},{title:"TOP 100 ",value:100}],X=[{title:"\u8bcd\u4e91",value:1,icon:"icon-cem_cloud-new"},{title:"\u6c14\u6ce1",value:0,icon:"icon-cem_hotspot"},{title:"\u8868\u683c",value:2,icon:"icon-cem_form"}],K=["#5B8FF9","#60DDA9","#F6BD15","#F08A8A","#78D3F8","#65789B","#F6903D","#028685","#7262FD","#9661BC"],Q=K,$=["#60DDA9","#5B8FF9","#F08A8A"],ee=function(e){return'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+e+';"></span>'},te=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).chartRef=void 0,t.tableRef=void 0,t.graphPieData=void 0,t.wordData=void 0,t.enablePos=!1,t.posArr=Object.keys(B),t.onFilterData=void 0,t.titleWords=void 0,t.onMsgClick=void 0,t._handleOnMsgClick=void 0,t.getChartRef=function(e){return t.chartRef=e},t.getTableRef=function(e){return t.tableRef=e},t}(0,i.Z)(t,e);var a=t.prototype;return a.renderChart=function(e,t,a,n,o,i){this.enablePos=a,this.onFilterData=n,this.titleWords=o,this.onMsgClick=i,this.setValue(e),this.updateChart(t)},a.setValue=function(e){this.wordData=e.map((function(e){return(0,o.Z)({},e,{value:Math.sqrt(e.total),escore:[-1,0,1]})}));var t=Math.sqrt(e[0].total);this.graphPieData=e.slice(0,10).map((function(e){return(0,o.Z)({},e,{rate:Math.sqrt(e.total)/t})}))},a.updateWordChart=function(e,t,a){this.chartRef.clear();var n=e.map((function(e){return(0,o.Z)({},e,{value:Math.sqrt(e.total),escore:[-1,0,1]})}));n=n.slice(0,t),this.enablePos&&(this.posArr=a,n=n.filter((function(e){return a.includes(e.pos)}))),this.wordData=n,this.chartRef.setOption(this.getWordCloudOption())},a.updateChart=function(e){this.chartRef&&(this.chartRef.clear(),0===e?(this.chartRef.setOption(this.getGraphOption()),this.chartRef.setOption(this.getPieOption())):1===e&&this.chartRef.setOption(this.getWordCloudOption()))},a.getGraphOption=function(){var e=this.chartRef.getHeight()-60,t=this.chartRef.getWidth()-60,a=t>e?e:t;return{series:[{type:"graph",layout:"force",silent:!0,animation:!1,legendHoverLink:!1,force:{repulsion:[.4*a,.8*a],gravity:.11,layoutAnimation:!1},data:this.graphPieData.map((function(e){return{symbolSize:e.rate*a/3}}))}]}},a.getPieOption=function(){var e=this,t=this.chartRef.getHeight(),a=this.chartRef.getWidth(),n=a>t?t:a;return{color:$,tooltip:{showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,a,n,o){var i=o.contentSize,r=o.viewSize,l=e[0]<r[0]/2?0:-1,s=e[1]<r[1]/2?-.5:-1;return[e[0]+l*i[0]+(l?-10:10),e[1]+s*i[1]]},formatter:function(t,a,n){return setTimeout((function(){var o,i,r=t.marker,l=t.data,s=l.value,c=l.name,u=l.total;"label"!==c?(o=r+" "+c,i=["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                  <div>\u6570\u91cf</div>\n                  <div style='color: #262626;margin-left: 30px;'>\n                    "+s+" ("+(s/u*100).toFixed(2)+"%)\n                  </div>\n                </div>"]):(o=u.name+"\uff1a"+u.total,i=["<div>\n                  <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                    <div>"+ee(Y.neg)+" \u8d1f\u9762</div>\n                    <div style='color: #262626;margin-left: 30px;'>\n                      "+u.negativeCount+" ("+(100*u.negRate).toFixed(2)+"%)\n                    </div>\n                  </div>\n                  <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                    <div>"+ee(Y.neu)+" \u4e2d\u6027</div>\n                    <div style='color: #262626;margin-left: 30px;'>\n                      "+u.neutralCount+" ("+(100*u.neuRate).toFixed(2)+"%)\n                    </div>\n                  </div>\n                  <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                    <div>"+ee(Y.pos)+" \u6b63\u9762</div>\n                    <div style='color: #262626;margin-left: 30px;'>\n                      "+u.positiveCount+" ("+(100*u.posRate).toFixed(2)+"%)\n                    </div>\n                  </div>\n                </div>"]),n(a,(0,T.r)(o,i,e.onMsgClick?[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return e._handleOnMsgClick(t)}}]:void 0))}),0)}},graphic:[{type:"group",top:24,left:20,silent:!0,children:[{type:"text",left:10,style:{text:"TOP 10 \u70ed\u8bcd",font:"bolder 14px "+w.I8,lineWidth:4,fill:"#262626"}},{type:"text",left:(0,E.jD)("TOP 10 \u70ed\u8bcd")+22,style:{text:"(\u6765\u81ea\u6709\u6548"+this.titleWords+")",font:"normal 14px "+w.I8,fill:"#8C8C8C"}}]}],series:this.chartRef._zr.storage._displayList.map((function(t,a){var o=e.graphPieData[a],i=o.rate*n/3*.35,r=e.chartRef.convertToPixel({seriesIndex:0},[t.transform[4]+30,t.transform[5]+30]),l=26*o.rate,s=l*o.name.length>2*(i-10)?2*(i-10)/o.name.length:l;return{type:"pie",name:o.name,center:r,hoverOffset:4,radius:[i-5,i],label:{normal:{show:!0,position:"center",formatter:"{a|"+o.name+"}",rich:{a:{color:o.pos?Y[o.pos]:"#262626",fontSize:s,fontFamily:w.I8}}}},itemStyle:{shadowBlur:10,shadowColor:"rgba(155,155,155,0.5)",borderColor:"#ffffff",borderWidth:.5},data:[{value:o.positiveCount,name:"\u6b63\u9762",realName:o.name,total:o.total,escore:[1],emotion:["positive"],pos:o.pos},{value:o.neutralCount,name:"\u4e2d\u6027",realName:o.name,total:o.total,escore:[0],emotion:["neutral"],pos:o.pos},{value:o.negativeCount,name:"\u8d1f\u9762",realName:o.name,total:o.total,escore:[-1],emotion:["negative"],pos:o.pos},{value:0,name:"label",total:o,realName:o.name,escore:[-1,0,1]}]}}))}},a.getWordCloudOption=function(){var e=this,t=Object.values(B).reduce((function(t,a,n,o){var i="";o.slice(0,n).map((function(e){return i+=e}));var r=(0,E.jD)(i,12)+48*n,l=Object.keys(B)[n],s={type:"circle",left:r,top:.5,shape:{cx:5,cy:4,r:5},style:{fill:e.enablePos&&e.posArr.includes(l)?Object.values(Y)[n]:"#e5e5e5"}},c={type:"text",left:r+16,style:{text:a,fill:e.enablePos&&e.posArr.includes(l)?"#8C8C8C":"#e5e5e5",font:"400 12px "+w.I8},onclick:function(){return e.onFilterData(l)}};return t.push(s,c),t}),[]);return{graphic:[{type:"group",top:60,left:"3%",silent:!1,children:this.enablePos?t:[]},{type:"group",top:24,left:20,silent:!0,children:[{type:"text",left:10,style:{text:"\u70ed\u8bcd",font:"bolder 14px "+w.I8,fill:"#262626"}},{type:"text",left:(0,E.jD)("\u70ed\u8bcd")+22,style:{text:"(\u6765\u81ea\u6709\u6548"+this.titleWords+")",font:"normal 14px "+w.I8,fill:"#8C8C8C"}}]}],tooltip:{showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,a,n,o){var i=o.contentSize,r=o.viewSize,l=e[0]<r[0]/2?0:-1,s=e[1]<r[1]/2?-.5:-1;return[e[0]+l*i[0]+(l?-10:10),e[1]+s*i[1]]},formatter:function(t,a,n){return setTimeout((function(){var o=t.marker,i=t.data,r=i.name,l=i.total,s=(i.pos,i.precent,i.positiveCount,i.posRate,i.negativeCount,i.negRate,i.neutralCount,i.neuRate,["<div>\n                <div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'>\n                  <div>\u6570\u91cf</div>\n                  <div style='color: #262626;margin-left: 20px;'>\n                    "+l+"\n                  </div>\n                </div>\n              </div>"]);n(a,(0,T.r)(o+' <span style="font-weight: bold">'+r+"</span>",s,e.onMsgClick?[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return e._handleOnMsgClick(t)}}]:void 0,"yt_new_tooltip_wrapper"))}),0)}},series:[{type:"wordCloud",name:"overview-wordcloud",gridSize:12,sizeRange:[16,50],rotationRange:[0,0],width:"100%",height:"90%",data:this.wordData,textStyle:{normal:{color:function(e){var t=e.dataIndex,a=e.data.pos;return a?Y[a]:K[t%Q.length]}},emphasis:{color:"#D8D8D8"}}}]}},t}(r.PureComponent),ae=function(e,t,a,n){setTimeout((function(){var o={type:t,seriesIndex:0,seriesName:"overview-wordcloud",dataIndex:n,name:a};n?o.dataIndex=n:a&&(o.name=a),e.dispatchAction(o)}),0)},ne=function(e){function t(t){var a;return(a=e.call(this,t)||this).lastFinishTimeoutId=void 0,a.shouldNotCallOutside=void 0,a.internalId=void 0,a.chartLeaveTimeout=void 0,a.renderChart=function(){var t=a.props,n=t.data,o=t.enablePos,i=t.titleWords,r=t.onMsgClick,l=a.state.type;(0,m.P)(n)&&a.chartRef&&e.prototype.renderChart.call((0,R.Z)(a),n,l,o,a.handleFilterData,i,r)},a.handleFilterData=function(e){var t=a.state.top,n=a.state.posArr,o=a.props.data;n.includes(e)?n=n.filter((function(t){return t!==e})):n.push(e),a.updateWordChart(o,t,n),a.setState({posArr:n})},a._handleOnMessageReceive=function(e){var t=e.data;if(a.chartRef&&"product_overview_double_bar_chart"===t.from)if("mouseover"===t.action){var n=a.wordData.findIndex((function(e){return e.name===t.param.name&&e.pos===t.pos}));n>-1&&(t.param.dataIndex=n),a._handleOnMouseOver(t.param)}else"mouseout"===t.action&&a._handleOnMouseOut(t.param)},a.handleOnTopChange=function(e){var t=a.state,n=t.top,o=t.posArr,i=a.props.data;n!==e&&(a.updateWordChart(i,e,o),a.setState({top:e}))},a._handleOnTopChange=function(e){var t=a.props.data,n=void 0;if(100!==e){n=[];for(var o=t.length-1;o>=e;o--)n.push(t[o].name)}a.setState({top:e,hightlightNames:n},(function(){1===a.state.type&&(ae(a.chartRef,"downplay",void 0),n&&ae(a.chartRef,"highlight",n))}))},a._handleOnMoreClick=function(e){var t=a.props,n=t.data,o=t.onConfig,i=a.state.type,r=0===i?"TOP10\u70ed\u8bcd":1===i?"\u70ed\u8bcd":"\u8bcd\u9891\u8868";if("image"===e)2===i&&a.tableRef?(0,O.Mx)(a.tableRef,r):a.chartRef&&(0,O._v)(a.chartRef,r);else if((0,m.P)(n)&&"data"===e){var l=(0===i?a.graphPieData:a.wordData).reduce((function(e,t,a){0===a&&t.pos&&e[0].splice(1,0,"\u8bcd\u6027");var n=[t.name,t.total,t.positiveCount,(100*t.posRate).toFixed(2)+"%",t.neutralCount,(100*t.neuRate).toFixed(2)+"%",t.negativeCount,(100*t.negRate).toFixed(2)+"%"];return t.pos&&n.splice(1,0,B[t.pos]),e.push(n),e}),[["\u70ed\u8bcd","\u603b\u6570\u91cf","\u6b63\u9762\u6570\u91cf","\u6b63\u9762\u6bd4\u4f8b","\u4e2d\u6027\u6570\u91cf","\u4e2d\u6027\u6bd4\u4f8b","\u8d1f\u9762\u6570\u91cf","\u8d1f\u9762\u6bd4\u4f8b"]]);(0,O.aT)([l],r)}else"config"===e&&o&&o()},a._handleOnTypeChange=function(e){a.state.type!==e&&a.setState({type:e},(function(){2!==e&&setTimeout((function(){a.updateChart(e)}),100)}))},a._resetChart=function(){var e=a.state.type;0===e&&a.updateChart(e),a.shouldNotCallOutside=!1},a._handleOnMouseOver=function(e){var t=e.componentType,n=e.componentSubType,o=e.name,i=e.dataIndex;1===a.state.type&&(a.shouldNotCallOutside=!0,"series"===t&&"wordCloud"===n&&(ae(a.chartRef,"downplay",o),ae(a.chartRef,"showTip",o,i)))},a._handleOnMouseOut=function(e){var t=e.componentType,n=e.componentSubType;if(1===a.state.type){a.shouldNotCallOutside=!0;var o=a.state.hightlightNames;"series"===t&&"wordCloud"===n&&(ae(a.chartRef,"downplay",void 0),o&&ae(a.chartRef,"highlight",o),ae(a.chartRef,"hideTip",void 0))}},a._handleFinished=function(){if(1===a.state.type&&!a.shouldNotCallOutside){var e=a.state.hightlightNames;!a.lastFinishTimeoutId&&a.setState({wcReady:!1}),a.lastFinishTimeoutId&&clearTimeout(a.lastFinishTimeoutId),a.lastFinishTimeoutId=setTimeout((function(){a.setState({wcReady:!0},(function(){e&&(ae(a.chartRef,"downplay",void 0),ae(a.chartRef,"highlight",e))})),a.lastFinishTimeoutId=void 0}),100)}},a._handleOnMsgClick=function(e){var t=a.state.type,n=a.props.titleWords;a.props.onMsgClick(e,0===t?"TOP10\u70ed\u8bcd\uff08\u6765\u81ea\u6709\u6548"+n+"\uff09":1===t?"\u70ed\u8bcd\uff08\u6765\u81ea\u6709\u6548"+n+"\uff09":"")},a.lastFinishTimeoutId=void 0,a.shouldNotCallOutside=!1,a.state={type:1,top:100,posArr:Object.keys(B),wcReady:!1,hightlightNames:void 0},a}(0,i.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,a=t[0],n=t[1];a.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(n.style.display="none")}),2e3)})),n&&n.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200)},a.componentWillUnmount=function(){},a.componentDidUpdate=function(e,t){var a=e.data,n=this.props.data;JSON.stringify(a)!==JSON.stringify(n)&&this.renderChart(),!(0,m.P)(n)&&this.chartRef&&(this.chartRef=void 0)},a.render=function(){var e=this,t=this.props,a=t.data,n=t.title,o=t.loading,i=t.className,l=void 0===i?"":i,s=t.enableConfig,c=t.enablePos,u=t.onFilterChange,d=this.state,p=d.type,f=(d.wcReady,d.top);return!s&&G.splice(2,1),r.createElement(r.Fragment,null,r.createElement(m.Z,{className:"yt_app_comment_overview_hotword "+l,data:a,loading:o,renderTitle:r.createElement(x.Z,{title:n,data:a},0!==p&&r.createElement(D.Z,{options:J,activeObj:f,rightHook:!0,onChange:this.handleOnTopChange}),r.createElement(D.Z,{options:X,activeObj:p,rightHook:!0,onChange:this._handleOnTypeChange}),r.createElement("div",{className:"icons"},r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u8bcd\u6027\u533a\u5206",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-cixingqufen "+(c?"active":""),onClick:function(){return u({hotwordEnablePos:!c})}}))),r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-daochu",onClick:function(){return e._handleOnMoreClick("data")}}))),r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e._handleOnMoreClick("image")}})))))},r.createElement(F.Z,{theme:"yt_multi_color_10",option:{},onChartReady:this.getChartRef,style:{width:"100%",height:"100%",display:2!==p?"block":"none"},onEvents:{finished:this._handleFinished,mouseover:this._handleOnMouseOver,mouseout:this._handleOnMouseOut}}),(0,m.P)(a)&&r.createElement(U,{getRef:this.getTableRef,data:a,filterData:f,style:{display:2===p?"block":"none"}})))},t}(te),oe=function(e){var t=0;t=Math.max.apply(null,e),t=Math.ceil(t);for(var a=0;a<4;a++)t%4!==0&&t++;return 0===t&&(t=4),{intVal:t/4,maxVal:t}},ie=["\u6b63\u9762","\u4e2d\u6027","\u8d1f\u9762"],re=function(e,t,a){var n=JSON.parse(JSON.stringify(e)),o=new Array(3).fill([]),i=[],r=new Array(3),l=[],s=n.reduce((function(e,t){return e+t.total}),0);return n.map((function(e,n,c){var u=e.total/s,d=e.dataList.map((function(e,o){var r=c[0].dataList[o].total+c[1].dataList[o].total+c[2].dataList[o].total,s=0===r?e.total:e.total/r;return e.originTime=e.time,e.time=(0,E.Sn)(a,e.time),e.value=t?s:e.total,e.precentValue=s,e.barSum=r,0===n&&i.push(e.time),l.push(r),e})),p="";return"1"===e.key&&(p="\u6b63\u9762",o[0]=d,r[0]={name:p,value:e.total,total:e.total,precentValue:u}),"0"===e.key&&(p="\u4e2d\u6027",o[1]=d,r[1]={name:p,value:e.total,total:e.total,precentValue:u}),"-1"===e.key&&(p="\u8d1f\u9762",o[2]=d,r[2]={name:p,value:e.total,total:e.total,precentValue:u}),e})),{xAxisData:i,pieData:r,data:o,barDataVals:l}},le=function(e,t,a,n,i,r,l){var s=["#60DDA9","#5B8FF9","#F08A8A"],c="RATIO"===t,u=re(e,c,i),d=u.xAxisData,p=u.pieData,m=u.data,f=u.barDataVals,h=function(e){return e.map((function(e){return(0,o.Z)({},e,{tooltip:{trigger:"item",formatter:function(e,t,i){return setTimeout((function(){var r=e.seriesName,s=e.data,c=(s.name,s.time),u=s.total,d=s.precentValue,p="\n              <div style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;position:relative;\">\n                <span style='position:absolute;width:40px;height:150px;left:-40px;top:-30px;'></span>\n                <span style='position:absolute;width:40px;height:150px;right:-40px;top:-30px;'></span>\n              </div>\n              <span style=\"font-size: 12px; color: #262626; font-weight: 400;\">"+c+"</span>",m=["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+e.marker+"</span>"+r+"</div><div style='color: #262626;margin-left: 10px;'>\n              "+u+" ("+(100*d).toFixed(2)+"%)\n                </div></div>"];i(t,l?(0,T.r)(p,m,[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return l((0,o.Z)({},e,{eomtionsType:v(r)}),""+a+n)}}],"yt_new_tooltip_wrapper"):(0,T.r)(p,m))}),0)}}})}))},v=function(e){var t;return null==(t=ue.find((function(t){return t.title===e})))?void 0:t.value};return{color:s,graphic:[{type:"group",top:24,left:20,silent:!0,children:[{type:"text",left:10,style:{text:a,font:"bolder 14px "+w.I8,fill:"#262626"}},{type:"text",left:(0,E.jD)(a)+12,style:{text:n,font:"normal 14px "+w.I8,fill:"#8C8C8C"}}]}],grid:{left:"40%",right:48,top:90,containLabel:!0},legend:{left:16,top:52,itemWidth:10,itemHeight:10,itemGap:16,icon:"circle",data:ie},xAxis:{type:"category",data:d,nameTextStyle:{color:"#626262"},axisLabel:{formatter:function(e){return e}},axisPointer:{type:"shadow",label:{show:!1}}},yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return c?(100*e).toFixed(2)+"%":e}},interval:c?.25:oe(f).intVal,max:c?1:oe(f).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},tooltip:{trigger:"axis",showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px; box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,a,n,o){var i=o.contentSize,r=o.viewSize,l=e[0]<r[0]/2?0:-1,s=e[1]<r[1]/2?-.5:-1,c=e[0]<r[0]/2?12:-12;return[e[0]+l*i[0]+c,e[1]+s*i[1]]},formatter:function(e,t,i){return e.length?setTimeout((function(){var a=e[0].axisValue,n=e.map((function(e){var t=e.marker,a=e.seriesName,n=e.data,o=(n.name,n.value);return{name:t+' <span style="color: #8C8C8C;display: inline-block;width: 66px;">'+a+'</span> <span style="float: right;color: #262626;position: relative;">\n                    '+n.total+" ("+(100*n.precentValue).toFixed(2)+"%)</span>",value:o}})).map((function(e){return e.name})),o='<span span style = "font-size: 12px; color: #262626; font-weight: 400;" >'+a+"</span>";i(t,(0,T.r)(o,n))}),0):setTimeout((function(){var r=e.data,s=r.name,c=r.total,u=(r.precentValue,e.seriesType),d=e.marker,p=e.percent;"pie"!==u||i(t,l?(0,T.r)(""+s,["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+d+"</span>\n                      \u6570\u91cf</div><div style='color: #262626;margin-left: 10px;'>\n                      "+c+" ("+p+"%)\n                      </div></div> "],[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return l((0,o.Z)({},e,{eomtionsType:v(s)}),""+a+n)}}],"yt_new_tooltip_wrapper"):(0,T.r)(""+s,["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+d+"</span>\n                      \u6570\u91cf</div><div style='color: #262626;margin-left: 10px;'>\n                      "+c+" ("+p+"%)\n                      </div></div> "]))}),0)}},dataZoom:{show:!0,bottom:16,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"},series:[{type:"pie",smooth:!0,datasetIndex:0,hoverOffset:0,center:["17%","60%"],radius:["25%","35%"],itemStyle:{smooth:!0,normal:{borderWidth:0,borderColor:"#fff",smooth:!0},emphasis:{borderWidth:0,shadowBlur:0,shadowOffsetX:0}},label:{show:!0,position:"outside",color:"#262626",rich:{value:{fontSize:12,lineHeight:18,color:"#262626",align:"left"}},formatter:function(e){var t=e.data,a=t.name,n=t.total;t.precentValue;return[""+a,n+" ("+e.percent+"%)"].join("\n")}},labelLine:{show:!0,smooth:!0,length:18},avoidLabelOverlap:!0,data:p,tooltip:{trigger:"item"}},{type:"bar",name:"\u6b63\u9762",smooth:!0,showSymbol:!0,symbolSize:1,stack:"Ad",barMaxWidth:24,barMinWidht:24,itemStyle:{color:s[0]},emphasis:{focus:"series"},data:h(m[0])},{type:"bar",name:"\u4e2d\u6027",smooth:!0,showSymbol:!0,symbolSize:1,stack:"Ad",itemStyle:{color:s[1]},emphasis:{focus:"series"},data:h(m[1])},{type:"bar",name:"\u8d1f\u9762",smooth:!0,showSymbol:!0,symbolSize:1,stack:"Ad",itemStyle:{color:s[2]},emphasis:{focus:"series"},data:h(m[2])}]}},se=function(e,t,a,n,o,i){if("image"===t)(0,O._v)(e,n);else if("data"===t){var r="RATIO"===o,l=re(a,r,i).data,s=[["\u65f6\u95f4"].concat(ie)];l[0].map((function(e,t){var a=r?(100*e.precentValue).toFixed(2)+"%":e.total,n=r?(100*l[1][t].precentValue).toFixed(2)+"%":l[1][t].total,o=r?(100*l[2][t].precentValue).toFixed(2)+"%":l[2][t].total;return s.push([e.time,a,n,o]),e}));var c=[s];(0,O.aT)(c,n)}},ce=[{title:"\u6bd4\u4f8b",value:"RATIO"},{title:"\u6570\u91cf",value:"COUNT"}],ue=[{title:"\u8d1f\u9762",value:"negative"},{title:"\u6b63\u9762",value:"positive"},{title:"\u4e2d\u6027",value:"neutral"}];const de=function(e){var t,a,n=e.loading,o=e.title,i=e.subTitle,l=e.cCountType,s=e.ctimeType,c=e.chartData,u=e.onTimeTypeChange,d=e.onMsgClick,p=e.dateOptions,f=(0,r.useState)(l),h=f[0],v=f[1],y=(0,r.useState)(!1),b=(y[0],y[1],(0,r.useState)(null)),C=b[0],E=b[1];(0,r.useEffect)((function(){var e=(0,m.P)(c)?le(c,h,o,i,s,0,d):{};e&&C&&C.setOption(e)}),[c,C]);return(0,r.useEffect)((function(){t=setInterval((function(){if(C){clearInterval(t);var e=C._dom.children,n=e[0],o=e[1];n.addEventListener("mouseleave",(function(e){a=setTimeout((function(){a&&(o.style.display="none")}),2e3)})),o&&o.addEventListener("mouseenter",(function(e){a=void 0}))}}),200)}),[]),r.createElement("div",{className:"emotionTrend_box"},r.createElement(m.Z,{data:c,loading:n,style:{height:"100%"},renderTitle:r.createElement(x.Z,{title:o,data:c},r.createElement(D.Z,{options:ce,activeObj:h,rightHook:!0,onChange:function(e){C.clear();var t=le(c,e,o,i,s,0,d);C.setOption(t),v(e)}}),s&&r.createElement(D.Z,{options:p,activeObj:s,rightHook:!0,onChange:function(e){return u&&u({emotionsTimeType:e})}}),r.createElement("div",{className:"icons"},r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6,getPopupContainer:function(e){return e}},r.createElement("i",{className:"icon-daochu",onClick:function(){return se(C,"data",c,"\u8bc4\u8bba\u60c5\u611f\u5206\u5e03\u548c\u8d70\u52bf\uff08\u6765\u81ea\u6709\u6548\u8bc4\u8bba\uff09",h,s)}}))),r.createElement("div",{className:"icon"},r.createElement(g.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6,getPopupContainer:function(){return document.querySelector(".header_Filter_bar")}},r.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return se(C,"image",c,"\u8bc4\u8bba\u60c5\u611f\u5206\u5e03\u548c\u8d70\u52bf\uff08\u6765\u81ea\u6709\u6548\u8bc4\u8bba\uff09",h,s)}})))))},r.createElement(F.Z,{onChartReady:function(e){return E(e)},theme:"yt_multi_color_10",option:{},opts:{devicePixelRatio:2},style:{width:"100%",height:"100%"}})))};const pe=function(e){var t=e.pageType,a=e.filterReady,n=e.filterChange,o=e.dateOptions,i=e.onFilterChange,l=e.onFlavorChange,s=e.onMsgClick,c=e.cardData,u=e.fetchingCardData,p=e.starTrendData,m=e.fetchingStarTrendData,f=e.starTrendCountType,h=e.fStarTrendCountType,v=e.starTrendTimeType,g=e.fStarTrendTimeType,x=e.fetchingFeedbackData,b=e.feedbackData,C=e.feedbackEnablePos,E=e.fetchingHotwordData,T=e.hotwordData,w=e.hotwordEnablePos,_=e.fetchEmotionsLoading,F=e.emotionsData,D=e.emotionsTimeType,O=e.emotionsTrendCountType;e.fetchingCountData,e.countData;return r.createElement("div",{className:"yt_app_comment_comment_overview_wrapper"},r.createElement(d.Z,{onReady:a,onChange:n,pageType:t,advanceAuthority:!1,valueConf:["fullInfo"],hasHour:!0,showList:["fullDate","screening","save"]},r.createElement("div",{className:"content"},r.createElement(y,{cardData:c,fetchingCardData:u,onMsgClick:s}),r.createElement(P,{title:"\u5e26\u661f\u8bc4\u8bba\u5206\u5e03\u548c\u8d70\u52bf",subTitle:"\uff08\u6765\u81ea\u5168\u90e8\u8bc4\u8bba\uff09",timeOptions:o,timeType:v,fTimeType:g,countType:f,fCountType:h,data:p,loading:m,onChange:i,onFlavorChange:l,onMsgClick:s}),r.createElement(de,{loading:_,chartData:F,title:"\u8bc4\u8bba\u60c5\u611f\u5206\u5e03\u548c\u8d70\u52bf",subTitle:"\uff08\u6765\u81ea\u6709\u6548\u8bc4\u8bba\uff09",cCountType:O,ctimeType:D,onTimeTypeChange:i,onMsgClick:s,dateOptions:o}),r.createElement(j,{title:"\u7528\u6237\u53cd\u9988\u70ed\u8bcd",titleOverlay:r.createElement(r.Fragment,null,r.createElement("div",null,"\u6309\u6570\u91cf\u6392\u5e8f\uff1a\u7edf\u8ba1\u8ddf\u70ed\u8bcd\u76f8\u5173\u7684\u6b63\u9762/\u8d1f\u9762\u8bc4\u8bba\u6570\u91cf\u6700\u9ad8\u7684\u70ed\u8bcd\u3002"),r.createElement("div",null,"\u6309\u6bd4\u4f8b\u6392\u5e8f\uff1a\u7edf\u8ba1\u6bcf\u4e2a\u70ed\u8bcd\u76f8\u5173\u7684\u6240\u6709\u8bc4\u8bba\u4e2d\uff0c\u6b63\u9762/\u8d1f\u9762\u8bc4\u8bba\u6570\u91cf\u5360\u6bd4\u6700\u9ad8\u7684\u70ed\u8bcd\u3002")),data:b,loading:x,enablePos:C,onFilterChange:i,onMsgClick:s,titleWords:"\u8bc4\u8bba"}),r.createElement(ne,{title:"\u70ed\u8bcd",data:T,loading:E,enablePos:w,onFilterChange:i,onMsgClick:s,titleWords:"\u8bc4\u8bba"}))))};var me=a(53113),fe=a(2329),he=["loading"],ve=l.Z.product.commentOverview,ye=l.Z.IDBHeaderScreening.screening,ge=function(e){function t(t){var a;return(a=e.call(this,t)||this).events=void 0,a._handleFilterReady=function(e,t){var n=(0,me.X)(e.dateFilter.numOfDays,!1),o=n.dateOptions,i=n.defaultDateType;a.props.fetchParams({projectId:c.t.get(c.V.curProject).id,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:e.dateFilter,dateOptions:o,defaultDateType:i,filterValues:t.fullInfo.filterValue})},a._handleFilterChange=function(e,t){var n=(0,me.X)(e.dateFilter.numOfDays,!1),i=n.dateOptions,r=n.defaultDateType;a.props.save({headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:(0,o.Z)({},e.dateFilter,{dateGroupType:r}),defaultDateType:r,dateOptions:i,filterValues:t.fullInfo.filterValue}),a.props.save({emotionsTimeType:r,starTrendTimeType:r}),a.props.fetchDatas((0,o.Z)({},e,{dateFilter:(0,o.Z)({},e.dateFilter,{dateGroupType:r})}))},a._handleOnFilterChange=function(e){e.starTrendCountType?a.props.save(e):e.starTrendTimeType?a.props.fetchStarTrendData({starTrendTimeType:e.starTrendTimeType,dateFilter:(0,o.Z)({},a.props.dateFilter,{dateGroupType:e.starTrendTimeType})}):void 0!==e.feedbackEnablePos?a.props.fetchFeedbackData({feedbackEnablePos:e.feedbackEnablePos}):void 0!==e.hotwordEnablePos?a.props.fetchHotwordData({hotwordEnablePos:e.hotwordEnablePos}):void 0!==e.emotionsTimeType&&(a.props.save({emotionsTimeType:e.emotionsTimeType}),a.props.fetchEmotionsData({emotionsTimeType:e.emotionsTimeType,dateFilter:(0,o.Z)({},a.props.dateFilter,{dateGroupType:e.emotionsTimeType})}))},a._handleOnFlavorChange=function(e){(e.fStarTrendCountType||e.fStarTrendTimeType||e.fEmotionsTimeType)&&a.props.setDefaultValue(e)},a._handleOnMsgClick=function(e,t){var n=a.props,i=(n.curScreeningMap,n.headerFilterParamsNew),r=n.dateFilter,l=n.filterValues,s=n.projectId,c=n.starTrendTimeType,d=n.starTrendData,p=n.emotionsTimeType,m=n.emotionsData,f={dateFilter:r,projectId:s,filterModel:{project:[s],messageCategory:["COMMENT"]},headerFilterParamsNew:i,filterValues:l,filterTip:null};if("\u5e26\u661f\u8bc4\u8bba\u6570\u91cf"===t)f=(0,o.Z)({},f,{headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(e){e.push({id:"COMMENT_RELATED",values:[{id:"COMMENT_SCORE",values:["5","4","3","2","1"]}]})}))});else if("\u8bc4\u8bba\u597d\u8bc4\u7387"===t||"\u8bc4\u8bba\u5dee\u8bc4\u7387"===t)f=(0,o.Z)({},f,{headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(e){var a=e.find((function(e){return"DEFAULT"===e.id}));a?a.values.push({id:"EMOTION_TYPE",values:"\u8bc4\u8bba\u597d\u8bc4\u7387"===t?["positive"]:["negative"]}):e.push({id:"DEFAULT",values:[{id:"EMOTION_TYPE",values:"\u8bc4\u8bba\u597d\u8bc4\u7387"===t?["positive"]:["negative"]}]})}))});else if("\u5e26\u661f\u8bc4\u8bba\u5206\u5e03\u548c\u8d70\u52bf\uff08\u6765\u81ea\u5168\u90e8\u8bc4\u8bba\uff09"===t)if(e instanceof Array&&"bar"===e[0].seriesType){var h=e[0].axisValue;f=(0,o.Z)({},f,{filterValues:(0,u.ZP)(f.filterValues,(function(e){e.push({id:"COMMENT_RELATED",values:[{id:"COMMENT_SCORE",label:"\u8bc4\u8bba\u661f\u7ea7",values:[S[h]]}]})})),headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(e){e.push({id:"COMMENT_RELATED",values:[{id:"COMMENT_SCORE",values:[String(parseInt(h))]}]})}))})}else"line"===e.seriesType&&(f=(0,o.Z)({},f,{dateFilter:(0,fe.X_)("line",r,e.name,d.find((function(e){return e.total>0})).dataList.map((function(e){return e.time})),c),filterValues:(0,u.ZP)(f.filterValues,(function(t){t.push({id:"COMMENT_RELATED",values:[{id:"COMMENT_SCORE",label:"\u8bc4\u8bba\u661f\u7ea7",values:[S[e.seriesName]]}]})})),headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(t){t.push({id:"COMMENT_RELATED",values:[{id:"COMMENT_SCORE",values:[String(parseInt(e.seriesName))]}]})}))}));"\u7528\u6237\u53cd\u9988\u70ed\u8bcd"===t&&(f=(0,o.Z)({},f,{headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(t){var a=t.find((function(e){return"DEFAULT"===e.id}));a?a.values.push({id:"EMOTION_TYPE",values:[e.seriesName]},{id:"EFFECTIVENESS_TYPE",values:["useful"]}):t.push({id:"DEFAULT",values:[{id:"EMOTION_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:[e.seriesName]},{id:"EFFECTIVENESS_TYPE",label:"\u6709\u6548\u6570\u636e",values:["useful"]}]})})),textRankWord:e.name,textRankWordPos:e.data.pos,filterModel:{project:[s]}})),"\u70ed\u8bcd\uff08\u6765\u81ea\u6709\u6548\u8bc4\u8bba\uff09"===t&&(f=(0,o.Z)({},f,{headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(e){var t=e.find((function(e){return"DEFAULT"===e.id}));t?t.values.push({id:"EFFECTIVENESS_TYPE",values:["useful"]}):e.push({id:"DEFAULT",values:[{id:"EFFECTIVENESS_TYPE",label:"\u6709\u6548\u6570\u636e",values:["useful"]}]})})),textRankWord:e.name,textRankWordPos:e.data.pos,filterModel:{project:[s]}})),"TOP10\u70ed\u8bcd\uff08\u6765\u81ea\u6709\u6548\u8bc4\u8bba\uff09"===t&&(f="label"===e.name?(0,o.Z)({},f,{headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(e){var t=e.find((function(e){return"DEFAULT"===e.id}));t?t.values.push({id:"EFFECTIVENESS_TYPE",values:["useful"]}):e.push({id:"DEFAULT",values:[{id:"EFFECTIVENESS_TYPE",values:["useful"]}]})})),textRankWord:e.seriesName,textRankWordPos:e.data.total.pos,filterModel:{project:[s]}}):(0,o.Z)({},f,{headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(t){var a=t.find((function(e){return"DEFAULT"===e.id}));a?a.values.push({id:"EMOTION_TYPE",values:e.data.emotion},{id:"EFFECTIVENESS_TYPE",values:["useful"]}):t.push({id:"DEFAULT",values:[{id:"EMOTION_TYPE",values:e.data.emotion},{id:"EFFECTIVENESS_TYPE",values:["useful"]}]})})),textRankWord:e.seriesName,textRankWordPos:e.data.pos,filterModel:{project:[s]}})),"\u8bc4\u8bba\u60c5\u611f\u5206\u5e03\u548c\u8d70\u52bf\uff08\u6765\u81ea\u6709\u6548\u8bc4\u8bba\uff09"===t&&("bar"===e.seriesType&&(f.dateFilter=(0,fe.X_)("line",r,e.data.originTime.replace(/\//g,"-"),m.find((function(e){return e.total>0})).dataList.map((function(e){return e.time})),p)),f=(0,o.Z)({},f,{headerFilterParamsNew:(0,u.ZP)(f.headerFilterParamsNew,(function(t){var a=t.find((function(e){return"DEFAULT"===e.id}));a?a.values.push({id:"EMOTION_TYPE",values:[e.eomtionsType]},{id:"EFFECTIVENESS_TYPE",values:["useful"]}):t.push({id:"DEFAULT",values:[{id:"EMOTION_TYPE",label:"\u60c5\u611f\u6b63\u8d1f",values:[e.eomtionsType]},{id:"EFFECTIVENESS_TYPE",label:"\u6570\u636e\u6709\u6548\u6027",values:["useful"]}]})})),filterModel:{project:[s]}})),window.open("/inbox/commont?"+encodeURIComponent(JSON.stringify(f)))},a.events={filterReady:a._handleFilterReady,filterChange:a._handleFilterChange,onFilterChange:a._handleOnFilterChange,onFlavorChange:a._handleOnFlavorChange,onMsgClick:a._handleOnMsgClick},a}(0,i.Z)(t,e);var a=t.prototype;return a.componentWillUnmount=function(){this.props.clean()},a.render=function(){return r.createElement(pe,(0,o.Z)({},this.props,this.state,this.events))},t}(r.Component);const xe=(0,s.connect)((function(e){var t=e.loading,a=(0,n.Z)(e,he);return(0,o.Z)({},a[ve],{curScreeningMap:a[ye].curScreeningMap,fetchingCardData:t.effects[ve+"/fetchCardData"]||!1,fetchingStarTrendData:t.effects[ve+"/fetchStarTrendData"]||!1,fetchingFeedbackData:t.effects[ve+"/fetchFeedbackData"]||!1,fetchingHotwordData:t.effects[ve+"/fetchHotwordData"]||!1,fetchEmotionsLoading:t.effects[ve+"/fetchEmotionsData"]||!1})}),(function(e){return{save:function(t){return e({type:ve+"/save",payload:t})},clean:function(){return e({type:ve+"/clean"})},fetchParams:function(t){return e({type:ve+"/fetchParams",payload:t})},fetchDatas:function(t){return e({type:ve+"/fetchDatas",payload:t})},fetchCardData:function(t){return e({type:ve+"/fetchCardData",payload:t})},fetchStarTrendData:function(t){return e({type:ve+"/fetchStarTrendData",payload:t})},setDefaultValue:function(t){return e({type:ve+"/setDefaultValue",payload:t})},fetchFeedbackData:function(t){return e({type:ve+"/fetchFeedbackData",payload:t})},fetchHotwordData:function(t){return e({type:ve+"/fetchHotwordData",payload:t})},fetchEmotionsData:function(t){return e({type:ve+"/fetchEmotionsData",payload:t})}}}))(ge)},94530:(e,t,a)=>{a.d(t,{Z:()=>O});var n=a(87462),o=a(63366),i=a(67294),r=a(25713),l=a(43036),s=a(45697),c=a.n(s),u=a(38263),d=a(57522),p=[{value:"WEEK",label:"\u5468"},{value:"MONTH",label:"\u6708"},{value:"QUATER",label:"\u5b63"},{value:"YEAR",label:"\u5e74"}],m=function(e){var t=e.value,a=e.getValue,n=i.useState(t),o=n[0],r=n[1];return i.createElement("div",{className:"yt_modal_dashboard_edit_wrapper"},i.createElement("div",{className:"content_item"},i.createElement("span",null,"\u540c\u6bd4\u7c7b\u578b"),i.createElement("span",null,i.createElement(u.ZP,{className:"content_item_select",value:(p.find((function(e){return e.value===o}))||{}).label,onChange:function(e){return function(e){r(e),setTimeout((function(){return a&&a(e)}),0)}(e)},inputIcon:i.createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},p.map((function(e){return i.createElement(u.ZP.Option,{value:e.value,key:e.value},e.label)}))))))},f=function(e){return new Promise((function(t,a){var o=e.value,r=(0,n.Z)({},e,{titleText:i.createElement("div",{className:"indicator_card_comfirm"},i.createElement("span",null,"\u540c\u6bd4\u8bbe\u7f6e"),i.createElement("span",{onClick:function(){return window.open("https://www.yuque.com/docs/share/5615d490-0056-4bb9-b208-bf747c9048c0")}},"\u67e5\u770b\u66f4\u591a")),content:i.createElement(m,(0,n.Z)({},e,{getValue:function(e){o=e}}))});r.onOk=function(){return t(o)},r.onCancel=a,(0,d.Z)(r)}))};const h=f;f.propTypes={getValue:c().func,value:c().string};var v=a(8201),y=a(39432),g=a(94644),x=a(29531),b=a.n(x),C=a(93162),E=function(e){return!["",null,void 0].includes(e)},T=[{title:"\u5bfc\u51fa\u56fe\u7247",type:"image"},{title:"\u5bfc\u51fa\u6570\u636e",type:"data"}],w=[{title:"\u8bbe\u7f6e\u540c\u6bd4",type:"compare"}],_=function(e){return e&&e.length>6?String(e).substring(0,6)+"...":e},F=function(e,t,a){if("image"===e)o=t,i=(0,g.UO)(a[0]&&a[0].name),new Promise((function(e){var t=o.offsetWidth,a=o.cloneNode(!0),n=document.createElement("canvas");n.width=12*t,n.height=1920,n.style.width=t+"px",n.style.height="160px",n.className="yt_trend_list_canvas",n.getContext("2d").scale(12,12),a.style.width=t+"px",a.style.height="160px",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.zIndex=-1,a.style.opacity=0,document.body.appendChild(a),b()(a,{allowTaint:!0,taintTest:!1,canvas:n,useCORS:!0,width:t,height:160,onrendered:function(e){document.body.appendChild(e);var t=e.toDataURL("png");(0,C.saveAs)(t,i,"image/png"),setTimeout((function(){document.body.removeChild(a),document.body.removeChild(document.querySelector(".yt_trend_list_canvas"))}),0)}})}));else if("data"===e){var n=[a.reduce((function(e,t){return[].concat(e,[[t.name,t.count]])}),[])];(0,g.aT)(n,a[0]&&a[0].name)}var o,i};var D=["data","tip","compare","onSetting","loading","paragraph","onMsgClick"];const O=function(e){var t=e.data,a=e.tip,s=e.compare,c=e.onSetting,u=e.loading,d=e.paragraph,p=e.onMsgClick,m=(0,o.Z)(e,D),f=i.useState(),g=f[0],x=f[1],b=function(e){return t&&t[e]?t[e]:{}},C=function(e){if(b(e).name){if(E(b(e).count)){var t=b(e).count;switch(b(e).format){case"myriad":t=(0,y.hE)(t);break;case"percent":a=t,t=E(null)?null:0===a?"0.00%":Math.abs(100*a).toFixed(2)+"%"}return t}return"--"}var a;return""},O=function(e){return"myriad"===b(e).format?b(e).count.toLocaleString():C(e)};return i.createElement("div",(0,n.Z)({className:"indicator_card"},m,{ref:function(e){return x(e)}}),i.createElement(v.Z,{data:t,className:"section_com",loading:u,paragraph:d},i.createElement("div",{className:"title_wrap"},i.createElement("span",{className:"chart_title"},i.createElement("span",{className:"chart_title_name"},b(0).name,a&&i.createElement(l.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:a},i.createElement("i",{className:"icon-cem_file1","data-html2canvas-ignore":!0})))),i.createElement("span",{className:"chart_title_buttons","data-html2canvas-ignore":!0},i.createElement(r.Z,{onClick:function(e){"compare"===e?h({value:s}).then((function(e){c&&c({compareValue:e})})):F(e,g,t)},options:T.concat(c?w:[])}))),i.createElement("div",{className:"section_mid"},i.createElement("p",null,i.createElement(l.Z,{placement:"top",overlay:O(0)},i.createElement("section",null,C(0)))),b(1).name||b(2).name?i.createElement("p",null,i.createElement("span",null,i.createElement("span",null,i.createElement(l.Z,{placement:"top",overlay:b(1).name},i.createElement("section",{className:"name"},b(1).name))),i.createElement("span",null,i.createElement(l.Z,{placement:"top",overlay:O(1)},i.createElement("section",null,C(1))),"boolean"===typeof b(1).rise&&i.createElement("i",{className:b(1).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"}))),i.createElement("span",null,i.createElement("span",null,i.createElement(l.Z,{placement:"top",overlay:b(2).name},i.createElement("section",{className:"name"},b(2).name))),i.createElement("span",null,i.createElement(l.Z,{placement:"top",overlay:O(2)},i.createElement("section",null,C(2))),"boolean"===typeof b(2).rise&&i.createElement("i",{className:b(2).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"})))):null),(b(3).name||b(4).name)&&i.createElement("div",{className:"section_bottom"},i.createElement("span",null,i.createElement("span",null,i.createElement(l.Z,{placement:"top",overlay:b(3).name},i.createElement("section",{className:"name"},b(4).name?_(b(3).name):b(3).name))),i.createElement("span",null,i.createElement(l.Z,{placement:"top",overlay:O(3)},i.createElement("section",null,C(3))))),b(4).name?i.createElement("span",null,i.createElement("span",null,i.createElement(l.Z,{placement:"top",overlay:b(4).name},i.createElement("section",{className:"name"},_(b(4).name)))),i.createElement("span",null,i.createElement(l.Z,{placement:"top",overlay:O(4)},i.createElement("section",null,C(4))))):null,p&&i.createElement("span",{className:"toMsg",onClick:function(){return p(t)}},"\u67e5\u770b\u8be6\u60c5"))))}}}]);