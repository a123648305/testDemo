"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8458],{41192:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(67294),l=n(45697),i=n.n(l),r=n(33798),o=n(43036),s=function(e){var t=e.chartType,n=e.enable,l=void 0!==n&&n,i=e.options,s=e.notLimitList,c=e.onChange;return a.createElement("div",{className:"yt-chart-type-radio-wrapper"},Object.keys(i).map((function(e){return a.createElement(o.Z,{key:e,placement:"top",overlay:i[e][2]},a.createElement("span",null,a.createElement(r.Z,{enable:!l||s.includes(e),isActive:t===e,defaultIcon:i[e][0],activeIcon:i[e][1],onClick:function(){return!l&&c(e)}})))})))};s.propTypes={chartType:i().string,enable:i().bool,options:i().object,notLimitList:i().array};const c=s},17051:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(67294),l=n(45697),i=n.n(l),r=n(43036),o=n(32283),s=n(92360),c=n(30133),u=function(e){var t=e.type,n=e.titlePrefix,l=e.quantity,i=e.leftSubTitle,u=e.leftContent,p=e.rightSubTitle,d=e.rightContent,m=e.loading,h=e.isInitial,f=document.body.clientWidth<1500;return a.createElement("div",{className:"overview-num-wrapper"},h?a.createElement(c.Z,null):m?a.createElement(s.Loading,{loading:m},a.createElement("div",{style:{height:"252px"}})):a.createElement(a.Fragment,null,a.createElement("div",{className:"overview-num-header"},a.createElement("span",null,n,"\u4f1a\u8bdd\u603b\u91cf"),t>1&&a.createElement(r.Z,{overlay:["\u8be5\u9875\u9762\u7684\u5546\u54c1\u53ca\u4f1a\u8bdd\u4ec5\u5bf9\u300c\u5206\u6790\u5546\u54c1\u300d\u8fdb\u884c\u7edf\u8ba1\uff0c\u4e0d\u5bf9\u300c\u5bf9\u6bd4\u5546\u54c1\u300d\u8fdb\u884c\u7edf\u8ba1","\u5bf9\u5ba2\u6237\u54a8\u8be2\u5546\u54c1\u65f6\u7684\u5173\u6ce8\u70b9\u7684\u7d2f\u52a0"][t-2],placement:"top",overlayClassName:"restricted-pop"},a.createElement("i",{className:"icon-cem_file1"}))),a.createElement(a.Fragment,null,a.createElement("div",{className:"overview-num-body"},a.createElement(r.Z,{overlay:l,placement:"top",overlayClassName:"restricted-pop"},a.createElement("span",null,(0,o.ao)(l)))),a.createElement("div",{className:"overview-num-footer"},a.createElement(a.Fragment,null,f?a.createElement(r.Z,{overlay:i,placement:"top",overlayClassName:"restricted-pop"},a.createElement("span",null,i.substring(0,5),"...")):a.createElement("span",null,i),a.createElement(r.Z,{overlay:u,placement:"top",overlayClassName:"restricted-pop"},a.createElement("span",null,(0,o.ao)(u))),a.createElement("span",null,p),a.createElement("span",null,Number.isInteger(d)?(0,o.ao)(d):d+"%"),t>1&&a.createElement(r.Z,{overlay:["\u5f53\u524d\u5206\u6790\u5546\u54c1\u4f1a\u8bdd\u5360\u6240\u6709\u5546\u54c1\u4f1a\u8bdd\u7684\u6bd4\u91cd","\u8be5\u5173\u6ce8\u70b9\u7684\u4f1a\u8bdd\u91cf\xf7\u6240\u6709\u5173\u6ce8\u70b9\u7684\u4f1a\u8bdd\u91cf\uff0c\u5373\u5f53\u524d\u5206\u6790\u5173\u6ce8\u70b9\u7684\u4f1a\u8bdd\u5360\u6240\u6709\u5173\u6ce8\u70b9\u4f1a\u8bdd\u7684\u6bd4\u91cd"][t-2],placement:"top",overlayClassName:"restricted-pop"},a.createElement("i",{className:"icon-cem_file1"})))))))};u.propTypes={type:i().number.isRequired,titlePrefix:i().string.isRequired,loading:i().bool.isRequired,isInitial:i().bool.isRequired,quantity:i().number.isRequired,leftSubTitle:i().string.isRequired,leftContent:i().number.isRequired,rightSubTitle:i().string.isRequired,rightContent:i().number.isRequired};const p=u},99543:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(94578),l=n(67294),i=n(45697),r=n.n(i),o=n(50976),s=n(31705),c=n(30133),u=n(92360),p=n(94644),d=n(32283),m=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).setOption=function(){var e=t.props,n=e.loading,a=e.data;if(!n&&a.length>0){var l={title:{text:t.title,left:0,top:0},tooltip:{triger:"item",formatter:function(e){return e.marker+" "+e.name+"\uff1a"+e.value+"\uff08"+e.percent+"%\uff09"}},series:[{name:"\u59d3\u540d",type:"pie",radius:75,hoverAnimation:!1,center:["50%","55%"],data:a.map((function(e){return{name:e.source,value:e.docCount}})),label:{position:"outside",color:"#000",formatter:function(e){var t=e.data,n=t.name,a=t.value;return[""+n,"{value|"+(0,d.ao)(a)+"}"].join("\n")},rich:{value:{fontSize:12,lineHeight:18,color:"#8c8c8c",align:"left"}}},labelLine:{length:13,length2:13,lineStyle:{color:"#bfbfbf"}}}]};t.instance.clear(),t.instance.setOption(l)}},t.handleDownloadChart=function(){(0,p._v)(t.instance,t.title)},t.handleDownloadExcel=function(e){var n=e.map((function(e){return[e.source,e.docCount]}));n.splice(0,0,["\u5e73\u53f0","\u4f1a\u8bdd\u91cf"]),(0,p.aT)([n],t.title)},t}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.titlePrefix;this.title=e+"\u5404\u5e73\u53f0\u4f1a\u8bdd\u91cf",this.setOption()},n.shouldComponentUpdate=function(e,t){return e.loading!==this.props.loading||(e.titlePrefix!==this.props.titlePrefix||JSON.stringify(e.data)!==JSON.stringify(this.props.data))},n.componentDidUpdate=function(){var e=this.props.titlePrefix;this.title=e+"\u5404\u5e73\u53f0\u4f1a\u8bdd\u91cf",this.setOption()},n.render=function(){var e=this,t=this.props,n=t.loading,a=t.isInitial,i=t.data;return a?l.createElement(c.Z,null):n?l.createElement(u.Loading,{loading:n}):i.length>0?l.createElement("div",{className:"overview-pie-wrapper"},l.createElement(o.Z,{theme:"yunting_multi_color",showLoading:n,style:{width:"100%",height:"252px"},option:{},onChartReady:function(t){return e.instance=t}}),l.createElement(s.Z,{onDownChartClick:function(){return e.handleDownloadChart()},onDownExcelClick:function(){return e.handleDownloadExcel(i)}})):l.createElement("div",{className:"overview-pie-empty-wrapper"},l.createElement("div",{className:"empty-block"},"\u6682\u65e0\u6570\u636e"))},t}(l.Component);m.propTypes={titlePrefix:r().string.isRequired,loading:r().bool.isRequired,isInitial:r().bool.isRequired,data:r().arrayOf(r().shape({source:r().string.isRequired,docCount:r().number.isRequired}))}},50196:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(67294),l=n(50976),i=n(60496),r=n(8201),o=n(98191),s=n(87462),c=n(39432),u=n(70715),p=[{title:"\u6309\u5929",value:"DAY"},{title:"\u6309\u5468",value:"WEEK"},{title:"\u6309\u6708",value:"MONTH"}],d={aspect:[{title:"\u5173\u6ce8\u91cf",value:"count"},{title:"\u63d0\u53ca\u7387",value:"rate"}],product:[{title:"\u4f1a\u8bdd\u91cf",value:"count"},{title:"\u63d0\u53ca\u7387",value:"rate"}]},m=[{title:"\u6309\u5e73\u53f0",value:"SOURCE"},{title:"\u6309\u5e97\u94fa",value:"SHOP"}],h={c0:["cem_cumulate-colour","cem_cumulate-twocolour","\u5806\u79ef\u56fe"],c1:["cem_cumulate","cem_cumulate-col","\u5806\u53e0\u56fe"],c2:["cem_cumulate-alone","cem_cumulate-alone-col","\u603b\u91cf\u56fe"]},f=n(41192),v=n(43036),g={product:"\u63d0\u53ca\u7387=\u8be5\u5546\u54c1\u7684\u4f1a\u8bdd\u91cf\xf7\u6240\u6709\u5546\u54c1\u7684\u4f1a\u8bdd\u91cf\u603b\u548c",aspect:"\u63d0\u53ca\u7387=\u8be5\u5173\u6ce8\u70b9\u7684\u5173\u6ce8\u91cf\xf7\u6240\u6709\u5173\u6ce8\u70b9\u7684\u5173\u6ce8\u91cf\u603b\u548c"};const y=function(e){var t=e.title,n=e.data,y=e.onMoreClick,E=e.loading,S=e.timeType,C=e.onFilterChange,N=e.platformType,k=e.pageType,w=a.useState(void 0),b=w[0],V=w[1],x=a.useState(null),O=x[0],_=x[1],L=a.useState("count"),I=L[0],D=L[1];return a.useEffect((function(){if(b)if((0,r.P)(n)){var e=function(e,t,n,a,l){var i="rate"===a,r=i?1:"all"===n?2:0,o=(0,s.Z)({},e.dataset[r],{sourceHeader:!1}),p=Array.from({length:"all"===n?1:e.length}),d=(0,c.jD)(t,14),m=l-426,h=t;if(m<d)for(var f=0,v=t.length;f<v;f++)if(h=t.substring(0,v-1-(f+1)),(d=(0,c.jD)(h+"...",12))<=m){h+="...";break}return{title:{text:h,textStyle:{width:l-426}},grid:{left:40,right:44,top:95,bottom:36,containLabel:!0},dataset:o,tooltip:{trigger:"axis",enterable:!0,confine:!0,extraCssText:"max-height: 320px; overflow: auto; min-width: 180px; ",appendToBody:!0,axisPointer:{type:"line"},formatter:function(e){return e.reduce((function(t,n,a){var l=n.encode,r=n.marker,o=n.seriesName,s=n.value[l.y[0]];return s=i?0===s?"0%":(100*s).toFixed(2)+"%":s,a===e.length-1?[].concat(t,[r+" "+o+"\uff1a"+s,"\u65e5\u671f\uff1a"+e[0].name]):[].concat(t,[r+" "+o+"\uff1a"+s])}),[i?"\u63d0\u53ca\u7387":"\u4f1a\u8bdd\u91cf"]).join("<br/>")}},legend:{top:50,left:16,itemWidth:16,itemHeight:16,icon:u.W4.lineRing},xAxis:{type:"category",boundaryGap:!1,axisTick:{show:!0},axisLabel:{show:!0}},yAxis:{axisTick:{show:!0,alignWithLabel:!0},axisLabel:{showMinLabel:!1,showMaxLabel:"rate"===a,formatter:function(e){return"rate"===a?(100*e).toFixed(0)+"%":e}}},series:p.map((function(){return{type:"line",stack:n,seriesLayoutBy:"row",symbol:1===o.source[0].length?"circle":"none",areaStyle:{opacity:.1}}}))}}(n,n.title,O,I,b.getWidth());b.clear(),b.setOption(e)}else V(void 0)}),[n,b,O,I]),a.createElement(r.Z,{data:n,className:"yt-trend-line-chart-wrapper",renderTitle:a.createElement(o.Z,{data:n,onMoreClick:function(e){return function(e,t,n,a){var l=void 0;if("image"===t)l=e;else if("data"===t){var i=n.dataset[0],r=i.dimensions,o=i.source,s=JSON.parse(JSON.stringify(o));r.forEach((function(e,t){s[t].splice(0,0,e)})),l=[s]}a({type:t,obj:l,name:e.getOption().title[0].text})}(b,e,n,y)},title:t},a.createElement(i.Z,{onChange:function(e){"SHOP"===e.trendPlatformType&&null!==O&&_(null),C(e)},objName:"trendPlatformType",activeObj:N,options:m}),"overview"!==k&&a.createElement("div",{className:"hint-button"},a.createElement(i.Z,{onChange:function(e){var t=e.sType;"rate"===t&&null!==O&&_(null),D(t)},objName:"sType",activeObj:I,options:d[k]}),"rate"===I&&a.createElement(v.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:g[k]},a.createElement("i",{className:"icon-cem_file1 hine"}))),a.createElement(i.Z,{onChange:C,objName:"trendTimeType",activeObj:S,options:p}),a.createElement(f.Z,{onChange:function(e){_("c0"===e?null:"c1"===e?"stack":"all")},chartType:null===O?"c0":"stack"===O?"c1":"c2",options:h,enable:"rate"===I,notLimitList:["c0"]}))},a.createElement(l.Z,{theme:"yunting_multi_color",showLoading:E,loadingOption:{text:"",color:"#20a0ff"},option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return V(e)}}))}},22120:(e,t,n)=>{n.d(t,{R:()=>a});var a=[{id:"ENTRANCE_URL",name:"\u5165\u53e3\u94fe\u63a5"},{id:"SESSION",name:"\u4f1a\u8bdd\u4e2d"}]},24473:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(87462),l=n(63366),i=n(94578),r=n(67294),o=n(45697),s=n.n(o),c=n(94184),u=n.n(c),p=["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"],d=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.prefixCls,i=t.children,o=t.className,s=t.block,c=t.indeterminate,d=t.value,m=t.checked,h=t.defaultChecked,f=t.onChange,v=t.disabled,g=(0,l.Z)(t,p),y={value:d,checked:m,defaultChecked:h,onChange:f,disabled:v},E=u()(n,((e={})[n+"-disabled"]=y.disabled,e[n+"-block"]=s,e[n+"-indeterminate"]=c,e),o);return r.createElement("label",(0,a.Z)({tabIndex:y.disabled?-1:0,className:E},g),r.createElement("input",(0,a.Z)({type:"checkbox",className:n+"-input"},y)),r.createElement("span",{className:n+"-status"}),i&&r.createElement("span",{className:n+"-text",title:i},i))},t}(r.Component);d.propTypes={prefixCls:s().string,value:s().oneOfType([s().string,s().number]),checked:s().bool,defaultChecked:s().bool,onChange:s().func,indeterminate:s().bool,disabled:s().bool,block:s().bool},d.defaultProps={prefixCls:"wt-checkbox"};const m=d},85151:(e,t,n)=>{n.d(t,{Jg:()=>a.Z,CS:()=>h});var a=n(24473),l=n(87462),i=n(63366),r=n(94578),o=n(67294),s=n(45697),c=n.n(s),u=n(94184),p=n.n(u),d=["prefixCls","children","className","onChange","values","checkedList","block"],m=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).handleCheckBoxChange=function(e){var n=t.props.onChange;n&&n(e)},t}return(0,r.Z)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,a=n.prefixCls,r=n.children,s=n.className,c=(n.onChange,n.values),u=n.checkedList,m=n.block,h=(0,i.Z)(n,d);return e=c?c.map((function(e,n){var a=0!==u.length&&-1!==u.indexOf(e);return o.createElement(Checkbox,{key:n,value:e,checked:a,onChange:function(e){return t.handleCheckBoxChange(e)},block:m},e)})):o.Children.map(r,(function(e,n){if(e){var a=e.props,l=a.value,i=0!==u.length&&-1!==u.indexOf(l);return o.cloneElement(e,{checked:i,key:n,block:a.block||m,onChange:function(){var e=a.value;t.handleCheckBoxChange(e)}})}})),o.createElement("div",(0,l.Z)({className:p()(a,s)},h),e)},t}(o.Component);m.defaultProps={prefixCls:"wt-checkbox-group"},m.propTypes={onChange:c().func,values:c().array,block:c().bool};const h=m;var f=function(e){var t={};return Object.keys(e).forEach((function(n){/^data\-.+$/.test(n)&&(t[n]=e[n])})),t},v=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=f(e);return o.createElement("label",{className:e.className,title:e.children},o.createElement("div",{className:"checkbox"},o.createElement("input",(0,l.Z)({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),o.createElement("div",{className:"checkbox-body"})),"\xa0",o.createElement("span",null,e.children))},t}(o.Component);v.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}},25022:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(67294),l=n(92360),i=n(35303),r=n(45697),o=n.n(r),s=[{label:"10\u9879/\u9875",value:10},{label:"20\u9879/\u9875",value:20},{label:"40\u9879/\u9875",value:40},{label:"100\u9879/\u9875",value:100}];const c=function(e){var t=e.onPageChange,n=e.onSizeChange,r=e.total,o=void 0===r?0:r,c=e.pageIndex,u=e.pageSize,p=e.layout,d=e.className,m=e.currLength,h=0===o?0:(c-1)*u+1,f=0===o?0:m?h+m-1:h+u-1;return 0===o?null:a.createElement("div",{className:"yt-awp-pagination "+(d||"")},a.createElement("span",{className:"total_num"},a.createElement("span",null,h+" - "+f+" "),"\u9879\uff0c\u5171",a.createElement("span",null," "+o+" "),"\u9879"),a.createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},a.createElement(l.Pagination,{small:!0,pageSize:u,currentPage:c,pageCount:Math.ceil(o/u),layout:0===o?"":"prev, pager, next",onCurrentChange:t}),void 0===p||p.includes("sizes")?a.createElement(i.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:u||10,onChange:n},s.map((function(e,t){return a.createElement(i.Wx,{key:t,label:e.label,value:e.value},e.label)}))):null))};o().propTypes={onPageChange:o().func,onSizeChange:o().func,total:o().number,pageIndex:o().number,pageSize:o().number,layout:o().string,className:o().string}},71339:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(67294),l=n(92360),i=n(25022),r=n(45697),o=n.n(r),s=function(e){var t=e.data,n=e.total,r=void 0===n?0:n,o=e.loading,s=e.pageIndex,c=e.columns,u=e.pageSize,p=e.onPageChange,d=e.onPageSizeChange,m=e.onSortChange,h=e.defaultSort,f=e.className,v=void 0===f?"":f;return a.useEffect((function(){var e=document.getElementsByClassName("is-sortable")[0];h&&e&&e.classList.add(h.order)}),[h]),a.createElement("div",{className:"yt-awp-content-list "+v},a.createElement(l.Loading,{loading:o,className:"awp-content-loading"},a.createElement(l.Table,{defaultSort:h,columns:c,style:{width:"100%"},data:t,onSortChange:function(e){return m(e)}})),p&&a.createElement(i.Z,{onPageChange:p,onSizeChange:d,total:r,currLength:t.length,pageIndex:s,pageSize:u}))};s.propTypes={data:o().array,total:o().number,loading:o().bool,pageIndex:o().number,columns:o().array,pageSize:o().number,onPageChange:o().func,onPageSizeChange:o().func,onSortChange:o().func,defaultSort:o().any,className:o().string};const c=s},67641:(e,t,n)=>{n.d(t,{Z:()=>U});var a=n(63366),l=n(87462),i=n(94578),r=n(67294),o=n(45697),s=n.n(o),c=n(43144),u=n(92360);const p=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.onConfirm,a=t.onCancel,l=t.style;return r.createElement("div",{className:"bottom_bar",style:l||{}},r.createElement("ul",{className:"handle"},this.props.screeningValues.filter((function(e){return"aspect"!==e.id&&"product"!==e.id})).length>0&&r.createElement("li",null,r.createElement("span",{className:"clear",onClick:function(){return e.props.clearAllValues()}},"\u6e05\u7a7a\u9009\u9879"))),r.createElement(u.Button,{type:"primary",onClick:function(){n&&n()}},"\u67e5\u8be2"),r.createElement(u.Button,{onClick:function(){a&&a()}},"\u53d6\u6d88"))},t}(r.PureComponent);var d=n(85151),m=n(43036),h=100,f=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleCheckedAll=function(e){var t,a=n.props,l=a.data,i=a.changeState,r=a.allListLength,o=n.state.checkedList;if(r>h){var s=l.slice(0,h).map((function(e){return e.id}));t=e.target.checked?Array.from(new Set(s.concat(o))):o.filter((function(e){return!s.includes(e)}))}else t=e.target.checked?l.map((function(e){return e.id})):[];n.setState({newCheckedList:t}),i&&i(t,n.props.secondValue)},n.handleChange=function(e){Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};var t=n.state.checkedList,a=n.props.changeState;-1===t.indexOf(e)?t.push(e):t.remove(e),n.setState({checkedList:t}),a&&a(t,n.props.secondValue)},n.handleSecondChange=function(e,t){var a=n.props,l=(a.data,a.secondValue),i=a.changeState;Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},l.some((function(n){return n.id===e&&(n.values.indexOf(t)>-1?n.values.remove(t):n.values.push(t),!0)}))||l.push({id:e,values:[t]}),i&&i(n.props.checkedList,l.filter((function(e){return e.values.length>0})))},n.competeOpen=function(){n.checkBox.offsetHeight>45?n.setState({showOpen:!0}):n.setState({showOpen:!1})},n.renderSecondList=function(e){var t=n.props,a=t.secondValue,l=t.secondInfo,i=n.state,o=i.showSecond,s=i.searchKeywords;return r.createElement("div",{className:"second-list"},r.createElement("span",{className:"name",onClick:function(e){return n.setState({showSecond:!o})}},r.createElement("i",{className:o?"icon-cem_data-collection":"icon-cem_unfolding-data"}),r.createElement("span",null,l.name)),o&&e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(s.toLowerCase())})).map((function(e,t){var l=a.filter((function(t){return t.id===e.id})).length>0?a.filter((function(t){return t.id===e.id}))[0].values:[];return r.createElement("div",{key:t,className:"second-wrap"},r.createElement("span",{className:"title-second"},e.name),r.createElement("div",{className:"check-wrap"},e.child.map((function(t,a){return r.createElement(d.Jg,{className:"checkbox-yt",onChange:function(){return n.handleSecondChange(e.id,t.id)},key:t.id,value:t.id,checked:-1!==l.indexOf(t.id)},t.name)}))))})))},n.state={checkedList:t.checkedList||[],open:!1,showOpen:!1,showSecond:!0,searchKeywords:t.searchKeywords},n}(0,i.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var t=this;(e.checkedList||e.searchKeywords)&&this.setState({checkedList:e.checkedList,searchKeywords:e.searchKeywords},(function(){return t.competeOpen()}))},n.componentDidMount=function(){this.competeOpen(),window.addEventListener("resize",this.competeOpen)},n.componentWillUnmount=function(){window.removeEventListener("resize",this.competeOpen)},n.render=function(){var e=this,t=this.state,n=t.checkedList,a=t.open,l=t.showOpen,i=t.searchKeywords,o=this.props,s=o.data,c=o.categoryTitle,u=o.title,p=o.close,f=o.onSearch,v=s.map((function(e){return e.id})),g=n.filter((function(e){return v.indexOf(e)>=0})),y=!!g.length&&s.slice(0,h).every((function(e){return n.includes(e.id)})),E=!y&&!!g.length&&s.slice(0,h).some((function(e){return n.includes(e.id)})),S=s.filter((function(e){return n.includes(e.id)&&e.child&&e.child.length>0}));return r.createElement("div",{className:"checkbox-panel-yt"},r.createElement("span",{className:"title"},u,f&&r.createElement(m.Z,{overlay:"\u6309\u4e3b\u9898\u503c\u641c\u7d22",placement:"top"},r.createElement("i",{className:"icon-cem_search search",onClick:function(e){return f()}}))),r.createElement(d.Jg,{className:"check-all",checked:y,indeterminate:E,onChange:this.handleCheckedAll,disabled:this.props.disabled},c||"\u5168\u9009"),r.createElement("div",{className:"all-checkbox",style:{height:a?"":"38px"}},r.createElement("span",{className:"more"},l&&r.createElement("i",{className:"open",onClick:function(t){return e.setState({open:!a})}},a?"\u6536\u8d77":"\u66f4\u591a",r.createElement("i",{className:a?"icon-cem_pull-or-take-up":"icon-cem_pull-down-or-take-up"})),p&&r.createElement("i",{className:"close",onClick:p},"\xd7")),r.createElement("div",{className:"check-box",ref:function(t){return e.checkBox=t}},s&&s.filter((function(e){return!i||-1!==e.name.toLowerCase().indexOf(i.toLowerCase())})).slice(0,h).map((function(t){return r.createElement(d.Jg,{className:"checkbox-yt",onChange:function(){return e.handleChange(t.id)},key:t.id,value:t.id,checked:-1!==n.indexOf(t.id),disabled:e.props.disabled},t.name)})),s&&s.length>h&&r.createElement("div",{className:"tip"},"\u2014 \u8be5\u6570\u503c\u5c55\u793a\u4e0d\u4f1a\u8d85\u8fc7",h,"\u6761,\u9700\u8981\u67e5\u770b\u66f4\u591a\u8bf7\u641c\u7d22"))),S.length>0&&this.renderSecondList(S))},t}(r.Component);f.propTypes={checkedList:s().array,secondInfo:s().array,secondValue:s().array,data:s().array,allListLength:s().oneOfType([s().number,s().string]),changeState:s().func,searchKeywords:s().string,onSearch:s().func,title:s().oneOfType([s().number,s().string]),close:s().func};var v=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleChange=function(e){var t=n.props.changeState;t&&t(e)},n.competeOpen=function(){n.checkBox.offsetHeight>45?n.setState({showOpen:!0}):n.setState({showOpen:!1})},n.state={open:!1,showOpen:!1,showSecond:!0},n}(0,i.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var t=this;(e.checkedList||e.searchKeywords)&&this.setState({checkedList:e.checkedList},(function(){return t.competeOpen()}))},n.componentDidMount=function(){this.competeOpen(),window.addEventListener("resize",this.competeOpen)},n.componentWillUnmount=function(){window.removeEventListener("resize",this.competeOpen)},n.render=function(){var e=this,t=this.state,n=t.open,a=t.showOpen,l=this.props,i=l.data,o=l.title,s=l.close;l.onSearch;return r.createElement("div",{className:"radio-panel-yt-header"},r.createElement("span",{className:"title"},o),r.createElement("div",{className:"all-radio",style:{height:n?"":"38px",marginLeft:"-24px"}},r.createElement("span",{className:"more"},a&&r.createElement("i",{className:"open",onClick:function(t){return e.setState({open:!n})}},n?"\u6536\u8d77":"\u66f4\u591a",r.createElement("i",{className:n?"icon-cem_pull-or-take-up":"icon-cem_pull-down-or-take-up"})),s&&r.createElement("i",{className:"close",onClick:s},"\xd7")),r.createElement("div",{className:"check-box",ref:function(t){return e.checkBox=t}},r.createElement(u.Radio.Group,{value:this.props.value,onChange:function(t){e.handleChange(t)}},i&&i.map((function(e){return r.createElement(u.Radio,{className:"checkbox-yt",key:e.id,value:e.id},e.name)}))))))},t}(r.Component);v.propTypes={value:s().string,data:s().array,changeState:s().func,searchKeywords:s().string,onSearch:s().func,title:s().oneOfType([s().number,s().string]),close:s().func};var g=n(49722),y=n(35239),E=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setEvent=function(e){return 0===e?{onMouseEnter:function(){n.setState({firstLiHover:!0})},onMouseLeave:function(){n.setState({firstLiHover:!1})}}:{}},n.setDefaultValue=function(){var e=n.getValue();g.h.post("/default/value/update",{projectId:y.t.get(y.V.curProject).id,key:"PRODUCT_ANALYSIS_OBJ",value:JSON.stringify(e)}).then((function(t){n.setState({defaultSelectValue:e,shouldUpdataDefaultSelectValue:!1})}))},n.state={options:[{}],sel:[{name:""},{name:""}],defaultSelectValue:n.props.defaultSelectValue,shouldUpdataDefaultSelectValue:!0,value:{},firstLiHover:!1},n}(0,i.Z)(t,e);var n=t.prototype;return n.onSel=function(e,t){var n=this,a=this.state.options;a.forEach((function(e){return e.sel=!1})),a[t].sel=!0,this.setState({options:a},(function(e){return n.props.onChange&&n.props.onChange(n.getValue())}))},n.getValue=function(){return JSON.parse(JSON.stringify(this.state.options)).filter((function(e){return e.sel}))[0]},n.UNSAFE_componentWillReceiveProps=function(e){if(e.options||e.value){var t=JSON.parse(JSON.stringify(e.options)),n=JSON.parse(JSON.stringify(e.value));t.forEach((function(e){e.id===n.id&&(e.sel=!0)})),this.setState({options:t,value:n}),this.state.shouldUpdataDefaultSelectValue&&this.setState({defaultSelectValue:e.defaultSelectValue})}},n.UNSAFE_componentWillMount=function(){var e=this.props.options,t=this.props.value?this.props.value:{};e.forEach((function(e){e.id===t.id&&(e.sel=!0)})),this.setState({options:e,value:t})},n.componentWillUnmount=function(){},n.render=function(){var e=this,t=this.state,n=t.options,a=t.defaultSelectValue,i=n[0]&&n[0].sel;return r.createElement("div",{className:"selItem "+(this.props.triangle?"triangle":"")+" "+(this.state.firstLiHover||i?"selPadHover":""),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},r.createElement("div",{className:"wrap"},r.createElement("ul",null,n.length>0?n.map((function(t,n){return r.createElement("li",(0,l.Z)({className:(t.sel?"sel":"")+(t.disable?" disable":""),key:n,onClick:function(t){return e.onSel(t,n)}},e._setEvent(n)),r.createElement("span",null,t.name),!e.props.noCollect&&t.sel&&r.createElement("i",{className:"default icon-cem_star",style:{color:a.id===t.id?"#D5B437":"#8C8C8C",opacity:a.id===t.id?"1":""},onClick:a.id===t.id?null:e.setDefaultValue}),r.createElement("i",{className:"check cem-icon icon-cem_arrow-thick"}))})):r.createElement("div",{className:"noData"},"\u65e0\u6570\u636e"))))},t}(r.Component);E.propTypes={noCollect:s().bool,options:s().array,value:s().object,onChange:s().func};var S=n(5133),C=function(e){function t(){var t;return(t=e.call(this)||this).sortList=function(e,n,a){a.stopPropagation(),a.nativeEvent.stopImmediatePropagation();var l=JSON.parse(JSON.stringify(t.state.value)),i=l.splice(e,1)[0];switch(n){case"top":l.unshift(i);break;case"up":l.splice(e-1,0,i);break;case"down":l.splice(e+1,0,i)}t.setState({value:l},(function(e){return t.props.onChange&&t.props.onChange(t.getValue())}))},t._setEvent=function(e){return 0===e?{onMouseEnter:function(){t.setState({firstLiHover:!0})},onMouseLeave:function(){t.setState({firstLiHover:!1})}}:{}},t.state={options:[],value:[],showSel:!1,firstLiHover:!1,searchWord:""},t}(0,i.Z)(t,e);var n=t.prototype;return n.onSel=function(e,t){var n=this,a=this.state.options,l=this.state.value;!t.sel&&this.props.limit&&l.length>=this.props.limit?S.Z.warning("\u6700\u591a\u9009\u62e9"+this.props.limit+"\u4e2a\u5bf9\u8c61\uff01"):(a.forEach((function(e){e.id===t.id&&(n.props.singelSel?(e.sel=!0,l=[e]):(e.sel=!e.sel,e.sel?l.push(e):l.some((function(e,n){return e.id===t.id&&(l.splice(n,1),!0)}))))})),this.setState({options:a,value:l},(function(e){return n.props.onChange&&n.props.onChange(n.getValue())})))},n.getValue=function(){return this.state.value},n.UNSAFE_componentWillReceiveProps=function(e){if(e.options||e.value){var t=JSON.parse(JSON.stringify(e.options)),n=JSON.parse(JSON.stringify(e.value));t.forEach((function(e){n.map((function(e){return e.id})).includes(e.id)?e.sel=!0:e.sel=!1})),this.setState({options:t,value:n})}},n.UNSAFE_componentWillMount=function(){var e=this.props,t=e.options,n=e.value,a=void 0===n?[]:n;t.forEach((function(e){a.map((function(e){return e.id})).includes(e.id)&&(e.sel=!0)})),this.setState({options:t,value:a})},n.componentWillUnmount=function(){},n.render=function(){var e=this,t=this.state,n=t.options,a=t.value,i=t.searchWord,o=[];return a.length>0&&n.filter((function(e){return e.sel})).length>0&&a.forEach((function(e){n.filter((function(t){return t.id===e.id}))[0]&&o.push(n.filter((function(t){return t.id===e.id}))[0])})),r.createElement("div",{className:"analyze-object-sort-select"},r.createElement("div",{className:"selItem "+(this.props.triangle?"triangle":"")+" "+(this.state.firstLiHover?"selPadHover":""),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},r.createElement("div",{className:"wrap"},r.createElement("div",null,r.createElement(u.Input,{value:i,placeholder:"\u8f93\u5165\u641c\u7d22\u5173\u952e\u8bcd",className:"search",icon:"close",onChange:function(t){return e.setState({searchWord:t})},onIconClick:function(){return e.setState({searchWord:""})}})),r.createElement("ul",null,o.length>0&&o.filter((function(e){return!i||-1!==e.name.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())})).map((function(t,n){return r.createElement("li",(0,l.Z)({className:(t.sel?"sel":"")+(t.disable?" disable":""),key:n,onClick:function(n){return e.props.singelSel?"":e.onSel(n,t)}},e._setEvent(n)),!e.props.singelSel&&r.createElement(d.Jg,{className:"check-all",checked:t.sel,onChange:function(e){}}),r.createElement("span",null,t.name),!e.props.singelSel&&r.createElement("div",{className:"handle"},0!==n&&r.createElement("i",{title:"\u7f6e\u9876",onClick:function(t){e.sortList(n,"top",t)},className:"icon-cem_roof-placement"}),0!==n&&r.createElement("i",{title:"\u4e0a\u4e00\u4f4d",onClick:function(t){e.sortList(n,"up",t)},className:"icon-cem_upper"}),n!==o.length-1&&r.createElement("i",{title:"\u4e0b\u4e00\u4f4d",onClick:function(t){e.sortList(n,"down",t)},className:"icon-cem_lower"})))})),o.length>0&&n.filter((function(e){return!e.sel})).length>0&&r.createElement("div",{className:"line"}),n.filter((function(e){return!e.sel})).length>0&&n.filter((function(e){return!e.sel})).filter((function(e){return!i||-1!==e.name.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())})).map((function(t,n){return r.createElement("li",{className:(t.sel?"sel":"")+(t.disable?" disable":""),key:n,onClick:function(n){return e.onSel(n,t)}},!e.props.singelSel&&r.createElement(d.Jg,{className:"check-all",checked:t.sel,onChange:function(e){}}),r.createElement("span",{className:"dark"},t.name))})),0===n.length&&r.createElement("div",{className:"noData"},"\u65e0\u6570\u636e")))))},t}(r.Component);C.propTypes={options:s().array,value:s().array,onChange:s().func,singelSel:s().bool};var N=function(e){function t(t){var n;return(n=e.call(this,t)||this).stop=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.getPropsValue=function(){var e=n.props.value;e&&e[0]&&e[0].id&&(n.setState({selectValue:{id:e[0].id,name:e[0].name}},(function(){return n.copyVal=n.getValue()})),e[0].values&&n.setState({sortSelectValue:e[0].values},(function(){return n.copyVal=n.getValue()})))},n.setShowSelFalse=function(){n.state.show&&(n.setState({selectValue:n.copyVal?{id:n.copyVal[0].id,name:n.copyVal[0].name}:{},sortSelectValue:n.copyVal&&n.copyVal[0].values?n.copyVal[0].values:[]}),n.cancel()),n.state.show&&n.setState({show:!1})},n.cancel=function(){n.setState({show:!1})},n.onSelChange=function(e,t){var a;n.setState(((a={})[e]=t,a)),"selectValue"===e&&n.setState({sortSelectValue:[]})},n.state={list:t.list||[],selectValue:{},sortSelectValue:[],show:!1,triangle:"select"},n}(0,i.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){if(this.props.left&&this.props.left<-200&&this.setState({triangle:"sortSelect"}),this.props.value){var e=this.props.value;this.setState({selectValue:{id:e.id,name:e.name},sortSelectValue:e.values})}},n.componentDidMount=function(){var e=this;this.getPropsValue(),window.addEventListener("click",this.setShowSelFalse),this.props.left&&document.querySelectorAll(".analyze-object").forEach((function(t){return t.style.setProperty("--x",e.props.left+"px")}))},n.componentWillUnmount=function(){window.removeEventListener("click",this.setShowSelFalse)},n.getValue=function(){return this.state.selectValue.id?[{id:this.state.selectValue.id,values:this.state.sortSelectValue,name:this.state.selectValue.name}]:{}},n.changeShow=function(e){var t=this;this.state.show&&this.stop(e),setTimeout((function(){t.setState({show:!t.state.show})}),0)},n.render=function(){var e=this,t=this.state,n=t.list,a=t.selectValue,l=t.sortSelectValue,i=t.defaultSelectValue,o=t.show,s=t.triangle,c=n.map((function(e){return{id:e.id,name:e.name}})),p=this.props.close,d=n.filter((function(e){return e.id===a.id}))[0]?n.filter((function(e){return e.id===a.id}))[0].values.map((function(e){return delete e.sel,e})):[],m=a.name?a.name+(l[0]&&l[0].name?" | "+l[0].name:""):"\u8bf7\u9009\u62e9";return r.createElement("div",{className:"checkbox-panel-yt-point"},r.createElement("span",{className:"title"},"\u5173\u6ce8\u70b9"),r.createElement("div",{className:"all-checkbox",style:{height:open?"":"38px"}},r.createElement("span",{className:"more"},p&&r.createElement("i",{className:"close",onClick:p},"\xd7")),r.createElement("div",{className:"check-box",ref:function(t){return e.checkBox=t}},r.createElement("div",{className:"analyze-object"},r.createElement("div",{className:"analyze-object-select",onClick:function(t){return e.changeShow(t)}},r.createElement("div",{className:"infor "+(o?"sel":"")},r.createElement("span",null,m),r.createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:o?"rotate(-180deg)":""}})),o&&r.createElement(E,{noCollect:!0,options:c,defaultSelectValue:i,value:a,onChange:function(t){return e.onSelChange("selectValue",t)},triangle:"select"===s})),o&&r.createElement(C,{singelSel:!0,options:d,limit:this.props.limit,value:l,onChange:function(t){return e.onSelChange("sortSelectValue",t)},triangle:"sortSelect"===s}),o&&r.createElement("div",{className:"footer",onClick:function(t){return e.stop(t)}},c.length>0&&r.createElement("div",{className:"control"},r.createElement(u.Button,{type:"primary",disabled:!c.length||!d.length||!a.id,onClick:function(){e.copyVal=e.getValue(),e.cancel(),e.props.onChange&&e.props.onChange(e.getValue())}},"\u786e\u5b9a"),r.createElement("span",{className:"cancel",onClick:function(){e.setState({selectValue:e.copyVal?{id:e.copyVal[0].id,name:e.copyVal[0].name}:{},sortSelectValue:e.copyVal&&e.copyVal[0].values?e.copyVal[0].values:[]}),e.cancel()}},"\u53d6\u6d88")))))))},t}(r.Component);const k=function(e){var t=e.searchInfo,n=e.onInput,a=e.onClose,l=r.useState(!0),i=l[0];l[1];return r.createElement("div",{className:"filter-search-wrap"},r.createElement("div",{className:"search"},r.createElement("span",null,r.createElement("i",{className:"icon-cem_search"}),r.createElement("span",null,t.name+":")),r.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u8bcd",autoFocus:!0,value:t.keyword,onInput:function(e){return i&&n(e)}})),r.createElement("i",{className:"icon-cem_delete del",onClick:a}))};const w=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleChangeSel=function(e,t){n.props.screeningValuesChange({values:[{listDetail:e,values:t}],type:n.props.type})},n.renderCheckBox=function(e,t,a){var l=n.state.searchInfo;return r.createElement(f,{key:t,checkedList:a,data:e.list,changeState:function(t){return n.handleChangeSel(e,t)},searchKeywords:l.id===e.id?l.keyword:"",onSearch:function(){n.setState({searchInfo:{isSearching:!0,id:e.id,name:e.name,keyword:""}})},title:e.name})},n._handelKeywordChange=function(e){var t=n.state.searchInfo;n.setState({searchInfo:{isSearching:!0,id:t.id,name:t.name,keyword:e.target.value}})},n._handelKeywordClose=function(){return n.setState({searchInfo:{isSearching:!1,id:"",name:"",keyword:""}})},n.state={searchInfo:{isSearching:!1,id:"",name:"",keyword:""}},n}(0,i.Z)(t,e);var n=t.prototype;return n.renderRadio=function(e,t,n){var a=this;return r.createElement(v,{key:t,value:n,data:e.list,changeState:function(t){return a.handleChangeSel(e,t)},onSearch:function(e){},title:e.name})},n.renderCascade=function(e,t,n){var a=this;return r.createElement(N,{left:-66,key:t,list:e.list,value:n,onChange:function(t){return a.handleChangeSel(e,t)}})},n.componentDidMount=function(){},n.render=function(){var e=this,t=this.props.screeningList,n=this.state.searchInfo;return r.createElement("div",{className:"screening_view"},r.createElement("div",{className:"screening"},n.isSearching&&r.createElement(k,{searchInfo:n,onInput:this._handelKeywordChange,onClose:this._handelKeywordClose}),t.map((function(t,n){var a=e.props.screeningValues.filter((function(e){return e.id===t.id}))[0]?e.props.screeningValues.filter((function(e){return e.id===t.id}))[0].values:[];switch(t.type){case"checkbox":return e.renderCheckBox(t,n,a);case"radio":return e.renderRadio(t,n,a);case"cascade":return e.renderCascade(t,n,a);default:return null}}))))},t}(r.Component);const b=function(e){function t(t){var n;return(n=e.call(this,t)||this).onConfirm=function(){n.props.handelChange(),n.props.handelChangeShow(!1)},n.onCancel=function(){n.props.handelChangeShow(!1)},n.clearAllValues=function(){n.props.clearAllValues({type:n.props.type})},n.state={},n}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,t=(e.handelChangeShow,e.screeningValues);return r.createElement("div",{className:"screening_wrap_view"},r.createElement(w,this.props),r.createElement(p,{onConfirm:this.onConfirm,onCancel:this.onCancel,clearAllValues:this.clearAllValues,screeningValues:t}))},t}(r.Component);const V=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e._handelClick,n=e.select,a=e.name,l=e.style;return r.createElement("div",{className:"HeaderButton",style:l||{}},r.createElement("div",{className:n?"sel wrap":"wrap",onClick:function(){return t()}},r.createElement("i",{className:"icon-cem_screen"}),r.createElement("span",null,a),r.createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:n?"rotate(180deg) translateY(-1px)":""}})))},t}(r.PureComponent);var x=n(77131);function O(e,t,n){return g.h.post("/default/value/update",{key:e,projectId:t,value:n})}var _=n(97189),L="empty";const I=function(e){function t(t){var n;return(n=e.call(this,t)||this).getSelectedFilterObj=function(){return n.state.selFilterObj},n._handleListSelect=function(e,t){e.stopPropagation(),n.props.onFilterChange(t),n.setState({selFilterObj:t})},n._handleListStar=function(e,t,a){e.stopPropagation(),n.lastStaredSaveId=t;var l=n.state,i=l.staredFilterId,r=l.savedKey,o=l.projectId,s=l.staredFilterIndex;if(i!==t){if(-1!==s){var c=document.querySelectorAll(".saved-condition-list .star")[s].children[1];(0,_.removeClass)(c,"star-active")}(0,_.addClass)(e.target.parentNode,"star-active")}else(0,_.removeClass)(e.target.parentNode,"star-active");n.setState({staredFilterIndex:a,staredFilterId:i===t?L:t},(function(){O(r,o,n.state.staredFilterId).then((function(e){2e4!==e.data.code&&n.setState({staredFilterId:n.lastStaredSaveId})}))}))},n._handleOnEditClick=function(e,t){e.stopPropagation(),n.refs.saveNameInput.refs.input.value=t.name,n.setState({targetFilterObj:t,editDialogVisible:!0})},n._handleConfitionSaveConfirm=function(){var e,t=n.state,a=t.selFilterObj,l=t.projectId,i=t.targetFilterObj,r=n.props,o=r.model,s=r.onFilterRename;(e=i.id,g.h.post("/filter/find/save",{id:e})).then((function(e){var t=e.data;if(2e4===t.code){var r=n.refs.saveNameInput.refs.input.value;i.id===a.id&&s&&s(r),function(e,t,n,a,l,i){return g.h.post("/filter/add",{name:e,copy:t,type:a,id:n,projectId:l,selected:i})}(r,!1,i.id,o,l,t.result.selected).then((function(e){2e4===e.data.code&&(S.Z.success("\u4fee\u6539\u6210\u529f"),n.setState({editDialogVisible:!1}),n.refresh(a.id))}))}}))},n._handleOnDeleteClick=function(e,t){e.stopPropagation(),n.setState({targetFilterObj:t,delDialogVisible:!0})},n._handleOnDeleteConfirm=function(e){e.stopPropagation();var t,a=n.state,l=a.targetFilterObj,i=a.savedKey,r=a.projectId,o=a.staredFilterId,s=a.filterList,c=a.selFilterObj,u=[(t=l.id,g.h.post("/filter/delete",{id:t,menuModel:{}}))];o===l.id&&u.push(O(i,r,L)),Promise.all(u).then((function(e){2e4===e[0].data.code&&n.refresh(l.id===c.id?void 0:c.id)})),l.id===c.id&&n.props.onFilterChange(s[0])},n.renderDeleteDialog=function(){var e=n.state,t=e.selFilterObj,a=e.targetFilterObj;return r.createElement("div",{onMouseLeave:function(e){return e.stopPropagation()}},r.createElement(u.Dialog,{title:"\u5220\u9664",className:"delete-saved-confition-dialog",size:"tiny",modal:!1,visible:n.state.delDialogVisible,onMouseLeave:function(e){return e.stopPropagation()},onCancel:function(e){return n.setState({delDialogVisible:!1})}},r.createElement(u.Dialog.Body,null,r.createElement("span",null,a&&t&&t.id===a.id?"\u5220\u9664\u8be5\u7b5b\u9009\u5668\u540e\uff0c\u5f53\u524d\u9875\u9762\u7684\u7b5b\u9009\u5668\u5c06\u81ea\u52a8\u5207\u6362\u4e3a\u201d\u5168\u90e8\u6570\u636e\uff08\u9ed8\u8ba4\uff09\u201d\u7b5b\u9009\u5668\uff0c\u662f\u5426\u5220\u9664\uff1f":'\u662f\u5426\u5220\u9664"'+a.name+'"\u7b5b\u9009\u5668\uff1f')),r.createElement(u.Dialog.Footer,null,r.createElement(u.Button,{type:"primary",onClick:n._handleOnDeleteConfirm},"\u786e\u5b9a"),r.createElement(u.Button,{type:"default",onClick:function(e){return n.setState({delDialogVisible:!1})}},"\u53d6\u6d88"))))},n.renderEditDialog=function(){return r.createElement("div",{onMouseLeave:function(e){return e.stopPropagation()}},r.createElement(u.Dialog,{title:"\u4fee\u6539\u540d\u79f0",className:"filter-save-name-dialog",size:"tiny",modal:!1,visible:n.state.editDialogVisible,onCancel:function(e){return n.setState({editDialogVisible:!1})}},r.createElement(u.Dialog.Body,null,r.createElement(u.Input,{className:"name-input",placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",ref:"saveNameInput"})),r.createElement(u.Dialog.Footer,null,r.createElement(u.Button,{type:"primary",onClick:n._handleConfitionSaveConfirm},"\u786e\u5b9a"),r.createElement(u.Button,{type:"default",onClick:function(e){return n.setState({editDialogVisible:!1})}},"\u53d6\u6d88"))))},n.state={projectId:y.t.get(y.V.curProject).id,savedKey:t.model+"_SAVED_OBJ",filterList:void 0,selFilterObj:void 0,targetFilterObj:{},staredFilterId:L,staredFilterIndex:-1,isEditing:!1,delDialogVisible:!1,editDialogVisible:!1},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.componentDidUpdate=function(e,t){this.state.filterList;this.props.show===e.show||this.props.show||this.setState({isEditing:!1,fullListShow:!1})},n.componentWillUnmount=function(){},n.refresh=function(e){var t=this,n=this.state,a=n.savedKey,l=n.projectId,i=(n.staredFilterId,this.props),r=i.model,o=(i.onFilterChange,i.shouldShowDefault),s=void 0,c=function(e,t){return g.h.post("/filter/list",{type:e,projectId:t})}(r,l),u=function(e,t){return g.h.post("/default/value/find",{key:e,projectId:t})}(a,l);return Promise.all([c,u]).then((function(n){var a,l,i,r,c=n[0].data;2e4===c.code&&(a=c.result.all).unshift({id:"default",name:"\u5168\u90e8\u6570\u636e\uff08\u9ed8\u8ba4\uff09"});var u=n[1].data;return 2e4===u.code&&(l=u.result||L,i=o?-1:a.findIndex((function(e){return e.id===l})),e&&(r=a.findIndex((function(t){return t.id===e}))),s=r?a[r]:-1===i?a[0]:a[i]),t.setState({delDialogVisible:!1,selFilterObj:s,staredFilterIndex:i,filterList:a,staredFilterId:l,fullListShow:a.length>15&&t.state.fullListShow}),s}))},n.render=function(){var e=this,t=this.state,n=t.filterList,a=t.selFilterObj,l=t.staredFilterId,i=t.isEditing,o=this.props,s=(o.onFilterChange,o.show),c=n?JSON.parse(JSON.stringify(n)):[];return r.createElement("div",{className:"saved-condition-wrapper",style:{display:s?"block":"none",width:c.length>2?"728px":c.length>1?"486px":"278px"}},r.createElement("div",{className:"saved-condition-list"},r.createElement("p",{className:"saved-condition-tip"},"\u63d0\u793a\uff1a\u901a\u8fc7\u7b5b\u9009\u5668\u53ef\u63d0\u9ad8\u56fe\u8868\u67e5\u770b\u6548\u7387"),r.createElement("ul",null,c.map((function(t,n){return r.createElement("li",{className:i?"editing":"star",key:i?"edit"+n:"star"+n,onClick:function(n){return e._handleListSelect(n,t)}},r.createElement("span",{className:a&&a.id===t.id?"active":""},r.createElement("i",{className:"radio"}),r.createElement("span",null,t.name)),"default"!==t.id&&r.createElement("span",{className:"edt-active tool"},r.createElement(m.Z,{placement:"top",overlay:l===t.id?"\u53d6\u6d88\u9ed8\u8ba4":"\u8bbe\u4e3a\u9ed8\u8ba4"},r.createElement("span",{className:l===t.id?"star-active":"",onClick:function(a){return e._handleListStar(a,t.id,n)}},r.createElement("i",{className:l===t.id?"icon-cem_star":"icon-cem_star-line"}))),r.createElement(m.Z,{placement:"top",overlay:"\u91cd\u547d\u540d"},r.createElement("span",{onClick:function(n){return e._handleOnEditClick(n,t)}},r.createElement("i",{className:"icon-cem icon-cem_screening-editor"}))),r.createElement(m.Z,{placement:"top",overlay:"\u5220\u9664"},r.createElement("span",{onClick:function(n){return e._handleOnDeleteClick(n,t)}},r.createElement("i",{className:"icon-cem icon-cem_delete"})))))})))),this.renderDeleteDialog(),this.renderEditDialog())},t}(r.Component);const D=function(e){function t(t){var n;return(n=e.call(this,t)||this).showSaveDialog=function(e){return n.setState({saveVisible:!0,dialogType:e})},n.hideSaveDialog=function(){return n.setState({saveVisible:!1})},n.state={saveVisible:!1,nameValue:"",dialogType:""},n}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.selSaveInfo,a=t.handleSaveScreen,l=this.state,i=l.saveVisible,o=l.nameValue,s=l.dialogType;return r.createElement("div",{className:"button-zone"},r.createElement("div",null,r.createElement("span",{className:"modified"},"\u5df2\u4fee\u6539"),"default"===n.id?r.createElement("a",null,r.createElement("span",{className:"save",onClick:function(){return e.showSaveDialog("save")}},"\u4fdd\u5b58\u4e3a\u7b5b\u9009\u5668")):r.createElement("span",{className:"save",onClick:function(){return a({type:"update"})}},"\u66f4\u65b0\u7b5b\u9009\u5668"),n&&"default"!==n.id&&r.createElement("div",{className:"more-zone"},r.createElement("span",{className:"more"},r.createElement("i",{className:"icon-cem icon-cem_more"})),r.createElement("div",{className:"more-list"},r.createElement("div",{className:"li-item",onClick:function(){return e.showSaveDialog("saveOther")}},"\u53e6\u5b58\u4e3a\u7b5b\u9009\u5668")))),r.createElement(u.Dialog,{title:"save"===this.state.dialogType?"\u4fdd\u5b58\u7b5b\u9009\u6761\u4ef6":"\u7b5b\u9009\u6761\u4ef6\u53e6\u5b58\u4e3a",className:"filter-save-name-dialog",size:"tiny",modal:!1,visible:i,onCancel:this.hideSaveDialog},r.createElement(u.Dialog.Body,null,r.createElement(u.Input,{className:"name-input",placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",value:o,onChange:function(t){return e.setState({nameValue:t})}})),r.createElement(u.Dialog.Footer,null,r.createElement(u.Button,{type:"primary",onClick:function(){return a({type:s,name:o})}},"\u786e\u5b9a"),r.createElement(u.Button,{type:"default",onClick:this.hideSaveDialog},"\u53d6\u6d88"))))},t}(r.Component);var Z=n(18446),F=n.n(Z),P=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleDetailShow=function(){n.setState({isShow:!n.state.isShow})},n.competeInfoWidth=function(){if(n.info){n.info.style.whiteSpace="nowrap";var e=[];Array.from(n.info.getElementsByClassName("detail-info")).forEach((function(t){t.style.width="unset",e.push(t.clientWidth),t.style.width="calc(100% - 88px)"}));var t=Math.max.apply(null,e),a=122;a+=t>700?700:t,n.info.style.whiteSpace="normal",n.info.style.width=a+"px"}},n.state={isShow:!1},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;setTimeout((function(){e.competeInfoWidth()}),0)},n.componentWillUnmount=function(){var e=this;setTimeout((function(){e.competeInfoWidth()}),0)},n.render=function(){var e=this,t=this.props.value;return r.createElement("div",{id:"info"},r.createElement("span",{className:"detail",onMouseEnter:this.handelDetailShow},"\u8be6\u60c5"),!this.state.isShow&&r.createElement("div",{className:"info-wrap",onMouseLeave:this.handelDetailShow},r.createElement("div",null,"\u5f53\u524d\u9875\u9762\u7b5b\u9009\u6761\u4ef6"),t&&t.length>0?r.createElement("ul",{ref:function(t){return e.info=t},id:"yt_info_ul"},t.map((function(e,t){return r.createElement("li",{key:t},r.createElement("div",{className:"name"},e.name),"aspect"===e.id?r.createElement("div",{className:"detail-info"},e.values.length>0&&e.values.map((function(e,t){return r.createElement("span",{key:t},e.id,e.values.length>0&&e.values.map((function(e,t){return r.createElement("span",{key:t}," | ",e.name)})))}))):r.createElement("div",{className:"detail-info"},e.values.length>0&&e.values instanceof Array?e.values.slice(0,100).map((function(t,n){return r.createElement("span",{key:n},t+(n===e.values.length-1?"":"\uff0c"))})):r.createElement("span",null,e.values)))}))):r.createElement("div",{className:"noData"},"\u6682\u65e0\u7b5b\u9009\u5185\u5bb9")))},t}(r.Component),T=n(30133),A={overview:"WAITER_SESSION_OVERVIEW",commodityAnalyze:"WAITER_SESSION_ASPECT",concernAnalyze:"WAITER_SESSION_PRODUCT"};const R=function(e){function t(t){var n;return(n=e.call(this,t)||this).handelChangeShow=function(e){return n.setState({show:e===n.state.show?null:e})},n.handelTimeChange=function(e){n.props.dateValueChange({value:e}).then((function(){n.handelChangeShow(null),n.props.handelValueChange()}))},n.state={show:t.defaultShow?t.defaultShow:null,saveFilterVisible:!1},n}(0,i.Z)(t,e);var n=t.prototype;return n.handleShowSave=function(e){this.saveScreen.setAttribute("class","enter"===e?"title sel":"title"),this.setState({saveFilterVisible:"enter"===e})},n.render=function(){var e=this,t=this.state.show,n=this.props,a=(n.title,n.dateFilter),i=n.handelValueChange,o=n.screeningMap,s=n.children,c=n.selSaveInfo,p=n.handleOnSaveBoxChange,d=n.handleSaveScreen,m=n.getsaveBoxRef,h=n.getTimeRef,f=n.getControlRef,v=n.type,g=n.detailInfo,y=this.state.saveFilterVisible;return r.createElement("div",{className:"header_Filter_view",style:{height:s?"100%":""}},r.createElement(u.Loading,{loading:void 0===o},r.createElement("div",{className:"header_Filter_bar"},r.createElement("div",{className:"title",ref:function(t){return e.saveScreen=t},onMouseEnter:function(){return e.handleShowSave("enter")},onMouseLeave:function(){return e.handleShowSave("leave")}},r.createElement("span",null,"\u7b5b\u9009\u5668: "),r.createElement("span",{className:"save_name"},c.name),r.createElement("i",{className:"icon-cem_arrow-launches"}),r.createElement(I,{ref:m,show:y,model:A[v],onFilterChange:p,onFilterRename:function(e){return p(e,"name")}})),"screening"===t&&c&&this.isScreeningChanged&&r.createElement(D,{ref:f,selSaveInfo:c,handleSaveScreen:d}),r.createElement(P,{value:g}),r.createElement(V,{name:this.time,_handelClick:function(){return e.handelChangeShow("time")},select:"time"===t}),r.createElement(V,{name:"\u7b5b\u9009",_handelClick:function(){return e.handelChangeShow("screening")},select:"screening"===t})),r.createElement("div",null,"screening"===t&&r.createElement(b,(0,l.Z)({},this.props,{handelChangeShow:this.handelChangeShow,handelChange:i})),r.createElement(x.Z,{ref:h,onChange:function(t){return e.handelTimeChange(t)},show:"time"===t,onCancel:function(){return e.handelChangeShow("time")},params:a}))),s&&r.createElement("div",{className:"contentWrap"},void 0===o?r.createElement(T.Z,null):s))},(0,c.Z)(t,[{key:"time",get:function(){var e="\u65f6\u95f4";return this.props.dateFilter&&this.props.dateFilter.from&&(e=this.props.dateFilter.quickChoice?this.props.dateFilter.quickChoice:this.props.dateFilter.from.replace(/-/g,"/")+"-"+this.props.dateFilter.to.replace(/-/g,"/")),e}},{key:"isScreeningChanged",get:function(){var e=this.props,t=e.selSaveInfo,n=e.screeningValues;return!F()(t.screeningValues,n)}}]),t}(r.Component);var B=n(18854),j=n(55609),M=n(64396),W=["loading"],z=M.Z.public.header,J=function(e){function t(t){var n;return(n=e.call(this,t)||this).getAspect1=function(e){var t=n.props.screeningMap,a=null,l=null;if(t.aspect){var i=JSON.parse(t.aspect)[0];Object.keys(i).forEach((function(t){i[t].includes(e)&&(a=t,l=t)}))}return{id:a,name:l}},n.setDefaultValue=function(e){var t=n.props,a=t.screeningMap,l=(t.screeningList,t.type),i=[];if(e)return n.props.saveBoxChange({value:e,type:n.props.type}).then((function(){return n._handelValueChange()}));var r=function(){i.push({id:"product",name:"\u5206\u6790\u5546\u54c1",serverKey:"product",type:"radio",values:a.maxSessionProduct})},o=function(){i.push({id:"aspect",name:"\u5173\u6ce8\u70b9",serverKey:"aspect",type:"cascade",values:[{id:a.maxSessionAspect,name:a.maxSessionAspect,values:[]}]})};if(n.props.value&&n.props.value.length)if(i=JSON.parse(JSON.stringify(n.props.value)),n.props.value.some((function(e){return"product"===e.id}))||"commodityAnalyze"!==l||r(),n.props.value.some((function(e){return"aspect"===e.id}))||"concernAnalyze"!==l){if(n.props.value.some((function(e){return"aspect"===e.id}))&&!n.props.value.filter((function(e){return"aspect"===e.id}))[0].values[0].id&&n.props.value.filter((function(e){return"aspect"===e.id}))[0].values[0].values[0].id){i=i.filter((function(e){return"aspect"!==e.id}));var s=n.props.value.filter((function(e){return"aspect"===e.id}))[0].values[0].values[0].id,c=n.getAspect1(s),u=c.id,p=c.name;i.push({id:"aspect",name:"\u5173\u6ce8\u70b9",serverKey:"aspect",type:"cascade",values:[{id:u,name:p,values:n.props.value.filter((function(e){return"aspect"===e.id}))[0].values[0].values}]})}}else o();else"commodityAnalyze"===l&&r(),"concernAnalyze"===l&&o();n.props.saveValue({value:i,type:n.props.type}).then((function(){return n._handelValueChange()}))},n._handleOnSaveBoxChange=function(e,t){n.props.saveBoxChange({value:e,type:n.props.type,key:t}).then((function(){return t!==name&&n._handelValueChange()}))},n.competeInfoWidth=function(){if(document.getElementById("yt_info_ul")){document.getElementById("yt_info_ul").style.whiteSpace="nowrap";var e=[];Array.from(document.getElementById("yt_info_ul").getElementsByClassName("detail-info")).forEach((function(t){t.style.width="unset",e.push(t.clientWidth),t.style.width="calc(100% - 88px)"}));var t=Math.max.apply(null,e),n=122;n+=t>700?700:t,document.getElementById("yt_info_ul").style.whiteSpace="normal",document.getElementById("yt_info_ul").style.width=n+"px"}},n._handelValueChange=function(e){n.props.saveDetailInfoValue({value:JSON.parse(JSON.stringify(n.props.screeningValues))}),n.props.onChange&&n.props.onChange((0,l.Z)({},(0,B.bp)(n.props.screeningValues),{dateFilter:n.props.dateFilter}),n.props.screeningValues),setTimeout((function(){n.competeInfoWidth()}),0)},n._handleSaveScreen=function(e){var t=e.type,a=e.name;n.props.saveScreening({type:t,name:a,model:n.props.type}).then((function(e){n.saveBoxRef.refresh(e.id)}))},n.state={},n._event={handelValueChange:n._handelValueChange,handleOnSaveBoxChange:n._handleOnSaveBoxChange,handleSaveScreen:n._handleSaveScreen,getsaveBoxRef:function(e){return n.saveBoxRef=e},getTimeRef:function(e){return n.timeRef=e},getControlRef:function(e){return n.controlRef=e}},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.props.screeningMap?(this.props.clearAllValues({type:this.props.type}),Promise.all([this.timeRef.fetchDefaultValue(),this.saveBoxRef.refresh()]).then((function(t){e.props.dateValueChange({value:t[0]}).then((function(){return e.setDefaultValue("default"===t[1].id?"":t[1])}))}))):Promise.all([this.props.fetchScreeningMap({type:this.props.type}),this.timeRef.fetchDefaultValue(),this.saveBoxRef.refresh()]).then((function(t){e.props.dateValueChange({value:t[1]}).then((function(){return e.setDefaultValue("default"===t[2].id?"":t[2])}))}))},n.render=function(){return r.createElement(R,(0,l.Z)({},this.state,this._event,this.props))},t}(r.Component);J.propTypes={onChange:s().func,type:s().string,value:s().array};const U=(0,j.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,W);return(0,l.Z)({},n[z],{fetchingScreeningMap:t.effects[z+"/fetchScreeningMap"]||!1})}),(function(e){return{fetchScreeningMap:function(t){return e({type:z+"/fetchScreeningMap",payload:t})},saveBoxChange:function(t){return e({type:z+"/saveBoxChange",payload:t})},saveScreening:function(t){return e({type:z+"/saveScreening",payload:t})},screeningValuesChange:function(t){return e({type:z+"/screeningValuesChange",payload:t})},dateValueChange:function(t){return e({type:z+"/dateValueChange",payload:t})},clearAllValues:function(t){return e({type:z+"/clearAllValues",payload:t})},saveValue:function(t){return e({type:z+"/saveValue",payload:t})},saveDetailInfoValue:function(t){return e({type:z+"/saveDetailInfoValue",payload:t})}}}),null,{withRef:!0})(J)}}]);