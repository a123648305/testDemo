"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[4162],{79260:(t,e,a)=>{a.d(e,{Z:()=>v});var n=a(94578),r=a(67294),o=a(8201),i=a(98191),l=a(60496),s=a(94644),u=a(50976),c=a(87462),p=a(70715);const d=function(t){var e=t.data,a=t.getRef,n=t.formula,o=t.onChartClick,i=t.positiveTitle,l=t.negativeTitle,s=t.title,d=r.useState({}),h=d[0],f=d[1];return r.useEffect((function(){f(function(t,e,a,n,r){var o={positiveData:"count"===e?t.sort((function(t,e){return e.positiveCount-t.positiveCount})).slice(0,10):t.sort((function(t,e){return e.posRate-t.posRate})).slice(0,10),negativeData:"count"===e?t.sort((function(t,e){return e.negativeCount-t.negativeCount})).slice(0,10):t.sort((function(t,e){return e.negRate-t.negRate})).slice(0,10)};return{title:{text:r},grid:[{x:"3%",y:"20%",width:"92%",height:"25%"},{x:"3%",y2:"10%",width:"92%",height:"25%"}],tooltip:{formatter:function(t){var e=t.seriesName,a=t.marker,n=t.data,r=t.data.name;return[(0,p.Zi)(a+" "+r),("positive"===e?"\u6b63\u9762":"\u8d1f\u9762")+"\u58f0\u91cf\uff1a"+n[e+"Count"],"\u58f0\u91cf\u5360\u6bd4\uff1a"+(100*n[e.substring(0,3)+"Rate"]).toFixed(2)+"%"].join("<br>")}},graphic:[{type:"group",top:"13%",silent:!0,children:[{type:"text",left:15,style:{text:a,font:"bolder 12px "+p.I8,fill:"#262626"}}]},{type:"group",top:"58%",silent:!0,children:[{type:"text",left:15,style:{text:n,font:"bolder 12px "+p.I8,fill:"#262626"}}]}],xAxis:["positive","negative"].map((function(t,e){return{gridIndex:e,axisTick:{show:!0,alignWithLabel:!0},axisLabel:{interval:0},data:o[t+"Data"].map((function(t){return t.name}))}})),yAxis:["positive","negative"].map((function(t,e){return{gridIndex:e,axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:"#E8E8E8",type:"dashed"}}}})),series:["positive","negative"].map((function(t,a){return{type:"bar",name:t,barWidth:30,xAxisIndex:a,yAxisIndex:a,data:o[t+"Data"].map((function(a){return(0,c.Z)({},a,{value:"count"===e?a[t+"Count"]:a[t.substring(0,3)+"Rate"],escore:["positive"===t?1:-1]})}))}}))}}(e.slice(),n,i,l,s))}),[e,n]),r.createElement(u.Z,{theme:"yunting_pos_neg",option:h,style:{height:"100%",width:"100%"},onChartReady:function(t){a(t)},onEvents:{click:o}})};const h=function(t){function e(e){var a;return(a=t.call(this,e)||this)._resetChart=function(){var t=a.props.data;a.echartIns&&(a.echartIns.clear(),function(t,e){var a=t.getHeight()-60,n=t.getWidth()-60,r=n>a?a:n,o={series:[{type:"graph",layout:"force",silent:!0,animation:!1,legendHoverLink:!1,force:{repulsion:[.4*r,.8*r],gravity:.15,layoutAnimation:!1},data:e.map((function(t){return{symbolSize:t.rate*r/3}}))}]};t.setOption(o)}(a.echartIns,t),function(t,e){var a=t.getHeight(),n=t.getWidth(),r=n>a?a:n,o={tooltip:{formatter:function(t){var e=t.marker,a=t.data,n=a.value,r=a.name,o=a.total;return"label"!==r?[(0,p.Zi)(e+" "+r),"\u58f0\u91cf\uff1a"+n,"\u5360\u6bd4\uff1a"+(n/o*100).toFixed(2)+"%"].join("<br>"):[(0,p.Zi)(o.name+"\uff1a"+o.total),'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#D96969;"></span> \u8d1f\u9762\uff1a'+o.negativeCount+'<span style="color: #8c8c8c">('+(o.negativeCount/o.total*100).toFixed(2)+"%)</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#0074B8;"></span> \u4e2d\u6027\uff1a'+o.neutralCount+'<span style="color: #8c8c8c">('+(o.neutralCount/o.total*100).toFixed(2)+"%)</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#00B76E;"></span> \u6b63\u9762\uff1a'+o.positiveCount+'<span style="color: #8c8c8c">('+(o.positiveCount/o.total*100).toFixed(2)+"%)</span>"].join("<br>")}},series:t._zr.storage._displayList.map((function(a,n){var o=e[n],i=o.rate*r/3*.3;i=i>18?i:18;var l=t.convertToPixel({seriesIndex:0},[a.transform[4]+30,a.transform[5]+30]),s=26*o.rate,u=s*o.name.length>2*(i-10)?2*(i-10)/o.name.length:s;return u=u<12?12:u,24*o.rate*o.total.toString().length>2*(i-10)&&o.total.toString().length,{type:"pie",name:o.name,center:l,hoverOffset:4,radius:[i-5,i],label:{normal:{show:!0,position:"center",formatter:"{a|"+o.name+"}",rich:{a:{color:"#262626",fontSize:u,fontFamily:p.I8}}}},itemStyle:{shadowBlur:10,shadowColor:"rgba(155,155,155,0.5)",borderColor:"#ffffff",borderWidth:.5},data:[{value:o.positiveCount,name:"\u6b63\u9762",realName:o.name,total:o.total,escore:[1]},{value:o.neutralCount,name:"\u4e2d\u6027",realName:o.name,total:o.total,escore:[0]},{value:o.negativeCount,name:"\u8d1f\u9762",realName:o.name,total:o.total,escore:[-1]},{value:0,name:"label",total:o,realName:o.name,escore:[-1,0,1]}]}}))};t.setOption(o)}(a.echartIns,t))},a.echartIns,a}(0,n.Z)(e,t);var a=e.prototype;return a.componentDidMount=function(){this.props.data.length>0&&this._resetChart(),window.addEventListener("resize",this._resetChart)},a.componentWillUnmount=function(){window.removeEventListener("resize",this._resetChart)},a.componentDidUpdate=function(t){var e=t.data,a=this.props.data;JSON.stringify(e)!==JSON.stringify(a)&&this._resetChart()},a.render=function(){var t=this,e=this.props,a=e.getRef,n=e.onChartClick;return r.createElement(u.Z,{theme:"yunting_pos_neu_neg",option:{},style:{height:"100%",width:"100%"},onEvents:{click:n},onChartReady:function(e){a(e),t.echartIns=e}})},e}(r.PureComponent);var f=a(45697),m=a.n(f),g=[{title:"\u6bd4\u4f8b",value:"rato"},{title:"\u6570\u91cf",value:"count"}],y=function(t){function e(e){var a;return(a=t.call(this,e)||this).handleOnMoreClick=function(t){var e=a.props,n=e.title,r=e.doubleBarChartData;if("image"===t&&a.doubleChartRef&&a.graphPieChartRef)(0,s.OH)([a.doubleChartRef,a.graphPieChartRef],n,["\u8bcd\u9891","\u8bcd\u9891"]);else if("data"===t&&(0,o.P)(r)){var i=["\u8bcd\u540d","\u603b\u8bcd\u9891","\u6b63","\u4e2d","\u8d1f"],l=r.reduce((function(t,e){return[].concat(t,[[].concat(i.map((function(t){var a;return"\u8bcd\u540d"===t?a=e.name:"\u603b\u8bcd\u9891"===t?a=e.total:"\u6b63"===t?a=e.positiveCount:"\u4e2d"===t?a=e.neutralCount:"\u8d1f"===t&&(a=e.negativeCount),a})))])}),[i]);(0,s.aT)([l],"\u8bcd\u9891\u5206\u6790")}},a.handleOnChange=function(t){a.setState({dataType:t})},a.handleOnFlavorChange=function(t){var e=a.props.setDefaultValue;e&&e({value:t,key:"fBarCompareType"})},a.state={dataType:"rato",defaultDataType:""},a.doubleChartRef=void 0,a.graphPieChartRef=void 0,a}return(0,n.Z)(e,t),e.getDerivedStateFromProps=function(t,e){if(t.defaultDataType&&t.defaultDataType!==e.defaultDataType)return{defaultDataType:t.defaultDataType,dataType:t.defaultDataType}},e.prototype.render=function(){var t=this,e=this.props,a=e.doubleBarChartData,n=e.graphPieChartData,s=e.loading,u=e.title,c=e.positiveTitle,p=e.negativeTitle,f=e.overlay,m=this.state,y=m.dataType,v=m.defaultDataType;return r.createElement(o.Z,{className:"yt_research_analysis_bar_pop_chart_wrapper",data:a,loading:s,renderTitle:r.createElement(i.Z,{titleOverlay:f,title:u,data:a,onMoreClick:this.handleOnMoreClick},r.createElement(l.Z,{options:g,activeObj:y,flavor:v,onFlavorChange:this.handleOnFlavorChange,onChange:this.handleOnChange}))},(0,o.P)(a)&&r.createElement("div",{className:"chart_zone"},r.createElement(d,{positiveTitle:c,negativeTitle:p,title:u,data:a,getRef:function(e){return t.doubleChartRef=e},formula:y}),r.createElement(h,{getRef:function(e){return t.graphPieChartRef=e},data:n})))},e}(r.PureComponent);y.propTypes={data:m().any,title:m().string,loading:m().bool,setDefaultValue:m().func,defaultDataType:m().string};const v=y},54898:(t,e,a)=>{var n=a(94578),r=a(67294),o=a(70715),i=10;const l=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).chartRef=void 0,e.graphData={categories:[],links:[],data:[]},e.graphData=void 0,e.sunburstData=void 0,e.title=void 0,e.getChartRef=function(t){return e.chartRef=t},e.setValue=function(t){var a=t.sort((function(t,e){return e.count-t.count})).slice(0,50).reduce((function(t,e,a){var n=t.find((function(t){return t.name===e.secondWord}));return n?(n.value+=e.count,n.children.push({id:"f"+a,name:e.firstWord,value:e.count,itemStyle:n.itemStyle})):(e.count,t.push({id:"s"+a,name:e.secondWord,value:e.count,itemStyle:{color:o.Fq[a%o.Fq.length]},children:[{id:"f"+a,name:e.firstWord,value:e.count,itemStyle:{color:o.Fq[a%o.Fq.length]}}]})),t}),[]),n=a.map((function(t){return t.value})),r=a.map((function(t){return t.name})),l=Math.max.apply(null,n),s=Math.min.apply(null,n),u=[],c=a.reduce((function(t,e,a){var n=l===s?i:(e.value-s)/(l-s)*40+i;return t.push({id:e.id,name:e.name,value:e.value,category:a,symbolSize:n,itemStyle:{color:o.Fq[0]},label:{show:!0,fontSize:10,color:"#262626"}}),e.children.forEach((function(r){u.push({source:r.id,target:e.id}),t.push({id:r.id,name:r.name,value:r.value,category:a,symbolSize:n*r.value/e.value,itemStyle:{color:o.Fq[1]},label:{show:!0,fontSize:10,color:"#262626"}})})),t}),[]);e.graphData={links:u,data:c,categories:r},e.sunburstData=a},e.getGraphOption=function(t,e,a){return{title:{text:t},tooltip:{},series:[{type:"graph",layout:a,roam:!0,draggable:!0,force:{initLayout:"circular",repulsion:100,gravity:.2,edgeLength:[50,100]},data:e.data,links:e.links,categories:e.categories,focusNodeAdjacency:!0,itemStyle:{borderColor:"#fff",borderWidth:1,shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.1)"},label:{position:"right",formatter:"{b}"},lineStyle:{curveness:"circular"===a?.3:0},emphasis:{lineStyle:{width:5}}}]}},e}(0,n.Z)(e,t);var a=e.prototype;return a.renderChart=function(t,e,a){this.setValue(t),this.title=e,this.changeChartType(a)},a.changeChartType=function(t){var e={};e="sunburst"===t?this.getSunburstOption(this.title,this.sunburstData):this.getGraphOption(this.title,this.graphData,t),this.chartRef.clear(),this.chartRef.setOption(e)},a.getSunburstOption=function(t,e){return{title:{text:t},tooltip:{},series:{type:"sunburst",highlightPolicy:"ancestor",data:e,levels:[{},{r0:"27%",r:"61%",label:{}},{r0:"62%",r:"67%",label:{position:"outside",color:"#262626"}}],emphasis:{label:{rotate:"radial",formatter:"{b}\uff08{@score}\uff09",fontSize:10}},label:{rotate:"radial",formatter:"{b}\uff08{@score}\uff09",fontSize:10},itemStyle:{color:"#ddd",borderWidth:2}}}},e}(r.PureComponent);var s=a(8201),u=a(98191),c=a(50976),p=a(94644),d=a(45697),h=a.n(d),f=a(30381),m=a.n(f),g=a(33798),y=a(43036),v=function(t){function e(e){var a;return(a=t.call(this,e)||this).handleOnMoreClick=function(t){var e=a.props,n=e.title,r=e.data;"image"===t&&a.chartRef?(0,p._v)(a.chartRef,n):"data"===t&&(0,s.P)(r)&&(0,p.aT)([r.reduce((function(t,e){return t.push([e.firstWord,e.secondWord,e.count]),t}),[["\u5173\u952e\u8bcd","\u5c5e\u6027","\u5173\u7cfb\u6570"]])],n)},a.state={chartType:"sunburst"},a}(0,n.Z)(e,t);var a=e.prototype;return a.componentDidMount=function(){this.renderChart()},a.componentDidUpdate=function(e,a){var n=e.data,r=this.props.data;(0,s.P)(r)&&JSON.stringify(n)!==JSON.stringify(r)&&this.renderChart(),!(0,s.P)(r)&&this.chartRef&&(this.chartRef=void 0),(0,s.P)(r)&&a.chartType!==this.state.chartType&&t.prototype.changeChartType.call(this,this.state.chartType)},a.renderChart=function(){var e=this.props,a=e.data,n=e.title,r=this.state.chartType;(0,s.P)(a)&&this.chartRef&&t.prototype.renderChart.call(this,a,n,r)},a.render=function(){var t=this,e=this.props,a=e.data,n=e.loading,o=e.title,i=e.titleOverlay,l=e.refreshTime,p=e.onRefresh,d=this.state.chartType;return r.createElement(s.Z,{className:"yt_market_bm_analysis_bar_line_in_one_chart",data:a,loading:n,renderTitle:r.createElement(u.Z,{title:o,titleOverlay:i,data:a,onMoreClick:this.handleOnMoreClick},r.createElement(y.Z,{placement:"top",overlay:r.createElement("div",null,r.createElement("div",null,"\u6570\u636e\u66f4\u65b0\u4e8e"),r.createElement("div",null,m()(l).format("YYYY-MM-DD HH:mm:ss")))},r.createElement("span",{onClick:p,className:"refresh"},r.createElement("i",{className:"icon-cem_auto-refresh "+(n?"icon_loading":"")}))),r.createElement("span",{className:"divider"}),r.createElement(y.Z,{placement:"top",overlay:"\u5173\u7cfb\u56fe"},r.createElement("span",{onClick:function(){return t.setState({chartType:"force"})}},r.createElement(g.Z,{isActive:"force"===d,defaultIcon:"cem_relation-diagram-gray",activeIcon:"cem_relation-diagram"}))),r.createElement(y.Z,{placement:"top",overlay:"\u65ed\u65e5\u56fe"},r.createElement("span",{onClick:function(){return t.setState({chartType:"sunburst"})}},r.createElement(g.Z,{isActive:"sunburst"===d,defaultIcon:"cem_asahi-chart--gray",activeIcon:"cem_asahi-chart"}))),r.createElement("span",{className:"divider"}))},r.createElement(c.Z,{onChartReady:this.getChartRef,theme:"yunting_multi_color",option:{},style:{height:"100%"}}))},e}(l);v.propTypes={data:h().any,titleOverlay:h().oneOf([h().string,h().node]),title:h().string,loading:h().bool,onRefresh:h().func,refreshTime:h().string}},55363:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(67294),r=a(61409);const o=function(t){var e=t.titles;return n.createElement("div",{className:"reasearch_analyze_header_route"},e.map((function(t,a){return n.createElement(n.Fragment,{key:a},n.createElement("span",{className:t.url?"hover":"",onClick:function(){return t.url&&r.mW.push({pathname:t.url,state:t.state})}},t.title),a===e.length-1?"":" / ")})))}},10291:(t,e,a)=>{a.d(e,{Z:()=>b});var n=a(94578),r=a(67294),o=a(8201),i=a(98191),l=a(60496),s=a(94644),u=[{title:"\u6bd4\u4f8b",value:"rato"},{title:"\u6570\u91cf",value:"count"}],c=a(87462),p=a(39432),d=a(70715),h={promoterCount:"\u63a8\u8350\u8005",passiveCount:"\u88ab\u52a8\u8005",detractorCount:"\u8d2c\u635f\u8005"},f={positiveCount:"\u597d\u8bc4",neutralCount:"\u4e2d\u8bc4",negativeCount:"\u5dee\u8bc4"},m=function(t,e,a){return[t.positiveCount,t.neutralCount,t.negativeCount].map((function(e,n){var r=(0===t.total?0:(e/t.total*100).toFixed(2))+"%",o=(0,p.jD)(r,14)-2;return{type:"group",silent:!0,left:310,top:(.3+.15*n)*a+16*(n+1),children:[{type:"text",style:{text:r}},{type:"text",left:o,style:{text:"\uff08"+e+"\uff09",fill:"#8C8C8C"}}]}}))};function g(t,e){var a=["\u65f6\u95f4"].concat(Object.values("NPS"===e?h:f)),n=t.reduce((function(t,a){return[].concat(t,[["time"].concat(Object.keys("NPS"===e?h:f)).map((function(t){return a[t]}))])}),[a]),r=t.reduce((function(t,a){return[].concat(t,[["time"].concat(Object.keys("NPS"===e?h:f)).map((function(t,e){return 0===e?a[t]:0===a.questionnaireTotal?0:a[t]/a.questionnaireTotal}))])}),[a]);return{length:t.length,datasets:[{dimensions:a,source:n},{dimensions:a,source:r}]}}var y=a(50976),v=function(t,e,a,n,r,o){e&&n&&new Promise((function(i){var l=function(t,e,a,n,r,o){var i=g(e,r),l=i.datasets,s=(i.length,{total:t.questionnaireTotal,neutralCount:t.passiveCount,positiveCount:t.promoterCount,negativeCount:t.detractorCount}),u=(n.getWidth(),n.getHeight());return{title:{text:o},grid:{containLabel:!0,left:430,right:50,bottom:50,top:80},tooltip:{trigger:"axis",formatter:function(t){var e=t[0].name,n=t.map((function(t,e){var n=t.data,r=t.seriesName,o=t.seriesIndex,i=t.marker,l=n[o+1];return l="count"===a?(0,p.hE)(l):(100*l).toFixed(2)+"%",i+" "+r.replace("1","")+"\uff1a"+l}));return[""+(0,d.Zi)(e)].concat(n).join("</br>")}},legend:[{itemWidth:12,itemHeight:12,left:280,top:"27%",orient:"vertical",itemGap:.15*u,data:[{name:"NPS"===r?"\u63a8\u8350\u8005":"\u597d\u8bc4",icon:d.W4.square},{name:"NPS"===r?"\u88ab\u52a8\u8005":"\u4e2d\u8bc4",icon:d.W4.square},{name:"NPS"===r?"\u8d2c\u635f\u8005":"\u5dee\u8bc4",icon:d.W4.square}],textStyle:{fontSize:14,padding:[0,6]}},{top:42,left:470,itemWidth:12,itemHeight:12,itemGap:16,icon:d.W4.square,data:[{name:"NPS"===r?"\u63a8\u8350\u80051":"\u597d\u8bc41",icon:d.W4.square},{name:"NPS"===r?"\u88ab\u52a8\u80051":"\u4e2d\u8bc41",icon:d.W4.square},{name:"NPS"===r?"\u8d2c\u635f\u80051":"\u5dee\u8bc41",icon:d.W4.square}],formatter:function(t){return t.replace("1","")}}],graphic:m(s,0,u),dataZoom:[{show:!0,left:470,bottom:16,height:16,handleSize:"100%",showDetail:!1}],dataset:l.map((function(t){return(0,c.Z)({},t)})),xAxis:[{type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(t){return"rato"===a?t>100?"":100*t+"%":t}}}],series:[].concat(Object.keys("NPS"===r?h:f).map((function(t,e){return{type:"bar",barMaxWidth:24,name:"NPS"===r?h[t]+"1":f[t]+"1",datasetIndex:"rato"===a?1:0,stack:r,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:d.Rt[e]}}})),[{type:"pie",center:["145","52%"],radius:["48%","58%"],hoverOffset:4,label:{show:!0,position:"center",formatter:["{a|"+s.total+"}","{b|\u7b54\u9898\u5ba2\u6237\u6570}"].join("\n"),rich:{a:{color:"#262626",fontSize:30,padding:[10,0,0,0],fontFamily:d.I8},b:{color:"#8C8C8C",fontSize:16,fontFamily:d.I8}}},tooltip:{trigger:"item",formatter:function(t){var e=t.marker,a=t.data,n=a.value,o=a.name,i=a.total;return"label"!==o?[e+" "+(0,d.Zi)(o),"\u58f0\u91cf\uff1a"+(0,p.hE)(n),"\u5360\u6bd4\uff1a"+(0===i?0:(n/i*100).toFixed(2))+"%"].join("<br>"):[""+(0,d.Zi)("\u7b54\u9898\u5ba2\u6237\u6570\uff1a"+i.total),'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#00B76E;"></span> '+("NPS"===r?"\u63a8\u8350\u8005":"\u597d\u8bc4")+"\uff1a"+(0,p.hE)(i.positiveCount)+'<span style="color: #8c8c8c">\uff08'+(0===i.total?0:(i.positiveCount/i.total*100).toFixed(2))+"%\uff09</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#0074B8;"></span> '+("NPS"===r?"\u88ab\u52a8\u8005":"\u4e2d\u8bc4")+"\uff1a"+(0,p.hE)(i.neutralCount)+'<span style="color: #8c8c8c">\uff08'+(0===i.total?0:(i.neutralCount/i.total*100).toFixed(2))+"%\uff09</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#D96969;"></span> '+("NPS"===r?"\u8d2c\u635f\u8005":"\u5dee\u8bc4")+"\uff1a"+(0,p.hE)(i.negativeCount)+'<span style="color: #8c8c8c">\uff08'+(0===i.total?0:(i.negativeCount/i.total*100).toFixed(2))+"%\uff09</span>"].join("<br>")}},data:[{value:s.positiveCount,name:"NPS"===r?"\u63a8\u8350\u8005":"\u597d\u8bc4",total:s.total,itemStyle:{color:"#15B374"}},{value:s.neutralCount,name:"NPS"===r?"\u88ab\u52a8\u8005":"\u4e2d\u8bc4",total:s.total,itemStyle:{color:"#1574B3"}},{value:s.negativeCount,name:"NPS"===r?"\u8d2c\u635f\u8005":"\u5dee\u8bc4",total:s.total,itemStyle:{color:"#D96969"}},{value:0,name:"label",total:s,itemStyle:{color:"#ffffffff"}}]}])}}(t,e,a,n,r,o);i(l)})).then((function(t){n.clear(),n.setOption(t)}))};const C=function(t){var e=t.getRef,a=t.customerData,n=t.graphicData,o=t.dataType,i=t.type,l=t.title,s=r.useState(void 0),u=s[0],c=s[1];return r.useEffect((function(){v(n,a,o,u,i,l)}),[a,u,o]),r.createElement(y.Z,{theme:"yunting_pos_neg",option:{},style:{height:"100%",width:"100%"},onChartReady:function(t){e(t),c(t)}})};const b=function(t){function e(e){var a;return(a=t.call(this,e)||this).handleOnMoreClick=function(t){var e=a.props,n=e.title,r=e.customerData,i=e.graphicData,l=e.type,u=a.state.dataType;if("image"===t&&a.graphicBarChartRef)(0,s._v)(a.graphicBarChartRef,n);else if("data"===u&&(0,o.P)(r)){var c=g(r,t).datasets,p="rato"===u?c[0].source:c[1].source,d=["NPS"===l?["\u7b54\u9898\u5ba2\u6237\u6570","\u63a8\u8350\u8005","\u88ab\u52a8\u8005","\u8d2c\u635f\u8005"]:["\u7b54\u9898\u5ba2\u6237\u6570","\u597d\u8bc4","\u4e2d\u8bc4","\u5dee\u8bc4"],[i.promoterCount,i.detractorCount,i.passiveCount]],h=[].concat(d,[[""]],p);(0,s.aT)([h],n)}},a.state={dataType:"rato",defaultDataType:"",dateGroupType:void 0},a}(0,n.Z)(e,t),e.getDerivedStateFromProps=function(t,e){if(t.defaultDataType&&t.defaultDataType!==e.defaultDataType)return{defaultDataType:t.defaultDataType,dataType:t.defaultDataType}};var a=e.prototype;return a.componentDidUpdate=function(t){var e=t.flavorObj,a=t.dateOptions,n=t.defaultDateType,r=this.props,o=r.flavorObj,i=r.dateOptions,l=r.defaultDateType;r.dataType;JSON.stringify(e)===JSON.stringify(o)&&JSON.stringify(n)===JSON.stringify(l)&&JSON.stringify(a)===JSON.stringify(i)||o&&this.setState({dateGroupType:i.some((function(t){return t.value===o.fCustTimeType}))?o.fCustTimeType:l})},a.render=function(){var t=this,e=this.props,a=e.type,n=e.loading,s=e.title,c=e.titleOverlay,p=e.customerData,d=e.graphicData,h=e.flavorObj,f=e.defaultDataType,m=e.dateOptions,g=e.setDefaultValue,y=e.onFilterChange,v=this.state,b=v.dateGroupType,T=v.dataType;return r.createElement(o.Z,{className:"yt_reasearch_analysis_graphic_chart_wrapper",data:p,loading:n,renderTitle:r.createElement(i.Z,{titleOverlay:c,title:s,data:p,onMoreClick:this.handleOnMoreClick},r.createElement(l.Z,{options:u,flavor:f,activeObj:T,onChange:function(e){t.setState({dataType:e})},onFlavorChange:function(t){return g({key:"fCustDataType",value:t})}}),r.createElement(l.Z,{options:m,flavor:(h||{}).fCustTimeType,activeObj:b,onChange:function(e){t.setState({dateGroupType:e}),y({dateGroupType:e})},onFlavorChange:function(t){return g({key:"fCustTimeType",value:t})}}))},(0,o.P)(p)&&r.createElement("div",{className:"chart_zone"},r.createElement(C,{customerData:p,graphicData:d,getRef:function(e){return t.graphicBarChartRef=e},type:a,title:s,dataType:T})))},e}(r.PureComponent)},61210:(t,e,a)=>{var n=a(94578),r=a(67294),o=a(8201),i=a(94644),l=a(50976),s=a(87462),u=a(70715),c=function(t,e,a){setTimeout((function(){var n={type:e,seriesIndex:0,seriesName:"overview-wordcloud"};a&&(n.name=a),t.dispatchAction(n)}),0)};const p=function(t){function e(e){var a;return(a=t.call(this,e)||this)._handleOnMouseOver=function(t){var e=t.componentType,n=t.componentSubType,r=t.name;a.shouldNotCallOutside=!0,"series"===e&&"wordCloud"===n&&(c(a.wordcloudRef,"downplay",r),c(a.wordcloudRef,"showTip",r))},a._handleOnMouseOut=function(t){var e=t.componentType,n=t.componentSubType;a.shouldNotCallOutside=!0;var r=a.state.hightlightNames;"series"===e&&"wordCloud"===n&&(c(a.wordcloudRef,"downplay",void 0),r&&c(a.wordcloudRef,"highlight",r),c(a.wordcloudRef,"hideTip",void 0))},a._resize=function(){a.shouldNotCallOutside=!1},a._handleFinished=function(){a.shouldNotCallOutside||(!a.lastFinishTimeoutId&&a.props.onReady(!1),a.lastFinishTimeoutId&&clearTimeout(a.lastFinishTimeoutId),a.lastFinishTimeoutId=setTimeout((function(){a.props.onReady(!0),a.lastFinishTimeoutId=void 0}),100))},a.wordcloudRef,a.lastFinishTimeoutId=void 0,a.shouldNotCallOutside=!1,a.state={hightlightNames:void 0},a}(0,n.Z)(e,t);var a=e.prototype;return a.componentDidUpdate=function(t){var e=this,a=t.data,n=t.top,r=this.props,o=r.data,i=r.top;if(n!==i||JSON.stringify(a)!==JSON.stringify(o)){var l=void 0;if(0!==i){l=[];for(var s=o.length-1;s>=i;s--)l.push(o[s].name)}this.setState({hightlightNames:l},(function(){c(e.wordcloudRef,"downplay",void 0),l&&c(e.wordcloudRef,"highlight",l)}))}},a.componentDidMount=function(){window.addEventListener("resize",this._resize)},a.componentWillUnmount=function(){window.removeEventListener("resize",this._resize)},a.render=function(){var t=this,e=this.props,a=e.option,n=e.getRef;e.onChartClick;return r.createElement(l.Z,{theme:"yunting_multi_color",option:a,style:{height:"100%",width:"100%"},onChartReady:function(e){n(e),t.wordcloudRef=e}})},e}(r.PureComponent);var d=a(98191),h=a(45697),f=a.n(h),m=function(t){function e(e){var a;return(a=t.call(this,e)||this).handleOnMoreClick=function(t){var e=a.props,n=e.title,r=e.data;if("image"===t&&a.chartRef)(0,i._v)(a.chartRef,n);else if("data"===t&&(0,o.P)(r)){var l=["\u8bcd\u540d","\u603b\u8bcd\u9891","\u6b63","\u4e2d","\u8d1f"],s=r.reduce((function(t,e){return[].concat(t,[[].concat(l.map((function(t){var a;return"\u8bcd\u540d"===t?a=e.name:"\u603b\u8bcd\u9891"===t?a=e.total:"\u6b63"===t?a=e.positiveCount:"\u4e2d"===t?a=e.neutralCount:"\u8d1f"===t&&(a=e.negativeCount),a})))])}),[l]);(0,i.aT)([s],"\u8bcd\u9891\u5206\u6790")}},a.state={data:e.data,option:{}},a}return(0,n.Z)(e,t),e.getDerivedStateFromProps=function(t,e){if(JSON.stringify(t.data)!==JSON.stringify(e.data)&&(0,o.P)(t.data))return{option:(a=t.data,{title:{text:"\u8bcd\u9891\u5206\u6790"},tooltip:{confine:!0,formatter:function(t){var e=t.marker,a=t.data,n=a.name,r=a.total,o=a.positiveCount,i=a.posRate,l=a.negativeCount,s=a.negRate,c=a.neutralCount,p=a.neuRate;return[(0,u.Zi)(e+" "+n+": "+r),"\u8d1f\u9762\uff1a"+l+' <span style="color: #8C8C8C">('+(100*s).toFixed(2)+"%)</span>","\u4e2d\u6027\uff1a"+c+' <span style="color: #8C8C8C">('+(100*p).toFixed(2)+"%)</span>","\u6b63\u9762\uff1a"+o+' <span style="color: #8C8C8C">('+(100*i).toFixed(2)+"%)</span>"].join("<br>")}},series:[{type:"wordCloud",name:"overview-wordcloud",gridSize:8,sizeRange:[12,60],rotationRange:[0,0],width:"95%",height:"85%",data:a.map((function(t){return(0,s.Z)({},t,{name:t.name,value:Math.sqrt(t.total),escore:[-1,0,1]})})),textStyle:{emphasis:{color:"#D8D8D8"}}}]})};var a},e.prototype.render=function(){var t=this,e=this.props,a=e.data,n=e.loading,i=e.title,l=this.state.option;return r.createElement(o.Z,{className:"yt_research_analysis_word_chart_wrapper",data:a,loading:n,renderTitle:r.createElement(d.Z,{title:i,data:a,onMoreClick:this.handleOnMoreClick})},(0,o.P)(a)&&r.createElement(p,{data:a,getRef:function(e){return t.chartRef=e},option:l}))},e}(r.PureComponent);m.propTypes={data:f().any,title:f().string,loading:f().bool}},8833:(t,e,a)=>{a.d(e,{Z:()=>d});var n=a(87462),r=a(63366),o=a(67294),i=a(26198),l=a(53113),s=a(45697),u=a.n(s),c=["getFilterRef","className","hour","children","onReady","onChange"],p=function(t){var e=t.getFilterRef,a=t.className,s=t.hour,u=t.children,p=t.onReady,d=t.onChange,h=(0,r.Z)(t,c);return o.createElement("div",{className:a},o.createElement(i.Z,(0,n.Z)({ref:e,onReady:function(){p.apply(null,[].concat(Array.prototype.slice.call(arguments),[(0,l.X)(arguments[0].dateFilter.numOfDays,s)]))},onChange:function(){d.apply(null,[].concat(Array.prototype.slice.call(arguments),[(0,l.X)(arguments[0].dateFilter.numOfDays,s)])),arguments[0].filterValue}},h)),u)};const d=p;p.propTypes={className:u().string,hour:u().bool,onReady:u().func,onChange:u().func,pageType:u().string,titles:u().shape({titel:u().string,url:u().string,state:u().object})}}}]);