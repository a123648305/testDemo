"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9351],{4767:(e,t,n)=>{var o=n(20862),r=n(95318);t.ZP=void 0;var a=r(n(67154)),i=r(n(59713)),s=r(n(63038)),u=o(n(67294)),l=r(n(94184)),c=r(n(66376)),p=n(75531),f=r(n(89552)),d=n(31929),v=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},m=c.default.Option;function h(){return!0}var g=function(e,t){var n,o=e.prefixCls,r=e.className,g=e.disabled,x=e.loading,y=e.filterOption,C=e.children,w=e.notFoundContent,b=v(e,["prefixCls","className","disabled","loading","filterOption","children","notFoundContent"]),O=u.useState(!1),E=(0,s.default)(O,2),F=E[0],P=E[1],S=u.useRef(),Z=(0,p.composeRef)(t,S),D=u.useContext(d.ConfigContext),I=D.getPrefixCls,k=D.renderEmpty,N=D.direction,T=I("mentions",o),L=(0,l.default)((n={},(0,i.default)(n,"".concat(T,"-disabled"),g),(0,i.default)(n,"".concat(T,"-focused"),F),(0,i.default)(n,"".concat(T,"-rtl"),"rtl"===N),n),r);return u.createElement(c.default,(0,a.default)({prefixCls:T,notFoundContent:void 0!==w?w:k("Select"),className:L,disabled:g,direction:N},b,{filterOption:x?h:y,onFocus:function(){b.onFocus&&b.onFocus.apply(b,arguments),P(!0)},onBlur:function(){b.onBlur&&b.onBlur.apply(b,arguments),P(!1)},ref:Z}),x?u.createElement(m,{value:"ANTD_SEARCHING",disabled:!0},u.createElement(f.default,{size:"small"})):C)},x=u.forwardRef(g);x.displayName="Mentions",x.Option=m,x.getMentions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t||{},o=n.prefix,r=void 0===o?"@":o,a=n.split,i=void 0===a?" ":a,s=Array.isArray(r)?r:[r];return e.split(i).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null;return s.some((function(n){return e.slice(0,n.length)===n&&(t=n,!0)})),null!==t?{prefix:t,value:e.slice(t.length)}:null})).filter((function(e){return!!e&&!!e.value}))};var y=x;t.ZP=y},9896:(e,t,n)=>{n(41776),n(54038),n(9405)},41776:(e,t,n)=>{n.r(t)},66376:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var o=n(45987),r=n(1413),a=n(15671),i=n(43144),s=n(60136),u=n(54062),l=n(94184),c=n.n(l),p=n(50344),f=n(15105),d=n(67294),v=n(34084),m=n(126),h=n(16216),g=d.createContext(null),x=g.Provider,y=g.Consumer;const C=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).renderDropdown=function(t){var n=t.notFoundContent,o=t.activeIndex,r=t.setActiveIndex,a=t.selectOption,i=t.onFocus,s=t.onBlur,u=e.props,l=u.prefixCls,c=u.options,p=c[o]||{};return d.createElement(h.default,{prefixCls:"".concat(l,"-menu"),activeKey:p.key,onSelect:function(e){var t=e.key,n=c.find((function(e){return e.key===t}));a(n)},onFocus:i,onBlur:s},c.map((function(e,t){var n=e.key,o=e.disabled,a=e.children,i=e.className,s=e.style;return d.createElement(h.MenuItem,{key:n,disabled:o,className:i,style:s,onMouseEnter:function(){r(t)}},a)})),!c.length&&d.createElement(h.MenuItem,{disabled:!0},n))},e}return(0,i.Z)(n,[{key:"render",value:function(){return d.createElement(y,null,this.renderDropdown)}}]),n}(d.Component);var w={bottomRight:{points:["tl","br"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},bottomLeft:{points:["tr","bl"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["bl","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topLeft:{points:["br","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};const b=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).getDropdownPrefix=function(){return"".concat(e.props.prefixCls,"-dropdown")},e.getDropdownElement=function(){var t=e.props.options;return d.createElement(C,{prefixCls:e.getDropdownPrefix(),options:t})},e.getDropDownPlacement=function(){var t=e.props,n=t.placement;return"rtl"===t.direction?"top"===n?"topLeft":"bottomLeft":"top"===n?"topRight":"bottomRight"},e}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.visible,o=e.transitionName,r=e.getPopupContainer,a=this.getDropdownElement();return d.createElement(m.Z,{prefixCls:this.getDropdownPrefix(),popupVisible:n,popup:a,popupPlacement:this.getDropDownPlacement(),popupTransitionName:o,builtinPlacements:w,getPopupContainer:r},t)}}]),n}(d.Component);const O=function(){return null};function E(e){return(e||"").toLowerCase()}function F(e,t){var n=t.measureLocation,o=t.prefix,r=t.targetText,a=t.selectionStart,i=t.split,s=e.slice(0,n);s[s.length-i.length]===i&&(s=s.slice(0,s.length-i.length)),s&&(s="".concat(s).concat(i));var u=function(e,t,n){var o=e[0];if(!o||o===n)return e;for(var r=e,a=t.length,i=0;i<a;i+=1){if(E(r[i])!==E(t[i])){r=r.slice(i);break}i===a-1&&(r=r.slice(a))}return r}(e.slice(a),r.slice(a-n-o.length),i);u.slice(0,i.length)===i&&(u=u.slice(i.length));var l="".concat(s).concat(o).concat(r).concat(i);return{text:"".concat(l).concat(u),selectionLocation:l.length}}var P=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var o;return(0,a.Z)(this,n),(o=t.call(this,e)).focusId=void 0,o.triggerChange=function(e){var t=o.props.onChange;"value"in o.props||o.setState({value:e}),t&&t(e)},o.onChange=function(e){var t=e.target.value;o.triggerChange(t)},o.onKeyDown=function(e){var t=e.which,n=o.state,r=n.activeIndex;if(n.measuring)if(t===f.Z.UP||t===f.Z.DOWN){var a=o.getOptions().length,i=(r+(t===f.Z.UP?-1:1)+a)%a;o.setState({activeIndex:i}),e.preventDefault()}else if(t===f.Z.ESC)o.stopMeasure();else if(t===f.Z.ENTER){e.preventDefault();var s=o.getOptions();if(!s.length)return void o.stopMeasure();var u=s[r];o.selectOption(u)}},o.onKeyUp=function(e){var t=e.key,n=e.which,r=o.state,a=r.measureText,i=r.measuring,s=o.props,u=s.prefix,l=void 0===u?"":u,c=s.onSearch,p=s.validateSearch,d=function(e){var t=e.selectionStart;return e.value.slice(0,t)}(e.target),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Array.isArray(t)?t:[t]).reduce((function(t,n){var o=e.lastIndexOf(n);return o>t.location?{location:o,prefix:n}:t}),{location:-1,prefix:""})}(d,l),m=v.location,h=v.prefix;if(-1===[f.Z.ESC,f.Z.UP,f.Z.DOWN,f.Z.ENTER].indexOf(n))if(-1!==m){var g=d.slice(m+h.length),x=p(g,o.props),y=!!o.getOptions(g).length;x?(t===h||"Shift"===t||i||g!==a&&y)&&o.startMeasure(g,h,m):i&&o.stopMeasure(),c&&x&&c(g,h)}else i&&o.stopMeasure()},o.onPressEnter=function(e){var t=o.state.measuring,n=o.props.onPressEnter;!t&&n&&n(e)},o.onInputFocus=function(e){o.onFocus(e)},o.onInputBlur=function(e){o.onBlur(e)},o.onDropdownFocus=function(){o.onFocus()},o.onDropdownBlur=function(){o.onBlur()},o.onFocus=function(e){window.clearTimeout(o.focusId);var t=o.state.isFocus,n=o.props.onFocus;!t&&e&&n&&n(e),o.setState({isFocus:!0})},o.onBlur=function(e){o.focusId=window.setTimeout((function(){var t=o.props.onBlur;o.setState({isFocus:!1}),o.stopMeasure(),t&&t(e)}),0)},o.selectOption=function(e){var t=o.state,n=t.value,r=t.measureLocation,a=t.measurePrefix,i=o.props,s=i.split,u=i.onSelect,l=e.value,c=F(n,{measureLocation:r,targetText:void 0===l?"":l,prefix:a,selectionStart:o.textarea.selectionStart,split:s}),p=c.text,f=c.selectionLocation;o.triggerChange(p),o.stopMeasure((function(){var e,t;e=o.textarea,t=f,e.setSelectionRange(t,t),e.blur(),e.focus()})),u&&u(e,a)},o.setActiveIndex=function(e){o.setState({activeIndex:e})},o.setTextAreaRef=function(e){var t;o.textarea=null===e||void 0===e||null===(t=e.resizableTextArea)||void 0===t?void 0:t.textArea},o.setMeasureRef=function(e){o.measure=e},o.getOptions=function(e){var t=e||o.state.measureText||"",n=o.props,a=n.children,i=n.filterOption,s=(0,p.Z)(a).map((function(e){var t=e.props,n=e.key;return(0,r.Z)((0,r.Z)({},t),{},{key:n||t.value})})).filter((function(e){return!1===i||i(t,e)}));return s},o.state={value:e.defaultValue||e.value||"",measuring:!1,measureLocation:0,measureText:null,measurePrefix:"",activeIndex:0,isFocus:!1},o}return(0,i.Z)(n,[{key:"componentDidUpdate",value:function(){this.state.measuring&&(this.measure.scrollTop=this.textarea.scrollTop)}},{key:"startMeasure",value:function(e,t,n){this.setState({measuring:!0,measureText:e,measurePrefix:t,measureLocation:n,activeIndex:0})}},{key:"stopMeasure",value:function(e){this.setState({measuring:!1,measureLocation:0,measureText:null},e)}},{key:"focus",value:function(){this.textarea.focus()}},{key:"blur",value:function(){this.textarea.blur()}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.measureLocation,a=e.measurePrefix,i=e.measuring,s=e.activeIndex,u=this.props,l=u.prefixCls,p=u.placement,f=u.direction,m=u.transitionName,h=u.className,g=u.style,y=u.autoFocus,C=u.notFoundContent,w=u.getPopupContainer,O=function(e){for(var t=(0,r.Z)({},e),n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return o.forEach((function(e){delete t[e]})),t}((0,o.Z)(u,["prefixCls","placement","direction","transitionName","className","style","autoFocus","notFoundContent","getPopupContainer"]),"value","defaultValue","prefix","split","children","validateSearch","filterOption","onSelect","onSearch"),E=i?this.getOptions():[];return d.createElement("div",{className:c()(l,h),style:g},d.createElement(v.default,Object.assign({autoFocus:y,ref:this.setTextAreaRef,value:t},O,{onChange:this.onChange,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPressEnter:this.onPressEnter,onFocus:this.onInputFocus,onBlur:this.onInputBlur})),i&&d.createElement("div",{ref:this.setMeasureRef,className:"".concat(l,"-measure")},t.slice(0,n),d.createElement(x,{value:{notFoundContent:C,activeIndex:s,setActiveIndex:this.setActiveIndex,selectOption:this.selectOption,onFocus:this.onDropdownFocus,onBlur:this.onDropdownBlur}},d.createElement(b,{prefixCls:l,transitionName:m,placement:p,direction:f,options:E,visible:!0,getPopupContainer:w},d.createElement("span",null,a))),t.slice(n+a.length)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return"value"in e&&e.value!==t.value&&(n.value=e.value||""),n}}]),n}(d.Component);P.Option=O,P.defaultProps={prefixCls:"rc-mentions",prefix:"@",split:" ",validateSearch:function(e,t){var n=t.split;return!n||-1===e.indexOf(n)},filterOption:function(e,t){var n=t.value,o=void 0===n?"":n,r=e.toLowerCase();return-1!==o.toLowerCase().indexOf(r)},notFoundContent:"Not Found",rows:1};const S=P}}]);