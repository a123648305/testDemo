"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[4896],{84896:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var l=n(94578),a=n(67294),r=n(92360),i=n(5133),o=n(49722),c=n(30381),s=n.n(c),u=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={visible:!1,loading:!1,columns:[{label:"\u6302\u724c\u4ef7",prop:"listPrice",width:60,render:function(e){return a.createElement("div",null,Math.round(100*e.listPrice)/100)}},{label:"\u5230\u624b\u4ef7",prop:"takePrice",width:60,render:function(e){return a.createElement("div",null,Math.round(100*e.takePrice)/100)}},{label:"\u5386\u53f2\u6700\u4f4e\u4ef7\u683c",prop:"historyMinTakePrice",width:140,render:function(e){return a.createElement("div",null,Math.round(100*e.historyMinTakePrice)/100)}},{label:"\u5386\u53f2\u4f4e\u4ef7\u65f6\u95f4",prop:"historyMinTakePriceTime",width:140,render:function(e){return a.createElement("div",null,s()(e.historyMinTakePriceTime).format("YYYY-M-DD HH:mm"))}},{label:"\u4e0a\u4e00\u65f6\u6bb5\u76d1\u63a7\u4ef7\u683c",prop:"beforeTakePrice",width:140,render:function(e){return a.createElement("div",null,Math.round(100*e.beforeTakePrice)/100)}},{label:"\u4e0a\u4e00\u65f6\u6bb5\u4ef7\u683c\u91c7\u96c6\u65f6\u95f4",prop:"beforeCtime"},{label:"\u5f53\u524d\u65f6\u6bb5\u76d1\u63a7\u4ef7\u683c",prop:"takePrice",width:150,render:function(e){return a.createElement("div",null,Math.round(100*e.takePrice)/100)}},{label:"\u5f53\u524d\u65f6\u6bb5\u4ef7\u683c\u91c7\u96c6\u65f6\u95f4",prop:"ctime"},{label:"\u5f53\u524d\u65f6\u6bb5\u4e0e\u4e0a\u4e00\u65f6\u6bb5\u5dee",width:180,render:function(e){return a.createElement("span",null,Math.round(100*(e.takePrice-e.beforeTakePrice))/100)}},{label:"\u9884\u8b66\u4ef7\u683c",prop:"compareLine",width:60,render:function(e){return a.createElement("span",null,Math.round(100*e.compareLine)/100)}},{label:"\u4e0e\u9884\u8b66\u4ef7\u683c\u7684\u5dee",width:120,render:function(e){return a.createElement("span",null,Math.round(100*(e.takePrice-e.compareLine))/100)}}],data:[],token:"",breakBackTime:""},n}(0,l.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props.location.query,n=t.token,l=t.breakBackTime;this.setState({token:n,breakBackTime:l&&decodeURIComponent(l)},(function(){return e.fetchColumns()}))},n.fetchData=function(){var e=this;this.setState({loading:!0});var t=this.state,n=t.token,l=t.breakBackTime;o.h.post("/price/list/monitors",{token:n,breakBackTime:l}).then((function(t){if(200===t.status||304===t.status){var n=t.data.result,l=[];if(n.length>0){var a=n[0].configDetailVoList;if(a.length>0){a.find((function(e){return"\u6e20\u9053"===e.topicTypeValue}))&&(n=t.data.result.sort((function(e,t){return e.configDetailVoList.find((function(e){return"\u6e20\u9053"===e.topicTypeValue}))&&t.configDetailVoList.find((function(e){return"\u6e20\u9053"===e.topicTypeValue}))?e.configDetailVoList.find((function(e){return"\u6e20\u9053"===e.topicTypeValue})).topicValue.localeCompare(t.configDetailVoList.find((function(e){return"\u6e20\u9053"===e.topicTypeValue})).topicValue,"zh"):-1})));for(var r=0;r<a.length;r++)l.push({prop:a[r].topicTypeId,label:a[r].topicTypeValue,width:90})}var i=e.generateRows(n);e.setState({columns:e.generateColumns(l),data:i,loading:!1})}}})).catch((function(e){return i.Z.error(e.toString())}))},n.fetchColumns=function(){var e=this;this.setState({loading:!0});var t=this.state.token;o.h.post("/price/warning/setting/get",{token:t}).then((function(t){if(200===t.status||304===t.status){var n=t.data.result,l=JSON.parse(n.tableTitle);e.reduceColumns(l.filter((function(e){return"extend"===e.type})))}})).catch((function(e){return i.Z.error(e.toString())}))},n.reduceColumns=function(e){var t=this,n=this.state.columns,l=[];e.length>0&&e.forEach((function(e){var t=n.filter((function(t){return t.label===e.name}));if(t.length>0)l.push(t[0]);else{var r={label:e.name,prop:"null",width:100,render:function(e){return a.createElement("div",null,"null")}};l.push(r)}})),this.setState({columns:l},(function(){return t.fetchData()}))},n.generateColumns=function(e){var t=this.state.columns,n=[].concat(e,t);return n.forEach((function(e){e.align="center",e.width=90,e.renderHeader=function(e){var t=e.label;return a.createElement("div",{className:"ellipsis"},t)}})),n},n.generateRows=function(e){for(var t=e.length-1;t>=0;t--)for(var n=e[t].configDetailVoList,l=n.length-1;l>=0;l--){var a=n[l].topicTypeId;e[t][a]=n[l].topicValue}return e},n.rowClassName=function(e,t){return 1===e.flag?"up":2===e.flag?"down":"null"},n.render=function(){var e=this,t=this.state,n=t.loading,l=t.data,i=t.columns,o=t.visible,c=document.documentElement.clientHeight,u=document.documentElement.clientWidth,m=Math.abs(c-u)/2;return a.createElement("div",{className:"yt_wechat_push_table_page",style:{transform:"translate(-"+m+"px, "+m+"px) rotate(90deg)",height:u,width:c}},a.createElement("div",{className:"content"},n?a.createElement(r.Loading,{fullscreen:!0}):l.length>0?a.createElement("div",{className:"table_zone"},a.createElement("div",{className:"top_desc"},a.createElement("span",null,"\u56fe\u4f8b\u8bf4\u660e"),a.createElement("span",{className:"legend"},a.createElement("span",null,"\u5347\u4ef7"),a.createElement("span",null,"\u964d\u4ef7")),a.createElement("i",{className:"icon-cem_file1",style:{marginLeft:16,fontSize:14,color:"#0847A6"},onClick:function(){e.setState({visible:!0})}})),a.createElement("div",{className:"table_content"},a.createElement("table",{className:"wechat_push_table"},a.createElement("thead",null,a.createElement("tr",null,i.map((function(e){return"\u6302\u724c\u4ef7"===e.label||"\u5230\u624b\u4ef7"===e.label||"\u9884\u8b66\u4ef7\u683c"===e.label?a.createElement("td",{className:"short"},e.label):"\u5f53\u524d\u65f6\u6bb5\u76d1\u63a7\u4ef7\u683c"===e.label?a.createElement("td",{style:{minWidth:"100px"}},e.label):"\u5386\u53f2\u6700\u4f4e\u4ef7\u65f6\u95f4"===e.label?a.createElement("td",{style:{minWidth:"110px"}},e.label):"\u5386\u53f2\u6700\u4f4e\u4ef7"===e.label?a.createElement("td",{style:{minWidth:"65px"}},e.label):"\u4e0a\u4e00\u65f6\u6bb5\u4ef7\u683c\u91c7\u96c6\u65f6\u95f4"===e.label||"\u5f53\u524d\u65f6\u6bb5\u4ef7\u683c\u91c7\u96c6\u65f6\u95f4"===e.label?a.createElement("td",{style:{minWidth:140}},e.label):a.createElement("td",{key:e.label,style:{minWidth:e.width+"px"},className:"\u5f53\u524d\u65f6\u6bb5\u4e0e\u4e0a\u4e00\u65f6\u6bb5\u5dee"===e.label?"long":""},e.label)})))),a.createElement("tbody",null,l.map((function(e){return a.createElement("tr",{key:e.id,className:1===e.flag?"up":2===e.flag?"down":""},i.map((function(t){return"\u5f53\u524d\u65f6\u6bb5\u4e0e\u4e0a\u4e00\u65f6\u6bb5\u5dee"===t.label?a.createElement("td",{key:t.label,className:"long",style:{minWidth:t.width+"px"}},Math.round(100*(e.takePrice-e.beforeTakePrice))/100):"\u5386\u53f2\u6700\u4f4e\u4ef7\u65f6\u95f4"===t.label?a.createElement("td",{key:t.label,style:{minWidth:"110px"}},s()(t.historyMinTakePriceTime).format("YYYY-M-DD HH:mm")):"\u5386\u53f2\u6700\u4f4e\u4ef7"===t.label?a.createElement("td",{key:t.label,style:{minWidth:"65px"}},Math.round(100*e[t.prop])/100):"\u4e0e\u9884\u8b66\u4ef7\u683c\u7684\u5dee"===t.label?a.createElement("td",{key:t.label,style:{minWidth:t.width+"px"}},Math.round(100*(e.takePrice-e.compareLine))/100):"\u4e0a\u65f6\u6bb5\u76d1\u63a7\u4ef7\u683c"===t.label?a.createElement("td",{key:t.label,style:{minWidth:t.width+"px"}},Math.round(100*e[t.prop])/100):"\u4e0a\u4e00\u65f6\u6bb5\u4ef7\u683c\u91c7\u96c6\u65f6\u95f4"===t.label?a.createElement("td",{key:t.label,style:{minWidth:140}},e.beforeCtime?s()(e.beforeCtime,s().HTML5_FMT.DATETIME_LOCAL_MS).format("YYYY/MM/DD HH:mm:ss"):"--"):"\u5f53\u524d\u65f6\u6bb5\u76d1\u63a7\u4ef7\u683c"===t.label?a.createElement("td",{key:t.label,style:{minWidth:"100px"}},Math.round(100*e[t.prop])/100):"\u5f53\u524d\u65f6\u6bb5\u4ef7\u683c\u91c7\u96c6\u65f6\u95f4"===t.label?a.createElement("td",{key:t.label,style:{minWidth:140}},e.ctime?s()(e.ctime,s().HTML5_FMT.DATETIME_LOCAL_MS).format("YYYY/MM/DD HH:mm:ss"):"--"):"\u6302\u724c\u4ef7"===t.label||"\u5230\u624b\u4ef7"===t.label||"\u9884\u8b66\u4ef7\u683c"===t.label?a.createElement("td",{key:t.label,className:"short"},Math.round(100*e[t.prop])/100):a.createElement("td",{key:t.label,style:{minWidth:t.width+"px"}},e[t.prop])})))})))))):a.createElement("div",{className:"noDataTips"},"\u6682\u65e0\u6570\u636e")),a.createElement(r.Dialog,{title:"\u5173\u4e8e\u6da8\u4ef7\u548c\u964d\u4ef7\u8bf4\u660e",size:"tiny",visible:o,className:"top_desc_dialog",top:"20%",onCancel:function(){e.setState({visible:!1})}},a.createElement(r.Dialog.Body,null,a.createElement("div",null,"\u201c\u964d\u4ef7\u201d\u548c\u201c\u6da8\u4ef7\u201d\u662f\u4f9d\u636e\u8be5\u5546\u54c1\u5728\u9884\u8b66\u65f6\u7684\u4ef7\u683c\u4e0e24\u5c0f\u65f6\u5185 \u7684\u4e0a\u4e00\u6b21\u6709\u53d8\u5316\u7684\u4ef7\u683c\u5bf9\u6bd4\u51b3\u5b9a\u7684\u3002\u5982\u679c\u9884\u8b66\u65f6\u4ef7\u683c\u5927\u4e8e \u4e0a\u4e00\u6b21\u4ef7\u683c\uff0c\u5219\u4e3a\u201c\u6da8\u4ef7\u201d\uff1b\u5982\u679c\u9884\u8b66\u65f6\u4ef7\u683c\u5c0f\u4e8e\u4e0a\u4e00\u6b21\u4ef7\u683c\uff0c\u5219\u4e3a\u201c\u964d\u4ef7\u201d"))))},t}(a.PureComponent)}}]);