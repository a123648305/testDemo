"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[7182],{7182:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});n(76405);var a=n(69843),r=(n(15144),n(2307)),l=(n(1025),n(65400)),o=(n(15267),n(64713)),s=(n(89858),n(51024)),i=(n(48145),n(40987)),c=n(87462),u=n(15861),d=n(94578),p=(n(53294),n(56697)),m=n(87757),f=n.n(m),h=n(67294),g=n(55815),E=n(13713),v=n(68855),w=n(30381),b=n.n(w),y=n(5133),C=n(53754),x=n(35239),S=n(49722),k=n(15109),N=n(63024),T=p.Z.confirm,I=function(e){function t(t){var n;return(n=e.call(this,t)||this).showConfirm=function(e,t){var a=e.id,r=e.word,l=e.modules,o=l.map((function(e){return N.c.find((function(t){return e===t.id})).name})).join("\uff0c"),s=function(){switch(t){case!0:return{title:"\u662f\u5426\u542f\u7528\u8be5\u65e0\u6548\u8bcd\uff1f",desc:h.createElement("span",null,"\u542f\u7528\u201c",h.createElement("span",null,r),"\u201d\u8fd9\u6761\u65e0\u6548\u8bcd\u89c4\u5219\u540e\uff0c\u5c06\u5728\u201c",h.createElement("span",null,o),"\u201d\u6570\u636e\u7c7b\u578b\u4e2d\u5c4f\u853d\u201c",h.createElement("span",null,r),"\u201d\u8fd9\u4e2a\u8bcd\u3002")};case!1:return{title:"\u662f\u5426\u505c\u7528\u8be5\u65e0\u6548\u8bcd\uff1f",desc:h.createElement("span",null,"\u505c\u7528\u201c",h.createElement("span",null,r),"\u201d\u8fd9\u6761\u65e0\u6548\u8bcd\u89c4\u5219\u540e\uff0c\u5c06\u4e0d\u4f1a\u5728\u201c",h.createElement("span",null,o),"\u201d\u6570\u636e\u7c7b\u578b\u4e2d\u7ee7\u7eed\u5c4f\u853d\u201c",h.createElement("span",null,r),"\u201d \u8fd9\u4e2a\u8bcd\u3002")};default:return{title:"\u662f\u5426\u5220\u9664\u8be5\u65e0\u6548\u8bcd\uff1f",desc:h.createElement("span",null,"\u5220\u9664\u201c",h.createElement("span",null,r),"\u201d\u8fd9\u6761\u65e0\u6548\u8bcd\u89c4\u5219\u540e\uff0c\u5c06\u4e0d\u4f1a\u5728\u201c",h.createElement("span",null,o),"\u201d\u6570\u636e\u7c7b\u578b\u4e2d\u7ee7\u7eed\u5c4f\u853d\u201c",h.createElement("span",null,r),"\u201d \u8fd9\u4e2a\u8bcd\u3002")}}}();T({title:s.title,icon:h.createElement(v.Z,{style:{color:"#FF7955"}}),content:s.desc,okText:"\u786e\u5b9a",okType:"primary",cancelText:"\u53d6\u6d88",autoFocusButton:null,centered:!0,className:"useless-word-wrapper-modal",onOk:function(){var e=(0,u.Z)(f().mark((function e(o){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=!0===e.t0?3:!1===e.t0?6:9;break;case 3:return e.next=5,n.updateUselessWord(a,r,l,"ENABLE");case 5:return e.abrupt("break",12);case 6:return e.next=8,n.updateUselessWord(a,r,l,"DISABLE");case 8:return e.abrupt("break",12);case 9:return e.next=11,n.deleteUselessWord(a,r);case 11:return e.abrupt("break",12);case 12:n.fetchList(),o();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},n.handleInputChange=function(e){var t=e.target.value;n.setState({searchText:t})},n.handleKeyWordChange=function(e){var t=e.target.value,a=n.state.targetItem;n.setState({targetItem:(0,c.Z)({},a,{word:t})})},n.handleKeyUp=function(e){e.stopPropagation(),13===e.keyCode&&n.setState({pageIndex:1},(function(){return n.fetchList()}))},n.switchPage=function(e,t){n.setState({pageIndex:e,pageSize:t},(function(){return n.fetchList()}))},n.fetchList=function(){var e=n.state,t=e.page,a=e.status,r=e.searchText,l=e.pageIndex,o=e.pageSize,s=e.sortName,i=e.sortType,c=x.t.get(x.V.backProjectConfig).id;n.setState({loading:!0},(function(){S.h.post("/word/filter/list",{modules:t,status:a,word:r,projectId:c,pageIndex:l,pageSize:o,sortModel:{sortName:s,sortType:i}}).then((function(e){if(2e4===e.data.code){var t=e.data.result,a=t.count,r=t.data,l=t.wordList;a>0&&S.h.post("/word/filter/count",{projectId:c,wordList:l}).then((function(e){if(2e4===e.data.code){for(var t=e.data.result,a=0;a<t.length;a++)r[a].count=t[a].count;n.setState({loading:!1,data:r})}})).catch((function(e){n.setState({loading:!1})})),r.forEach((function(e){return e.count="--"})),n.setState({loading:!1,data:r,total:a})}})).catch((function(e){n.setState({loading:!1})}))}))},n.deleteUselessWord=function(){var e=(0,u.Z)(f().mark((function e(t,n){var a,r,l,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.t.get(x.V.backProjectConfig).id,e.next=3,S.h.post("/word/filter/delete",{projectId:r,id:t,word:n}).catch((function(e){return e}));case 3:if(l=e.sent,2e4===(null==(a=l.data)?void 0:a.code)){e.next=6;break}return e.abrupt("return",y.Z.error(null==(o=l.data)?void 0:o.msg));case 6:y.Z.success("\u5220\u9664\u6210\u529f");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateUselessWord=function(){var e=(0,u.Z)(f().mark((function e(t,n,a,r){var l,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=x.t.get(x.V.backProjectConfig).id,e.next=3,S.h.post("/word/filter/update",{id:t,word:n,modules:a,status:r,projectId:l}).catch((function(e){return e}));case 3:if(2e4===(o=e.sent).data.code){e.next=6;break}return e.abrupt("return",y.Z.error(null==(s=o.data)?void 0:s.msg));case 6:y.Z.success("\u66f4\u65b0\u6210\u529f");case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),n.handleCancel=function(){n.setState({dialogShow:!1,searchText:"",targetItem:{id:"",word:"",overviewVisible:!1,opinionVisible:!1}})},n.changeModules=function(e){n.setState({page:e,pageIndex:1},(function(){return n.fetchList()}))},n.changeStatus=function(e){var t=e.target.value;n.setState({status:t,pageIndex:1},(function(){return n.fetchList()}))},n.handleSort=function(e,t,a){var r=a.field,l=a.order;n.setState({sortName:l?r.toUpperCase():"CREATED_AT",sortType:"ascend"===l?"ASC":"DESC"},(function(){return n.fetchList()}))},n.state={searchText:"",dialogShow:!1,dialogType:"add",tipShow:!1,loading:!1,targetItem:{id:"",word:"",overviewVisible:!1,opinionVisible:!1,status:"ENABLE"},initialValue:null,wordModalVisible:!1,wordModalTitle:"",columns:[{title:"\u65e0\u6548\u8bcd",dataIndex:"word",sorter:!0},{title:"\u8bcd\u9891\u6570",dataIndex:"count",width:130},{title:"\u6570\u636e\u7c7b\u578b",dataIndex:"modules",width:220,render:function(e){var t=null==e?void 0:e.map((function(e){var t;return(null==(t=N.c.find((function(t){return e===t.id})))?void 0:t.name)||""}));return h.createElement("div",{className:"useless-word-modules"},t&&t.length?h.createElement("span",{title:t.join("\uff0c")},t.slice(0,2).join("\uff0c"),t.length>2?"...":""):h.createElement("span",null,"\u5168\u90e8"))}},{title:"\u64cd\u4f5c\u4eba",dataIndex:"username"},{title:"\u64cd\u4f5c\u65f6\u95f4",dataIndex:"updatedAt",render:function(e){return h.createElement("span",null,b()(e).format("YYYY/MM/DD HH:mm:ss"))}},{title:"\u662f\u5426\u542f\u7528",dataIndex:"status",render:function(e,t){return h.createElement(i.Z,{size:"default",checked:"ENABLE"===t.status,onClick:function(){return n.showConfirm(t,"ENABLE"!==t.status)}})}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){var a=t.id,r=t.word,l=t.modules,o=t.status,s=t.updatedAt,i=t.username;return h.createElement("div",{className:"handle"},h.createElement("span",{onClick:function(){return n.setState({wordModalVisible:!0,wordModalTitle:"\u7f16\u8f91\u65e0\u6548\u8bcd",initialValue:{word:r,id:a,status:o,modules:l.length?l:[""],updatedAt:s,username:i}})}},"\u7f16\u8f91"),h.createElement("span",{onClick:function(){n.showConfirm(t)},con:!0},"\u5220\u9664"))}}],data:[],pageIndex:1,pageSize:20,page:[],status:null,total:0,sortName:"CREATED_AT",sortType:"DESC"},n}(0,d.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.fetchList()},n.render=function(){var e=this,t=this.state,n=t.searchText,i=t.columns,c=t.loading,u=t.pageIndex,d=t.pageSize,p=t.data,m=t.total,f=t.status,v=t.wordModalVisible,w=t.initialValue,b=t.wordModalTitle;return h.createElement("div",{className:"useless-word-wrapper"},h.createElement(g.Z,{title:(0,E.u)({title:"\u65e0\u6548\u8bcd\u7ba1\u7406"})}),h.createElement("div",null,h.createElement("div",{className:"useless-word-wrapper-content"},h.createElement("div",{className:"useless-word-header"},h.createElement("div",{className:"search-input-wrapper"},h.createElement(s.default,{value:n,onChange:this.handleInputChange,onKeyUp:this.handleKeyUp,placeholder:"\u8bf7\u8f93\u5165\u65e0\u6548\u8bcd",suffix:h.createElement("span",null,h.createElement("i",{className:"icon-cem_small-search",style:{color:"#8c8c8c"},onClick:function(){return e.setState({pageIndex:1},(function(){return e.fetchList()}))}}))})),h.createElement(C.Z,{title:"\u6570\u636e\u7c7b\u578b",options:N.c,onChange:this.changeModules,color:"#7262FD"}),h.createElement(o.default.Group,{value:f,options:[{label:"\u5168\u90e8",value:null},{label:"\u542f\u7528",value:"ENABLE"},{label:"\u505c\u7528",value:"DISABLE"}],onChange:this.changeStatus,optionType:"button"}),h.createElement(l.default,{onClick:function(){return e.setState({wordModalVisible:!0,wordModalTitle:"\u6dfb\u52a0\u65e0\u6548\u8bcd"})},type:"primary",className:"btn-right"},"\u6dfb\u52a0\u65e0\u6548\u8bcd")),h.createElement(r.Z,{rowKey:function(e){return e.id},columns:i,dataSource:p,pagination:!1,onChange:this.handleSort,scroll:{x:"100%",y:"calc(100% - 60px)"},getPopupContainer:function(e){return e.parentNode},loading:c}),h.createElement("div",{className:"useless-word-tip"},h.createElement("span",null,d*(u-1)+1," - ",Math.min(d*u,m)),"\xa0\u9879\xa0\uff0c\u5171\xa0",h.createElement("span",null,m),"\xa0\u9879"),h.createElement("div",{className:"useless-word-page"},h.createElement(a.default,{total:m,pageSize:d,current:u,showSizeChanger:!0,onChange:this.switchPage})))),h.createElement(k.Z,{visible:v,title:b,onOk:this.fetchList,onClose:function(){return e.setState({wordModalVisible:!1,initialValue:null})},initialValue:w}))},t}(h.Component)},13713:(e,t,n)=>{n.d(t,{u:()=>r});var a=n(35239),r=function(e){var t=e.title,n=e.url,r=a.t.get(a.V.backProjectConfig).name;return n&&-1!==n.indexOf("memberlist")?[{title:r,url:"/account/project/preview"},{title:"\u7528\u6237\u7ec4",url:"/account/project/usergroup"},{title:t,url:n}]:[{title:r,url:"/account/project/preview"},{title:t,url:n}]}},55815:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),r=n(67294),l=n(45697),o=n.n(l),s=n(43036),i=n(61409),c=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,r=n.beforeJump;e!==a.length-1&&(r?new Promise((function(e,t){return r(e,t)})).then((function(){i.mW.push({pathname:a[e].url,state:a[e].state})})):i.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,l=t.rightContent,o=t.className,i=t.overlay;return r.createElement("div",{className:"breadcumb-wrapper "+o},n instanceof Array?r.createElement("div",{className:"breadcrumb-left"},r.createElement("div",null,n.map((function(t,a){return r.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),r.createElement("span",null,a||n[n.length-1].title,i&&r.createElement(s.Z,{placement:"top",overlay:i},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):r.createElement("div",{className:"normal-title"},n,i&&r.createElement(s.Z,{placement:"top",overlay:i},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),l||"")},t}(r.Component);c.propTypes={className:o().string,title:o().oneOfType([o().string,o().arrayOf(o().shape({title:o().string,url:o().string,state:o().object}))]).isRequired,overlay:o().oneOfType([o().string,o().node]),mainTitle:o().oneOfType([o().string,o().node]),beforeJump:o().func,rightContent:o().node};const u=c}}]);