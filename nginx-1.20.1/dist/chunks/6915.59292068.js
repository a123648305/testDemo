"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6915],{86915:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var a=n(94578),o=n(87462),i=n(67294),r=n(92360),l=n(5133),c=n(29383),s=n(43036),p=n(12518),u=n(83425),d=n(45697),h=n.n(d),f=n(58341),m=n(30381),g=n.n(m),v=n(126),y=n(94184),E=n.n(y),C=function(e){function t(t){var n;return(n=e.call(this,t)||this).openPanel=function(e){n.state.panelShow&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout((function(){return n.setState({panelShow:!0})}),0)},n.closePanel=function(){n.setState({panelShow:!1})},n.clear=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),"string"===typeof n.state.value?n.setState({value:""}):n.setState({value:["",""]})},n.handleMouseEnter=function(){var e=n.state.value;("string"===typeof e&&e.length>0||"object"===typeof e&&e[0]&&e[1])&&n.setState({hovering:!0})},n.handleMouseLeave=function(){n.setState({hovering:!1})},n.getDateRange=function(e){n.props.getDateRange(e)},n.state={panelShow:!1,value:t.value||[],type:t.type,disabledDate:t.disabledDate,disabled:t.disabled||!1,hovering:!1},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.UNSAFE_componentWillReceiveProps=function(e){this.setState((0,o.Z)({},e))},n.componentWillUnmount=function(){},n.render=function(){var e,t=this,n=this.state,a=n.value,o=n.type,r=n.disabledDate,l=n.panelShow,c=n.disabled,s=n.hovering,p=n.hasHeader,u=[];a&&"object"===typeof a&&(u=a.map((function(e){return g()(e,"YYYY-MM-DD")})));var d=E()(((e={"datepicker-wrapper":!0})[""+o]=!0,e.disabled=c,e.hovering=s,e));return i.createElement(v.Z,{ref:function(e){return t.trigger=e},action:["click"],popupAlign:{points:["tl","tl"],offset:[0,0]},popup:i.createElement(f.Z,{type:o,getDateRange:this.getDateRange,closePanel:this.closePanel,defaultSelectedValue:"calendar"===o?g()():u,disabledDate:r,hasHeader:p}),popupVisible:l},i.createElement("div",{className:d,onClick:!c&&this.openPanel,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},"calendar"===o&&i.createElement("input",{value:a||"",placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f"}),"rangeCalendar"===o&&i.createElement(i.Fragment,null,i.createElement("input",{value:a[0]||"",placeholder:"\u5f00\u59cb\u65e5\u671f"}),i.createElement("span",null,"\u81f3"),i.createElement("input",{value:a[1]||"",placeholder:"\u7ed3\u675f\u65e5\u671f"})),i.createElement("i",{className:"icon-cem_close-window"}),i.createElement("i",{className:"icon-cem_account-overview",onClick:this.clear})))},t}(i.Component);C.propTypes={type:h().string.isRequired,value:h().oneOfType([h().string,h().array]),getDateRange:h().func.isRequired,disabledDate:h().func,disabled:h().bool};var b=n(49722),k=n(61193),S=n(97911),A=n(97189),w=function(e){function t(t){var n;return(n=e.call(this,t)||this).changeState=function(e){n.setState(e,(function(){n.updateFilter()}))},n.clickCheckbox=function(e){var t=e.aspect1,a=e.aspect2,o=n.state.limit;o&&(t&&t.length>o||a&&a.length>o)?l.Z.warning("\u5f53\u524d\u6761\u4ef6\u4e0b\u6700\u591a\u652f\u6301\u9009\u62e9"+o+"\u4e2a\u5206\u6790\u6307\u6807"):n.setState(e)},n.updateFilter=function(){var e=n.state.aspectType,t=n.state,a=t.aspect1,o=t.aspect2;e&&a&&a.length>0?o=[]:o.length>0&&(a=[]),n.setState({aspect1:a,aspect2:o})},n.clickCancelBtn=function(){n.state.aspectShow&&n.props.closePanel()},n.orderAspect=function(e){for(var t=n.state.aspectList,a=[],o=[],i=0;i<t.length;i++){for(var r=!1,l=0;l<e.length;l++)if(t[i].name===e[l]){r=!0,a[l]=t[i];break}r||o.push(t[i])}n.setState({aspectList:a.concat(o)})},n.state={aspectShow:!1,aspectType:!0,aspect1:[],aspect2:[],rawAspectList:[],aspectList:[],projectId:t.projectId,model:t.model,ready:!1,limit:t.limit,panelWidth:t.panelWidth},n}(0,a.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var t=e.aspectShow,n=e.limit,a=e.panelWidth;this.setState({aspectShow:t,limit:n,panelWidth:a})},n.componentDidMount=function(){this.getValue(),window.addEventListener("click",this.clickCancelBtn)},n.componentDidUpdate=function(){this.setLeftBlockHeight()},n.componentWillUnmount=function(){window.removeEventListener("click",this.clickCancelBtn)},n.setLeftBlockHeight=function(){var e=document.querySelectorAll(".analyse-aspect-panel-body .left .new-checkbox-panel .wt-checkbox-group .wt-checkbox"),t=document.querySelectorAll(".analyse-aspect-panel-body .right .new-checkbox-panel");if(e.forEach((function(e){return e.style.marginBottom="0"})),t.length>0)for(var n=t.length-1;n>=0;n--){var a=t[n].offsetHeight;a>36&&(e[n].style.marginBottom=a-36+"px")}},n.getValue=function(){var e=this.state,t=e.aspectType,n=e.aspect1,a=e.aspect2;if(e.ready)return{aspect1:t?n:[],aspect2:t?[]:a};var o=this.props,i=o.projectId,r=o.model;this.fetchAspects(i,r)},n.getSndIndex=function(e){var t=this.state.aspects[e];return t&&t.length>0&&this.setState({aspectType:!1,aspect1:[],aspect2:t}),t},n.setAspectFromOutside=function(e){this.setState((0,o.Z)({aspectType:e.aspect1.length>0},e))},n.fetchAspects=function(e,t){var n=this,a=t.map((function(t){return b.h.post("filter/find",{filterTypes:["ASPECT"],projectId:e,type:t})}));Promise.all(a).then((function(a){a.forEach((function(a){var o=a.data.result,i=n.state.rawAspectList;o.aspect&&n.setState({projectId:e,model:t,rawAspectList:i.concat(o.aspect)})})),n.formatData()}))},n.formatData=function(){var e=this.state,t=e.model,n=e.aspect1,a=e.aspect2,o=e.rawAspectList,i=(e.limit,this.state),r=i.aspectShow,l=i.aspectType,c=o,s={};if("BRAND"===t){var p=c.map((function(e){return e&&JSON.parse(e)})),u=0,d=k.Z.getAuthority();if(d.indexOf("ANALYZE_PRODUCT")>=0&&u++,d.indexOf("ANALYZE_SERVER")>=0&&u++,d.indexOf("ANALYZE_MARKETING")>=0&&u++,0===u)p.forEach((function(e){Object.keys(e).forEach((function(e,t){return s[t]=e}))}));else if(1===u)["ANALYZE_PRODUCT","ANALYZE_SERVER","ANALYZE_MARKETING"].forEach((function(e,t){d.indexOf(e)>=0&&Object.keys(p[t]).map((function(e,t){return s[t]=e}))}));else if(u>1){if(d.indexOf("ANALYZE_PRODUCT")>=0){var h=Object.keys(p[0]);1===h.length?s["\u4ea7\u54c1"]=p[0][h[0]]:h.length>1&&(s["\u4ea7\u54c1"]=p[0])}if(d.indexOf("ANALYZE_SERVER")>=0){var f=Object.keys(p[1]);1===f.length?s["\u670d\u52a1"]=p[1][f[0]]:f.length>1&&(s["\u670d\u52a1"]=p[1])}if(d.indexOf("ANALYZE_MARKETING")>=0){var m=Object.keys(p[2]);1===m.length?s["\u5e02\u573a"]=p[2][m[0]]:m.length>1&&(s["\u5e02\u573a"]=p[2])}}}else c&&c[0]&&c.forEach((function(e){s=Object.assign.apply(Object,[s].concat(JSON.parse(e)))}));var g=Object.keys(s).map((function(e,t){var n=s[e];return{id:t,name:e,contain:n.length?n:Object.keys(n).map((function(e,t){var a=n[e];return{id:t,name:e,contain:a.length?a:Object.keys(a)}}))}}));g.length<=1&&(r=!1,l=!1),l&&!n.length||l||a.length||g&&g[0]&&g[0].contain.forEach((function(e){"object"===typeof e?a.push(e.name):a.push(e)})),this.changeState({aspectList:g,aspectShow:r,aspects:s,aspectType:l,aspect1:n,aspect2:a,ready:!0}),this.props.onChange()},n.handleClickBlock=function(e,t){var n=this.state,a=n.aspectType;if(n.aspectShow&&a!==e){var o=document.querySelectorAll(".analyse-aspect-panel-body div"),i="disabled";e?this.hanldeClass("remove",o[1],i):this.hanldeClass("remove",o[0],i),e?this.setState({aspectType:e,aspect2:[]}):this.setState({aspectType:e,aspect1:[]})}},n.hanldeClass=function(e,t,n){if("add"===e)(0,A.addClass)(t,n);else(0,A.removeClass)(t,n)},n.clickConfirmBtn=function(){this.props.onChange(),this.props.closePanel()},n.clearOptions=function(){this.setState({aspect1:[],aspect2:[]})},n.render=function(){var e=this,t=this.state,n=t.aspectList,a=t.aspectType,o=t.aspect1,l=t.aspect2,c=t.aspectShow,s=t.limit,p=t.panelWidth;return i.createElement("div",{className:"analyse-aspect-panel-wrapper",style:{display:c?"block":"none",width:p},onClick:function(e){return e.stopPropagation()}},i.createElement("div",{className:"analyse-aspect-panel-body"},i.createElement("div",{className:a?"left":"left disabled",onClick:function(t){return e.handleClickBlock(!0,t)}},i.createElement(S.Z,{changeState:function(t){return e.clickCheckbox({aspect1:t})},checkedList:o,ITEMS:n.map((function(e){return e.name||e})),categoryTitle:"\u4e00\u7ea7\u6307\u6807",type:"vertical",limit:s})),i.createElement("div",{className:a?"right disabled":"right",onClick:function(t){return e.handleClickBlock(!1,t)}},i.createElement("div",null,"\u4e8c\u7ea7\u6307\u6807"),n.length>0&&n.map((function(t,n){return i.createElement(S.Z,{changeState:function(t){return e.clickCheckbox({aspect2:t})},checkedList:JSON.parse(JSON.stringify(l)),key:"aspect1-"+n,categoryTitle:t.name,ITEMS:t.contain.map((function(e){return e.name||e})),type:"horizontal",limit:s})})))),i.createElement("div",{className:"analyse-aspect-panel-footer"},i.createElement("span",{onClick:function(){return e.clearOptions()}},"\u6e05\u7a7a\u5168\u90e8\u9009\u9879"),i.createElement("div",null,i.createElement(r.Button,{type:"primary",onClick:function(){return e.clickConfirmBtn()}},"\u786e\u5b9a"),i.createElement("span",{className:"cancelBtn",onClick:function(){return e.clickCancelBtn()}},"\u53d6\u6d88"))))},t}(i.Component),N=function(e){function t(t){var n;return(n=e.call(this,t)||this).closePanel=function(){n.setState({showPanel:!1})},n.handleAspectChange=function(){n.getFormatedValue(),n.props.onChange()},n.getFormatedValue=function(){if(n.panel){var e=n.panel.getValue();if(e){var t=e.aspect1,a=e.aspect2;n.setState({formatedValue:(0===t.length&&0===a.length?"\u8bf7\u9009\u62e9":0===t.length?"\u4e8c\u7ea7\u6307\u6807\uff1a":"\u4e00\u7ea7\u6307\u6807\uff1a")+(t.length>0?t.join("\uff0c"):a.join("\uff0c"))})}}},n.handleClear=function(e){e.stopPropagation(),n.panel&&n.panel.clearOptions(),setTimeout((function(){return n.getFormatedValue()}),0)},n.getPanelWidth=function(){var e=document.getElementsByClassName("el-input__inner")&&document.getElementsByClassName("el-input__inner")[0].offsetWidth;n.setState({panelWidth:e})},n.state={showPanel:!0,formatedValue:"",showClearIcon:!1,panelWidth:0},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.getPanelWidth()},n.togglePanel=function(e){var t=this,n=this.state.showPanel;n&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout((function(){return t.setState({showPanel:!n})}),0)},n.getValue=function(){if(this.panel)return this.panel.getValue()},n.getSndIndex=function(e){return this.panel.getSndIndex(e)},n.setAspectFromOutside=function(e){return this.panel.setAspectFromOutside(e)},n.orderAspect=function(e){this.panel.orderAspect(e)},n.render=function(){var e=this,t=this.state,n=t.showPanel,a=t.formatedValue,l=t.showClearIcon,c=t.panelWidth;return i.createElement("div",{className:"analyse-aspect-wrapper analyse-aspect-wrapper-input-mode"},i.createElement("div",{className:"analyse-aspect-trigger analyse-aspect-trigger-input-mode",onClick:function(t){return e.togglePanel(t)},onMouseOver:function(){return e.setState({showClearIcon:!0})},onMouseLeave:function(){return e.setState({showClearIcon:!1})}},i.createElement(r.Input,{ref:function(t){return e.input=t},value:a}),l&&"\u8bf7\u9009\u62e9"!==a?i.createElement("i",{className:"icon-cem_delete",onClick:function(t){return e.handleClear(t)}}):i.createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:n?"rotate(180deg)":"",top:n?"4px":"5px"}})),i.createElement(w,(0,o.Z)({ref:function(t){e.panel=t},panelWidth:c,aspectShow:n,closePanel:this.closePanel},this.props,{onChange:this.handleAspectChange})))},t}(i.Component),O=n(55609),x=function(e){var t=[];return Object.keys(e).forEach((function(n){"connConfig"===n||"tag"===n?e[n]&&e[n].forEach((function(e){t.push((0,o.Z)({},e,{special:n}))})):"source"===n||"escore"===n||"messageType"===n||"content"===n?e[n]&&t.push({id:"content"!==n?n:"KEY_WORD",special:n,values:"content"!==n?e[n]:e[n][0].contain}):"connections"===n&&e[n]&&t.push({id:n,special:n,values:e[n]})})),t},T=function(e){function t(t){var n;return(n=e.call(this,t)||this).openCreateModal=function(){n.props.dispatch({type:"opinion/save",payload:{modalVisible:!0,step:1}})},n.confirmModal=function(){var e=n.props,t=e.opinion,a=t.step,o=t.filterModel,i=t.filterModel.aspect,r=t.dateRange,c=e.dispatch;if(1===a){var s=n.filterCondition.getReFormatValue();Object.keys(s).length>0?(o.filter=s,c({type:"opinion/saveState",payload:{step:2,filterModel:o}}),Object.keys(i).length>0&&setTimeout((function(){n.analyseAspect&&n.analyseAspect.setAspectFromOutside(i)}),0),n.filterCondition.saveList()):l.Z.warning("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u9879\u7b5b\u9009\u6761\u4ef6")}else r.length>0?c({type:"opinion/createOpinionTask"}):l.Z.warning("\u8bf7\u9009\u62e9\u7b5b\u9009\u65f6\u95f4")},n.cancelModal=function(){var e=n.props,t=e.opinion.step,a=e.dispatch;1===t?n.resetModal():a({type:"opinion/saveState",payload:{step:1}})},n.resetModal=function(){var e="YYYY-MM-DD";(0,n.props.dispatch)({type:"opinion/saveState",payload:{step:1,modalVisible:!1,filterModel:{filter:{},analysis:{},aspect:{}},dateRange:[g()().subtract(29,"days").format(e),g()().format(e)],analyseAspectShow:!1}})},n.onFilterConditionChange=function(e){},n.handleSort=function(e){var t=n.props.dispatch;e.prop;t({type:"opinion/saveState",payload:{sortType:"ascending"===e.order?"ASC":"DESC"}}),t({type:"opinion/fetchOpinionList"})},n.switchPage=function(e){var t=n.props.dispatch;t({type:"opinion/saveState",payload:{pageIndex:e}}),t({type:"opinion/fetchOpinionList"})},n.getFilterDateRange=function(e){(0,n.props.dispatch)({type:"opinion/saveState",payload:{dateRange:e}})},n.handleAnalyseObjChange=function(e){var t=n.props,a=t.opinion.filterModel;(0,t.dispatch)({type:"opinion/saveState",payload:{filterModel:(0,o.Z)({},a,{analysis:e})}})},n.handleAnalyseAspectChange=function(){var e=n.props,t=e.opinion.filterModel,a=e.dispatch;if(n.analyseAspect){var i=n.analyseAspect.getValue();a({type:"opinion/saveState",payload:{filterModel:(0,o.Z)({},t,{aspect:i})}})}},n.editOpinionTask=function(e){var t=e.date,a=t.from,o=t.to,i=e.filter,r=i.aspect,l=i.connConfig,c=i.source,s=i.messageType,p=i.content;(0,n.props.dispatch)({type:"opinion/saveState",payload:{filterModel:{aspect:r,filter:{connConfig:l,source:c,messageType:s,content:p}},dateRange:[a,o],modalVisible:!0}})},n.goDetail=function(e){var t=e.id;window.open("/opinionDetail?id="+t)},n.showAnalyseAspect=function(e){e.stopPropagation(),(0,n.props.dispatch)({type:"opinion/saveState",payload:{analyseAspectShow:!0}})},n.state={columns:[{label:"\u5178\u578b\u610f\u89c1\u4efb\u52a1\u6279\u6b21",prop:"sequence",align:"center",sortable:!1,render:function(e){var t=location.hostname,n=e.sequence,a=e.filter,o=e.date,r=o.from,l=o.to,c=function(e){var t=[],n=JSON.parse(localStorage.getItem("filter-list")).list;return Object.keys(e).forEach((function(a){e[a]&&function(){switch(a){case"connConfig":for(var o=e[a],i=function(e){var a=n.filter((function(t){return t.id===o[e].id}));if(a&&a.length>0){for(var i=[],r=0;r<a[0].values.length;r++)for(var l=0;l<o[e].values.length;l++)a[0].values[r].id===o[e].values[l]&&i.push(a[0].values[r].name);t.push({name:a[0].name,values:i})}},r=0;r<o.length;r++)i(r);break;case"source":case"expandTopic":var l=n.filter((function(e){return e.id===a}));if(l&&l.length>0){for(var c=[],s=0;s<e[a].length;s++)for(var p=0;p<l[0].values.length;p++)e[a][s]===l[0].values[p].id&&c.push(l[0].values[p].name);t.push({name:l[0].name,values:c})}break;case"aspect":var u=e[a],d=u.aspect1,h=u.aspect2;t.push({name:"\u5206\u6790\u6307\u6807",values:d.length>0?d:h})}}()})),t}(a);return c.push({name:"\u65f6\u95f4",values:r+" ~ "+l}),i.createElement(s.Z,{overlay:function(){return i.createElement("div",{className:"opinion-tip-wrapper"},i.createElement("div",{className:"opinion-tip-title"},"\u5178\u578b\u610f\u89c1 ",t[0].toUpperCase(),"-",n),c.map((function(e,t){return i.createElement("div",{key:t,className:"opinion-tip-item"},i.createElement("label",null,e.name,"\uff1a"),i.createElement("div",{title:Array.isArray(e.values)?e.values.join("\uff0c"):e.values},Array.isArray(e.values)?e.values.join("\uff0c"):e.values))})))},overlayClassName:"opinion-tip",placement:"bottomLeft"},i.createElement("span",null,t[0].toUpperCase(),"-",n))}},{label:"\u6d88\u606f\u6570",prop:"messageTotal",align:"center",sortable:!1},{label:"\u89c2\u70b9\u6570",prop:"opinionTotal",align:"center",sortable:!1},{label:"\u72b6\u6001",prop:"status",align:"center",sortable:!1,render:function(e){var t="";switch(e.status){case"ENABLE":t="\u5f85\u8ba1\u7b97";break;case"DISABLE":case"FAILURE":t="\u521b\u5efa\u5931\u8d25";break;case"FINISH":t="\u8ba1\u7b97\u5b8c\u6210";break;case"CALCULATING":t="\u8ba1\u7b97\u4e2d";break;case"EXPIRED":t="\u5df2\u8fc7\u671f"}return t}},{label:"\u7279\u6b8a\u8bf4\u660e",prop:"statusDescription",align:"center",sortable:!1,render:function(e){var t=e.status,n=e.predictTime,a=e.opinionTotal,o=g()(n,"YYYY-MM-DD HH:mm:ss"),i=Math.round(g().duration(o.diff(g()())).as("minutes")),r="";switch(t){case"ENABLE":r="\u9884\u8ba1\u5269\u4f59"+i+"\u5206\u949f";break;case"DISABLE":r="\u89c2\u70b9\u6570\u91cf\u8fc7"+(0===a?"\u5c11":"\u591a")+"\uff0c\u521b\u5efa\u5931\u8d25";break;case"CALCULATING":r=i>=0?"\u9884\u8ba1\u5269\u4f59"+i+"\u5206\u949f":"\u5df2\u8d85\u65f6"+-i+"\u5206\u949f";break;default:r="\u65e0"}return r}},{label:"\u521b\u5efa\u6216\u91cd\u8dd1\u65f6\u95f4",minWidth:"138",prop:"createdTime",align:"center",sortable:!0},{label:"\u64cd\u4f5c",prop:"operation",align:"left",sortable:!1,render:function(e){return i.createElement(i.Fragment,null,i.createElement("span",{className:"text-btn",onClick:function(){return n.editOpinionTask(e)}},"\u91cd\u8dd1"),"FINISH"===e.status&&i.createElement("span",{className:"text-btn",onClick:function(){return n.goDetail(e)}},"\u67e5\u770b"))}}]},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){(0,this.props.dispatch)({type:"opinion/fetchOpinionList"})},n.render=function(){var e=this,t=document.documentElement.clientHeight-46-52-30-38-20-24,n=i.createElement(i.Fragment,null,i.createElement("span",null,"\u53ef\u4ee5\u540c\u65f6\u8ba1\u7b975\u4e2a\u4efb\u52a1\uff0c\u652f\u6301\u5b58\u653e50\u4e2a\u5df2\u7ecf\u8ba1\u7b97\u597d\u7684\u4efb\u52a1\u3002\u8d85\u8fc750\u4e2a\uff0c\u6700\u65e9\u5b8c\u6210\u8ba1\u7b97\u7684\u4efb\u52a1\u5c06\u5931\u6548\u3002\u5982\u679c\u9700\u8981\uff0c\u53ef\u91cd\u65b0\u8ba1\u7b97\u3002",i.createElement("a",{style:{color:"#0847A6"},href:"http://wiki.yuntingai.com/pages/viewpage.action?pageId=65609&os_username=yuntingguest&os_password=skieer@2019&os_cookie=true&login=%E7%99%BB%E5%BD%95&os_destination="},"\u4e86\u89e3\u66f4\u591a"))),a=i.createElement("div",null,"\u5178\u578b\u610f\u89c1",i.createElement(s.Z,{placement:"bottom",overlay:n},i.createElement("i",{className:"icon-cem_problem"}))),o=this.props,l=o.opinion,d=l.list,h=l.total,f=l.pageSize,m=l.pageIndex,v=l.modalVisible,y=l.step,E=l.filterModel,b=E.filter,k=E.aspect,S=l.dateRange,A=l.analyseAspectShow,w=o.tableLoading,O=localStorage.getItem("cem-projectId");return i.createElement("div",{className:"opinion-list-wrapper"},i.createElement(p.Z,{title:a}),i.createElement(r.Loading,{loading:w,text:"\u62fc\u547d\u52a0\u8f7d\u4e2d"},i.createElement(c.Z,{columns:this.state.columns,data:d,onSortChange:this.handleSort,total:h,pagePosition:"down",pageSize:f,currentPage:m,onPage:this.switchPage,maxHeight:t})),i.createElement(r.Dialog,{title:"\u521b\u5efa\u5178\u578b\u610f\u89c1\u4efb\u52a1",size:"large",visible:v,onCancel:this.resetModal,lockScroll:!0,customClass:"opinion-dialog-wrapper"},i.createElement(r.Dialog.Body,null,1===y?i.createElement(u.Z,{ref:function(t){return e.filterCondition=t},value:b?x(b):[],type:"MARKETING",filter:["CONN_CONFIG","SOURCE","TAG","EXPAND_TOPIC"],filterConfig:[],onFilterChange:this.onFilterConditionChange,noBottom:!0,hideAdvanced:!0}):i.createElement(i.Fragment,null,i.createElement("div",{className:"form-item"},i.createElement("label",null,"\u7b5b\u9009\u65f6\u95f4"),i.createElement(C,{type:"rangeCalender",value:S,getDateRange:this.getFilterDateRange,disabledDate:function(e){return e.isAfter(g()())}})),i.createElement("div",{className:"form-item"},i.createElement("label",null,"\u5206\u6790\u6307\u6807"),A?i.createElement(N,{ref:function(t){return e.analyseAspect=t},limit:null,value:k,model:["PRODUCT","MARKETING","SERVICE"],projectId:O,onChange:this.handleAnalyseAspectChange}):i.createElement("div",{className:"addBtn",onClick:this.showAnalyseAspect},"\u5206\u6790\u6307\u6807 +")))),i.createElement(r.Dialog.Footer,{className:"dialog-footer"},i.createElement(r.Button,{onClick:this.cancelModal},1===y?"\u53d6\u6d88":"\u4e0a\u4e00\u6b65"),i.createElement(r.Button,{type:"primary",onClick:this.confirmModal},1===y?"\u4e0b\u4e00\u6b65":"\u786e\u5b9a"))))},t}(i.PureComponent);const L=(0,O.connect)((function(e){return{opinion:e.opinion,tableLoading:e.loading.effects["opinion/fetchOpinionList"]}}))(T)},97911:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(94578),o=n(67294),i=n(85151),r=n(5133),l=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).handleCheckedAll=function(e){var n=t.props,a=n.ITEMS,o=n.changeState,i=n.checkedList,r=[];e.target.checked?(i.map((function(e){return r.push(e)})),a.filter((function(e){return r.indexOf(e)<0})).map((function(e){return r.push(e)}))):i.filter((function(e){return a.indexOf(e)<0})).map((function(e){return r.push(e)})),o&&o(r)},t.handleChange=function(e){var n=t.props,a=n.changeState,o=n.checkedList,i=n.limit;Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},i?-1===o.indexOf(e)?o.length<i?o.push(e):r.Z.warning("\u5f53\u524d\u6761\u4ef6\u4e0b\u6700\u591a\u652f\u6301\u9009\u62e9"+i+"\u4e2a\u5206\u6790\u6307\u6807"):o.remove(e):-1===o.indexOf(e)?o.push(e):o.remove(e),a&&a(o)},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.ITEMS,a=t.categoryTitle,r=t.titles,l=t.checkedList,c=t.type,s=(t.limit,l.filter((function(e){return n.indexOf(e)>=0}))),p=!!s.length&&s.length===n.length,u=!!s.length&&s.length!==n.length;return o.createElement("div",{className:"vertical"===c?"new-checkbox-panel new-checkbox-panel-vertical":"new-checkbox-panel"},o.createElement(i.Jg,{checked:p,indeterminate:u,onChange:this.handleCheckedAll},a||"\u5168\u9009"),o.createElement(i.CS,{checkedList:l,onChange:function(t){return e.handleChange(t)}},n&&n.map((function(e,t){return o.createElement(i.Jg,{key:t,value:e},r?r[e]:e)}))))},t}(o.Component)},24473:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(87462),o=n(63366),i=n(94578),r=n(67294),l=n(45697),c=n.n(l),s=n(94184),p=n.n(s),u=["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"],d=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.prefixCls,i=t.children,l=t.className,c=t.block,s=t.indeterminate,d=t.value,h=t.checked,f=t.defaultChecked,m=t.onChange,g=t.disabled,v=(0,o.Z)(t,u),y={value:d,checked:h,defaultChecked:f,onChange:m,disabled:g},E=p()(n,((e={})[n+"-disabled"]=y.disabled,e[n+"-block"]=c,e[n+"-indeterminate"]=s,e),l);return r.createElement("label",(0,a.Z)({tabIndex:y.disabled?-1:0,className:E},v),r.createElement("input",(0,a.Z)({type:"checkbox",className:n+"-input"},y)),r.createElement("span",{className:n+"-status"}),i&&r.createElement("span",{className:n+"-text",title:i},i))},t}(r.Component);d.propTypes={prefixCls:c().string,value:c().oneOfType([c().string,c().number]),checked:c().bool,defaultChecked:c().bool,onChange:c().func,indeterminate:c().bool,disabled:c().bool,block:c().bool},d.defaultProps={prefixCls:"wt-checkbox"};const h=d},85151:(e,t,n)=>{n.d(t,{Jg:()=>a.Z,CS:()=>f});var a=n(24473),o=n(87462),i=n(63366),r=n(94578),l=n(67294),c=n(45697),s=n.n(c),p=n(94184),u=n.n(p),d=["prefixCls","children","className","onChange","values","checkedList","block"],h=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).handleCheckBoxChange=function(e){var n=t.props.onChange;n&&n(e)},t}return(0,r.Z)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,a=n.prefixCls,r=n.children,c=n.className,s=(n.onChange,n.values),p=n.checkedList,h=n.block,f=(0,i.Z)(n,d);return e=s?s.map((function(e,n){var a=0!==p.length&&-1!==p.indexOf(e);return l.createElement(Checkbox,{key:n,value:e,checked:a,onChange:function(e){return t.handleCheckBoxChange(e)},block:h},e)})):l.Children.map(r,(function(e,n){if(e){var a=e.props,o=a.value,i=0!==p.length&&-1!==p.indexOf(o);return l.cloneElement(e,{checked:i,key:n,block:a.block||h,onChange:function(){var e=a.value;t.handleCheckBoxChange(e)}})}})),l.createElement("div",(0,o.Z)({className:u()(a,c)},f),e)},t}(l.Component);h.defaultProps={prefixCls:"wt-checkbox-group"},h.propTypes={onChange:s().func,values:s().array,block:s().bool};const f=h;var m=function(e){var t={};return Object.keys(e).forEach((function(n){/^data\-.+$/.test(n)&&(t[n]=e[n])})),t},g=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=m(e);return l.createElement("label",{className:e.className,title:e.children},l.createElement("div",{className:"checkbox"},l.createElement("input",(0,o.Z)({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),l.createElement("div",{className:"checkbox-body"})),"\xa0",l.createElement("span",null,e.children))},t}(l.Component);g.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}},12518:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(94578),o=n(67294),i=n(45697),r=n.n(i),l=n(61409),c=n(92360),s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props.title;e!==n.length-1&&l.mW.go(e-n.length+1)},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.rightContent;return o.createElement("div",{className:"secondary-header"},n instanceof Array?o.createElement(c.Breadcrumb,{className:"breadcrumb-style",separator:""},n.map((function(t,n){return o.createElement(c.Breadcrumb.Item,{key:n},o.createElement("span",{onClick:function(){return e._handleBreadcrumbClick(n)}},t))}))):o.createElement("div",{className:"normal-title"},n),a&&a)},t}(o.Component);s.propTypes={title:r().oneOfType([r().string,r().array]).isRequired,rightContent:r().node};const p=s}}]);