"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[5930],{2786:(e,t,n)=>{n.d(t,{X_:()=>l});var a=n(30381),r=n.n(a),i=n(87219);function o(e,t){var n=JSON.parse(JSON.stringify(e)),a=e.quickChoice,i=e.from,o=e.to,l=r()().format("YYYY-MM-DD HH:mm:ss").split(" ")[1];if("\u8fd124\u5c0f\u65f6"===a)if(1===t){var s=i.split(" ").map((function(e){return e.trim()}));n.from=r()(s[0]).format("YYYY-MM-DD")+" "+l,n.to=""+r()(s[0]).endOf("day").format("YYYY-MM-DD HH:mm:ss")}else{var c=o.split(" ").map((function(e){return e.trim()}));n.from=""+r()(c[0]).startOf("day").format("YYYY-MM-DD"),n.to=r()(c[0]).format("YYYY-MM-DD")+" "+l}else if(/\u5c0f\u65f6/.test(a)){var u=i.split(" ").map((function(e){return e.trim()}));1===t?(n.from=i,n.to=r()(u[0]).format("YYYY-MM-DD")+" "+r()(i).hour()+":59:59"):(n.from=""+r()(u[0]).startOf("day").format("YYYY-MM-DD HH:mm:ss"),n.to=o)}return n}var l=function(e,t,n,a,l,s){t.quickChoice;var c=t.numOfDays,u=/:/.test(t.quickChoice)||-1===t.quickChoice.indexOf("-"),d="line"===e&&a instanceof Array&&a.length>0?(0,i.ZP)(t,(function(e){var i=function(e,t,n){var a=n?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";switch(t){case"HOUR":return{from:r()(e).format("YYYY-MM-DD HH:00:00"),to:r()(e).format("YYYY-MM-DD HH:59:59")};case"YEAR":var i=r()(e);return{from:i.startOf("year").format(a),to:i.endOf("year").format(a)};case"QUARTER":var o=e.split("-"),l=r()().year(o[0]).quarter(o[1]);return{from:l.startOf("quarter").format(a),to:l.endOf("quarter").format(a)};case"MONTH":var s=r()(e);return{from:s.startOf("month").format(a),to:s.endOf("month").format(a)};case"WEEK":var c=e.split("-"),u=c[0],d=c[1],p=r()().year(u).week(d);return{from:p.startOf("week").format(a),to:p.endOf("week").format(a)};default:return{from:e,to:e}}}(n,l,u),s=i.from,d=i.to;"DAY"!==l&&"HOUR"!==l?JSON.stringify(n)===JSON.stringify(a[0])?s=e.from:JSON.stringify(n)===JSON.stringify(a[a.length-1])&&(d=e.to):"DAY"!==l&&"HOUR"!==l||1!==c&&2!==c||(JSON.stringify(n)===JSON.stringify(a[0])?(s=o(t,1).from,d=o(t,1).to):JSON.stringify(n)===JSON.stringify(a[a.length-1])&&(d=o(t,2).to,s=o(t,2).from)),e.from=s,e.to=d,e.numOfDays=function(e,t){var n=Date.parse(e),a=Date.parse(t),r=Math.abs(n-a);return Math.floor(r/864e5)+1}(d,s),e.quickChoice=s.replaceAll("-",".")+" - "+d.replaceAll("-",".")})):t;return d}},15930:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q});var a=n(63366),r=n(87462),i=n(94578),o=n(67294),l=n(35103),s=(n(43378),n(62443)),c=n(8201),u=n(98191),d=n(50976),p=n(39432),f=n(87300),m=n(94644),h=function(e){var t=0;e.forEach((function(e){var n=e.slice(1).sort((function(e,t){return t-e})),a=parseFloat(n[0]);a>t&&(t=a)})),t=Math.ceil(t);for(var n=0;n<4;n++)t%4!==0&&t++;return 0===t&&(t=4),{intVal:t/4,maxVal:t}},E=[{title:"\u4f7f\u7528\u4eba\u7684\u6027\u522b",value:"\u6027\u522b"},{title:"\u4f7f\u7528\u4eba\u7684\u5e74\u9f84\u6bb5",value:"\u5e74\u9f84\u6bb5"},{title:"\u89d2\u8272\u4e0e\u5173\u7cfb",value:"\u89d2\u8272\u4e0e\u5173\u7cfb"},{title:"\u8d2d\u4e70\u51b3\u7b56",value:"\u8d2d\u4e70\u51b3\u7b56"},{title:"\u4f7f\u7528\u573a\u5408",value:"\u4f7f\u7528\u573a\u5408"},{title:"\u7528\u9014",value:"\u7528\u9014"},{title:"\u4ee3\u8a00\u4eba",value:"\u4ee3\u8a00\u4eba"}];function v(e,t){var n=e.map((function(e){return e.name})),a=e[0].data.map((function(e){return e.name}));a=E.reduce((function(e,t){return a.find((function(e){return t.value===e}))&&e.push(t.title),e}),[]);var r=e.map((function(e){return{name:e.name,list:E.reduce((function(t,n){var a=e.data.find((function(e){return n.value===e.name}));return a&&t.push({scene:n.title,total:a.total}),t}),[])}})),i=r.reduce((function(e,t){return t.list.map((function(n){return e.push([t.name,n.scene,n.total])})),e}),[[""+t,"\u573a\u666f","\u6807\u7b7e\u6570\u91cf"]]);return{rangedName:n,sceneName:a,source:r,datasets:i}}var y=function(e,t,n,a,r){if("image"===t)(0,m._v)(e,a);else if("data"===t){var i=v(n,r).datasets;(0,m.aT)([i],a)}};const g=function(e){function t(t){var n;return(n=e.call(this,t)||this).getChartRef=function(e){return n.chartRef=e},n.state={showLabel:!0},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,n=t[0],a=t[1];n.addEventListener("mouseleave",(function(){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(a.style.dispaly="none")}),2e3)})),a&&a.addEventListener("mouseenter",(function(){return e.chartLeaveTimeout=void 0}))}}),200)},n.componentDidUpdate=function(e,t){var n=e.data,a=this.props.data,r=t.showLabel,i=this.state.showLabel;(0,c.P)(a)&&JSON.stringify(n)!==JSON.stringify(a)&&this.renderChart(),r!==i&&this.renderChart(),!(0,c.P)(a)&&this.chartRef&&(this.chartRef=void 0)},n.renderChart=function(){var e=this.props,t=e.data,n=e.title,a=e.analysisModel,r=a&&a[0].values[0].label,i=this.state.showLabel;if((0,c.P)(t)&&this.chartRef){var o=function(e,t,n,a){var r=v(e,n),i=r.rangedName,o=r.sceneName,l=r.source,s=r.datasets;return{title:{text:t},grid:{top:100,left:40,right:50,bottom:24,containLabel:!0},dataset:{datasets:s},xAxis:{type:"category",axisTick:{show:!1},data:o},yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return(0,p.hE)(e)}},interval:h(s.map((function(e){return e.slice(1)}))).intVal,max:h(s.map((function(e){return e.slice(1)}))).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},legend:{top:50,left:30,right:48,itemWidth:10,itemHeight:10,itemGap:24,type:"scroll",data:i,icon:"circle"},tooltip:{trigger:"axis",showDelay:20,hideDelay:10,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n      box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",axisPointer:{type:"none",label:{show:!1}},formatter:function(e,t,n){if(e.length)return setTimeout((function(){var a='\n            <span style="font-size: 12px; color: #8c8c8c; font-weight: 400;"style="font-size: 12px; color: #8c8c8c; font-weight: 400;">\n            '+e[0].axisValue+"\n            </span>\n          ",r=e.map((function(e){var t=e.marker,n=e.seriesName,a=e.data;return"\n            <div style='display: flex;justify-content: space-between; align-items: center; color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+t+"</span>"+n+"</div><div style='color: #262626;margin-left: 10px;'>\n              "+(0,p.hE)(a.value)+"\n            </div></div>\n          "}));n(t,(0,f.r)(a,r))}))}},series:[].concat(l.map((function(e){return{name:e.name,type:"bar",barGap:0,barMaxWidth:24,emphasis:{focus:"series"},data:e.list.map((function(e){return{value:e.total,label:{show:a,position:"top",color:"#262626"}}}))}})))}}(t,n,r,i);this.chartRef.clear(),this.chartRef.setOption(o)}},n.render=function(){var e=this,t=this.props,n=t.title,a=t.data,r=t.loading,i=t.analysisModel,l=this.state.showLabel,p=i&&i[0].values[0].label;return o.createElement(c.Z,{className:"yt_scene_competitor_bar_chart_wrapper",data:a,loading:r,renderTitle:o.createElement(u.Z,{title:n,data:a},o.createElement(s.default,{placement:"top",content:"\u663e\u793a\u56fe\u8868\u6807\u7b7e",mouseEnterDelay:.6},o.createElement("i",{className:"icon-tubiaobiaoqian "+(l?"active":""),onClick:function(){e.setState({showLabel:!l})}})),o.createElement(s.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6},o.createElement("i",{className:"icon-daochu",onClick:function(){return y(e.chartRef,"data",a,n,p)}})),o.createElement(s.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6},o.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return y(e.chartRef,"image",a,n,p)}})))},o.createElement(d.Z,{theme:"yt_multi_color_10",option:{},style:{width:"100%",height:"100%"},onChartReady:this.getChartRef}))},t}(o.Component);n(61105);var S=n(71535),_=n(70715),C=n(81408);const N=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).chartRef=void 0,t.source=void 0,t.lineSource=void 0,t.objNames=void 0,t.mColor=_.OW,t.legendSelected=void 0,t.getChartRef=function(e){return t.chartRef=e},t.setValue=function(e,n){var a=e.map((function(e){return e.name})),r=a.reduce((function(n,a){var r=e.find((function(e){return e.name===a}));return t.legendSelected?t.legendSelected[a]&&n.push([r.name,r.total]):n.push([r.name,r.total]),n}),[[n,"\u6807\u7b7e\u6570\u91cf"]]),i=e[0].data.map((function(e){return e.name}));t.lineSource=i.map((function(t){return[t].concat(a.map((function(n){var a=e.find((function(e){return e.name===n}));if(a){var r=a.data.find((function(e){return e.name===t}));return r?r.count:0}return 0})))}));var o=[["\u65e5\u671f"].concat(a)].concat(t.lineSource);t.objNames=a,t.source=[r,o]},t.getOption=function(e){var n=e.dataInfo,a=e.title,r=e.showLabel,i=Object.values(t.props.dateType)[0],o=160<(0,p.jD)(t.source[0].reduce((function(e,t,n){return 0===n?"":e+t[0]}),""),12);return{title:{text:a},grid:[{left:36,top:100,width:270,bottom:52,containLabel:!0},{left:360,right:48,top:100,bottom:52,containLabel:!0}],dataset:t.source.map((function(e){return{source:e}})),tooltip:{trigger:"axis",showDelay:20,hideDelay:10,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",axisPointer:{type:"none",label:{show:!1}},position:function(e,t,n,a,r){var i=r.contentSize,o=r.viewSize,l=e[0]<o[0]/2?0:-1,s=e[1]<o[1]/2?-.5:-1,c=e[0]<o[0]/2?12:-12;return[e[0]+l*i[0]+c,e[1]+s*i[1]]},formatter:function(e,r,o){if(e.length)return setTimeout((function(){if("bar"!==e[0].seriesType){var l=e[0].axisValue,s=e.map((function(e){var t=e.marker,n=e.seriesName,a=e.data;return{name:"<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+t+"</span>"+n+"</div><div style='color: #262626;margin-left: 10px;'>\n                  "+(0,p.hE)(a.value)+"\n                </div></div>",value:a.value}})),c=s.map((function(e){return e.name})),u='\n            <span style="font-size: 12px; color: #8c8c8c; font-weight: 400;">'+(0,p.Sn)(i,l)+"</span>";o(r,(0,f.r)(u,c))}else{var d=e[0],m=d.marker,h=d.data,E=n.find((function(e){return e.name===h[0]})).id;o(r,(0,f.r)(""+h[0],["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+m+"</span>\u6807\u7b7e\u6570\u91cf</div><div style='color: #262626;margin-left: 10px;'>\n                       "+(0,p.hE)(h[1])+"\n                    </div></div>"],[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return t._handleOnJumpMsg(e[0],a,E)}}],"yt_new_tooltip_wrapper"))}}),0)}},legend:{top:50,left:40,right:48,itemWidth:10,itemHeight:10,type:"scroll",itemGap:24,selected:t.legendSelected,data:t.objNames,icon:"circle"},dataZoom:[{show:!0,bottom:24,xAxisIndex:1,height:16,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"}],xAxis:[{type:"category",gridIndex:0,axisLabel:{rotate:o?45:0,show:!0,data:t.objNames,formatter:function(e){return e.length>6?e.substring(0,5)+"...":e}}},{type:"category",gridIndex:1,boundaryGap:!1,axisPointer:{type:"line",label:{show:!1}},axisLabel:{formatter:function(e){return(0,p.Sn)(i,e)}},data:t.lineSource.map((function(e){return e[0]}))}],yAxis:[{type:"value",gridIndex:0,axisLabel:{color:"#626262",formatter:function(e){return(0,p.hE)(e)}},interval:(0,C.lQ)(t.source[0].slice(1)).intVal,max:(0,C.lQ)(t.source[0].slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},{type:"value",gridIndex:1,axisLabel:{color:"#626262",formatter:function(e){return(0,p.hE)(e)}},interval:(0,C.lQ)(t.source[1].slice(1)).intVal,max:(0,C.lQ)(t.source[1].slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}}],series:[{type:"bar",xAxisIndex:0,yAxisIndex:0,datasetIndex:0,barMaxWidth:24,data:t.source[0].slice(1),itemStyle:{color:function(e){var n=e.dataIndex,a=e.name;if(t.legendSelected){var r=Object.keys(t.legendSelected);return _.OW[r.indexOf(a)]}return _.OW[n]}},label:{show:!0,position:"top",color:"#262626",formatter:function(e){var t=e.value;return(0,p.hE)(t[1])}}}].concat(t.objNames.map((function(e,o){return{type:"line",name:t.objNames[o],xAxisIndex:1,yAxisIndex:1,symbolSize:1,datasetIndex:1,data:t.lineSource.map((function(e){return{value:e[o+1],tooltip:{trigger:"item",formatter:function(e,r,o){return setTimeout((function(){var l=e.seriesName,s=e.name,c=e.data,u=e.marker,d=n.find((function(e){return e.name===l})).id,m="\n                  <div style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;position:relative;\">\n                    <span style='position:absolute;width:40px;height:150px;left:-40px;top:-30px;'></span>\n                    <span style='position:absolute;width:40px;height:150px;right:-40px;top:-30px;'></span>\n                  </div>\n                  <span style=\"font-size: 12px; color: #8c8c8c; font-weight: 400;\">"+(0,p.Sn)(i,s)+"</span>",h=["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+u+"</span>"+l+"</div><div style='color: #262626;margin-left: 10px;'>\n                      "+c.value+"\n                    </div></div>"];o(r,(0,f.r)(m,h,[{title:"\u6d88\u606f",icon:"icon-cem_jump-message",callback:function(){return t._handleOnJumpMsg(e,a,d)}}],"yt_new_tooltip_wrapper"))}),0)}},label:{show:r,position:"top",color:"#262626"}}})),itemStyle:{color:_.OW[o]}}})))}},t}return(0,i.Z)(t,e),t.prototype.renderChart=function(e,t,n,a){this.setValue(e,a),this.chartRef.clear(),this.chartRef.setOption(this.getOption({dataInfo:e,title:t,showLabel:n}))},t}(o.PureComponent);var T=n(60496),b=n(45697),x=n.n(b),M=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleOnMoreClick=function(e){var t=n.props,a=t.title,r=t.data;"image"===e?(0,m._v)(n.chartRef,a):"data"===e&&(0,c.P)(r)&&(0,m.aT)([n.source[0].map((function(e){return e.map((function(e){return e%1?(100*e).toFixed(2)+"%":e}))})),n.source[1].map((function(e){return e.map((function(e){return e%1?(100*e).toFixed(2)+"%":e}))}))],a)},n.handleOnLegendChange=function(e){var t=e.selected;n.legendSelected=t,n.renderChart()},n._handleOnJumpMsg=function(e,t,a){var r=n.props,i=r.sceneType,o=r.analysisModel,l={id:o[0].values[0].id,name:"bar"===e.seriesType?e.data[0]:e.seriesName,label:o[0].values[0].label};n.props.onMsgClick(e,t,i,a,l)},n.state={showLabel:!1,showColor:!1},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.internalId=setInterval((function(){if(e.chartRef){clearInterval(e.internalId),e.renderChart();var t=e.chartRef._dom.children,n=t[0],a=t[1];n.addEventListener("mouseleave",(function(t){e.chartLeaveTimeout=setTimeout((function(){e.chartLeaveTimeout&&(a.style.display="none")}),2e3)})),a&&a.addEventListener("mouseenter",(function(t){e.chartLeaveTimeout=void 0}))}}),200)},n.componentDidUpdate=function(e,t){var n=e.data,a=e.sceneType,r=this.props,i=r.data,o=r.sceneType,l=t.showLabel,s=this.state.showLabel;(0,c.P)(i)&&JSON.stringify(n)!==JSON.stringify(i)&&this.renderChart(),l===s&&a===o||this.renderChart(),!(0,c.P)(i)&&this.chartRef&&(this.chartRef=void 0)},n.renderChart=function(){var t=this.props,n=t.data,a=t.title,r=t.sceneType,i=t.analysisModel,o=t.sceneBrand,l=i&&i[0].values[0].label,s=this.state.showLabel;if((0,c.P)(n)&&this.chartRef){var u=function(e,t,n,a){var r=[],i=[],o=[],l=[],s=[];return e&&(s=a[0].data.reduce((function(e,t){return"\u54c1\u724c"!==t.label&&"\u578b\u53f7"!==t.label||t.options.map((function(t){return e.push({id:t.id,label:t.label})})),e}),[]),l=(r=e.map((function(e){return e.data.map((function(t){return t.data.map((function(n){return{id:e.id,name:e.name,sceneName:t.name+"/"+n.name,total:n.total,data:n.data}}))}))}))).flat(2),o=l.find((function(e){return 0!==e.data.length})).data.map((function(e){return e.name})),r=l.reduce((function(e,t){var n=e.find((function(e){return e.sceneName===t.sceneName}));return n?n.list.push({id:t.id,name:t.name,data:t.data,total:t.total}):(n={sceneName:t.sceneName,list:[{id:t.id,name:t.name,data:t.data,total:t.total}]},e.push(n)),e}),[]),i=n[0].values[0].values,r=r.find((function(e){return e.sceneName===t}))&&r.find((function(e){return e.sceneName===t})).list,r=i.reduce((function(e,t){var n=(r||[]).find((function(e){return e.id===t}));return n?e.push(n):e.push({id:t,name:s.some((function(e){return e.id===t}))?s.find((function(e){return e.id===t})).label:"",data:o.map((function(e){return{count:0,name:e}})),total:0}),e}),[])),r.sort((function(e,t){return i.indexOf(e.id)-i.indexOf(t.id)})),r}(n,r,i,o);e.prototype.renderChart.call(this,u,a,s,l)}},n.render=function(){var e=this,t=this.props,n=t.data,a=t.loading,r=t.title,i=t.onChange,l=t.onFlavorChange,p=t.dateOptions,f=t.dateType,m=t.flavorDateType,h=(t.style,t.sceneOptions),E=t.sceneType,v=this.state,y=v.showLabel,g=v.showColor,_=Object.keys(f)[0],C=Object.keys(m)[0];return o.createElement(c.Z,{className:"yt_explore_scene_competitor_bar_line_chart",data:n,loading:a,renderTitle:o.createElement(u.Z,{title:r,data:n},o.createElement("div",{className:"cascader_wrapper"},o.createElement(S.Z,{value:E.split("/"),options:h,expandTrigger:"hover",allowClear:!1,bordered:!1,className:g?"text_color":"",popupPlacement:"bottomLeft",suffixIcon:o.createElement("i",{className:"icon-cem_pull-down-or-take-up"}),popupClassName:"yt_explore_scene_competitor_cascader",getPopupContainer:function(){return document.querySelector(".yt_explore_scene_competitor_bar_line_chart")},onChange:function(e){return i({sceneType:e.join("/")})},onPopupVisibleChange:function(t){return e.setState({showColor:t})}})),o.createElement(T.Z,{options:p,activeObj:f[_],flavor:m[C],rightHook:!0,onChange:function(e){var t;return i(((t={})[_]=e,t))},onFlavorChange:function(e){var t;return l(((t={})[C]=e,t))}}),o.createElement(s.default,{placement:"top",content:"\u663e\u793a\u56fe\u8868\u6807\u7b7e",mouseEnterDelay:.6},o.createElement("i",{className:"icon-tubiaobiaoqian "+(y?"active":""),onClick:function(){e.setState({showLabel:!y})}})),o.createElement(s.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6},o.createElement("i",{className:"icon-daochu",onClick:function(){return e.handleOnMoreClick("data")}})),o.createElement(s.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6},o.createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e.handleOnMoreClick("image")}})))},o.createElement(d.Z,{onChartReady:this.getChartRef,theme:"yunting_multi_color",option:{},style:{height:"100%"},onEvents:{legendselectchanged:this.handleOnLegendChange}}))},t}(N);M.propTypes={data:x().any,style:x().object,titleOverlay:x().oneOf([x().string,x().node]),title:x().string,loading:x().bool,onChange:x().func,onMsgClick:x().func,onChartClick:x().func,dateOptions:x().arrayOf({title:x().string,value:x().string}),dateType:x().object,flavorDateType:x().object};const O=M;n(92871);var A=n(35928),D=n(5133),w=n(29531),L=n.n(w),P=n(93162),Y=function(e,t,n){var a=[];return e&&e.forEach((function(e){a.push(F(e.data&&e.data.some((function(e){return e.name===t}))?e.data.find((function(e){return e.name===t})).data:[],n).length)})),Math.max.apply(Math,a)},k=[{title:"\u4f7f\u7528\u4eba\u7684\u6027\u522b",value:"\u6027\u522b"},{title:"\u4f7f\u7528\u4eba\u7684\u5e74\u9f84\u6bb5",value:"\u5e74\u9f84\u6bb5"},{title:"\u89d2\u8272\u4e0e\u5173\u7cfb",value:"\u89d2\u8272\u4e0e\u5173\u7cfb"},{title:"\u8d2d\u4e70\u51b3\u7b56",value:"\u8d2d\u4e70\u51b3\u7b56"},{title:"\u4ee3\u8a00\u4eba",value:"\u4ee3\u8a00\u4eba"}],I=function(e){var t=JSON.parse(JSON.stringify(k));return e&&(e.some((function(e){return"\u4f7f\u7528\u573a\u5408"===e.name}))&&t.splice(3,0,{title:"\u4f7f\u7528\u573a\u5408",value:"\u4f7f\u7528\u573a\u5408"}),e.some((function(e){return"\u7528\u9014"===e.name}))&&t.splice(4,0,{title:"\u7528\u9014",value:"\u7528\u9014"})),t},R=[{title:"top10",value:"top10"},{title:"top20",value:"top20"},{title:"\u5168\u90e8",value:"all"}],F=function(e,t){return"top10"===t?e.slice(0,10):"top20"===t?e.slice(0,20):e},Z=function(e){function t(t){var n;return(n=e.call(this,t)||this).renderTooltip=function(){var e=n.props,t=e.data,a=e.singleSceneType,r=(e.analysisModel,e.singleTopType);if((0,c.P)(t)){var i=Y(t,a,r);n.setState({height:0===i?"100%":22*i+16*(i-1)+34+16})}},n.onExportImage=function(){var e=n.props,t=e.title,a=e.data,r=e.singleSceneType,i=e.singleTopType;(0,c.P)(a)?Y(a,r,i)<1?D.Z.error("\u5bfc\u51fa\u5931\u8d25"):function(e,t){var n=e.cloneNode(!0),a=e.clientWidth,r=e.clientHeight,i=document.createElement("canvas");i.className="yt_explore_scene_competingAnalysis_canvas",i.width=10*a,i.height=10*r,i.style.width=a+"px",i.style.height=r+"px",i.getContext("2d").scale(10,10),n.style.background="transparent !important",n.style.width=a+"px",n.style.height=r+"px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=-1,n.style.opacity=1,n.querySelector(".yt_chart_title_wrapper .chart_title_name").fontWeight="bold",n.querySelector(".chart_title_buttons").style.display="none",n.querySelectorAll(".name").forEach((function(e){e.style.fontWeight="bold",e.style.lineHeight="18px"})),n.querySelectorAll(".ant-progress").forEach((function(e){e.style.lineHeight="18px",e.style.marginTop="4px"})),n.querySelectorAll(".count").forEach((function(e){e.style.display="inline-block",e.style.fontWeight="bold",e.style.lineHeight="20px"})),document.body.appendChild(n),L()(n,{dpi:10*window.devicePixelRatio,allowTaint:!0,taintTest:!1,canvas:i,useCORS:!0,width:a,height:r,onrendered:function(e){document.body.appendChild(e);var a=e.toDataURL("image/jpeg");(0,P.saveAs)(a,t,"image/jpeg"),setTimeout((function(){document.body.removeChild(n),document.body.removeChild(document.querySelector(".yt_explore_scene_competingAnalysis_canvas"))}),0)}})}(document.querySelector(".yt_explore_scene_compare_progressbar_chart"),t):D.Z.error("\u5bfc\u51fa\u5931\u8d25")},n.onExportExcel=function(){var e=n.props,t=e.title,a=e.data,r=e.analysisModel,i=e.singleSceneType,o=e.singleTopType;if((0,c.P)(a)&&0!==Y(a,i,o)){var l=[r[0].values[0].label,"\u573a\u666f","\u573a\u666f\u6807\u7b7e","\u6807\u7b7e\u6570\u91cf","\u5360\u6bd4"],s=a.sort((function(e,t){return r[0].values[0].values.indexOf(e.id)-r[0].values[0].values.indexOf(t.id)})).reduce((function(e,t){var n=[];return t.data.some((function(e){return e.name===i}))&&t.data.find((function(e){return e.name===i})).total>0&&F(t.data.find((function(e){return e.name===i})).data,o).forEach((function(e){n.push([t.name,i,e.name,e.total,e.total/t.data.find((function(e){return e.name===i})).total])})),[].concat(e,n)}),[]),u=[l].concat(s);(0,m.aT)([u],t)}},n._handleOnJumpMsg=function(e,t){var a=n.props,r=a.singleSceneType,i=a.title,o=a.analysisModel,l={id:o[0].values[0].id,name:e.name,label:o[0].values[0].label},s=r+"/"+t.name;n.props.onMsgClick({},i,s,e.id,l)},n._handleOnMouseEnter=function(e,t,a){setTimeout((function(){n.setState({e:e,idx:t,f:a},(function(){n.setState({display:"block"})}))}),100)},n._handleOnMouseMove=function(e,t,a){var r=document.querySelectorAll(".content_wrap .item")[t].childNodes[1].childNodes[a].getBoundingClientRect(),i=(r.left,r.top),o=document.querySelector(".nav .menu-bottom-wrap").offsetWidth,l=e.pageX-o-16+10>document.body.offsetWidth-410?e.pageX-o-71-32-24:e.pageX-o-16+10,s=(e.pageY-i>60||a>6&&e.pageY-i<20?60:e.pageY-i)+10*a+(0===a?0:16*(a-1))+78-10;setTimeout((function(){n.setState({display:"block",left:l+"px",top:s+"px"})}),60)},n._handleOnMouseLeave=function(){setTimeout((function(){!n.popoverHover&&n.setState({display:"none"})}),200)},n.renderTooltips=function(){var e=n.state,t=e.e,a=e.idx,r=e.f,i=e.display,l=e.left,s=e.top;return o.createElement("div",{onMouseEnter:function(){n.popoverHover=!0,setTimeout((function(){"none"===i&&n.setState({display:"block"})}),100)},onMouseLeave:function(){n.popoverHover=!1,setTimeout((function(){n.setState({display:"none"})}),200)},className:"yt_explore_scene_competingAnalysis_popover",style:{display:i,left:l,top:s}},o.createElement("div",{className:"title_wrapper",dangerouslySetInnerHTML:{__html:t.name}}),o.createElement("div",{className:"content_wrapper"},o.createElement("div",null,o.createElement("span",{className:"marker",style:{background:_.OW[a]}}),o.createElement("span",null,r.name)),o.createElement("span",{className:"num"},(0,p.hE)(r.total))),o.createElement("div",{className:"footer_wrapper"},o.createElement("span",{className:"item_content",alt:"\u6d88\u606f",onClick:function(){return n._handleOnJumpMsg(t,r)}},o.createElement("i",{className:"icon-cem_jump-message icon_style"}),o.createElement("span",{className:"title_style"},"\u6d88\u606f"))))},n.state={height:"100%",idx:-1,e:{},f:{},display:"none",left:0,top:0},n.popoverHover=!1,n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.renderTooltip()},n.componentDidUpdate=function(e,t){var n=e.data,a=e.singleSceneType,r=e.singleTopType,i=this.props,o=i.data,l=i.singleSceneType,s=i.singleTopType;JSON.stringify(n)!==JSON.stringify(o)&&(0,c.P)(o)&&this.renderTooltip(),a===l&&r===s||this.renderTooltip()},n.render=function(){var e=this,t=this.props,n=t.menuList,a=t.data,r=t.loading,i=t.title,l=t.singleSceneType,d=t.fSingleSceneType,f=t.singleTopType,m=t.fSingleTopType,h=t.onFilterChange,E=t.onFlavorChange,v=t.analysisModel,y=this.state.height;return o.createElement(c.Z,{className:"yt_explore_scene_compare_progressbar_chart",data:a,loading:r,renderTitle:o.createElement(u.Z,{title:i},o.createElement(T.Z,{options:I(n),activeObj:l,flavor:d,onChange:function(e){return h({singleSceneType:e})},onFlavorChange:function(e){return E({fSingleSceneType:e})}}),o.createElement(T.Z,{options:R,activeObj:f,flavor:m,onChange:function(e){return h({singleTopType:e})},onFlavorChange:function(e){return E({fSingleTopType:e})}}),o.createElement(s.default,{placement:"top",content:"\u5bfc\u51fa\u6570\u636e",mouseEnterDelay:.6},o.createElement("i",{className:"icon-daochu",onClick:this.onExportExcel})),o.createElement(s.default,{placement:"top",content:"\u5bfc\u51fa\u56fe\u7247",mouseEnterDelay:.6},o.createElement("i",{className:"icon-xiazaitupian",onClick:this.onExportImage})))},o.createElement("div",{className:"bar_content"},(0,c.P)(a)?this.renderTooltips():null,(0,c.P)(a)?o.createElement("div",{className:"content_wrap",style:{maxHeight:Y(a,l,f)>10?418:436}},a.sort((function(e,t){return v[0].values[0].values.indexOf(e.id)-v[0].values[0].values.indexOf(t.id)})).map((function(t,n){return o.createElement("div",{className:"item",key:t.id,style:{height:y}},o.createElement("div",{className:"analysis_name"},t.name),o.createElement("div",{className:"scenes"},t.data.some((function(e){return e.name===l}))&&t.data.find((function(e){return e.name===l})).total>0?o.createElement(o.Fragment,null,F(t.data.find((function(e){return e.name===l})).data,f).map((function(a,r,i){return o.createElement("div",{className:"scene_item",key:a.name,onMouseEnter:function(){return e._handleOnMouseEnter(t,n,a)},onMouseLeave:function(){return e._handleOnMouseLeave(t,n,a)},onMouseMove:function(t){return e._handleOnMouseMove(t,n,r)}},o.createElement("div",{className:"name",style:{width:Math.max.apply(Math,i.map((function(e){return e.name.length})))>5?84:14*Math.max.apply(Math,i.map((function(e){return e.name.length})))}},a.name),o.createElement(A.default,{percent:a.total/t.data.find((function(e){return e.name===l})).total*100,showInfo:!1,strokeColor:_.OW[n],trailColor:"#e5e5e5",style:{width:"calc(100% - 84px - 16px - 96px)",margin:"-4px 8px 0"},strokeWidth:10}),o.createElement("div",null,(0,p.hE)(a.total)+"\uff08"+(a.total/t.data.find((function(e){return e.name===l})).total*100).toFixed(2)+"%\uff09"))}))):o.createElement("div",{className:"empty_block"},"\u6682\u65e0\u6570\u636e")))}))):null))},t}(o.PureComponent);const U=Z;const j=function(e){var t=e.pageType,n=e.dateOptions,a=e.fetchingSceneData,r=e.singleSceneBarData,i=e.singleSceneType,s=e.fSingleSceneType,c=e.singleTopType,u=e.fSingleTopType,d=e.menuList,p=e.sceneBarData,f=e.projectId,m=e.sceneHeaderData,h=e.sceneType,E=e.timeType,v=e.fTimeType,y=e.sceneBarLineData,S=e.fetchingSceneLabelData,_=e.filterReady,C=e.filterChange,N=e.onFilterChange,T=e.onFlavorChange,b=e.analysisModel,x=e.onMsgClick,M=function(e){if(0!==e.length){var t=e[0].data,n={SCENE_SEX:"\u4f7f\u7528\u4eba\u7684\u6027\u522b",SCENE_AGE:"\u4f7f\u7528\u4eba\u7684\u5e74\u9f84\u6bb5",SCENE_RELATION:"\u89d2\u8272\u4e0e\u5173\u7cfb",SCENE_BUY_DECISION:"\u8d2d\u4e70\u51b3\u7b56",SCENE_SPOKESMAN_ANALYSIS:"\u4ee3\u8a00\u4eba",SCENE_USE_SCENE:"\u4f7f\u7528\u573a\u5408",SCENE_USE:"\u7528\u9014"},a={SCENE_SEX:"\u6027\u522b",SCENE_AGE:"\u5e74\u9f84\u6bb5",SCENE_RELATION:"\u89d2\u8272\u4e0e\u5173\u7cfb",SCENE_BUY_DECISION:"\u8d2d\u4e70\u51b3\u7b56",SCENE_SPOKESMAN_ANALYSIS:"\u4ee3\u8a00\u4eba",SCENE_USE_SCENE:"\u4f7f\u7528\u573a\u5408",SCENE_USE:"\u7528\u9014"};return["SCENE_SEX","SCENE_AGE","SCENE_RELATION","SCENE_BUY_DECISION","SCENE_SPOKESMAN_ANALYSIS","SCENE_USE_SCENE","SCENE_USE"].reduce((function(e,r){var i=t.filter((function(e){return e.id===r}))&&t.filter((function(e){return e.id===r}))[0];return i&&i.options&&e.push({value:a[i.id],label:n[i.id],children:i.options.map((function(e){return{value:e.id,label:e.label}}))}),e}),[])}}(m.filter((function(e){return"\u573a\u666f\u6807\u7b7e"===e.label})))||[],A=m.filter((function(e){return"\u4e3b\u9898"===e.label}));return o.createElement("div",{className:"yt_explore_scene_competitor_wrapper"},o.createElement(l.Z,{onReady:_,onChange:C,pageType:t,advanceAuthority:!1,touchData:["\u7535\u5546\u8bc4\u8bba"],selectValue:"\u7535\u5546\u8bc4\u8bba",valueConf:["fullInfo"],showList:["fullDate","screening","save","sourceSearch"],hasHour:!0},o.createElement("div",{className:"content"},o.createElement(g,{data:p,title:"\u5404\u573a\u666f\u6807\u7b7e\u6570\u91cf",loading:a,analysisModel:b}),o.createElement(U,{singleSceneType:i,fSingleSceneType:s,singleTopType:c,fSingleTopType:u,analysisModel:b,data:r,loading:a,title:b&&b[0].values[0].label.includes("\u578b\u53f7")?"\u5355\u4e2a\u573a\u666f\u7684\u578b\u53f7\u5bf9\u6bd4":"\u5355\u4e2a\u573a\u666f\u7684\u54c1\u724c\u5bf9\u6bd4",onFilterChange:N,onFlavorChange:T,menuList:d&&d.sceneConfig&&d.sceneConfig[f],onMsgClick:x}),o.createElement(O,{title:b&&"\u578b\u53f7"===b[0].values[0].label?"\u5355\u4e2a\u6807\u7b7e\u7684\u578b\u53f7\u5bf9\u6bd4":"\u5355\u4e2a\u6807\u7b7e\u7684\u54c1\u724c\u5bf9\u6bd4",data:y,dateOptions:n,dateType:{timeType:E},flavorDateType:{fTimeType:v},onChange:N,onFlavorChange:T,loading:a||S,sceneOptions:M,analysisModel:b,sceneBrand:A,sceneType:h||(0!==M.length?M[0].value+"/"+M[0].children[0].value:""),onMsgClick:x}))))};var H=n(55609),G=n(35239),V=n(53113),q=n(2786),J=n(64396),W=["loading"],z=J.Z.explore.scene.competingAnalysis,B=J.Z.IDBHeaderScreening.screening,X=J.Z.public.menu,K=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleFilterReady=function(e,t){var a=(0,V.X)(e.dateFilter.numOfDays,!0),r=a.dateOptions,i=a.defaultDateType;n.props.fetchParams({projectId:G.t.get(G.V.curProject).id,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:e.dateFilter,analysisModel:e.analysisModel,dateOptions:r,defaultDateType:i,filterValues:t.fullInfo.filterValue})},n._handleFilterChange=function(e,t,a){var i=(0,V.X)(e.dateFilter.numOfDays,!0),o=i.dateOptions,l=i.defaultDateType;n.props.fetchDatas((0,r.Z)({},e,{dateOptions:o,defaultDateType:l,analysisModel:e.analysisModel,timeType:l,filterValues:t.fullInfo.filterValue}))},n._handleOnFilterChange=function(e){e.timeType?n.props.fetchSceneLabelData(e):(e.singleTopType||e.singleSceneType||e.sceneType)&&n.props.save(e)},n._handleOnFlavorChange=function(e){e.fTimeType,n.props.setDefaultValue(e)},n._handleOnMsgClick=function(e,t,a,r,i){var o=n.props,l=o.projectId,s=o.dateFilter,c=o.headerFilterParamsNew,u=o.timeType,d=o.sceneBarLineData,p=o.filterValues,f=e.name,m=e.componentSubType,h={projectId:l,dateFilter:(0,q.X_)(m,s,f,d.find((function(e){return 0!==e.total})).data.find((function(e){return 0!==e.total})).data[0].data.map((function(e){return e.name})),u),headerFilterParamsNew:t.includes("\u6807\u7b7e")||t.includes("\u573a\u666f")?(0,C.R5)(c,a.split("/")[0],a.split("/")[1],r,i,!1):c,filterModel:{project:[l],messageCategory:["COMMENT"]},filterTip:null,filterValues:t.includes("\u6807\u7b7e")||t.includes("\u573a\u666f")?(0,C.R5)(p,a.split("/")[0],a.split("/")[1],r,i,!0):p};window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(h)))},n.state={},n.events={filterReady:n._handleFilterReady,filterChange:n._handleFilterChange,onFilterChange:n._handleOnFilterChange,onFlavorChange:n._handleOnFlavorChange,onMsgClick:n._handleOnMsgClick},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.clean()},n.render=function(){return o.createElement(j,(0,r.Z)({},this.props,this.state,this.events))},t}(o.Component);const Q=(0,H.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,W);return(0,r.Z)({},n[z],{menuList:n[X].menuList,sceneHeaderData:n[B].screeningList,fetchingSceneData:t.effects[z+"/fetchSceneData"]||!1,fetchingSceneLabelData:t.effects[z+"/fetchSceneLabelData"]||!1})}),(function(e){return{save:function(t){return e({type:z+"/save",payload:t})},clean:function(){return e({type:z+"/clean"})},setDefaultValue:function(t){return e({type:z+"/setDefaultValue",payload:t})},fetchParams:function(t){return e({type:z+"/fetchParams",payload:t})},fetchDatas:function(t){return e({type:z+"/fetchDatas",payload:t})},fetchSceneLabelData:function(t){return e({type:z+"/fetchSceneLabelData",payload:t})}}}))(K)},81408:(e,t,n)=>{n.d(t,{lQ:()=>r,v1:()=>i,dR:()=>o,$x:()=>l,$5:()=>s,gt:()=>c,R5:()=>u});var a=n(87462);n(39432);var r=function(e){var t=0;e.forEach((function(e){var n=e.slice(1).sort((function(e,t){return t-e})),a=parseFloat(n[0]);a>t&&(t=a)})),t=Math.ceil(t);for(var n=0;n<4;n++)t%4!==0&&t++;return 0===t&&(t=4),{intVal:t/4,maxVal:t}},i={SCENE_SEX:"user.gender",SCENE_AGE:"user.age",SCENE_USE_SCENE:"space",SCENE_USE:"usage",SCENE_BUY_DECISION:"buy_decision",SCENE_RELATION:"relation",SCENE_MY_ADVICE:"suggestion"},o=function(e){var t=e.oLineData,n=e.oBarData,r=e.alzOptions,i=e.alzName,o=t&&t.find((function(e){return e.name===i})),l=void 0,s=r.find((function(e){return e.name===i})).idKey+":"+i,c=n.nodes.find((function(e){return e.key===s})),u=c?c.total:0;return l=n.relations.reduce((function(e,t){var r=void 0;if(t.source===s?r="target":t.target===s&&(r="source"),r){var i=n.nodes.find((function(e){return e.key===t[r]})),o=0===u?0:t.total/u;i&&e.push((0,a.Z)({},i,{relTotal:t.total,aspectCount:u,messageCount:0,trustRate:o,upRate:0}))}return e}),[]),r.find((function(e){return"relation"===e.idKey}))&&(l=l.filter((function(e){return"relation"!==e.scene&&"user.age"!==e.scene&&"user.gender"!==e.scene}))),void 0===o&&(o="empty"),void 0===l&&(l="empty"),{analyzeLineData:o,analyzeBarData:l}},l={"\u6027\u522b\u5206\u5e03":"SCENE_SEX","\u6027\u522b":"SCENE_SEX","\u4f7f\u7528\u4eba\u7684\u6027\u522b":"SCENE_SEX","\u5e74\u9f84\u6bb5\u5206\u5e03":"SCENE_AGE","\u5e74\u9f84\u6bb5":"SCENE_AGE","\u4f7f\u7528\u4eba\u7684\u5e74\u9f84\u6bb5":"SCENE_AGE","\u5173\u7cfb":"SCENE_RELATION","\u89d2\u8272\u4e0e\u5173\u7cfb":"SCENE_RELATION","\u4f7f\u7528\u573a\u5408":"SCENE_USE_SCENE","\u7528\u9014":"SCENE_USE","\u8d2d\u4e70\u51b3\u7b56":"SCENE_BUY_DECISION","\u4ee3\u8a00\u4eba":"SCENE_ENDORSER"},s={SCENE_USE_SCENE:"\u4f7f\u7528\u573a\u5408",SCENE_USE:"\u7528\u9014",SCENE_BUY_DECISION:"\u8d2d\u4e70\u51b3\u7b56",relation:"\u5173\u7cfb","user.gender":"\u6027\u522b","user.age":"\u5e74\u9f84\u6bb5"},c=function(e,t,n,r,i){var o,s=e&&e.find((function(e){return"SCENE_ASPECT"===e.id})),c=e&&e.find((function(e){return"DEFAULT"===e.id}));return t.includes("\u6027\u522b")||t.includes("\u5e74\u9f84\u6bb5")||t.includes("\u5173\u7cfb")||t.includes("\u4f7f\u7528\u573a\u5408")||t.includes("\u7528\u9014")||t.includes("\u8d2d\u4e70\u51b3\u7b56")||t.includes("\u4ee3\u8a00\u4eba")?(o=[].concat(e.filter((function(e){return"SCENE_ASPECT"!==e.id&&"DEFAULT"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"SCENE_ASPECT",isSelectAll:s&&s.isSelectAll?s.isSelectAll:null,values:s?[].concat(s.values.filter((function(e){return e.id!==l[t]})).map((function(e){return(0,a.Z)({},e)})),[{id:l[t],label:t,values:[n]}]):[{id:l[t],label:t,values:[n]}]},{id:"DEFAULT",isSelectAll:c&&c.isSelectAll?c.isSelectAll:null,values:c?[].concat(c.values.filter((function(e){return"MESSAGE_TYPE"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:r?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:r?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}]),i&&o.find((function(e){return"SCENE_ASPECT"===e.id})).values.push(i),o):t?e:o=[].concat(e.filter((function(e){return"DEFAULT"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"DEFAULT",isSelectAll:c&&c.isSelectAll?c.isSelectAll:null,values:c?[].concat(c.values.filter((function(e){return"MESSAGE_TYPE"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:r?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:r?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}])},u=function(e,t,n,r,i,o){var s=e&&e.find((function(e){return"SCENE_ASPECT"===e.id})),c=e&&e.find((function(e){return"DEFAULT"===e.id})),u=e&&e.find((function(e){return"TOPIC"===e.id}));return t.includes("\u6027\u522b")||t.includes("\u5e74\u9f84\u6bb5")||t.includes("\u5173\u7cfb")||t.includes("\u4f7f\u7528\u573a\u5408")||t.includes("\u7528\u9014")||t.includes("\u8d2d\u4e70\u51b3\u7b56")||t.includes("\u4ee3\u8a00\u4eba")?[].concat(e.filter((function(e){return"SCENE_ASPECT"!==e.id&&"DEFAULT"!==e.id&&"TOPIC"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"SCENE_ASPECT",isSelectAll:s&&s.isSelectAll?s.isSelectAll:null,values:s?[].concat(s.values.filter((function(e){return e.id!==l[t]})).map((function(e){return(0,a.Z)({},e)})),[{id:l[t],label:t,values:[n]}]):[{id:l[t],label:t,values:[n]}]},{id:"DEFAULT",isSelectAll:c&&c.isSelectAll?c.isSelectAll:null,values:c?[].concat(c.values.filter((function(e){return"MESSAGE_TYPE"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:o?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:o?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]},{id:"TOPIC",isSelectAll:u&&u.isSelectAll?u.isSelectAll:null,values:u?[].concat(u.values.filter((function(e){return e.id!==i.id})).map((function(e){return(0,a.Z)({},e)})),[{id:i.id,label:i.label,values:o?[i.name]:[r]}]):[{id:i.id,label:i.label,values:o?[i.name]:[r]}]}]):t?e:[].concat(e.filter((function(e){return"DEFAULT"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"DEFAULT",isSelectAll:c&&c.isSelectAll?c.isSelectAll:null,values:c?[].concat(c.values.filter((function(e){return"MESSAGE_TYPE"!==e.id})).map((function(e){return(0,a.Z)({},e)})),[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:o?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]):[{id:"MESSAGE_TYPE",label:"\u6d88\u606f\u7c7b\u578b",values:o?["\u7535\u5546\u8ffd\u8bc4","\u7535\u5546\u8bc4\u8bba"]:["COMMENT_APPEND","MESSAGE_COMMENT"]}]}])}}}]);