"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8044],{58447:(e,t,n)=>{n.d(t,{h:()=>o});var a=n(67294),l=n(57119),i=n(15873),r=n(15360),o=[{value:"All",title:"\u5168\u90e8"},{value:0,title:"\u672a\u6fc0\u6d3b",background:"#e4deff",color:"#7262FD",icon:a.createElement(l.Z,null)},{value:1,title:"\u6b63\u5e38",background:"#E7F3FF",color:"#1890FF",icon:a.createElement(i.Z,null)},{value:2,title:"\u7981\u7528",background:"#FFF3E8",color:"#FF8A1A",icon:a.createElement(r.Z,null)}]},53074:(e,t,n)=>{n.d(t,{Z:()=>d});n(58344);var a=n(60171),l=(n(43378),n(62443)),i=n(67294),r=n(30755),o=n(51444),s=function(e,t){e=e.replace(/<[^>]+>/g,"");var n=new RegExp(t,"ig");return e=e.replace(n,'<span style="color: #7262fd"} id="'+t+'">'+t+"</span>")},c=function e(t){if(t&&!t.classList.contains("ant-tree-list"))return t.classList.contains("ant-tree-treenode")?t:e(t.parentNode)},u=n(40312);const d=function(e){var t=e.title,n=void 0===t?"\u6743\u9650\u914d\u7f6e":t,d=e.titleOverlay,h=void 0===d?"":d,p=e.authCount,m=e.disabled,f=void 0!==m&&m,v=e.allAuth,g=e.selectedAuth,C=e.showSearch,E=void 0===C||C,y=e.onCheck,k=e.isDefaultExpandAll,b=void 0!==k&&k,N=(0,i.useState)(""),S=N[0],w=N[1],O=(0,i.useState)([]),_=O[0],x=O[1],T=(0,i.useState)([]),V=T[0],P=T[1];(0,i.useEffect)((function(){if(v){var e=(0,u.findLeafNode)(v).nonLeafNode;x(e),P(b?[]:e)}}),[v]);var F=(0,i.useRef)(null);return(0,i.useEffect)((function(){if(S){var e=document.getElementById(S),t=c(e);t&&F&&F.current&&(F.current.scrollTop=t.offsetTop+16)}}),[S]),i.createElement("div",{className:"authority_tree_wrapper"},i.createElement("div",{className:"header"},i.createElement("div",null,n,h&&i.createElement(l.default,{content:i.createElement("div",{style:{maxWidth:330}},h)},i.createElement("i",{className:"icon-cem_file1",style:{marginLeft:6,color:"#979797"}})),void 0!==p&&i.createElement("span",{className:"tips"},"\u5df2\u9009\u4e2d",p,"\u9879\u6743\u9650")),i.createElement("div",null,E&&i.createElement(r.Z,{placeholder:"\u8bf7\u8f93\u5165\u6743\u9650",onSearch:function(e){P(_),setTimeout((function(){return w(e)}),0)}}))),i.createElement("div",{className:"content",ref:F},i.createElement(a.Z,{disabled:f,treeData:v,checkedKeys:g,checkable:!0,blockNode:!0,expandedKeys:V,onCheck:y,selectable:!1,onExpand:function(e){P(e)},switcherIcon:i.createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{fontSize:14}}),titleRender:function(e){var t,n=e.title,a=e.remark,l=e.children;return i.createElement(i.Fragment,null,i.createElement("span",{className:(t=l,t&&t instanceof Array&&t.length>0?"nonLeafnode":"leafnode"),dangerouslySetInnerHTML:{__html:S?s(n,S):n}}),a&&i.createElement(o.Z,{overlay:a}))}})))}},51444:(e,t,n)=>{n.d(t,{Z:()=>i});n(15086);var a=n(94055),l=n(67294);const i=function(e){var t=e.overlay;return l.createElement(a.default,{title:t},l.createElement("i",{className:"icon-cem_file1",style:{marginLeft:4,cursor:"pointer",color:"#8C8C8C"}}))}},30755:(e,t,n)=>{n.d(t,{Z:()=>s});n(89858);var a=n(51024),l=n(87462),i=n(63366),r=n(67294),o=["onSearch"];const s=function(e){var t=e.onSearch,n=(0,i.Z)(e,o);return r.createElement(a.default.Search,(0,l.Z)({className:"yt-input-search-wrapper",placeholder:"\u8bf7\u8f93\u5165",suffix:r.createElement("i",{className:"icon-cem_small-search"}),style:{width:200},allowClear:!0,onSearch:t,onBlur:function(e){return t(e.target.value)}},n))}},40312:(e,t,n)=>{n.r(t),n.d(t,{transformTreeData:()=>r,findLeafNode:()=>o,filterTreeData:()=>s,handleSkip:()=>c});var a=n(87462),l=n(61409),i=function(e){return e&&e instanceof Array&&e.length>0};function r(e){return e.map((function(e,t){return{id:e.id,key:e.id,title:e.name,code:e.code,remark:e.remark,children:i(e.children)?r(e.children):[]}}))}function o(e){var t=[],n=[];return function e(a){return a.forEach((function(a){i(a.children)?(n.push(a.id),e(a.children)):t.push(a.id)}))}(e),{leafNode:t,nonLeafNode:n}}function s(e,t){return e.map((function(e,n){return(0,a.Z)({},e,{children:i(e.children)?s(e.children,t):[]})})).filter((function(e){return!t.includes(e.code)}))}var c=function(e){l.mW.push({pathname:"/account/businessManager",state:{roleIds:[e.id]}})}},1374:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(67294);const l=function(e){var t=e.src,n=e.defaultImg,l=e.timeoutTime,i=void 0===l?1e3:l,r=(0,a.useState)(t),o=r[0],s=r[1];return(0,a.useEffect)((function(){var e=new Image;e.src=t;var a=setTimeout((function(){s(n),e.onerror=null}),i);return e.onload=function(n){e.onload=null,clearTimeout(a),s(t)},e.onerror=function(t){e.onerror=null,clearTimeout(a),s(n)},function(){clearTimeout(a)}}),[t]),a.createElement("img",{src:o,alt:""})}},38064:(e,t,n)=>{n.d(t,{Z:()=>f});n(43378);var a=n(62443),l=(n(89858),n(51024)),i=n(87462),r=(n(1025),n(65400)),o=n(94578),s=n(92360),c=n(67294),u=n(45697),d=n.n(u),h=n(94184),p=n.n(h),m=n(43061),f=function(e){function t(t){var n;return(n=e.call(this,t)||this).togglePanel=function(e){var t=n.state,a=t.panelShow;t.value,t.filteredOptions;a&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout((function(){return n.setState({panelShow:!a})}),0)},n.handleClear=function(){n.setState({tempValue:[]},(function(){return n.handleCheckAllStatus()})),n.props.onClear&&n.props.onClear()},n.handleCheckAllStatus=function(){var e=n.state,t=e.tempValue,a=e.filteredOptions;n.setState({allChecked:t.length>0&&t.length===a.length,indeterminate:t.length>0&&t.length<a.length})},n.handleConfirm=function(){var e=n.state.tempValue;n.setState({value:JSON.parse(JSON.stringify(e)),panelShow:!1}),n.props.onChange(e)},n.handleCancel=function(){var e=n.state,t=e.value,a=e.filteredOptions;n.setState({tempValue:JSON.parse(JSON.stringify(t)),panelShow:!1,popoverVisible:!1,popoverIndex:-1,allChecked:t&&t.length>0&&t.length===a.length,indeterminate:t&&t.length>0&&t.length<a.length},(function(){return n.handleClearInput()}))},n.handleReset=function(){n.setState({tempValue:[],value:[],panelShow:!1,searchText:""},(function(){return n.handleCheckAllStatus()}))},n.handleFilter=function(e){var t=e.target.value,a=n.state.options;if(t.trim().length>0){var l=a.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())}));n.setState({searchText:t,filteredOptions:l})}else n.setState({filteredOptions:a,searchText:t})},n.handleClearInput=function(){var e=n.state,t=e.searchText,a=e.options;t.length>0&&n.setState({searchText:"",filteredOptions:a},(function(){return n.handleCheckAllStatus()}))},n.handlePopoverVisibleChange=function(e,t){n.setState({popoverVisible:e,popoverIndex:e?t:-1})},n.getDeleteContent=function(e){var t=n.state.popoverVisible,a=n.props,l=a.showClearOpt,i=a.onClearOpt;return c.createElement("div",{style:{maxWidth:140}},c.createElement("p",null,l.name),c.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.createElement(r.default,{size:"small",onClick:function(e){e.stopPropagation(),n.setState({popoverVisible:!t})}},"\u53d6\u6d88"),c.createElement(r.default,{type:"primary",size:"small",onClick:function(a){a.stopPropagation(),i({id:e.id}).then((function(e){2e4===e.code&&n.setState({popoverVisible:!t})}))}},"\u786e\u5b9a")))},n.state={type:t.type||2,title:t.title||"",options:[],filteredOptions:[],tempValue:t.defaultValue||[],value:t.defaultValue||[],maxLength:t.maxLength||0,indeterminate:!1,allChecked:!1,panelShow:!1,searchText:"",placeholder:t.placeholder||"\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u8bcd",showClearBtn:t.showClearBtn||!1,popoverVisible:!1,popoverIndex:-1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this.handleCancel)},t.getDerivedStateFromProps=function(e,t){var n=e.type,a=e.title,l=e.options,i=e.value;return n!==t.type?{type:n}:a!==t.title?{title:a}:JSON.stringify(l)!==JSON.stringify(t.options)?{options:l||[],filteredOptions:l||[]}:Array.isArray(i)&&JSON.stringify(i)!==JSON.stringify(t.value)?{value:i||[],tempValue:i||[],allChecked:i&&i.length>0&&i.length===t.filteredOptions.length,indeterminate:i&&i.length>0&&i.length<t.filteredOptions.length}:null},n.componentWillUnmount=function(){window.removeEventListener("click",this.handleCancel)},n.handleCheckAll=function(){var e=this,t=this.state,n=t.tempValue,a=t.filteredOptions;this.setState({tempValue:n.length===a.length?[]:a.map((function(e){return e.id}))},(function(){return e.handleCheckAllStatus()}))},n.handleCheckOne=function(e){var t=this,n=this.state,a=n.tempValue,l=n.maxLength;if(l>0&&(a.length>=l&&a.includes(e)||a.length<l)||0===l){var i=a.indexOf(e);i>-1?a.splice(i,1):a.push(e),this.setState({tempValue:a},(function(){return t.handleCheckAllStatus()}))}},n.render=function(){var e=this,t=this.state,n=t.type,o=t.title,u=t.options,d=t.filteredOptions,h=t.indeterminate,f=t.allChecked,v=t.panelShow,g=t.tempValue,C=t.value,E=t.maxLength,y=t.style,k=t.searchText,b=t.popoverVisible,N=t.popoverIndex,S=u.length>0?u.filter((function(e){return C.includes(e.id)})).map((function(e){return e.name})):[],w=p()({"multi-select-wrapper":!0,whiteBg:1===n,sel:v}),O=n&&1===n?"\u8bf7\u9009\u62e9":"\u5168\u90e8",_=this.props,x=_.note,T=_.showClearOpt;return c.createElement("div",{className:w,style:(0,i.Z)({backgroundColor:v?"#7262fd":""},y),onClick:this.togglePanel},c.createElement("span",null,o&&o+"\uff1a"),c.createElement("span",{className:"currValue",title:S.length>0?S.length===u.length?"\u5168\u90e8":S.join("\uff0c"):O},S.length>0?S.length===u.length?"\u5168\u90e8":S.join("\uff0c"):O),c.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:v?"rotate(-180deg)":"",top:v?"-2px":"3px"}}),c.createElement("div",{className:"multi-select-panel",style:{display:v?"block":"none"},onClick:function(e){return e.stopPropagation()}},c.createElement("div",{className:"multi-select-header"},c.createElement(l.default,{ref:function(t){return e.input=t},value:k,onChange:this.handleFilter,placeholder:this.state.placeholder,suffix:k.length>0?c.createElement(m.Z,{onClick:this.handleClearInput}):c.createElement("i",{className:"icon-cem_small-search"}),style:{height:28}})),c.createElement("ul",{className:"multi-select-panel-body"},d.length>0?c.createElement(c.Fragment,null,0===E&&c.createElement("li",{className:"all_check",onClick:function(){return e.handleCheckAll()}},c.createElement("div",{className:"all_select"},c.createElement(s.Checkbox,{checked:f,indeterminate:h,onChange:function(){return e.handleCheckAll()}}),c.createElement("label",null,"\u5168\u9009"))),d.slice(0,100).map((function(t,n){return c.createElement("li",{key:n,className:E>0&&g.length>=E&&!g.includes(t.id)?"disabled":"",onClick:function(){return e.handleCheckOne(t.id)},style:{minHeight:x?"50px":"36px"}},c.createElement(s.Checkbox,{disabled:E>0&&g.length>=E&&!g.includes(t.id),checked:g.includes(t.id),value:t.id,onChange:function(){return e.handleCheckOne(t.id)}}),c.createElement("label",{title:t.name},t.name),T&&T.show&&c.createElement(a.default,{placement:"top",content:function(){return e.getDeleteContent(t)},mouseEnterDelay:.4,trigger:"click",visible:b&&N===n,onVisibleChange:function(t){return e.handlePopoverVisibleChange(t,n)}},c.createElement("i",{className:"icon-cem_delete",onClick:function(t){t.stopPropagation(),e.setState({popoverVisible:!b})}})),x&&c.createElement("p",{className:"note"},x(t)))})),d.length>99&&c.createElement("li",{className:"no_data",style:{color:"#d96969",paddingLeft:"18px",fontSize:"12px"}},"\u2014 \u67e5\u770b\u66f4\u591a\u8bf7\u641c\u7d22")):c.createElement("li",{className:"no_data"},"\u6682\u65e0\u6570\u636e")),c.createElement("div",{className:"multi-select-panel-footer"},this.state.showClearBtn&&c.createElement("div",{className:"clearBtn",onClick:this.handleClear},"\u6e05\u9664"),c.createElement(r.default,{onClick:this.handleCancel},"\u53d6\u6d88"),c.createElement(r.default,{type:"primary",onClick:this.handleConfirm},"\u786e\u8ba4"))))},t}(c.Component);f.propTypes={type:d().number,title:d().string.isRequired,options:d().arrayOf(d().shape({id:d().oneOfType([d().string,d().number]),name:d().string})),defaultValue:d().arrayOf(d().string),value:d().arrayOf(d().string),maxLength:d().number,onChange:d().func.isRequired,style:d().object,note:d().func,placeholder:d().string,showClearBtn:d().bool,showClearOpt:d().object,onClearOpt:d().func}},1179:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),l=n(43036),i=n(45697),r=n.n(i),o=n(67294),s=n(39432),c=function(e){function t(t){var n;return(n=e.call(this,t)||this).getPanelWidth=function(){var e=n.props,t=e.flavor,a=e.options,l=e.rightHook,i=Math.max.apply(null,a.map((function(e){return(0,s.jD)(e.title,14)})))+2+10+32;return i+=void 0!==t?24:0,(i+=void 0!==l?30:0)>100?i:100},n._setPadShowFalse=function(){n.state.show&&n.setState({show:!1})},n._handleParentClick=function(e){n.state.show&&n.props.showFlavor&&n.props.enable&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n._handleTriggerOnClick=function(){var e=n.state.show;n.props.enable&&setTimeout((function(){n.setState({show:!e})}),0)},n.state={show:!1,firstLiHover:!1,panelWidth:n.getPanelWidth()},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},n.componentDidUpdate=function(e){var t=e.options,n=this.props.options;JSON.stringify(t)!==JSON.stringify(n)&&this.setState({panelWidth:this.getPanelWidth()})},n.render=function(){var e=this.state,t=e.show,n=e.panelWidth,a=this.props,i=a.activeObj,r=a.onChange,s=a.options,c=a.objName,u=a.preTitle,d=a.sufTitle,h=void 0===d?"":d,p=a.showTitle,m=void 0===p||p,f=a.overlay,v=a.divider,g=void 0===v?"right":v,C=a.flavor,E=a.className,y=void 0===E?"":E,k=a.onFlavorChange,b=a.sufIcon,N=a.style,S=a.type,w=void 0===S?"text":S,O=a.enable,_=a.rightHook,x=s.find((function(e){return e.value===i})),T=void 0===typeof i?h:x&&x.title,V=void 0===typeof i?h:x&&x.icon;return o.createElement("div",{className:"single_select_button_wrapper single_select_diviver_"+g+" single-select-button_"+w+" "+y,style:N,onClick:this._handleParentClick},o.createElement("div",{className:"button_content "+(O?"":"button_content_disable")},o.createElement("span",{onClick:this._handleTriggerOnClick},o.createElement("span",{className:"button-trigger "+(t?"sel":"")},m&&o.createElement(o.Fragment,null,u&&o.createElement("span",{className:"pre-title"},u,"\uff1a"),V?o.createElement("i",{className:V+" word_icon_hover"}):o.createElement("span",{className:"button-title"},T)),o.createElement("i",{className:b||"icon-cem_pull-down-or-take-up",style:{transform:t?"rotate(-180deg)":""}})),f&&o.createElement("span",{style:{marginLeft:4}},o.createElement(l.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:f},o.createElement("i",{className:"icon-cem_file1"})))),o.createElement("div",{className:"button-panel "+(t?"active":""),style:{minWidth:n}},s.map((function(e,t){return o.createElement("div",{className:"panel-item "+(e.value===i?"sel":"")+" "+(e.disabled?"disabled":""),key:e.value,onClick:function(){var t;!e.disabled&&r(c?((t={})[c]=e.value,t):e.value)}},e.icon&&o.createElement("i",{className:e.icon+" panel-item-icon"}),o.createElement("span",{className:"ellipsis",style:{maxWidth:97.5}},e.title),void 0!==C&&o.createElement("i",{className:C===e.value?"icon-cem_star":"icon-cem_star-filling star_hide",onClick:function(t){var n,a,l;t.stopPropagation(),k(C===e.value?c?((n={})[c]="",n):"":c?((a={})[c]=e.value,a):e.value),r(c?((l={})[c]=e.value,l):e.value)}}),o.createElement("i",{className:e.value===i&&_?"icon-cem_right1 choice":""}))})))))},t}(o.PureComponent);c.defaultProps={enable:!0,activeObj:"",sufTitle:"",showTitle:!0,divider:"right",className:"",type:"text"},c.propTypes={activeObj:r().any,onChange:r().func.isRequired,options:r().array.isRequired,objName:r().any,preTitle:r().string,sufTitle:r().string,showTitle:r().bool,overlay:r().string,divider:r().oneOf(["both","left","right","none"]),flavor:r().string,onFlavorChange:r().func,className:r().string,sufIcon:r().string,style:r().object,type:r().oneOf(["button","text"]),enable:r().bool,rightHook:r().bool};const u=c}}]);