"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[4521],{4521:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var n=a(63366),r=a(87462),s=a(94578),l=a(67294),i=a(55609),c=(a(15267),a(64713)),o=(a(43378),a(62443)),m=a(55815),u=a(13713),p=a(53754),d=a(61918),h=(a(53294),a(56697)),f=(a(56120),a(74253)),v=a(30381),N=a.n(v);const E=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleDetailShow=function(){a.props.handleDetailShow(!1)},a.getType=function(){var e=a.props.targetItem.feedbackTypeNames;return e?e.some((function(e){return-1!==e.indexOf("\u5173\u6ce8\u70b9")}))?"\u5173\u6ce8\u70b9":"\u6307\u6807":""},a._renderSchedule=function(){var e=a.props.targetItem;return e&&"\u5f85\u5904\u7406"===e.statusName?l.createElement(l.Fragment,null,l.createElement("div",{className:"title"},"\u63d0\u793a"),l.createElement("div",{className:"text"},"\u5f53\u5df2\u63d0\u4ea4\u7684\u53cd\u9988\u8d85\u8fc7\u4e00\u5b9a\u6570\u91cf\u65f6\uff0c\u6211\u4eec\u624d\u4f1a\u5c55\u5f00\u7b97\u6cd5\u4f18\u5316\u5de5\u4f5c\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\uff0c\u656c\u8bf7\u8c05\u89e3\uff01")):e&&"\u5df2\u5904\u7406"===e.statusName?l.createElement(l.Fragment,null,l.createElement("div",{className:"title"},"\u5904\u7406\u7ed3\u679c"),l.createElement("div",{className:"text"},e&&e.feedbackResult),l.createElement("div",{className:"time"},e&&N()(e.updateAt).format("YYYY/MM/DD HH:mm")),l.createElement("div",{className:"title"},"\u5f53\u524d\u6307\u6807\u7ed3\u679c"),l.createElement("div",{className:"index"},l.createElement("span",{className:"label"},a.getType()),e&&e.afterFeedbackTag&&JSON.parse(e.afterFeedbackTag).map((function(e,t){return l.createElement("div",{key:t,className:"value "+(8===e.escore?"indexGreen":"indexPink")},e.aspect)})))):void 0},a.state={},a}(0,s.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){},a.componentWillUnmount=function(){},a.render=function(){var e=this.props,t=e.detailDialogShow,a=e.targetItem;return l.createElement(h.Z,{className:"dataFeedbackDetailDialog",title:"\u53cd\u9988\u8be6\u60c5 - "+(a&&a.statusName),visible:t,onCancel:this.handleDetailShow,footer:null,width:900},l.createElement("div",{className:"top"},l.createElement("sapn",{className:"label"},"\u7f16\u53f7\uff1a"),l.createElement("sapn",{className:"number"},a&&a.feedbackNum),l.createElement("sapn",{className:"label"},"\u53cd\u9988\u4eba\uff1a"),l.createElement("sapn",{className:"person"},a&&a.creatorName),l.createElement("sapn",{className:"label"},"\u53cd\u9988\u65f6\u95f4\uff1a"),l.createElement("sapn",{className:"time"},a&&N()(a.createAt).format("YYYY/MM/DD HH:mm"))),l.createElement("div",{className:"textArea"},a&&a.messageContent,a&&a.historyTag&&l.createElement("div",{className:"index"},l.createElement("span",{className:"label"},this.getType()),l.createElement("div",{className:"valueDiv"},a&&a.historyTag&&JSON.parse(a.historyTag).map((function(e,t){return l.createElement("div",{key:t,className:"value "+(8===e.escore?"indexGreen":"indexPink")},e.aspect)}))))),l.createElement("div",{className:"feedbackContent"},"\u53cd\u9988\u5185\u5bb9"),l.createElement("div",{className:"content"},a&&a.contentMap.ASPECT_TOO_MANY&&l.createElement("div",{className:"content_1"},l.createElement("div",{className:"label"},"\u591a\u4e86\u6307\u6807\uff1a"),l.createElement("div",{className:"valueDiv"},a&&a.contentMap.ASPECT_TOO_MANY&&JSON.parse(a.contentMap.ASPECT_TOO_MANY).map((function(e,t){return l.createElement("div",{key:t,className:"value "+(8===e.escore?"indexGreen":"indexPink")},e.aspect)})))),a&&a.contentMap.EMOTION_WRONG&&l.createElement("div",{className:"content_1"},l.createElement("div",{className:"label"},"\u60c5\u611f\u6709\u8bef\uff1a"),l.createElement("div",{className:"valueDiv"},a&&a.contentMap.EMOTION_WRONG&&JSON.parse(a.contentMap.EMOTION_WRONG).map((function(e,t){return l.createElement("div",{key:t,className:"value "+(8===e.escore?"indexGreen":"indexPink")},e.aspect)})))),a&&(a.contentMap.ASPECT_NOT_ENOUGH||""===a.contentMap.ASPECT_NOT_ENOUGH)&&l.createElement("div",{className:"content_2"},l.createElement("div",{className:"label smallIndex"},"\u5c11\u4e86\u6307\u6807\uff1a"),l.createElement("div",{className:"valueSmallDiv"},a&&a.contentMap.ASPECT_NOT_ENOUGH)),a&&a.contentMap.FOCUS_TOO_MANY&&l.createElement("div",{className:"content_1"},l.createElement("div",{className:"label"},"\u591a\u4e86\u5173\u6ce8\u70b9\uff1a"),l.createElement("div",{className:"valueDiv",style:{width:"700px"}},a&&a.contentMap.FOCUS_TOO_MANY&&JSON.parse(a.contentMap.FOCUS_TOO_MANY).map((function(e,t){return l.createElement("div",{key:t,className:"value "+(8===e.escore?"indexGreen":"indexPink")},e.aspect)})))),a&&(a.contentMap.FOCUS_NOT_ENOUGH||""===a.contentMap.FOCUS_NOT_ENOUGH)&&l.createElement("div",{className:"content_2"},l.createElement("div",{className:"label smallIndex"},"\u5c11\u4e86\u5173\u6ce8\u70b9\uff1a"),l.createElement("div",{className:"valueSmallDiv",style:{width:"700px"}},a&&a.contentMap.FOCUS_NOT_ENOUGH))),l.createElement(f.Z,{className:"dashed",dashed:!0}),l.createElement("div",{className:"footer"},this._renderSchedule()))},t}(l.Component);var g=a(96889),y=a(51196);const b=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleDetail=function(e){a.setState({detailDialogShow:!0,targetItem:e})},a.handleDetailShow=function(e){a.setState({detailDialogShow:e})},a.state={show:!1,detailDialogShow:!1,targetItem:void 0,columns:[{title:"",width:"0.1%"},{title:"\u7f16\u53f7",dataIndex:"feedbackNum",width:"12%"},{title:"\u6d88\u606f\u5185\u5bb9",dataIndex:"messageContent",width:"25%",align:"left",render:function(e){return l.createElement("div",{style:{width:250,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative"}},e||"- -",e&&l.createElement(o.default,{content:l.createElement("div",{style:{maxWidth:300,maxHeight:"50vh",overflowY:"auto"}},e)},l.createElement("div",{style:{position:"absolute",width:250,left:0,top:0,opacity:0}},"hover")))}},{title:"\u95ee\u9898\u5206\u7c7b",dataIndex:"feedbackTypeNames",width:"12%",render:function(e){return e.map((function(e,t){return l.createElement("div",{key:t},e)}))}},{title:"\u53cd\u9988\u4eba",dataIndex:"creatorName",width:"12%",align:"left",render:function(e){return l.createElement("div",{style:{width:120,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative"}},e,e&&l.createElement(o.default,{content:l.createElement("div",{style:{maxWidth:300,maxHeight:"50vh",overflowY:"auto"}},e)},l.createElement("div",{style:{position:"absolute",width:100,left:0,top:0,opacity:0}},"hover")))}},{title:"\u53cd\u9988\u65f6\u95f4",dataIndex:"createAt",width:"12%",align:"left",render:function(e){return l.createElement("div",null,N()(e).format("YYYY/MM/DD HH:mm"))}},{title:"\u53cd\u9988\u8fdb\u5ea6",dataIndex:"statusName",width:"12%",align:"left",render:function(e){return l.createElement("div",null,e)}},{title:"\u64cd\u4f5c",key:"operate",width:"12%",render:function(e){return l.createElement("span",{className:"operate",onClick:function(){return a.handleDetail(e)}},"\u67e5\u770b\u8be6\u60c5")}}]},a}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.onFilterChange,n=t.name,s=t.status,i=t.issueList,o=t.personList,h=t.pagination,f=t.personListOpt,v=t.data,N=t.fetchingDataFeedbackList;return l.createElement("div",{className:"dataFeedback_page_view",ref:function(t){return e.tableRef=t}},l.createElement(m.Z,{title:(0,u.u)({title:"\u6570\u636e\u53cd\u9988"})}),l.createElement("div",{className:"content"},l.createElement("div",{className:"dataFeedback_list"},l.createElement("div",{className:"top"},l.createElement(d.Z,{placeholder:"\u641c\u7d22\u7f16\u53f7\u6216\u6d88\u606f\u5185\u5bb9",defValue:n,onSearch:function(e){return a({name:e,type:"search"})},onClear:function(e){return a({name:e,type:"search"})},style:{width:200,height:28}}),l.createElement(c.default.Group,{options:y.hm,onChange:function(e){return a({status:e,type:"status"})},value:s,optionType:"button",style:{height:28,marginRight:"8px"}}),l.createElement("sapn",{className:"issueMultiSelect"},l.createElement(p.Z,{style:{width:220,height:242,marginRight:"0px"},title:"\u95ee\u9898\u5206\u7c7b",options:y.zM,value:i,onChange:function(e){return a({issueList:e,type:"issue"})}})),l.createElement("span",{className:"personMultiSelect"},l.createElement(p.Z,{title:"\u53cd\u9988\u4eba",options:f,value:o,onChange:function(e){return a({personList:e,type:"person"})}}))),l.createElement(g.ZP,{loading:N,dataSource:v,columns:this.state.columns,rowKey:"key",toolBarRender:!1,search:!1,pagination:{defaultPageSize:h.pageSize,total:h.total,current:h.current,pageSize:h.pageSize},onChange:function(e){a({params:e,type:"pageSize"})}}))),l.createElement(E,(0,r.Z)({},this.state,{handleDetailShow:this.handleDetailShow})))},t}(l.Component);var O=a(64396),S=["loading"],k=O.Z.project.dataFeedback,w=function(e){function t(t){var a;return(a=e.call(this,t)||this)._handleOnFilterChange=function(e){var t=a.props,n=t.name,r=t.status,s=t.issueList,l=t.personList;"status"===e.type?(a.props.save({pagination:{current:1,pageSize:10,total:0}}),a.props.fetchDataFeedbackList({status:e.status.target.value,name:n,issueList:s,personList:l})):void 0!==e.name&&"search"===e.type?(a.props.save({pagination:{current:1,pageSize:10,total:0}}),a.props.fetchDataFeedbackList({name:e.name,issueList:s,personList:l,status:r})):"issue"===e.type?(a.props.save({pagination:{current:1,pageSize:10,total:0}}),a.props.fetchDataFeedbackList({issueList:e.issueList,name:n,personList:l,status:r})):"person"===e.type?(a.props.save({pagination:{current:1,pageSize:10,total:0}}),a.props.fetchDataFeedbackList({personList:e.personList,name:n,status:r,issueList:s})):"pageSize"===e.type&&a.props.fetchDataFeedbackList({name:n,status:r,issueList:s,page:e.params,pageIndex:e.params.current,pageSize:e.params.pageSize})},a.state={},a.event={onFilterChange:a._handleOnFilterChange},a}(0,s.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.props,t=e.name,a=e.status,n=e.issueList,r=e.personList;this.props.fetchDataFeedbackList({name:t,status:a,issueList:n,personList:r}),this.props.fetchFeedbackPersonList()},a.componentWillUnmount=function(){},a.render=function(){return l.createElement(b,(0,r.Z)({},this.props,this.state,this.event))},t}(l.Component);const _=(0,i.connect)((function(e){var t=e.loading,a=(0,n.Z)(e,S);return(0,r.Z)({state:a[k]},a[k],{fetchingDataFeedbackList:t.effects[k+"/fetchDataFeedbackList"]||!1})}),(function(e){return{save:function(t){return e({type:k+"/save",payload:t})},fetchDataFeedbackList:function(t){return e({type:k+"/fetchDataFeedbackList",payload:t})},fetchFeedbackPersonList:function(t){return e({type:k+"/fetchFeedbackPersonList",payload:t})}}}))(w)},13713:(e,t,a)=>{a.d(t,{u:()=>r});var n=a(35239),r=function(e){var t=e.title,a=e.url,r=n.t.get(n.V.backProjectConfig).name;return a&&-1!==a.indexOf("memberlist")?[{title:r,url:"/account/project/preview"},{title:"\u7528\u6237\u7ec4",url:"/account/project/usergroup"},{title:t,url:a}]:[{title:r,url:"/account/project/preview"},{title:t,url:a}]}},55815:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(94578),r=a(67294),s=a(45697),l=a.n(s),i=a(43036),c=a(61409),o=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._handleBreadcrumbClick=function(e){var a=t.props,n=a.title,r=a.beforeJump;e!==n.length-1&&(r?new Promise((function(e,t){return r(e,t)})).then((function(){c.mW.push({pathname:n[e].url,state:n[e].state})})):c.mW.push({pathname:n[e].url,state:n[e].state}))},t}return(0,n.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.title,n=t.mainTitle,s=t.rightContent,l=t.className,c=t.overlay;return r.createElement("div",{className:"breadcumb-wrapper "+l},a instanceof Array?r.createElement("div",{className:"breadcrumb-left"},r.createElement("div",null,a.map((function(t,n){return r.createElement("span",{className:t.url?"":"not_clickable",key:n,onClick:function(){return t.url&&n!==a.length-1&&e._handleBreadcrumbClick(n)}},t.title,n!==a.length-1&&" / ")}))),r.createElement("span",null,n||a[a.length-1].title,c&&r.createElement(i.Z,{placement:"top",overlay:c},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):r.createElement("div",{className:"normal-title"},a,c&&r.createElement(i.Z,{placement:"top",overlay:c},r.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),s||"")},t}(r.Component);o.propTypes={className:l().string,title:l().oneOfType([l().string,l().arrayOf(l().shape({title:l().string,url:l().string,state:l().object}))]).isRequired,overlay:l().oneOfType([l().string,l().node]),mainTitle:l().oneOfType([l().string,l().node]),beforeJump:l().func,rightContent:l().node};const m=o},61918:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(67294),r=a(45697),s=a.n(r),l=function(e){var t=e.className,a=e.onClear,r=e.onSearch,s=e.placeholder,l=e.style,i=e.defValue,c=e.signal,o=n.useState(i),m=o[0],u=o[1];n.useEffect((function(){u(i)}),[i,c]);return n.createElement("div",{style:l,className:"yt_search_input_wrapper "+(t||"")},n.createElement("input",{placeholder:s,value:m,onKeyDown:function(e){13===e.keyCode&&r(m)},onChange:function(e){return u(e.target.value)},autoComplete:"off"}),m&&n.createElement("i",{className:"icon-cem_log-off",onClick:function(){u(""),a&&a("")}}),n.createElement("i",{className:"icon-cem_small-search",onClick:function(){return r(m)}}))};l.propTypes={className:s().string,onSearch:s().func.isRequired,placeholder:s().string,style:s().object,defValue:s().string,signal:s().any,onClear:s().func};const i=l}}]);