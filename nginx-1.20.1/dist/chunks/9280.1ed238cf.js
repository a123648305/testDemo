(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9280],{77361:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var a=n(37316),i=n.n(a),r=n(67154),o=n.n(r),t=n(85354),l=n.n(t),a=n(18446),d=n.n(a),r=n(64396),t=n(55609),s=n(87219),u=n(35239),a=n(67294),R=n.n(a),k=(n(15086),n(94055)),L=n(48577),b=n(7566),w=n(76893),M=n(39432),P=n(89212);const c=function(e){var t,n,a=e.pageType,i=e.outsideFilter,r=e.filterReady,l=e.filterChange,o=e.onChange,c=e.onChartTypeChange,d=e.onMsgClick,s=e.lineData,u=e.fetchingLineData,p=e.onClickGoods,f=e.pagination,h=e.aspectData,m=e.aspectLoading,y=e.totalAspectCount,C=e.totalAspectPreCount,T=e.aspectTableData,g=e.aspectTableLoading,E=e.chartType,v=e.topicData,I=e.topicLoading,D=e.totalTopicCount,_=e.totalTopicPreCount,A=e.topicTableData,F=e.topicTableLoading,O=e.onSessionMsgClick,e=e.dateGroupType;return R().createElement("div",{className:"yt_service_sku_wrapper"},R().createElement(L.Z,{onReady:r,onChange:l,pageType:a,advanceAuthority:!1,screenValue:i&&i.headerFilterParamsNew,dateValue:i&&i.dateFilter,valueConf:["fullInfo"],showList:["quickDate","screening","save"]},R().createElement("div",{className:"content"},R().createElement(b.Z,{title:"会话量",titleOverlay:"一个用户单次会话算作1个会话量。",dataSource:s,loading:u,columns:(t=p,[{titlie:"",width:"0.1%"},{title:"日期",dataIndex:"name",key:"name",width:"24%",render:function(e){return R().createElement("span",null,(0,M.Sn)(n,e))}},{title:"会话量",dataIndex:"count",key:"count",width:"24%",render:function(e){return R().createElement("span",null,(0,M.hE)(e))}},{title:function(e){return R().createElement("span",{style:{paddingLeft:20}},"环比",R().createElement(k.default,{overlay:"环比 = (当期关注点声量－往期关注点声量）÷ 往期关注点声量 × 100%"},R().createElement("i",{style:{marginLeft:4},className:"icon-cem_file1"})))},dataIndex:"linkIndex",key:"linkIndex",width:"28%",render:function(e){return"--"===(0,P.Sv)(e.icon)?R().createElement("div",{style:{marginLeft:"40px"}},"--"):R().createElement("div",{style:{display:"inline-block",width:100,textAlign:"right"}},e.text,(0,P.Sv)(e.icon))}},{title:"操作",key:"operator",width:"15%",render:function(e){return R().createElement("span",{style:{color:"#1890FF",cursor:"pointer"},onClick:function(){return t(e)}},"查看消息")}}]),pagination:f,tooltipText:"会话量",onMsgClick:O,timeType:n=e}),R().createElement(w.Z,{data:h,tableData:T,totalCount:y,totalPreCount:C,pageType:a,title:"关注点分析",loading:m,tableLoading:g,onChange:o,onMsgClick:d}),R().createElement(w.Z,{pageType:a,data:v,tableData:A,totalPreCount:_,totalCount:D,title:"话题分析",titleOverlay:R().createElement("div",{style:{maxWidth:324}},"根据文本相似度聚类话题，如果2个文本的相似度高，会判断为同一个话题。话题量计算方式：如果一条会话中出现完全一样的话题时，话题量只计1，但多次会话中出现相同话题时，话题量计多次。"),loading:I,tableLoading:F,onChange:o,onChartTypeChange:c,chartType:E,onMsgClick:d}))))};var p=r.Z.service.spu,r=function(n){function e(e){var t,c=n.call(this,e)||this;return c.events=void 0,c.chartRef=R().createRef(),c._handleFilterReady=function(e,t){var n=c.state.outsideFilter;c.props.fetchData({position:n&&n.position?n.position:[],projectId:u.t.get(u.V.curProject).id,headerFilterParamsNew:e.headerFilterParamsNew,dateFilter:e.dateFilter,filterValues:t.fullInfo.filterValue,dateGroupType:d()(e.dateFilter.from,e.dateFilter.to)?"HOUR":"DAY"})},c._handleFilterChange=function(e,t,n){var a=c.state.chartType;c.props.fetchData(o()({},e,{aspect1:"c1"===a?["咨询/求助"]:void 0,filterValues:t.fullInfo.filterValue,dateGroupType:d()(e.dateFilter.from,e.dateFilter.to)?"HOUR":"DAY"}))},c._handleOnClickGoods=function(e){var t=c.props,n=t.headerFilterParamsNew,a=t.filterValues,i=t.dateFilter,r=t.projectId,l=t.dateGroupType,t=(0,P.LV)(e.name.replaceAll("/","-"),l),e=t.from,t=t.to,a={dateFilter:o()({},i,{numOfDays:1,dateGroupType:l,from:e,to:t,quickChoice:e.replace(/-/g,".")+" - "+t.replace(/-/g,".")}),filterModel:{project:[r]},projectId:r,filterTip:null,headerFilterParamsNew:n,filterValues:a};window.open("/inbox/service?"+encodeURIComponent(JSON.stringify(a)))},c._handelOnSessionMsgClick=function(e){var t=c.props,n=t.headerFilterParamsNew,a=t.filterValues,i=t.dateFilter,r=t.projectId,l=t.dateGroupType,t=(0,P.LV)(e[0].data.name.replaceAll("/","-"),l),e=t.from,t=t.to,a={dateFilter:o()({},i,{numOfDays:1,dateGroupType:l,from:e,to:t,quickChoice:e.replace(/-/g,".")+" - "+t.replace(/-/g,".")}),filterModel:{project:[r]},projectId:r,filterTip:null,headerFilterParamsNew:n,filterValues:a};window.open("/inbox/service?"+encodeURIComponent(JSON.stringify(a)))},c._handleOnMsgClick=function(t,n,e){var a=c.props,i=a.headerFilterParamsNew,r=a.filterValues,l=a.dateFilter,o=a.projectId;"card"===n||"bar"===n?(a={dateFilter:"往期"===t.seriesName?(0,P.yz)(l):l,filterModel:{project:[o]},projectId:o,filterTip:null,headerFilterParamsNew:e.includes("关注点")?(0,s.ZP)(i,function(e){e.find(function(e){return"WAITER_MODEL"===e.id})?e.find(function(e){return"WAITER_MODEL"===e.id}).values=[{id:"WAITER_ASPECT1",values:"card"===n?t:[t.name]}]:e.push({id:"WAITER_MODEL",values:[{id:"WAITER_ASPECT1",values:"card"===n?t:[t.name]}]})}):i,filterValues:e.includes("关注点")?(0,s.ZP)(r,function(e){e.find(function(e){return"WAITER_MODEL"===e.id})?e.find(function(e){return"WAITER_MODEL"===e.id}).values=[{id:"WAITER_ASPECT1",label:"一级关注点",values:"card"===n?t:[t.name]}]:e.push({id:"WAITER_MODEL",label:"模型",values:[{id:"WAITER_ASPECT1",label:"一级关注点",values:"card"===n?t:[t.name]}]})}):r,topic1Names:e.includes("话题")?"card"===n?t:[t.name]:void 0},window.open("/inbox/service?"+encodeURIComponent(JSON.stringify(a)))):"table"===n&&(e={dateFilter:"往期"===t.barType?(0,P.yz)(l):l,filterModel:{project:[o]},projectId:o,filterTip:null,headerFilterParamsNew:e.includes("关注点")?(0,s.ZP)(i,function(e){e.find(function(e){return"WAITER_MODEL"===e.id})?e.find(function(e){return"WAITER_MODEL"===e.id}).values=[{id:"WAITER_ASPECT2",values:[t.name]}]:e.push({id:"WAITER_MODEL",values:[{id:"WAITER_ASPECT2",values:[t.name]}]})}):i,filterValues:e.includes("关注点")?(0,s.ZP)(r,function(e){e.find(function(e){return"WAITER_MODEL"===e.id})?e.find(function(e){return"WAITER_MODEL"===e.id}).values=[{id:"WAITER_ASPECT2",label:"二级关注点",values:[t.name]}]:e.push({id:"WAITER_MODEL",label:"模型",values:[{id:"WAITER_ASPECT2",label:"二级关注点",values:[t.name]}]})}):r,topic2Names:e.includes("话题")?[t.name]:void 0},window.open("/inbox/service?"+encodeURIComponent(JSON.stringify(e))))},c._handleOnChange=function(e,t,n){n=n.includes("关注点")?"FOCUS":"TOPIC";c.props.fetchTableData({queryType:n,aspect1:e})},c._handleChartTypeChange=function(e){c.setState({chartType:e})},-1!==location.href.indexOf("/service/spu")&&location.search&&(t=JSON.parse(decodeURIComponent(location.search.substring(1)))),c.state={outsideFilter:t,chartType:"c1"},c.events={onChange:c._handleOnChange,filterReady:c._handleFilterReady,filterChange:c._handleFilterChange,onClickGoods:c._handleOnClickGoods,onChartTypeChange:c._handleChartTypeChange,onMsgClick:c._handleOnMsgClick,onSessionMsgClick:c._handelOnSessionMsgClick},c}l()(e,n);var t=e.prototype;return t.componentDidMount=function(){},t.componentWillUnmount=function(){this.props.clean()},t.render=function(){return R().createElement(c,o()({},this.props,this.state,this.events))},e}(R().Component);const f=(0,t.connect)(function(e){var t=e.loading,e=i()(e,["loading"]);return o()({},e[p],{fetchingLineData:t.effects[p+"/fetchLineData"]||!1})},function(t){return{save:function(e){return t({type:p+"/save",payload:e})},clean:function(){return t({type:p+"/clean"})},fetchData:function(e){return t({type:p+"/fetchData",payload:e})},fetchLineData:function(e){return t({type:p+"/fetchLineData",payload:e})},fetchChartData:function(e){return t({type:p+"/fetchChartData",payload:e})},fetchTableData:function(e){return t({type:p+"/fetchTableData",payload:e})}}})(r)}}]);