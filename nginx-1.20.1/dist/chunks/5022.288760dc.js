"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[5022],{68889:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(63366),l=n(87462),r=n(94578),i=n(23279),c=n.n(i),o=n(67294),s=n(55609),u=n(61409),p=n(30133);const d=function(){return o.createElement("div",{className:"yt-aspect-warning-page-skeleton-wrapper"},o.createElement(p.Z,{paragraph:["30%","80%"]}),o.createElement("div",{className:"awp-skeleton-content"},o.createElement("div",{className:"awp-card-wrapper"},o.createElement("span",null,o.createElement(p.Z,null)),o.createElement("span",null,o.createElement(p.Z,null)),o.createElement("span",null,o.createElement(p.Z,null))),o.createElement("div",{className:"awp-list-warpper"},o.createElement("span",null,o.createElement(p.Z,null)),o.createElement("span",null,o.createElement(p.Z,null)),o.createElement("span",null,o.createElement(p.Z,null)))))};var m=n(55815),g=n(61918),h=n(33097),E=n(59762),f=n(92360),v=[{title:"\u5168\u90e8",value:"READ_UNREAD"},{title:"\u5f85\u5904\u7406",value:"UNREAD"},{title:"\u5df2\u5904\u7406",value:"READ"}];const y=function(e){var t=e.onChange,n=o.useState(v[0].value),a=n[0],l=n[1];return o.createElement(f.Radio.Group,{value:a,onChange:function(e){l(e),t(e.split("_"))},className:"yt-radio-group-wrapper"},v.map((function(e){return o.createElement(f.Radio.Button,{value:e.value,key:e.value},e.title)})))};const C=function(e){return o.createElement("div",{className:"content-card-wrapper"},o.createElement("span",null,e.value),o.createElement("span",null,e.hint))};var w=n(43036),N=n(71339),S={PERCENT:"\u8d1f\u9762\u58f0\u91cf\u5360\u6bd4",NUMBER:"\u8d1f\u9762\u58f0\u91cf"},b={LAST_THREE_DAYS:"\u8fd13\u5929",LAST_SENVEN_DAYS:"\u8fd17\u5929",LAST_THIRTY_DAYS:"\u8fd130\u5929",CURRENT_DAY:"\u5f53\u5929",CURRENT_WEEK:"\u5f53\u5468",CURRENT_MONTH:"\u5f53\u6708"},R={READ:"\u5df2\u5904\u7406",UNREAD:"\u5f85\u5904\u7406"},_=function(e,t){var n=e-5-24-44-32-100;return[{label:"",width:16},{label:"\u9884\u8b66\u540d\u79f0",prop:"title",width:.25*n,render:function(e,t,n){return o.createElement(w.Z,{overlay:(a=e,o.createElement("div",{style:{width:300,minHeight:180}},o.createElement("h3",null,"\u9884\u8b66\u540d\u79f0"),o.createElement("div",{style:{margin:"8px 0"}},a.title),o.createElement("h3",null,"\u9884\u8b66\u8bf4\u660e"),o.createElement("div",{style:{margin:"8px 0"}},a.description),o.createElement("h3",null,"\u521b\u5efa\u8005"),o.createElement("div",{style:{margin:"8px 0"}},a.owner))),placement:"top"},o.createElement("span",{style:{cursor:"pointer"}},e.title));var a}},{label:"\u76d1\u6d4b\u6307\u6807",width:.3*n,render:function(e,t,n){return o.createElement("span",null,""+e.analysisName+b[e.dateRangeType]+e.aspectName+S[e.calType])}},{label:"\u9608\u503c",width:.125*n,prop:"warningData"},{label:"\u89e6\u53d1\u65f6\u95f4",width:.2*n,prop:"createdAt"},{label:"\u5904\u7406\u72b6\u6001",width:.125*n,prop:"status",render:function(e,t,n){return o.createElement("span",{className:"READ"===e.status?"col-status-read":"col-status-unread"},R[e.status])}},{label:"\u64cd\u4f5c",width:100,render:function(e){return o.createElement("span",{className:"col-control",onClick:function(){return t(e.warningLogId)}},"\u7acb\u5373\u67e5\u770b")}},{label:"",width:16}]};const I=function(e){var t=e.option,n=t.width,a=t.height,r=e.onClick;return o.createElement("div",{className:"awp-warning-list",style:{height:a}},o.createElement(N.Z,(0,l.Z)({},e,{columns:_(n,r)})))};const L=function(e){var t=e.loading,n=e.contentWidth,a=e.data,l=a.unReadCount,r=a.readCount,i=a.total,c=a.list,s=e.analysis,u=e.aspect,p=e.pageIndex,d=e.pageSize,f=e.onListItemClick,v=e.onFilterObjectChange,w=e.projectId,N=e.statusList;return o.createElement("div",{className:"yt-aspect-warning-page-warpper"},o.createElement(m.Z,{title:"\u6307\u6807\u9884\u8b66"}),o.createElement("div",{className:"page_content"},o.createElement("div",{className:"yt-awp-title-button-wrapper"},o.createElement(g.Z,{placeholder:"\u8bf7\u8f93\u5165\u9884\u8b66\u540d\u79f0",onSearch:function(e){return v({searchKey:e,pageIndex:1})}}),o.createElement(E.Z,{projectId:w,type:"OVERVIEW",defaultValue:JSON.parse(JSON.stringify(s)),onChange:function(e){JSON.stringify(e)!==JSON.stringify(s)&&v({analysis:JSON.parse(JSON.stringify(e))})}}),o.createElement(h.Z,{defaultValue:JSON.parse(JSON.stringify(u)),projectId:w,onChange:function(e){JSON.stringify(e)!==JSON.stringify(u)&&v({aspect:JSON.parse(JSON.stringify(e))})}}),o.createElement(y,{onChange:function(e){return v({statusList:e,pageIndex:1})}})),o.createElement("div",{className:"yt-awp-content-wrapper"},o.createElement("div",{className:"content-cards"},o.createElement(C,{value:l,hint:"\u8fd17\u5929\u5f85\u5904\u7406\u9884\u8b66"}),o.createElement(C,{value:r,hint:"\u8fd17\u5929\u5df2\u5904\u7406\u9884\u8b66"}),o.createElement(C,{value:i,hint:"\u8fd17\u5929\u5168\u90e8\u9884\u8b66"})),o.createElement(I,{data:c,total:2===N.length?i:1===N.length&&N.includes("READ")?r:l,pageIndex:p,pageSize:d,loading:t,onClick:f,option:{width:n},onPageSizeChange:function(e){return v({pageSize:e,pageIndex:1})},onPageChange:function(e){return v({pageIndex:e})}}))))};const W=function(e){var t=e.initLoading,n=e.data;return o.createElement("div",{id:"awp-content",style:{height:"100%"}},t||!n?o.createElement(d,null):o.createElement(L,e))};var Z=n(35239),z=n(64396),O=["loading"],k=z.Z.aspectWarning,A=z.Z.public.menu,D=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleWindowResize=c()((function(){var e=document.getElementById("awp-content").clientWidth;n.setState({contentWidth:e})}),150),n._handleOnListItemClick=function(e){var t=n.props,a=t.fetchaSpectWarningCount,l=t.aspectWarningCount,r=!1;"UNREAD"===t.data.list.find((function(t){return t.warningLogId===e})).status&&(a({aspectWarningCount:l-1}),r=!0),u.mW.push({pathname:"/aspectWarning/detail",state:{id:e,isRefreshUserState:r}})},n._handleOnFilterObjectChange=function(e){n.props.fetchWarningList((0,l.Z)({},e))},n.aspectRef=void 0,n.state={contentWidth:0},n.event={onListItemClick:n._handleOnListItemClick,onFilterObjectChange:n._handleOnFilterObjectChange},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.fetchWarningList({projectId:Z.t.get(Z.V.curProject).id}),window.addEventListener("resize",this._handleWindowResize),this._handleWindowResize()},n.componentWillUnmount=function(){window.removeEventListener("resize",this._handleWindowResize)},n.render=function(){return o.createElement(W,(0,l.Z)({},this.props,this.state,this.event))},t}(o.PureComponent);const x=(0,s.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,O);return(0,l.Z)({},n[k].warningData.fetchParams,{projectId:n[k].projectId,data:n[k].warningData.data,initLoading:n[k].initLoading,loading:t.effects[k+"/fetchWarningList"]||!1,aspectWarningCount:n[A].aspectWarningCount})}),(function(e){return{fetchWarningList:function(t){return e({type:k+"/fetchWarningList",payload:t})},fetchaSpectWarningCount:function(t){return e({type:A+"/save",payload:t})}}}))(D)},25022:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),l=n(92360),r=n(35303),i=n(45697),c=n.n(i),o=[{label:"10\u9879/\u9875",value:10},{label:"20\u9879/\u9875",value:20},{label:"40\u9879/\u9875",value:40},{label:"100\u9879/\u9875",value:100}];const s=function(e){var t=e.onPageChange,n=e.onSizeChange,i=e.total,c=void 0===i?0:i,s=e.pageIndex,u=e.pageSize,p=e.layout,d=e.className,m=e.currLength,g=0===c?0:(s-1)*u+1,h=0===c?0:m?g+m-1:g+u-1;return 0===c?null:a.createElement("div",{className:"yt-awp-pagination "+(d||"")},a.createElement("span",{className:"total_num"},a.createElement("span",null,g+" - "+h+" "),"\u9879\uff0c\u5171",a.createElement("span",null," "+c+" "),"\u9879"),a.createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},a.createElement(l.Pagination,{small:!0,pageSize:u,currentPage:s,pageCount:Math.ceil(c/u),layout:0===c?"":"prev, pager, next",onCurrentChange:t}),void 0===p||p.includes("sizes")?a.createElement(r.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:u||10,onChange:n},o.map((function(e,t){return a.createElement(r.Wx,{key:t,label:e.label,value:e.value},e.label)}))):null))};c().propTypes={onPageChange:c().func,onSizeChange:c().func,total:c().number,pageIndex:c().number,pageSize:c().number,layout:c().string,className:c().string}},71339:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),l=n(92360),r=n(25022),i=n(45697),c=n.n(i),o=function(e){var t=e.data,n=e.total,i=void 0===n?0:n,c=e.loading,o=e.pageIndex,s=e.columns,u=e.pageSize,p=e.onPageChange,d=e.onPageSizeChange,m=e.onSortChange,g=e.defaultSort,h=e.className,E=void 0===h?"":h;return a.useEffect((function(){var e=document.getElementsByClassName("is-sortable")[0];g&&e&&e.classList.add(g.order)}),[g]),a.createElement("div",{className:"yt-awp-content-list "+E},a.createElement(l.Loading,{loading:c,className:"awp-content-loading"},a.createElement(l.Table,{defaultSort:g,columns:s,style:{width:"100%"},data:t,onSortChange:function(e){return m(e)}})),p&&a.createElement(r.Z,{onPageChange:p,onSizeChange:d,total:i,currLength:t.length,pageIndex:o,pageSize:u}))};o.propTypes={data:c().array,total:c().number,loading:c().bool,pageIndex:c().number,columns:c().array,pageSize:c().number,onPageChange:c().func,onPageSizeChange:c().func,onSortChange:c().func,defaultSort:c().any,className:c().string};const s=o},61918:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(67294),l=n(45697),r=n.n(l),i=function(e){var t=e.className,n=e.onClear,l=e.onSearch,r=e.placeholder,i=e.style,c=e.defValue,o=e.signal,s=a.useState(c),u=s[0],p=s[1];a.useEffect((function(){p(c)}),[c,o]);return a.createElement("div",{style:i,className:"yt_search_input_wrapper "+(t||"")},a.createElement("input",{placeholder:r,value:u,onKeyDown:function(e){13===e.keyCode&&l(u)},onChange:function(e){return p(e.target.value)},autoComplete:"off"}),u&&a.createElement("i",{className:"icon-cem_log-off",onClick:function(){p(""),n&&n("")}}),a.createElement("i",{className:"icon-cem_small-search",onClick:function(){return l(u)}}))};i.propTypes={className:r().string,onSearch:r().func.isRequired,placeholder:r().string,style:r().object,defValue:r().string,signal:r().any,onClear:r().func};const c=i}}]);