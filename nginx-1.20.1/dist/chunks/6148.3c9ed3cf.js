"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[6148],{46148:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var a=n(63366),l=n(87462),r=n(94578),c=n(67294),i=n(55609),o=n(55815),s=n(92360);var m=n(51285),u=n.n(m);const d=function(e){var t=e.visible,n=e.imgUrl,a=e.onClose;return c.createElement("div",{className:"price_enlarge_wrap"},c.createElement(u(),{className:"price_enlarge_viewer",visible:t,drag:!1,loop:!1,rotatable:!1,changeable:!1,zIndex:1001,noClose:!0,noImgDetails:!0,noToolbar:!0,noFooter:!0,onClose:a,defaultScale:1,images:[{src:n,alt:"\u622a\u56fe"}]}),c.createElement("span",{className:"top_close_btn",onClick:a,style:{zIndex:1016}},c.createElement("i",{className:"icon-cem_cancel"})))};const p=function(e){var t=e.uImg,n=e.imgUrl,a=e.url,l=c.useState(!1),r=l[0],i=l[1];return c.createElement("div",{className:"price_screen_wrap"},!n||n.includes("fail")?c.createElement("div",{className:"empty-block",style:{minHeight:"488px"}},"\u6682\u65e0\u6570\u636e",c.createElement(s.Button,{onClick:function(){window.open(""+a)}},"\u67e5\u770b\u8be6\u60c5")):c.createElement(c.Fragment,null,c.createElement("div",{className:"screen_title"},"\u622a\u56fe"),c.createElement("div",{className:"top_btn"},c.createElement(s.Button,{onClick:function(){window.open(""+a)}},"\u67e5\u770b\u8be6\u60c5"),c.createElement(s.Button,{onClick:function(){!function(e,t){var n=1e3,a=document.createElement("canvas"),l=a.getContext("2d"),r=new Image;r.onload=function(){r.height>n&&r.height>=r.width&&(r.width=n/r.height,r.height=n),r.width>n&&r.width>r.height&&(r.height*=n/r.width,r.width=n),l.clearRect(0,0,a.width,a.height),a.width=r.width,a.height=r.height,l.drawImage(r,0,0,r.width,r.height);var e=a.toDataURL("image/jpg"),c=document.createElement("a"),i=new MouseEvent("click");c.download=t||"\u622a\u56fe\u53d6\u8bc1",c.href=e,c.dispatchEvent(i)},r.crossOrigin="anonymous",r.src=e+"?timeStamp="+(new Date).getTime()}(n,function(e){var t=new Date;return e+"-"+t.getFullYear()+(t.getMonth()+1)+t.getDate()+t.getHours()+t.getMinutes()+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+t.getMilliseconds()}("\u622a\u56fe\u53d6\u8bc1"))}},"\u4e0b\u8f7d\u56fe\u7247"),c.createElement(s.Button,{onClick:function(){i(!0)}},"\u5927\u56fe\u67e5\u770b")),c.createElement("div",{className:"img_wrap"},c.createElement("img",{src:t,onClick:function(){i(!0)}})),r&&c.createElement(d,{visible:r,imgUrl:n,onClose:function(){i(!1)}})))};var h=n(43036),f=n(61193),g=n(30381),E=n.n(g),v="YYYY-MM-DD HH:mm";const w=function(e){var t=e.infoData,n=e.onDeal,a=c.useState(t&&t.handlerId),l=a[0],r=a[1];return c.createElement("div",{className:"price_info_wrap"},t&&c.createElement("div",null,c.createElement("div",{className:"screen_title"},"\u5546\u54c1\u57fa\u672c\u4fe1\u606f"),c.createElement("div",{className:"info_list"},c.createElement("div",null,c.createElement("span",null,"\u5546\u54c1\u540d\u79f0"),c.createElement("span",null,t.connectionName)),c.createElement("div",null,c.createElement("span",null,"\u6307\u5bfc\u4ef7"),c.createElement("span",null,parseFloat(t.compareLine).toFixed(2),"\u5143")),c.createElement("div",null,c.createElement("span",null,"\u89e6\u53d1\u65f6\u95f4",c.createElement(h.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:c.createElement("a",{href:"https://www.yuque.com/docs/share/4fd44d72-2e46-4900-828d-7a4919afa8d4?#",target:"_blank",rel:"noopener noreferrer",style:{color:"#0847a6"}},"\u4e86\u89e3\u66f4\u591a")},c.createElement("i",{className:"icon-cem_file1"}))),c.createElement("span",null,E()(t.breakBackTime).format(v))),c.createElement("div",null,c.createElement("span",null,"\u622a\u56fe\u4ef7"),c.createElement("span",null,parseFloat(t.breakBackPrice||0).toFixed(2),"\u5143")),c.createElement("div",null,c.createElement("span",null,"\u5e45\u5ea6"),c.createElement("span",null,new Number(parseFloat(t.breakBackPrice||0)-parseFloat(t.compareLine)).toFixed(2),"\u5143"))),c.createElement("div",{className:"operate_wrap"},c.createElement(s.Button,{className:l?"deal-btn-hover":"deal-btn",onClick:function(){r(!l),n()},disabled:l},"\u6211\u6765\u5904\u7406"),l&&c.createElement("p",{className:"operated"},t.handlerEmail?t.handlerEmail:f.Z.getUser().email,"\uff08",t.handlerName?t.handlerName:f.Z.getUser().username,"\uff09\u4e8e",t.handlerTime&&t.handlerId?E()(t.handlerTime).format(v):E()().format(v),"\u5df2\u8ddf\u8fdb\u5904\u7406\u6b64\u95ee\u9898"))))};const y=function(e){var t=e.data,n=e.logData,a=e.onDeal;return c.createElement("div",{className:"yt_price_screenshot_wrapper"},c.createElement(o.Z,{title:[{title:"\u6e20\u9053\u4e71\u4ef7",url:"/priceChaos"},{title:"\u622a\u56fe\u53d6\u8bc1",url:""}]}),c.createElement("div",{className:"content",id:"price_screenshot_content"},c.createElement("div",{className:"price_screenshot_wrap"},c.createElement(p,{uImg:t.breakBackUrl&&t.breakBackUrl,imgUrl:t.breakBackUrl&&t.breakBackUrl,url:t.connectionUrl&&t.connectionUrl}),n&&c.createElement(w,{infoData:n,onDeal:a}))))};var b=n(64396),k=["loading"],_=b.Z.price.screenshot,N=function(e){function t(t){var n;(n=e.call(this,t)||this)._handleOnDeal=function(){var e=n.state.data.id;n.props.fetchDeal({id:e})};var a=t.location.state;return n.state={data:a&&a},n.event={onDeal:n._handleOnDeal},t.fetchGetData({id:a.id}),n}return(0,r.Z)(t,e),t.prototype.render=function(){return c.createElement(y,(0,l.Z)({},this.props,this.state,this.event))},t}(c.PureComponent);const C=(0,i.connect)((function(e){e.loading;var t=(0,a.Z)(e,k);return(0,l.Z)({},t[_])}),(function(e){return{save:function(t){return e({type:_+"/save",payload:t})},clean:function(t){return e({type:_+"/clean",payload:t})},fetchDeal:function(t){return e({type:_+"/fetchDeal",payload:t})},fetchGetData:function(t){return e({type:_+"/fetchGetData",payload:t})}}}))(N)},55815:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(94578),l=n(67294),r=n(45697),c=n.n(r),i=n(43036),o=n(61409),s=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,l=n.beforeJump;e!==a.length-1&&(l?new Promise((function(e,t){return l(e,t)})).then((function(){o.mW.push({pathname:a[e].url,state:a[e].state})})):o.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,r=t.rightContent,c=t.className,o=t.overlay;return l.createElement("div",{className:"breadcumb-wrapper "+c},n instanceof Array?l.createElement("div",{className:"breadcrumb-left"},l.createElement("div",null,n.map((function(t,a){return l.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),l.createElement("span",null,a||n[n.length-1].title,o&&l.createElement(i.Z,{placement:"top",overlay:o},l.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):l.createElement("div",{className:"normal-title"},n,o&&l.createElement(i.Z,{placement:"top",overlay:o},l.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),r||"")},t}(l.Component);s.propTypes={className:c().string,title:c().oneOfType([c().string,c().arrayOf(c().shape({title:c().string,url:c().string,state:c().object}))]).isRequired,overlay:c().oneOfType([c().string,c().node]),mainTitle:c().oneOfType([c().string,c().node]),beforeJump:c().func,rightContent:c().node};const m=s}}]);