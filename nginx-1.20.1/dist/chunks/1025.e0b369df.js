"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1025],{63262:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(94578),l=n(67294);const r=function(e){function t(){return e.apply(this,arguments)||this}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.level,n=e.style,a=void 0===n?{}:n;return l.createElement("div",{className:"urgency-page-view"},l.createElement("div",{className:"level "+{HIGH:"high",MIDDLE:"middle",LOW:"low"}[t],style:a},{HIGH:"\u9ad8",MIDDLE:"\u4e2d",LOW:"\u4f4e"}[t]))},t}(l.Component)},4901:(e,t,n)=>{n.d(t,{hm:()=>l,Ew:()=>r,rV:()=>i,vG:()=>c,yZ:()=>u,ms:()=>s,F1:()=>p});var a=n(53326),l=[{label:"\u5168\u90e8",value:"ALL"},{label:"\u542f\u7528",value:"ENABLE"},{label:"\u505c\u7528",value:"DISABLE"}],r=[{label:"\u5168\u90e8",value:"ALL"},{label:"\u672a\u8bfb",value:"UNREAD"},{label:"\u5df2\u8bfb",value:"READ"}],i=[{title:"\u5168\u90e8",value:"ALL"},{title:"\u9ad8",value:"HIGH"},{title:"\u4e2d",value:"MIDDLE"},{title:"\u4f4e",value:"LOW"}],o=(0,a.rO)(),c=o.reduce((function(e,t){return e[t.value]=t.label,e}),{}),u=[{title:"\u5168\u90e8",value:"ALL"}].concat(o.map((function(e){return{title:e.label,value:e.value}}))),s={UNREAD:"\u672a\u8bfb",READ:"\u5df2\u8bfb"},p=[{label:"\u5168\u90e8",value:"ALL"},{label:"\u9884\u552e",value:"PRE_SALE"},{label:"\u5728\u552e",value:"ON_SALE"},{label:"\u4e0b\u67b6",value:"OFF_SALE"}]},71025:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(63366),l=n(87462),r=n(94578),i=n(67294),o=(n(9405),n(89552)),c=(n(15267),n(64713)),u=(n(62713),n(14321)),s=n(4901),p=n(55815),m=n(43036),d=n(96889),g=n(63262),v=n(35239),h=function(e){var t=e.title,n=e.url;return[{title:v.t.get(v.V.backProjectConfig).name,url:"/account/project/preview"},{title:"\u9884\u8b66\u89c4\u5219",url:"/account/project/warning/overview"},{title:t,url:n}]},f=n(44600),E=n(30381),y=n.n(E),L=u.default.RangePicker,C=(y()().subtract(6,"days"),y()(),"YYYY/MM/DD"),b=i.createRef();const D=function(e){function t(t){var n;return(n=e.call(this,t)||this).onOpenDetail=function(e){b.current.wrappedInstance.ready(e,n.props.fetchWarningtLogList)},n.onDateChange=function(e,t){n.setState({date:t}),e||n.props.onDateChange(t)},n.onOpenChange=function(e){n.setState({openDate:e});var t=n.props.onDateChange;setTimeout((function(){var a=n.state.date;!e&&t(a)}),0)},n.state={date:[y()().subtract(6,"days"),y()()],columns:[{title:"",width:"0.1%"},{title:"\u9884\u8b66\u6807\u9898",dataIndex:"title",width:"30%",render:function(e,t,a,l){var r=t.remark,o=t.warningLogId;return i.createElement("div",{className:"warning-log",onClick:function(){return n.onOpenDetail({id:o,title:r})}},r)}},{title:"\u7d27\u6025\u7a0b\u5ea6",dataIndex:"level",width:"15%",render:function(e){return i.createElement(g.Z,{level:e})}},{title:"\u6570\u636e\u7c7b\u578b",dataIndex:"category",width:"18%",render:function(e){return i.createElement("div",null,s.vG[Number(e)])}},{title:"\u6d4f\u89c8\u72b6\u6001",dataIndex:"status",width:"18%",render:function(e){return i.createElement("div",null,s.ms[e])}},{title:"\u63a8\u9001\u65f6\u95f4",dataIndex:"createdAt",render:function(e){return i.createElement("div",null,y()(e).format("YYYY/MM/DD HH:mm"))},width:"18%"}]},n}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,n=e.warningLogList,a=e.warningLogTotal,r=e.current,u=e.pageSize,g=e.onFilterChange,v=e.logStatus,E=e.fetchingWarningtLogList,D=e.fetchingWarningtLogCard,w=e.unSubscribeCount,N=e.totalPushCount,Z=e.readCount,O=e.pushUserCount,W=e.pushTeamCount,A=e.location,k=e.cardData,_=this.state,I=_.columns,S=_.date;(A&&A.state||{}).receiverUserList;return i.createElement("div",{className:"project_warging_log_page_view"},i.createElement(p.Z,{title:h({title:t,url:void 0})}),i.createElement("div",{className:"container"},i.createElement("div",{className:"content"},i.createElement("div",{className:"table-top"},i.createElement(L,{disabledDate:function(e){return e&&e>y()().endOf("day")},value:S&&S[0]&&S[1]&&S&&S.length?[y()(S[0],C),y()(S[1],C)]:null,onChange:this.onDateChange,onOpenChange:this.onOpenChange,className:"warging-log-range-picker",format:C}),i.createElement(c.default.Group,{options:s.Ew,onChange:function(e){return g({logStatus:e.target.value})},value:v,optionType:"button",style:{height:30,marginRight:"8px",marginBottom:16}})),i.createElement(o.default,{spinning:D},i.createElement("div",{className:"cards"},i.createElement("div",null,i.createElement("span",null,N),i.createElement("span",null,i.createElement("span",null,"\u9884\u8b66\u901a\u77e5\u6570"))),i.createElement("div",null,i.createElement("span",null,Z),i.createElement("span",null,i.createElement("span",null,"\u5df2\u8bfb\u901a\u77e5\u6570"))),i.createElement("div",null,i.createElement(m.Z,{overlay:null==k?void 0:k.teamNames.join("\u3001"),placement:"top",mouseEnterDelay:.2,overlayClassName:"alert-log-tips"},i.createElement("span",null,W)),i.createElement("span",null,i.createElement("span",null,"\u63a8\u9001\u7528\u6237\u7ec4"))),i.createElement("div",null,i.createElement(m.Z,{overlay:null==k?void 0:k.receiverUserList.join("\u3001"),placement:"top",mouseEnterDelay:.2,overlayClassName:"alert-log-tips"},i.createElement("span",null,O)),i.createElement("span",null,i.createElement("span",null,"\u63a8\u9001\u6210\u5458"))),i.createElement("div",null,i.createElement(m.Z,{overlay:null==k?void 0:k.unsubscribeUsers.join("\u3001"),placement:"top",mouseEnterDelay:.2,overlayClassName:"alert-log-tips"},i.createElement("span",null,w)),i.createElement("span",null,i.createElement("span",null,"\u9000\u8ba2\u6210\u5458"))))),i.createElement(d.ZP,{loading:E,dataSource:n,columns:I,rowKey:"warningLogId",toolBarRender:!1,search:!1,pagination:{total:a,current:r,pageSize:u},onChange:function(e){u!==e.pageSize?g((0,l.Z)({},e,{current:1})):g((0,l.Z)({},e))}}))),i.createElement(f.Z,{ref:b}))},t}(i.Component);var w=n(55609),N=n(64396),Z=["loading"],O=N.Z.workspace.log,W="YYYY-MM-DD",A=function(e){function t(t){var n,a,l,r,i,o,c;((n=e.call(this,t)||this).events=void 0,n._handleOnDateChange=function(e){var t=void 0;e&&e.filter(Boolean).length&&(t={dateGroupType:"DAY",from:y()(e[0]).format(W),quickChoice:y()(e[0]).format(W).replace(/-/g,".")+" - "+y()(e[1]).format(W).replace(/-/g,"."),remoteName:"cTime",to:y()(e[1]).format(W)}),n.props.fetchParams({dateFilter:t}),n.props.fetchWarningtLogCard({dateFilter:t})},n._handleOnFilterChange=function(e){n.props.fetchParams(e)},"/account/project/warning/log"===n.props.location.pathname)&&(a=null==(r=n.props.location)||null==(i=r.state)?void 0:i.title,l=null==(o=n.props.location)||null==(c=o.state)?void 0:c.id);return n.state={title:a,id:l},n.events={onFilterChange:n._handleOnFilterChange,onDateChange:n._handleOnDateChange},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e,t,n;this.props.save({id:null==(e=this.props)||null==(t=e.location)||null==(n=t.state)?void 0:n.id}),this.props.fetchWarningtLogList(),this.props.fetchWarningtLogCard()},n.render=function(){return i.createElement(D,(0,l.Z)({},this.props,this.state,this.events))},t}(i.Component);const k=(0,w.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,Z);return(0,l.Z)({},n[O],{fetchingWarningtLogList:t.effects[O+"/fetchWarningtLogList"]||!1,fetchingWarningtLogCard:t.effects[O+"/fetchWarningtLogCard"]||!1})}),(function(e){return{save:function(t){return e({type:O+"/save",payload:t})},clean:function(){return e({type:O+"/clean"})},fetchParams:function(t){return e({type:O+"/fetchParams",payload:t})},fetchWarningtLogList:function(t){return e({type:O+"/fetchWarningtLogList",payload:t})},fetchWarningtLogCard:function(t){return e({type:O+"/fetchWarningtLogCard",payload:t})}}}))(A)},55815:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(94578),l=n(67294),r=n(45697),i=n.n(r),o=n(43036),c=n(61409),u=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this)._handleBreadcrumbClick=function(e){var n=t.props,a=n.title,l=n.beforeJump;e!==a.length-1&&(l?new Promise((function(e,t){return l(e,t)})).then((function(){c.mW.push({pathname:a[e].url,state:a[e].state})})):c.mW.push({pathname:a[e].url,state:a[e].state}))},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.mainTitle,r=t.rightContent,i=t.className,c=t.overlay;return l.createElement("div",{className:"breadcumb-wrapper "+i},n instanceof Array?l.createElement("div",{className:"breadcrumb-left"},l.createElement("div",null,n.map((function(t,a){return l.createElement("span",{className:t.url?"":"not_clickable",key:a,onClick:function(){return t.url&&a!==n.length-1&&e._handleBreadcrumbClick(a)}},t.title,a!==n.length-1&&" / ")}))),l.createElement("span",null,a||n[n.length-1].title,c&&l.createElement(o.Z,{placement:"top",overlay:c},l.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}})))):l.createElement("div",{className:"normal-title"},n,c&&l.createElement(o.Z,{placement:"top",overlay:c},l.createElement("i",{className:"icon-cem_file1",style:{color:"#8c8c8c",marginLeft:8}}))),r||"")},t}(l.Component);u.propTypes={className:i().string,title:i().oneOfType([i().string,i().arrayOf(i().shape({title:i().string,url:i().string,state:i().object}))]).isRequired,overlay:i().oneOfType([i().string,i().node]),mainTitle:i().oneOfType([i().string,i().node]),beforeJump:i().func,rightContent:i().node};const s=u}}]);