"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[1574],{78436:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(94578),i=a(67294),r=a(94644),o=function(t){function e(){var e;return(e=t.call(this)||this).isEmpty=!0,e.group=function(t){e.myChart.group=t,e.echarts.connect(t)},e.refreshChart=function(t){e.setState(t)},e.setWidth=function(t){e.refs.chart.style.width=t,e.init()},e.loading=function(){e.myChart.clear(),e.myChart.showLoading({text:"\u62fc\u547d\u52a0\u8f7d\u4e2d",color:"#20a0ff",maskColor:"rgba(255, 255, 255, 0.9)",zlevel:0})},e.setOption=function(t){if(t.textStyle={fontFamily:"'PingFang SC','Microsoft Yahei', 'Helvetica Neue', Helvetica, Tahoma, Arial, 'Hiragino Sans GB', 'WenQuanYi Micro Hei', sans-serif"},t.legend&&(t.legend.data=t.legend.data.map((function(t){return{name:t,icon:"circle"}})),t.legend.itemWidth=10,t.legend.itemHeight=10),t.tooltip&&!t.tooltip.extraCssText?(t.tooltip.backgroundColor="rgba(255,255,255,0.9)",t.tooltip.textStyle={color:"#262626"},t.tooltip.extraCssText="box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);"):t.tooltip&&(t.tooltip=t.tooltip),t.series.forEach((function(t){"line"===t.type&&(t.showAllSymbol=!0,t.symbol="circle",t.symbolSize=2,t.itemStyle={normal:{borderColor:"rgba(255,255,255,0)",borderWidth:5}})})),t.hoverLayerThreshold=500,t.progressiveThreshold=500,t.animationThreshold=500,e.myChart){var a;e.myChart.clear(),e.myChart.hideLoading();for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(a=e.myChart).setOption.apply(a,[t].concat(i)),e.isEmpty=!1}},e.setEmptyOption=function(t){var n=e.myChart.getHeight(),i=e.myChart.getWidth(),r=Math.min(n/2,i/2,20),o={type:"pie",radius:[0,0],center:["50%","50%"],silent:!0,data:[{value:0,name:"",label:{normal:{show:!0,position:"center",backgroundColor:{image:a(3381)},padding:r,formatter:function(){return""}}}},{value:0,name:"",label:{normal:{show:!0,position:"center",formatter:function(){return"{a|\n}{b|"+t+"}"},rich:{a:{height:r+60},b:{fontSize:20,color:"#999"}}}}}]};e.myChart&&(e.myChart.clear(),e.myChart.hideLoading(),e.myChart.setOption({series:o,animation:!1},!0),e.isEmpty=!0)},e.init=function(){e.echarts.getInstanceByDom(e.refs.chart)&&e.echarts.dispose(e.refs.chart);var t=e.echarts.init(e.refs.chart);e.myChart=t,e.props.myChartClick&&t.on("click",(function(t){e.isEmpty||e.props.myChartClick(t)})),e.props.dataZoomChange&&t.on("dataZoom",(function(t){e.isEmpty||e.props.dataZoomChange(t)}))},e.downloadExcel=function(t,e){(0,r.aT)([[e].concat(t)],"")},e.echarts=a(70596),e}(0,n.Z)(e,t);var o=e.prototype;return o.componentDidMount=function(){this.init()},o.componentWillUnmount=function(){this.myChart.dispose()},o.render=function(){var t=this.props.minHeight,e=Object.assign({},t?{minHeight:t}:{});return i.createElement("div",{ref:"chart",className:"widget-chart",style:e})},e}(i.Component)},81574:(t,e,a)=>{a.r(e),a.d(e,{default:()=>l});var n=a(87462),i=a(94578),r=a(67294),o=a(78436),c=a(49722),s=a(12518),l=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).state={count:0,data:"",type:"cTime"},e.getData=function(){var t=e.state,a=t.id,n=t.name,i=t.projectId,r=t.type;c.h.post("/projects/connection/count",{id:a,name:n,projectId:i,countDateType:r}).then((function(t){e.setState({count:t.data.result.total||0,data:t.data.result.list?t.data.result.list:"\u6ca1\u6709\u6570\u636e\u53ef\u7528"},(function(){e.buildChart()}))}))},e.changeGroupTime=function(t){e.setState({type:t},(function(){e.getData()}))},e.buildChart=function(){var t,a=e.state.data;if("string"===typeof a||0==a.length)return a="\u6ca1\u6709\u53ef\u7528\u6570\u636e",e.refs.chart.setEmptyOption(a),!1;if(!a||!a.length)return null;var n=[],i=[];a.map((function(t){n.push(t.date),i.push(t.count)}));var r=30/a.length,o={tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{width:0}}},dataZoom:a.length>30?{bottom:0,start:100*(1-r),realtime:!0}:{show:!1},grid:{left:"3%",right:"4%",top:30,bottom:40,containLabel:!0},color:"#5697F6",xAxis:{type:"category",boundaryGap:!1,data:n},yAxis:(t={type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},t.splitLine={show:!0,lineStyle:{type:"dashed",color:["#E5E5E5"]}},t),series:[{data:i,type:"line",areaStyle:{color:"#5697F6",opacity:1}}]};e.refs.chart.setOption(o)},e}(0,i.Z)(e,t);var a=e.prototype;return a.componentWillMount=function(){var t=this,e=JSON.parse(decodeURIComponent(window.location.search.split("?")[1]));this.setState((0,n.Z)({},e),(function(){t.getData()}))},a.componentDidMount=function(){this.width=this.refs.widget.offsetWidth,this.height=this.refs.widget.offsetHeight},a.render=function(){var t=this.state,e=t.name,a=t.syncKey,n=t.count,i=(t.data,t.type),c=t.sourceId;return r.createElement("div",{ref:"widget",className:"connection-detailData-wrapper",style:{height:"100%",width:"100%"}},r.createElement(s.Z,{title:"\u94fe\u63a5\uff1a"+e+" "+("11"===c?"":"\uff08"+a+"\uff09")}),r.createElement("div",{className:"widget-top"},r.createElement("div",null,r.createElement("span",null,"\u6570\u636e\u603b\u91cf\uff1a"),r.createElement("span",null,n))),r.createElement("div",{className:"widget-tool"},r.createElement("div",{className:"widget-btn"},r.createElement("span",{className:"createdAt"==i?"active":"",onClick:this.changeGroupTime.bind(this,"createdAt")},"\u91c7\u96c6\u65f6\u95f4"),r.createElement("span",{className:"cTime"==i?"active":"",onClick:this.changeGroupTime.bind(this,"cTime")},"\u6d88\u606f\u65f6\u95f4"))),r.createElement("div",{className:"widget-body"},r.createElement(o.Z,{ref:"chart",className:"widget-chart",myChartClick:this.myChartClick,dataZoomChange:this.dataZoomChange,minHeight:400})))},e}(r.Component)},12518:(t,e,a)=>{a.d(e,{Z:()=>h});var n=a(94578),i=a(67294),r=a(45697),o=a.n(r),c=a(61409),s=a(92360),l=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._handleBreadcrumbClick=function(t){var a=e.props.title;t!==a.length-1&&c.mW.go(t-a.length+1)},e}return(0,n.Z)(e,t),e.prototype.render=function(){var t=this,e=this.props,a=e.title,n=e.rightContent;return i.createElement("div",{className:"secondary-header"},a instanceof Array?i.createElement(s.Breadcrumb,{className:"breadcrumb-style",separator:""},a.map((function(e,a){return i.createElement(s.Breadcrumb.Item,{key:a},i.createElement("span",{onClick:function(){return t._handleBreadcrumbClick(a)}},e))}))):i.createElement("div",{className:"normal-title"},a),n&&n)},e}(i.Component);l.propTypes={title:o().oneOfType([o().string,o().array]).isRequired,rightContent:o().node};const h=l},3381:(t,e,a)=>{t.exports=a.p+"img/459a43effdbcbdd83095.png"}}]);