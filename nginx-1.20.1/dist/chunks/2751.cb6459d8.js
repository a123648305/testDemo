(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[2751],{32473:(n,t,r)=>{"use strict";r.d(t,{Z:()=>cn});var e=r(67294),o=r(51505),i=function(n,t){var r="function"===typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(i(arguments[t]));return n},u=function(n,t){var r=t.manual,i=t.ready,u=void 0===i||i,c=t.defaultParams,l=void 0===c?[]:c,f=t.refreshDeps,s=void 0===f?[]:f,v=t.refreshDepsAction,d=(0,e.useRef)(!1);return d.current=!1,(0,o.Z)((function(){!r&&u&&(d.current=!0,n.run.apply(n,a(l)))}),[u]),(0,o.Z)((function(){d.current||r||(d.current=!0,v?v():n.refresh())}),a(s)),{onBefore:function(){if(!u)return{stopNow:!0}}}};u.onInit=function(n){var t=n.ready,r=void 0===t||t;return{loading:!n.manual&&r}};const c=u;var l=r(85292),f=r(45210),s=function(){return s=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},s.apply(this,arguments)},v=new Map,d=new Map,h={},p=function(n,t){return h[n]||(h[n]=[]),h[n].push(t),function(){var r=h[n].indexOf(t);h[n].splice(r,1)}},y=function(n,t){var r="function"===typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},m=function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(y(arguments[t]));return n};const g=function(n,t){var r=t.cacheKey,o=t.cacheTime,i=void 0===o?3e5:o,a=t.staleTime,u=void 0===a?0:a,c=t.setCache,y=t.getCache,g=(0,e.useRef)(),b=(0,e.useRef)(),w=function(n,t){c?c(t):function(n,t,r){var e=v.get(n);(null===e||void 0===e?void 0:e.timer)&&clearTimeout(e.timer);var o=void 0;t>-1&&(o=setTimeout((function(){v.delete(n)}),t)),v.set(n,s(s({},r),{timer:o}))}(n,i,t),function(n,t){h[n]&&h[n].forEach((function(n){return n(t)}))}(n,t.data)},O=function(n,t){return void 0===t&&(t=[]),y?y(t):function(n){return v.get(n)}(n)};return(0,l.Z)((function(){if(r){var t=O(r);t&&Object.hasOwnProperty.call(t,"data")&&(n.state.data=t.data,n.state.params=t.params,(-1===u||(new Date).getTime()-t.time<=u)&&(n.state.loading=!1)),g.current=p(r,(function(t){n.setState({data:t})}))}}),[]),(0,f.Z)((function(){var n;null===(n=g.current)||void 0===n||n.call(g)})),r?{onBefore:function(n){var t=O(r,n);return t&&Object.hasOwnProperty.call(t,"data")?-1===u||(new Date).getTime()-t.time<=u?{loading:!1,data:null===t||void 0===t?void 0:t.data,returnNow:!0}:{data:null===t||void 0===t?void 0:t.data}:{}},onRequest:function(n,t){var e=function(n){return d.get(n)}(r);return e&&e!==b.current||(e=n.apply(void 0,m(t)),b.current=e,function(n,t){d.set(n,t),t.then((function(t){return d.delete(n),t})).catch((function(){d.delete(n)}))}(r,e)),{servicePromise:e}},onSuccess:function(t,e){var o;r&&(null===(o=g.current)||void 0===o||o.call(g),w(r,{data:t,params:e,time:(new Date).getTime()}),g.current=p(r,(function(t){n.setState({data:t})})))},onMutate:function(t){var e;r&&(null===(e=g.current)||void 0===e||e.call(g),w(r,{data:t,params:n.state.params,time:(new Date).getTime()}),g.current=p(r,(function(t){n.setState({data:t})})))}}:{}};var b=r(23279),w=r.n(b),O=function(n,t){var r="function"===typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},S=function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(O(arguments[t]));return n};const P=function(n,t){var r=t.debounceWait,o=t.debounceLeading,i=t.debounceTrailing,a=t.debounceMaxWait,u=(0,e.useRef)(),c=(0,e.useMemo)((function(){var n={};return void 0!==o&&(n.leading=o),void 0!==i&&(n.trailing=i),void 0!==a&&(n.maxWait=a),n}),[o,i,a]);return(0,e.useEffect)((function(){if(r){var t=n.runAsync.bind(n);return u.current=w()((function(n){n()}),r,c),n.runAsync=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise((function(r,e){var o;null===(o=u.current)||void 0===o||o.call(u,(function(){t.apply(void 0,S(n)).then(r).catch(e)}))}))},function(){var r;null===(r=u.current)||void 0===r||r.cancel(),n.runAsync=t}}}),[r,c]),r?{onCancel:function(){var n;null===(n=u.current)||void 0===n||n.cancel()}}:{}};const x=function(n,t){var r=t.loadingDelay,o=(0,e.useRef)();if(!r)return{};var i=function(){o.current&&clearTimeout(o.current)};return{onBefore:function(){return i(),o.current=setTimeout((function(){n.setState({loading:!0})}),r),{loading:!1}},onFinally:function(){i()},onCancel:function(){i()}}};function j(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function T(){return!j()||"hidden"!==document.visibilityState}var R=[];if(j()){window.addEventListener("visibilitychange",(function(){if(T())for(var n=0;n<R.length;n++){(0,R[n])()}}),!1)}const Z=function(n){return R.push(n),function(){var t=R.indexOf(n);R.splice(t,1)}};const E=function(n,t){var r=t.pollingInterval,i=t.pollingWhenHidden,a=void 0===i||i,u=(0,e.useRef)(),c=(0,e.useRef)(),l=function(){var n;u.current&&clearTimeout(u.current),null===(n=c.current)||void 0===n||n.call(c)};return(0,o.Z)((function(){r||l()}),[r]),r?{onBefore:function(){l()},onFinally:function(){a||T()?u.current=setTimeout((function(){n.refresh()}),r):c.current=Z((function(){n.refresh()}))},onCancel:function(){l()}}:{}};var A=function(n,t){var r="function"===typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},C=function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(A(arguments[t]));return n};var H=[];if(j()){var B=function(){if(T()&&(!j()||"undefined"===typeof navigator.onLine||navigator.onLine))for(var n=0;n<H.length;n++){(0,H[n])()}};window.addEventListener("visibilitychange",B,!1),window.addEventListener("focus",B,!1)}const k=function(n){return H.push(n),function(){var t=H.indexOf(n);H.splice(t,1)}};const I=function(n,t){var r=t.refreshOnWindowFocus,o=t.focusTimespan,i=void 0===o?5e3:o,a=(0,e.useRef)(),u=function(){var n;null===(n=a.current)||void 0===n||n.call(a)};return(0,e.useEffect)((function(){if(r){var t=function(n,t){var r=!1;return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];r||(r=!0,n.apply(void 0,C(e)),setTimeout((function(){r=!1}),t))}}(n.refresh.bind(n),i);a.current=k((function(){t()}))}return function(){u()}}),[r,i]),(0,f.Z)((function(){u()})),{}};const M=function(n,t){var r=t.retryInterval,o=t.retryCount,i=(0,e.useRef)(),a=(0,e.useRef)(0),u=(0,e.useRef)(!1);return o?{onBefore:function(){u.current||(a.current=0),u.current=!1,i.current&&clearTimeout(i.current)},onSuccess:function(){a.current=0},onError:function(){if(a.current+=1,-1===o||a.current<=o){var t=null!==r&&void 0!==r?r:Math.min(1e3*Math.pow(2,a.current),3e4);i.current=setTimeout((function(){u.current=!0,n.refresh()}),t)}else a.current=0},onCancel:function(){a.current=0,i.current&&clearTimeout(i.current)}}:{}};var D=r(23493),F=r.n(D),L=function(n,t){var r="function"===typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},N=function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(L(arguments[t]));return n};const W=function(n,t){var r=t.throttleWait,o=t.throttleLeading,i=t.throttleTrailing,a=(0,e.useRef)(),u={};return void 0!==o&&(u.leading=o),void 0!==i&&(u.trailing=i),(0,e.useEffect)((function(){if(r){var t=n.runAsync.bind(n);return a.current=F()((function(n){n()}),r,u),n.runAsync=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise((function(r,e){var o;null===(o=a.current)||void 0===o||o.call(a,(function(){t.apply(void 0,N(n)).then(r).catch(e)}))}))},function(){var r;n.runAsync=t,null===(r=a.current)||void 0===r||r.cancel()}}}),[r,o,i]),r?{onCancel:function(){var n;null===(n=a.current)||void 0===n||n.cancel()}}:{}};var q=r(3930),G=r(90105);const K=function(n){(0,e.useEffect)((function(){null===n||void 0===n||n()}),[])};var z=r(22638),J=function(){return J=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},J.apply(this,arguments)},Q=function(n,t,r,e){return new(r||(r=Promise))((function(o,i){function a(n){try{c(e.next(n))}catch(t){i(t)}}function u(n){try{c(e.throw(n))}catch(t){i(t)}}function c(n){var t;n.done?o(n.value):(t=n.value,t instanceof r?t:new r((function(n){n(t)}))).then(a,u)}c((e=e.apply(n,t||[])).next())}))},U=function(n,t){var r,e,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,e&&(o=2&i[0]?e.return:i[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,i[1])).done)return o;switch(e=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,e=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(u){i=[6,u],e=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},V=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]])}return r},X=function(n,t){var r="function"===typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Y=function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(X(arguments[t]));return n},$=function(){function n(n,t,r,e){void 0===e&&(e={}),this.serviceRef=n,this.options=t,this.subscribe=r,this.initState=e,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=J(J(J({},this.state),{loading:!t.manual}),e)}return n.prototype.setState=function(n){void 0===n&&(n={}),this.state=J(J({},this.state),n),this.subscribe()},n.prototype.runPluginHandler=function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var e=this.pluginImpls.map((function(r){var e;return null===(e=r[n])||void 0===e?void 0:e.call.apply(e,Y([r],t))})).filter(Boolean);return Object.assign.apply(Object,Y([{}],e))},n.prototype.runAsync=function(){for(var n,t,r,e,o,i,a,u,c,l,f=[],s=0;s<arguments.length;s++)f[s]=arguments[s];return Q(this,void 0,void 0,(function(){var s,v,d,h,p,y,m,g,b,w,O;return U(this,(function(S){switch(S.label){case 0:if(this.count+=1,s=this.count,v=this.runPluginHandler("onBefore",f),d=v.stopNow,h=void 0!==d&&d,p=v.returnNow,y=void 0!==p&&p,m=V(v,["stopNow","returnNow"]),h)return[2,new Promise((function(){}))];if(this.setState(J({loading:!0,params:f},m)),y)return[2,Promise.resolve(m.data)];null===(t=(n=this.options).onBefore)||void 0===t||t.call(n,f),S.label=1;case 1:return S.trys.push([1,3,,4]),(g=this.runPluginHandler("onRequest",this.serviceRef.current,f).servicePromise)||(g=(O=this.serviceRef).current.apply(O,Y(f))),[4,g];case 2:return b=S.sent(),s!==this.count?[2,new Promise((function(){}))]:(this.setState({data:b,error:void 0,loading:!1}),null===(e=(r=this.options).onSuccess)||void 0===e||e.call(r,b,f),this.runPluginHandler("onSuccess",b,f),null===(i=(o=this.options).onFinally)||void 0===i||i.call(o,f,b,void 0),s===this.count&&this.runPluginHandler("onFinally",f,b,void 0),[2,b]);case 3:if(w=S.sent(),s!==this.count)return[2,new Promise((function(){}))];throw this.setState({error:w,loading:!1}),null===(u=(a=this.options).onError)||void 0===u||u.call(a,w,f),this.runPluginHandler("onError",w,f),null===(l=(c=this.options).onFinally)||void 0===l||l.call(c,f,void 0,w),s===this.count&&this.runPluginHandler("onFinally",f,void 0,w),w;case 4:return[2]}}))}))},n.prototype.run=function(){for(var n=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.runAsync.apply(this,Y(t)).catch((function(t){n.options.onError||console.error(t)}))},n.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},n.prototype.refresh=function(){this.run.apply(this,Y(this.state.params||[]))},n.prototype.refreshAsync=function(){return this.runAsync.apply(this,Y(this.state.params||[]))},n.prototype.mutate=function(n){var t;t="function"===typeof n?n(this.state.data):n,this.runPluginHandler("onMutate",t),this.setState({data:t})},n}();const _=$;var nn=function(){return nn=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},nn.apply(this,arguments)},tn=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]])}return r},rn=function(n,t){var r="function"===typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},en=function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(rn(arguments[t]));return n};const on=function(n,t,r){void 0===t&&(t={}),void 0===r&&(r=[]);var e=t.manual,o=void 0!==e&&e,i=tn(t,["manual"]),a=nn({manual:o},i),u=(0,q.Z)(n),c=(0,G.Z)(),s=(0,l.Z)((function(){var n=r.map((function(n){var t;return null===(t=null===n||void 0===n?void 0:n.onInit)||void 0===t?void 0:t.call(n,a)})).filter(Boolean);return new _(u,a,c,Object.assign.apply(Object,en([{}],n)))}),[]);return s.options=a,s.pluginImpls=r.map((function(n){return n(s,a)})),K((function(){if(!o){var n=s.state.params||t.defaultParams||[];s.run.apply(s,en(n))}})),(0,f.Z)((function(){s.cancel()})),{loading:s.state.loading,data:s.state.data,error:s.state.error,params:s.state.params||[],cancel:(0,z.Z)(s.cancel.bind(s)),refresh:(0,z.Z)(s.refresh.bind(s)),refreshAsync:(0,z.Z)(s.refreshAsync.bind(s)),run:(0,z.Z)(s.run.bind(s)),runAsync:(0,z.Z)(s.runAsync.bind(s)),mutate:(0,z.Z)(s.mutate.bind(s))}};var an=function(n,t){var r="function"===typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,i=r.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},un=function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(an(arguments[t]));return n};const cn=function(n,t,r){return on(n,t,un(r||[],[P,x,E,I,W,c,g,M]))}},77043:(n,t,r)=>{var e=r(21078),o=r(67206),i=r(5976),a=r(45652),u=r(29246),c=r(10928),l=i((function(n){var t=c(n);return u(t)&&(t=void 0),a(e(n,1,u,!0),o(t,2))}));n.exports=l}}]);