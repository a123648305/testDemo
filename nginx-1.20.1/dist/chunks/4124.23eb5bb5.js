"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[4124],{94124:(e,t,n)=>{n.d(t,{Z:()=>D});var a=n(94578),i=n(67294),l=n(87462),s=n(87219),r=n(45697),o=n.n(r),c=n(51474),u=n(23493),d=n.n(u),h=n(92360),p=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).isCompositionHandling=!1,t.inputRef=i.createRef(),t._handlingOnComposition=function(){t.isCompositionHandling=!0},t._handleOnComposition=function(e){t.isCompositionHandling=!1,t._handleOnChange(e.target.value)},t._handleOnChange=function(e){if(!t.isCompositionHandling){var n=t.props.onChange;n&&n(e)}},t}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this.props.className,t=void 0===e?"":e;return i.createElement(h.Input,(0,l.Z)({},this.props,{ref:this.inputRef,className:"yt_filter_lazy_input_wrapper "+t,onChange:this._handleOnChange,onCompositionStart:this._handlingOnComposition,onCompositionUpdate:this._handlingOnComposition,onCompositionEnd:this._handleOnComposition}))},t}(i.PureComponent);const f=p;p.propTypes={className:o().string};var m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleOnSeachIconClick=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.setState({isSearching:!0})},n._handleOnSearchCloseClick=function(e){var t=n.props.onSearchClose;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.setState({isSearching:!1},(function(){t&&t()}))},n.state={isSearching:!1},n}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.className,a=e.onSearchChange,l=e.draggable,s=(e.closeable,e.onFilterItemClose,e.defaultChecksNameChange),r=e.id,o=this.state.isSearching;return i.createElement("div",{className:"yt_header_fs_filter_label_wrapper "+n},i.createElement("div",{className:"label_view"},i.createElement("div",{className:"filter_normal"},o?i.createElement("div",{className:"search"},i.createElement("i",{className:"icon-cem_move my-handler  "+(l?"hover_item":"invisible_item")}),i.createElement(f,{className:"filter_search",onChange:a,size:"small",placeholder:"\u8bf7\u8f93\u5165"}),i.createElement("i",{className:"icon-cem_cancel",onClick:this._handleOnSearchCloseClick})):i.createElement("div",{className:"label "+(s?"":"show_up")},i.createElement("i",{className:"icon-cem_move my-handler "+(l?"hover_item":"invisible_item")}),i.createElement("span",{className:"up"},s&&i.createElement("i",{className:"icon-kuaijie",onClick:function(){return s(r)}})),i.createElement("span",{className:"hover_label"},t),i.createElement("i",{className:"icon-cem_small-search hover_item",onClick:this._handleOnSeachIconClick})))))},t}(i.PureComponent);const g=m;m.propTypes={label:o().string,className:o().string,onSearchChange:o().func,onSearchClose:o().func,draggable:o().bool};n(94184);function v(e,t){for(var n=new RegExp(t.toLocaleLowerCase()),a=[],i=0;i<e.length;i++)n.test(e[i].label.toLocaleLowerCase())&&a.push(e[i]);return a}function C(e,t){var n=e?e.slice():[];return t.forEach((function(e,t){var a=n.findIndex((function(t){return t.id===e}));if(a>-1){var i=n.splice(a,1)[0];n.splice(t,0,i)}})),n}var _=function(e,t,n,a){return"TOPIC"===e&&"WARNING_COMMENT_ASPECT"===t&&n&&n.length&&n.some((function(e){return e.value}))&&a.id===n.find((function(e){return e.value})).id||"PRODUCT_INFO"===e&&"WARNING_APP_COMMENT_ASPECT"===t&&n&&n.length&&n.some((function(e){return e.value}))&&a.id===n.find((function(e){return e.value})).id||"BRAND_SERIES"===e&&"WARNING_SELF_ASPECT"===t&&n&&n.length&&n.some((function(e){return e.value}))&&a.id===n.find((function(e){return e.value})).id},b=function(e){function t(t){var n;return(n=e.call(this,t)||this).checkMoreVisable=function(){var e=n.props.id,t=document.getElementById("checkbotx_group_"+e),a=document.getElementById("more_"+e),i=document.getElementById("cbf_"+e);t&&a&&i&&(a.style.display=t.clientHeight>30?"inline-block":"none",i.style.height=a.classList.value.includes("show_more")?"30px":"unset")},n.handleOnAllChange=function(e){var t,a=n.props,i=a.onChange,l=a.options,s=a.id,r=a.values,o=n.state.filterOptions;o?(t=e?r.slice().concat(o.map((function(e){return e.id}))):r.filter((function(e){return!o.find((function(t){return t.id===e}))})),n.filterValues=e?o.map((function(e){return e.id})):[]):t=e?l.map((function(e){return e.id})):[],i&&i({id:s,valid:!0,values:t})},n.handleOnChange=function(e,t){var a=n.props,i=a.values,l=a.onChange,s=a.id,r=i.slice();e?(r.push(t),n.filterValues&&n.filterValues.push(t)):(r=r.filter((function(e){return e!==t})),n.filterValues&&(n.filterValues=n.filterValues.filter((function(e){return e!==t})))),l&&l({id:s,values:r})},n.handleSearchChange=function(e){var t=n.props,a=t.options,i=t.values,l=v(a,e);n.filterValues=i.filter((function(e){return l.find((function(t){return t.id===e}))})),n.setState({filterOptions:l})},n.handleOnSearchClose=function(){n.filterValues=void 0,n.setState({filterOptions:void 0})},n.handleOnMoreShow=function(e){var t=n.state,a=t.filterOptions,i=t.mOptions;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var l=n.props.id,s=document.getElementById("more_"+l),r=document.getElementById("cbf_"+l);if(s&&r){var o=a||i;s.className.includes("show_more")?(s.classList.replace("show_more","show_less"),r.style.height="unset",o.length>20&&n.setState({count:100})):(s.classList.replace("show_less","show_more"),r.style.height="30px",o.length>20&&n.setState({count:20}))}},n.handleOnFilterItemClose=function(e){var t=n.props,a=t.onFilterItemClose,i=t.id;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a&&a(i)},n.filterValues=void 0,n.state={options:t.options,filterOptions:void 0,mOptions:void 0,count:20},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;window.addEventListener("resize",this.checkMoreVisable),setTimeout((function(){e.checkMoreVisable()}));var t=document.getElementById("cbf_"+this.props.id);t&&t.addEventListener("mouseover",d()((function(){e.checkMoreVisable()}),8e3))},n.componentWillUnmount=function(){var e=this;window.removeEventListener("resize",this.checkMoreVisable);var t=document.getElementById("cbf_"+this.props.id);t&&t.removeEventListener("mouseover",d()((function(){e.checkMoreVisable()}),8e3))},t.getDerivedStateFromProps=function(e,t){var n=t.options,a=t.mOptions,i=e.options,l=e.values;return JSON.stringify(i)===JSON.stringify(n)&&a?null:{options:i,mOptions:C(i,l)}},n.shouldComponentUpdate=function(e,t){var n=e.values,a=e.options,i=e.closeable,l=e.disable,s=this.props,r=s.values,o=s.options,c=s.closeable,u=s.disable;return JSON.stringify(t)!==JSON.stringify(this.state)||JSON.stringify(n)!==JSON.stringify(r)||JSON.stringify(o)!==JSON.stringify(a)||l!==u||i!==c},n.componentDidUpdate=function(e,t){var n=e.options,a=this.props,i=a.options,l=a.id,s=t.filterOptions,r=this.state.filterOptions;if(JSON.stringify(n)!==JSON.stringify(i)&&this.checkMoreVisable(),JSON.stringify(s)!==JSON.stringify(r))if(s&&!r)this.checkMoreVisable();else{var o=document.getElementById("cbf_"+l),c=document.getElementById("more_"+l);o&&c&&(o.style.height="unset",c.style.display="none")}},n.render=function(){var e=this,t=this.props,n=t.className,a=t.label,l=t.closeable,s=t.limit,r=t.values,o=t.id,c=t.disable,u=t.defaultChecksNameChange,d=this.state,p=d.filterOptions,f=d.mOptions,m=d.count,v=p||f,C=this.filterValues||r,_=C.length===v.length,b=!_&&C.length>0,N=s||[0,1e3],y=N[0],O=N[1];return i.createElement("div",{id:"cbf_"+o,className:"yt_message_checkbox_filter_wrapper "+n,style:{height:30}},i.createElement(g,{id:o,label:a,closeable:l,className:"filter_label",draggable:"draggable"===n,allCheckable:v.length<O,onSearchChange:this.handleSearchChange,onSearchClose:this.handleOnSearchClose,onFilterItemClose:this.handleOnFilterItemClose,defaultChecksNameChange:u}),i.createElement("div",{className:"filter_list"},i.createElement("div",{className:"filter_control"},i.createElement("span",{style:{display:"none"},id:"more_"+o,className:"show_more hover_item",onClick:this.handleOnMoreShow})),0===v.length?i.createElement("div",{className:"filter_empty"}):i.createElement("div",{className:"filter_content"},i.createElement(h.Checkbox,{className:"all",size:"small",checked:_,indeterminate:b,disabled:c||s,onChange:this.handleOnAllChange},"\u5168\u9009"),i.createElement("div",{id:"checkbotx_group_"+o,className:"check-group"},v.slice(0,m).map((function(t){return i.createElement(h.Checkbox,{allSelect:C,key:t.id,label:t.id,checked:C.includes(t.id),disabled:c||!r.includes(t.id)&&r.length===O||r.includes(t.id)&&r.length===y,onChange:function(n){return e.handleOnChange(n,t.id)}},t.label)})),v.length>100&&i.createElement("span",{className:"hide_hint"},"\u2014 \u8be5\u6570\u503c\u5c55\u793a\u4e0d\u4f1a\u8d85\u8fc7100\u6761,\u9700\u8981\u67e5\u770b\u66f4\u591a\u8bf7\u641c\u7d22")))))},t}(i.Component);const N=b;b.propTypes={id:o().string,className:o().string,label:o().string,disable:o().bool,values:o().arrayOf(o().oneOfType([o().string,o().number])),limit:o().arrayOf(o().number),options:o().arrayOf(o().shape({id:o().string,label:o().string})),onChange:o().func,closeable:o().bool,onFilterItemClose:o().func};var y=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleOnSeachIconClick=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.setState({isSearching:!0})},n._handleOnSearchCloseClick=function(e){var t=n.props.onSearchClose;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.setState({isSearching:!1},(function(){t&&t()}))},n.state={isSearching:!1},n}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.className,a=(e.onSearchChange,e.draggable),l=e.closeable,s=e.onFilterItemClose;this.state.isSearching;return i.createElement("div",{className:"yt_header_fs_filter_label_wrapper "+n},i.createElement("div",{className:"label_view"},i.createElement("div",{className:"filter_normal"},i.createElement("div",{className:"label"},i.createElement("i",{className:"icon-cem_move my-handler "+(a?"hover_item":"invisible_item")}),l?i.createElement("span",{className:"close hover_item",onClick:s},i.createElement("i",{className:"icon-cem_cancel"})):i.createElement("span",{className:"close hover_item"}),i.createElement("span",{className:"hover_label"},t)))))},t}(i.PureComponent);const O=y;y.propTypes={label:o().string,className:o().string,onSearchChange:o().func,onSearchClose:o().func,draggable:o().bool};const E=function(e){function t(t){var n;return(n=e.call(this,t)||this).firstInputRef=i.createRef(),n.secondInputRef=i.createRef(),n.initState=function(){var e=0,t="",a="",i=n.props.values,l=n.state.value;i.length?i[0]&&i[1]?(e=3,t=i[0],a=i[1]):i[0]&&!i[1]?(e=1,t=i[0]):!i[0]&&i[1]&&(e=2,a=i[1]):e=0,n.setState({value:l||e,startValue:t,endValue:a})},n.onFilterChange=function(e){var t=n.state,a=t.startValue,i=t.endValue;n.firstInputRef.current.refs.input.refs.input.style.borderColor="#e5e5e5",n.secondInputRef.current.refs.input.refs.input.style.borderColor="#e5e5e5",n.firstInputRef.current.refs.input.refs.input.value="",n.secondInputRef.current.refs.input.refs.input.value="",(0===Number(e)&&(a||i)||n.props.values[0]||n.props.values[1])&&n.props.onChange([]),n.setState({value:e,startValue:"",endValue:""})},n._handleFirstInput=function(e){var t=n.state.endValue,a=e?(""+e).length>7?(""+e).substring(0,7):e:"";n.setState({startValue:a},(function(){3===Number(n.state.value)&&t&&Number(e)>Number(t)?(n.firstInputRef.current.refs.input.refs.input.focus(),n.firstInputRef.current.refs.input.refs.input.style.borderColor="#ff4d4f"):n.props.onChange(n.handleValues())}))},n._handleSecondInput=function(e){var t=e?(""+e).length>7?(""+e).substring(0,7):e:"";n.setState({endValue:t},(function(){3===Number(n.state.value)?Number(e)<Number(n.state.startValue)?(n.secondInputRef.current.refs.input.refs.input.focus(),n.secondInputRef.current.refs.input.refs.input.style.borderColor="#ff4d4f"):(n.firstInputRef.current.refs.input.refs.input.style.borderColor="#e5e5e5",n.secondInputRef.current.refs.input.refs.input.style.borderColor="#e5e5e5",n.props.onChange(n.handleValues())):n.props.onChange(n.handleValues())}))},n.handleValues=function(){var e=n.state,t=e.value,a=e.startValue,i=e.endValue,l=[];switch(Number(t)){case 0:default:l=[];break;case 1:l=a?[a,null]:[];break;case 2:l=i?[null,i]:[];break;case 3:l=a||i?[a,i]:[]}return n.firstInputRef.current.refs.input.refs.input.style.borderColor="#e5e5e5",n.secondInputRef.current.refs.input.refs.input.style.borderColor="#e5e5e5",l},n.handleOnFilterItemClose=function(e){var t=n.props,a=t.onFilterItemClose,i=t.id;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a&&a(i)},n.state={value:0,startValue:"",endValue:""},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.initState()},n.componentDidUpdate=function(){this.initState()},n.render=function(){var e=this.state.value,t=this.props,n=t.className,a=t.label,l=t.closeable,s=(t.values,t.id);return i.createElement("div",{id:"cff_"+s,className:"yt_message_checkbox_filter_wrapper "+n,style:{height:30}},i.createElement(O,{id:s,label:a,closeable:l,className:"filter_label",draggable:"draggable"===n,onFilterItemClose:this.handleOnFilterItemClose}),i.createElement("div",{className:"length-filter"},i.createElement(h.Radio.Group,{value:this.state.value,onChange:this.onFilterChange},i.createElement(h.Radio,{value:"0"},"\u5168\u90e8"),i.createElement(h.Radio,{value:"1"},"\u5927\u4e8e"),i.createElement(h.Radio,{value:"2"},"\u5c0f\u4e8e"),i.createElement(h.Radio,{value:"3"},"\u4ecb\u4e8e")),i.createElement(h.InputNumber,{disabled:0===e,className:"limit-input first-input",size:"mini",style:{display:3===e||1===e?"inline-block":"none"},ref:this.firstInputRef,value:this.state.startValue,onChange:this._handleFirstInput}),i.createElement("span",{style:{display:3!==e?"none":"inline-block"}}," - "),i.createElement("span",{style:{display:3===e||2===e?"inline-block":"none"}},i.createElement(h.InputNumber,{className:"limit-input "+(2===e?"second-input":""),value:this.state.endValue,ref:this.secondInputRef,size:"mini",onChange:this._handleSecondInput}))))},t}(i.PureComponent);var S=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleOnSeachIconClick=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.setState({isSearching:!0})},n._handleOnSearchCloseClick=function(e){var t=n.props.onSearchClose;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.setState({isSearching:!1},(function(){t&&t()}))},n.state={isSearching:!1},n}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.className,a=e.onSearchChange,l=e.draggable,s=e.closeable,r=e.onFilterItemClose,o=e.defaultChecksNameChange,c=e.id,u=this.state.isSearching;return i.createElement("div",{className:"yt_rd_filter_label_wrapper "+n},i.createElement("div",{className:"label_view"},i.createElement("div",{className:"filter_normal"},u?i.createElement("div",{className:"search"},i.createElement("i",{className:"icon-cem_move my-handler  "+(l?"hover_item":"invisible_item")}),i.createElement(f,{className:"filter_search",onChange:a,size:"small",placeholder:"\u8bf7\u8f93\u5165"}),i.createElement("i",{className:"icon-cem_cancel",onClick:this._handleOnSearchCloseClick})):i.createElement("div",{className:"label "+(o?"":"show_up")},i.createElement("i",{className:"icon-cem_move my-handler "+(l?"hover_item":"invisible_item")}),i.createElement("span",{className:"up",onClick:s?r:void 0},o&&i.createElement("i",{className:"icon-kuaijie",onClick:function(){return o(c)}})),i.createElement("span",{className:"hover_label"},t),i.createElement("i",{className:"icon-cem_small-search hover_item",onClick:this._handleOnSeachIconClick})))))},t}(i.PureComponent);const k=S;S.propTypes={label:o().string,className:o().string,onSearchChange:o().func,onSearchClose:o().func,draggable:o().bool};var I=function(e){function t(t){var n;(n=e.call(this,t)||this).checkMoreVisable=function(){var e=n.props.id,t=document.getElementById("radio_group_"+e),a=document.getElementById("more_"+e),i=document.getElementById("rf_"+e);t&&a&&(a.style.display=t.clientHeight>36?"inline-block":"none",i.style.height=a.classList.value.includes("show_more")?"36px":"unset")},n.handleOnSearchChange=function(e){var t=n.props.options;n.setState({filterOptions:v(t,e)})},n.handleOnSearchClose=function(e){n.setState({filterOptions:void 0})},n.handleOnMoreShow=function(e){var t=n.state,a=t.filterOptions,i=t.mOptions;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var l=n.props.id,s=document.getElementById("more_"+l),r=document.getElementById("rf_"+l);if(s&&r){var o=a||i;s.className.includes("show_more")?(s.classList.replace("show_more","show_less"),r.style.height="unset",o.length>20&&n.setState({count:100})):(s.classList.replace("show_less","show_more"),r.style.height="30px",o.length>20&&n.setState({count:20}))}},n.handleOnFilterItemClose=function(){var e=n.props,t=e.onFilterItemClose,a=e.id;t&&t(a)},n.handleOnChange=function(e){var t=n.state.isSelectAll,a=n.props,i=a.onChange,l=a.values,s=a.id;"all"!==e?(t&&n.setState({isSelectAll:!1}),i&&i({id:s,values:[e],isSelectAll:"boolean"!==typeof t&&null})):(!t&&n.setState({isSelectAll:!0}),i&&i([{id:s,values:l,isSelectAll:!0}],!0))};var a=t.defaultConfig,i=a.defaultChecked.find((function(e){return e.id===a.defaultChecksName[0]}))||{};return n.state={defaultConfig:t.defaultConfig,options:t.options,filterOptions:void 0,mOptions:void 0,count:20,isSelectAll:i.isSelectAll},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("resize",this.checkMoreVisable),this.checkMoreVisable()},n.componentWillUnmount=function(){window.removeEventListener("resize",this.checkMoreVisable)},t.getDerivedStateFromProps=function(e,t){var n=t.options,a=t.mOptions,i=t.defaultConfig,l=e.options,s=e.values,r=e.defaultConfig;return JSON.stringify(l)===JSON.stringify(n)&&a?JSON.stringify(i)!==JSON.stringify(r)?{isSelectAll:(r.defaultChecked.find((function(e){return e.id===r.defaultChecksName[0]}))||{}).isSelectAll}:null:{options:l,mOptions:C(l,s)}},n.componentDidUpdate=function(e,t){var n=e.options,a=this.props,i=a.options,l=a.id,s=t.filterOptions,r=this.state.filterOptions;if(JSON.stringify(n)!==JSON.stringify(i)&&this.checkMoreVisable(),JSON.stringify(s)!==JSON.stringify(r))if(s&&!r)this.checkMoreVisable();else{var o=document.getElementById("cbf_"+l),c=document.getElementById("more_"+l);o&&c&&(o.style.height="unset",c.style.display="none")}},n.render=function(){var e=this,t=this.state,n=t.filterOptions,a=t.mOptions,l=t.count,s=t.isSelectAll,r=this.props,o=r.className,c=r.label,u=r.closeable,d=r.id,p=r.values,f=r.disable,m=r.defaultChecksNameChange,g=r.defaultConfig,v=p[0],C=n||a;return i.createElement("div",{id:"rf_"+d,className:"yt_radio_filter_wrapper "+o,style:{height:30}},i.createElement(k,{id:d,label:c,className:"filter_label",draggable:"draggable"===o,onSearchChange:this.handleOnSearchChange,onSearchClose:this.handleOnSearchClose,defaultValueChange:this.props.defaultValueChange,defaultChecksNameChange:m}),i.createElement("div",{className:"filter_list"},i.createElement("div",{className:"filter_control"},i.createElement("span",{style:{display:"none"},id:"more_"+d,className:"show_more hover_item",onClick:this.handleOnMoreShow}),u&&i.createElement("span",{className:"close hover_item",onClick:this.handleOnFilterItemClose},i.createElement("i",{className:"icon-cem_cancel"}))),0===C.length?i.createElement("div",{className:"filter_empty"}):i.createElement("div",{id:"radio_group_"+d,className:"filter_contents "+(g&&g.defaultChecksName&&g.defaultChecksName.length?"filter_content_all":"filter_content")+" "+(f?"is_disable":"")},g&&g.defaultChecksName&&g.defaultChecksName.length>0&&"boolean"===typeof s&&i.createElement(h.Radio,{className:"all",disabled:f,value:"all",checked:s,onChange:function(t){e.handleOnChange(t)}},"\u5168\u90e8"),C.slice(0,l).map((function(t){return i.createElement(h.Radio,{disabled:f,key:t.id,value:t.id,checked:v===t.id&&!s,onChange:function(t){e.handleOnChange(t)}},t.label)})),C.length>100&&i.createElement("span",{className:"hide_hint"},"\u2014 \u8be5\u6570\u503c\u5c55\u793a\u4e0d\u4f1a\u8d85\u8fc7100\u6761,\u9700\u8981\u67e5\u770b\u66f4\u591a\u8bf7\u641c\u7d22"))))},t}(i.Component);const w=I;I.propTypes={id:o().string,className:o().string,disable:o().bool,label:o().string,values:o().arrayOf(o().oneOf(o().string|o().number)),options:o().arrayOf(o().shape({id:o().string,label:o().string})),onChange:o().func,closeable:o().bool,onFilterItemClose:o().func};var F=function(e){function t(t){var n;(n=e.call(this,t)||this)._hidePannel=function(){n.state.show&&n.setState({show:!1,filterOptions:void 0}),n.inputRef.current.inputRef.current.refs.input.value=""},n._handleParentClick=function(e){n.state.show&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n._handleTriggerClick=function(){setTimeout((function(){n.setState({show:!n.state.show})}),0)},n._handleOnInputChange=function(e){var t=n.props.options,a=void 0===t?[]:t;n.setState({filterOptions:""!==e?a.filter((function(t){return t.label.includes(e)})):void 0})},n._renderFilterOptions=function(){var e=n.state,t=e.filterOptions,a=e.values;return 0===t.length?i.createElement("div",{className:"filter_empty"}):i.createElement(i.Fragment,null,t.map((function(e){return i.createElement("div",{key:e.value,className:"check_item"},i.createElement(h.Checkbox,{disabled:1===a.length&&a.includes(e.value),checked:a.includes(e.value),onChange:function(t){return n._handleOnChange(t,e.value)}},e.label))})))},n._handleOnAllChange=function(e){var t=n.props.options,a=void 0===t?[]:t;n.setState({values:e?a.map((function(e){return e.value})):[a[0].value]})},n._handleOnChange=function(e,t){var a=n.state.values,i=void 0;e?(i=a.slice()).push(t):i=a.filter((function(e){return e!==t})),n.setState({values:i})},n._handleOnRangeClick=function(e,t){var a=n.state.values.slice(),i=a.splice(e,1)[0];"top"===t?a.splice(0,0,i):"up"===t?a.splice(e-1,0,i):"down"===t&&a.splice(e+1,0,i),n.setState({values:a})},n._renderOptions=function(){var e=n.props,t=e.options,a=void 0===t?[]:t,l=e.sortable,s=n.state.values,r=s.length===a.length,o=function(e,t,a,s){return i.createElement("div",{key:e.value,className:"check_item"},i.createElement(h.Checkbox,{disabled:s,checked:t,onChange:function(t){return n._handleOnChange(t,e.value)}},e.label),t&&l&&u.length>1&&i.createElement("div",{className:"range_buttons"},0!==a&&i.createElement("i",{className:"icon-cem_roof-placement",onClick:function(){return n._handleOnRangeClick(a,"top")}}),0!==a&&i.createElement("i",{className:"icon-cem_upper",onClick:function(){return n._handleOnRangeClick(a,"up")}}),a!==u.length-1&&i.createElement("i",{className:"icon-cem_lower",onClick:function(){return n._handleOnRangeClick(a,"down")}})))},c=a.reduce((function(e,t){var n=s.indexOf(t.value);return n>-1?e.selOpts[n]=t:e.unSelOpts.push(t),e}),{selOpts:[],unSelOpts:[]}),u=c.selOpts,d=c.unSelOpts;return 0===a.length?i.createElement("div",{className:"filter_empty"}):i.createElement(i.Fragment,null,i.createElement(h.Checkbox,{style:{margin:"12px 0"},checked:r,indeterminate:!r&&s.length>0,onChange:n._handleOnAllChange},"\u5168\u9009"),u.length>0&&i.createElement("div",{className:"divider"}),u.map((function(e,t){return o(e,!0,t,1===u.length)})),d.length>0&&i.createElement("div",{className:"divider"}),d.map((function(e){return o(e,!1)})))},n._handleOnInputClearClick=function(e){n.inputRef.current.inputRef.current.refs.input.value="",n._handleOnInputChange("")},n._handleOnConfirm=function(){var e=n.props.onChange,t=n.state.values;n._hidePannel(),e&&e(t)},n._handleOnCancel=function(e){var t=n.props.onCancel;n._hidePannel(),t&&t()};var a=t.values;return n.state={values:a,preValues:a,show:!1},n.inputRef=i.createRef(),n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._hidePannel)},n.componentWillUnmount=function(){window.removeEventListener("click",this._hidePannel)},n.shouldComponentUpdate=function(e,t){var n=this.props.values,a=e.values;return JSON.stringify(n)!==JSON.stringify(a)||JSON.stringify(t)!==JSON.stringify(this.state)},t.getDerivedStateFromProps=function(e,t){var n=t.preValues,a=e.values;return JSON.stringify(n)!==JSON.stringify(a)?{preValues:a,values:a}:null},n.render=function(){var e=this.props.className,t=this.state,n=t.show,a=t.filterOptions;return i.createElement("div",{className:"yt_header_filter_section_setting_button_wrapper "+e,onClick:this._handleParentClick},i.createElement("span",{className:"button_trigger",onClick:this._handleTriggerClick},i.createElement("i",{className:"icon-cem_top-setting"})),i.createElement("div",{className:"pannel",style:{display:n?"block":"none"}},i.createElement("div",{className:"pannel_content"},i.createElement(f,{ref:this.inputRef,placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57",size:"small",icon:a?"close":"search",onIconClick:a?this._handleOnInputClearClick:null,onChange:this._handleOnInputChange}),a?this._renderFilterOptions():this._renderOptions()),i.createElement("div",{className:"pannel_buttons"},i.createElement(h.Button,{size:"small",onClick:this._handleOnCancel},"\u53d6\u6d88"),i.createElement(h.Button,{size:"small",type:"primary",onClick:this._handleOnConfirm},"\u786e\u5b9a"))))},t}(i.Component);const V=F;F.propTypes={className:o().string,sortable:o().bool,values:o().arrayOf(o().string),options:o().arrayOf(o().shape({value:o().string,label:o().string})),onChange:o().func,onCancel:o().func};var P=function(e){function t(t){var n;return(n=e.call(this,t)||this)._hideSetting=function(){n.setState({settingBtnShow:!1})},n._handleOnSettingClick=function(e){setTimeout((function(){n.setState({settingBtnShow:!n.state.settingBtnShow})}),0)},n._handleParentClick=function(e){n.state.show&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n._handlOnSettingCancel=function(){n.setState({settingBtnShow:!1})},n.state={settingBtnShow:!1},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._hideSetting)},n.componentWillUnmount=function(){window.removeEventListener("click",this._hideSetting)},n.render=function(){var e=this.props,t=e.className,n=e.label,a=e.activeFilters,l=void 0===a?[]:a,s=e.filterOptions,r=void 0===s?[]:s,o=e.onActiveFilterChange,c=e.configurable,u=e.sortable,d=this.state.settingBtnShow;return i.createElement("div",{className:"yt_filter_section_label_wrapper "+t,onClick:this._handleParentClick},i.createElement("div",null,i.createElement("span",{className:"label_text"},n),i.createElement("span",{onClick:this._handleOnSettingClick,className:"setting_button "+(c?"hover_item_setting":"invisable_item")+" "+(d?"setting_button_visible":"")},i.createElement(V,{sortable:u,values:l,options:r,onChange:o,onCancel:this._handlOnSettingCancel}))))},t}(i.PureComponent);const R=P;P.propTypes={label:o().string,className:o().string,configurable:o().bool,sortable:o().bool,activeFilters:o().arrayOf(o().string),filterOptions:o().arrayOf(o().shape({value:o().string,label:o().string})),onActiveFilterChange:o().func};n(89858);var A=n(51024),J=(n(75314),n(11187)),T=n(51505),M=function(){},x=function(e,t){var n=e.onChange,a=void 0===n?M:n,l=e.maxTextLength,s=e.maxTag,r=void 0===s?5:s,o=e.label,c=(0,i.useState)((function(){return e.value?"string"===typeof e.value?[e.value]:e.value:[]})),u=c[0],h=c[1],p=(0,i.useState)(""),f=p[0],m=p[1];(0,T.Z)((function(){a(u)}),[u]),(0,i.useImperativeHandle)(t,(function(){return{changeVal:function(){return u}}}));var g=(0,i.useCallback)(d()((function(e){m(e)}),200),[]);return i.createElement("div",{className:"input_tag_wrap"},i.createElement("span",{className:"input_label"},o),i.createElement("div",{className:"input_wrap"},i.createElement(A.default,{type:"text",value:f,className:"input",placeholder:"\u591a\u4e2a"+o+"\u8bf7\u6309\u56de\u8f66\u5206\u9694",onChange:function(e){return g(e.target.value)},onPressEnter:function(e){var t=e.target.value;if(t){if(r&&u.length>=r)return void J.default.error("\u5df2\u8fbe\u5230\u5141\u8bb8\u7684\u6700\u5927\u6570\u91cf\u9650\u5236\uff01");if(u.find((function(e){return e===t})))return void J.default.error("\u5df2\u7ecf\u5b58\u5728\u76f8\u540c\u7684\u6570\u636e\uff01");h([].concat(u,[t])),m("")}else J.default.error("\u8bf7\u8f93\u5165\u6570\u636e")},onKeyDown:function(e){if(8===e.keyCode&&!f){var t=u.filter((function(e,t,n){return t!==n.length-1}));h(t)}},allowClear:!0,maxLength:l}),u.map((function(e){return i.createElement("span",{key:e,className:"tag_item"},i.createElement("span",{title:e},e),i.createElement("i",{onClick:function(){return t=e,void h(u.filter((function(e){return e!==t})));var t}},"\xd7"))}))))};const B=(0,i.forwardRef)(x);var L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).handleOnFilterValueChange=function(e,n){var a=t.props,i=a.onFilterValueChange,l=a.values;if(n)i&&i(e);else{var r=(0,s.ZP)(l,(function(t){var n=t.findIndex((function(t){return t.id===e.id}));n>-1?e.values.length>0?(t[n].values=e.values,t[n].isSelectAll=e.isSelectAll):t.splice(n,1):e.values.length>0&&t.push(e)}));i&&i(r)}},t.handleOnFilterItemClose=function(e){var n=t.props,a=n.onActiveFilterChange,i=n.onFilterValueChange,l=n.activeFilters,s=n.values;s.some((function(t){return t.id===e}))&&i&&i(s.filter((function(t){return t.id!==e}))),a&&a(l.filter((function(t){return t!==e})))},t.handleOnActiveFilterChange=function(e){var n=t.props.onActiveFilterChange;n&&n(e)},t}(0,a.Z)(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){var t=e.values,n=e.data,a=e.activeFilters,i=this.props,l=i.values,s=i.data,r=i.activeFilters;return JSON.stringify(t)!==JSON.stringify(l)||JSON.stringify(n)!==JSON.stringify(s)||JSON.stringify(a)!==JSON.stringify(r)},n.componentDidMount=function(){var e=this,t=this.props,n=t.id,a=t.draggable,i=document.getElementById("section_"+n);i&&a&&(this.sortableJs=c.default.create(i,{group:n,animation:150,filter:".undraggable",draggable:".draggable",onEnd:function(t){var n=e.props,a=n.onActiveFilterChange,i=n.activeFilters,l=t.newIndex,s=t.oldIndex;if(l!==s){var r=i.slice(),o=r.splice(s,1)[0];r.splice(l,0,o),a&&a(r)}}}))},n.render=function(){var e=this,t=this.props,n=t.label,a=t.data,s=t.values,r=t.activeFilters,o=t.id,c=t.draggable,u=t.configurable,d=t.defaultChecksNameChange,h=t.defaultConfig,p=t.curFast,f=r.filter((function(e){var t=a.find((function(t){var n=t.id;return e===n}));return!!t&&t.options instanceof Array})),m=a.reduce((function(e,t){return t.options instanceof Array&&e.push({value:t.id,label:t.label}),e}),[]),g=f.reduce((function(e,t){var n=a.find((function(e){var n=e.id;return t===n}));return n&&n.options instanceof Array&&e.push(n),e}),[]),v=h.defaultChecks?h.defaultChecks.map((function(e){return e.id})):[];return i.createElement("div",{className:"yt_message_filter_section_wrapper"},i.createElement(R,{label:n,className:"section_label",filterOptions:m,configurable:u,sortable:c,activeFilters:f,onActiveFilterChange:this.handleOnActiveFilterChange}),i.createElement("div",{className:"section_comps",id:"section_"+o},g.map((function(t){var n=s.find((function(e){return e.id===t.id})),a=void 0===t.closeable||t.closeable;switch(t.filterType){case"radio":return i.createElement(w,(0,l.Z)({className:c?"draggable":"undraggable"},t,{key:t.id,closeable:u&&a&&g.length>1,values:n?n.values:[],onChange:e.handleOnFilterValueChange,onFilterItemClose:e.handleOnFilterItemClose,defaultChecksNameChange:h.defaultChecksName[0]!==t.id&&v.includes(t.id)?d:void 0,defaultConfig:h}));case"radioLen":return i.createElement(E,(0,l.Z)({},t,{className:c?"draggable":"undraggable",closeable:u&&a&&g.length>1&&(h.defaultChecksName[0]!==t.id&&v.includes(t.id)?d:void 0),values:n?n.values:[],key:t.id,onChange:function(n){return e.handleOnFilterValueChange({id:t.id,values:n})},onFilterItemClose:e.handleOnFilterItemClose}));case"inputTag":return i.createElement(B,(0,l.Z)({},t,{key:t.id,label:t.label,value:n?n.values:[],onChange:function(n){return e.handleOnFilterValueChange({id:t.id,values:n})}}));default:return i.createElement(N,(0,l.Z)({className:c?"draggable":"undraggable",disable:_(o,h.pageType,s,t)||h.defaultChecksName[0]===t.id&&(null==p?void 0:p.isSelectAll)},t,{key:t.id,closeable:u&&a&&g.length>1,values:n?n.values:[],onChange:e.handleOnFilterValueChange,onFilterItemClose:e.handleOnFilterItemClose,defaultChecksNameChange:h.defaultChecksName[0]!==t.id&&v.includes(t.id)?d:void 0}))}}))))},t}(i.Component);const Z=L;L.propTypes={label:o().string,id:o().string,onFilterValueChange:o().func,onActiveFilterChange:o().func,draggable:o().bool,configurable:o().bool,values:o().arrayOf(o().shape({id:o().string,values:o().arrayOf(o().string)})),activeFilters:o().arrayOf(o().string),data:o().arrayOf(o().shape({id:o().string,label:o().string,filterType:o().string,allCheckable:o().bool,limit:o().arrayOf(o().number),closeable:o().bool,options:o().arrayOf(o().shape({id:o().string,label:o().string}))}))};const D=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.screeningList,n=(e.screeningValuesChange,e.screeningValues),a=e.defaultConfig,l=e.defaultValueChange,r=e.onFilterValueChange,o=e.option,c=void 0===o?{}:o,u=e.className,d=e.onSearch,h=e.pageType,p=a&&a.defaultChecked?a.defaultChecked.find((function(e){return e.id===a.defaultChecksName[0]})):null;return i.createElement("div",{className:(u||"")+" screening_view"},i.createElement("div",{className:"screening"},JSON.parse(JSON.stringify(t)).map((function(e){return i.createElement(Z,{key:e.id,onActiveFilterChange:function(t){l({type:h,value:{ownerChecks:(0,s.ZP)(a.ownerChecks,(function(n){n.map((function(n){return n.id===e.id&&(n.values=t),n}))}))}})},onFilterValueChange:function(t){return r(e.id,t)},defaultChecksNameChange:function(e){l({type:h,value:{defaultChecksName:[e]}}).then((function(){d()}))},label:e.label,id:e.id,data:e.data,values:n.some((function(t){return e.id===t.id}))?n.find((function(t){return e.id===t.id})).values:[],activeFilters:a.ownerChecks.find((function(t){return e.id===t.id}))?a.ownerChecks.find((function(t){return e.id===t.id})).values:[],configurable:void 0===c.configurable||c.configurable,draggable:void 0===c.draggable||c.draggable,screeningList:t,defaultConfig:a,curFast:p})}))))},t}(i.PureComponent)}}]);