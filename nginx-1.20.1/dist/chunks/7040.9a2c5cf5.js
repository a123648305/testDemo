"use strict";(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[7040],{56172:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var a=n(63366),i=n(87462),r=n(94578),o=n(67294),l=n(55609),s=n(26198),c=n(97326),u=n(45697),p=n.n(u),d=n(92360),f=n(43036),m=n(18446),v=n.n(m),h=n(87219),g=function(e){function t(t){var n;(n=e.call(this,t)||this)._setPadShowFalse=function(){n.state.show&&n.setState({show:!1})},n._handleParentClick=function(e){n.state.show&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n._handleTriggerOnClick=function(){var e=n.state.show;setTimeout((function(){n.setState({show:!e})}),0)},n.valueChange=function(e){var t=n.state.options,a=function t(n){return n.filter((function(n){return!!(n.id===e||n.values&&t(n.values).length>0)&&(n.values=n.values&&t(n.values).length?t(n.values):void 0,!0)}))}(JSON.parse(JSON.stringify(t)));n.setState({value:function e(t){return t.map((function(t){return Object.assign({id:t.id},t.values?{value:e(t.values)}:{})}))[0]}(a)})},n.setOpenItem=function(e,t){var a=n.state.options;!function e(i,r){i.some((function(i){return i.id===r?(i.open=!t,n.setState({options:JSON.parse(JSON.stringify(a))}),!0):(i.values&&e(i.values,r),!1)}))}(a,e.id)},n.getValue=function(e){return e.value?n.getValue(e.value):e.id},n.getIsFatherSel=function(e,t){return e.id===t||!!e.value&&n.getIsFatherSel(e.value,t)},n.getKeywordFilterList=function(){var e=n.state,t=e.keyword,a=e.options;return function e(n){return n.filter((function(n){return n.values&&0===e(n.values).length&&(n.values=void 0),n.values&&(n.values=e(n.values)),-1!==n.title.trim().toLocaleLowerCase().indexOf(t.trim().toLocaleLowerCase())||!!n.values&&e(n.values).length>0}))}(JSON.parse(JSON.stringify(a)))},n.renderOption=function(e,t){var a=n.props,i=a.objName,r=a.flavor,l=a.onFlavorChange,s=n.state,c=s.value,u=s.keyword,p=n.getValue(c);return e.map((function(e){var a=n.getIsFatherSel(c,e.id);return o.createElement("div",{key:e.id},o.createElement("div",{className:"panel-item "+(e.disabled?"disabled":""),style:{paddingLeft:18+14*t+"px"}},o.createElement("div",{className:"panel_wrap"},e.values?o.createElement("i",{onClick:function(){return n.setOpenItem(e,e.open)},className:"icon-cem_show-more "+(e.open||u.length>0?"":"rotate")}):o.createElement("i",{style:{width:"14px",display:"inline-block"}}),o.createElement("span",null,o.createElement(d.Radio,{className:a?"fatherSel":"",style:{maxWidth:224-14*t+"px"},checked:p===e.id,onChange:function(){n.valueChange(e.id)},value:e.id},o.createElement("span",{title:e.title},e.title)))),void 0!==r&&o.createElement("i",{className:r===e.value?"icon-cem_star":"icon-cem_star-filling star_hide",onClick:function(){var t;r!==e.value&&l(i?((t={})[i]=e.value,t):e.value)}})),e.values&&(e.open||u.length>0)&&n.renderOption(e.values,t+1))}))},n.getTitle=function(){var e=function e(t,n){return t.some((function(e){return e.id===n}))?t.filter((function(e){return e.id===n}))[0].title:t.map((function(e){return e.values})).filter((function(e){return e})).length?e(t.map((function(e){return e.values})).flat(1),n):""},t=n.state.options,a=(0,c.Z)(n).value,i=function n(a){return e(t,a.id)+"/"+(a.value?n(a.value):"")};return i(a).substring(0,i(a).length-1)};return n.value=t.defaultValue,n.state={show:!1,firstLiHover:!1,options:function e(a){return a.map((function(a){return(0,h.ZP)(a,(function(a){n.getIsFatherSel(t.defaultValue,a.id)&&(a.open=!0),a.values&&(a.values=e(a.values))}))}))}(t.options),value:t.defaultValue,keyword:""},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},n.render=function(){var e=this,t=this.state,n=t.show,a=t.options,i=t.value,r=t.keyword,l=this.props,s=l.preTitle,c=l.showTitle,u=void 0===c||c,p=l.overlay,m=l.objName,h=r?this.getKeywordFilterList():a;return o.createElement("div",{className:"single-cascader-button-wrapper",onClick:this._handleParentClick},o.createElement("div",{className:"button_content"},o.createElement("span",{onClick:this._handleTriggerOnClick},o.createElement("span",{className:"button-trigger "+(n?"sel":"")},u&&o.createElement(o.Fragment,null,s&&o.createElement("span",{className:"pre-title"},s,"\uff1a"),o.createElement("span",{className:"button-title"},this.getTitle())),o.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:n?"rotate(-180deg)":""}})),p&&o.createElement("span",{style:{marginLeft:4}},o.createElement(f.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:p},o.createElement("i",{className:"icon-cem_file1"})))),o.createElement("div",{className:"button-panel "+(n?"active":""),style:{minWidth:280,zIndex:99}},o.createElement("div",{className:"keyword_wrap"},o.createElement(d.Input,{value:r,placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd",className:"search",size:"small",icon:r?"close":"search",onChange:function(t){return e.setState({keyword:t})},onIconClick:function(){return e.setState({keyword:""})}})),o.createElement("div",{className:"button_wrap"},h.length?this.renderOption(h,0):o.createElement("div",{className:"noData"},"\u6ca1\u6709\u76f8\u5173\u9009\u9879")),o.createElement("div",{className:"bottom_wrap"},o.createElement(d.Button,{type:"primary",onClick:function(){var t;e.setState({show:!1}),!v()(e.state.value,e.value)&&e.props.onChange(((t={})[m]=i,t)),e.value=i}},"\u786e\u5b9a"),o.createElement(d.Button,{onClick:function(){return e.setState({show:!1,value:e.value})},style:{marginRight:"8px"}},"\u53d6\u6d88")))))},t}(o.PureComponent);g.propTypes={onChange:p().func.isRequired,options:p().array.isRequired,objName:p().any,preTitle:p().string,sufTitle:p().string,showTitle:p().bool,overlay:p().string,flavor:p().string,onFlavorChange:p().func};const y=g;const T=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.onChange,n=e.defaultValue,a=e.options,i=e.objName;return o.createElement(y,{preTitle:"\u5206\u6790\u6807\u7b7e",onChange:t,defaultValue:n,options:a,objName:i})},t}(o.Component);var E=n(50361),C=n.n(E),O=n(8201),_=n(50976),N=n(83680),S=n(24062),b=n(98191),w=n(39432),I=n(94644),R=n(65556),k=n(70715),F=n(90126);function V(e,t,n,a){var i=n&&n.length>0&&n[0].values[0].values.map((function(e){return e.split("_")[1]})),r=[];try{if(e&&e instanceof Array){r=e.sort((function(e,t){return!!(i&&t.name&&e.name)&&i.indexOf(e.name)-i.indexOf(t.name)}));var o=[];try{o=JSON.parse((0,R.iM)(r))[0].dateList.map((function(e){return[e.date]}))}catch(u){}var l=JSON.parse((0,R.iM)(r)).reduce((function(e,t){return t.dateList&&t.dateList.forEach((function(n){return e.some((function(e){return e[0]===n.date}))&&e.find((function(e){return e[0]===n.date})).push("POSITIVE"===a?0===t.total?0:n.positive/t.total:"NEGATIVE"===a?0===t.total?0:n.negative/t.total:0===t.total?0:n.count/t.total)})),e}),[].concat(o)).filter((function(e){return e.length>1})),s=[];try{s=r&&r.filter((function(e){return!e.total})).map((function(e){return e.name}))}catch(u){}var c=["\u65e5\u671f"].concat(s);return{length:s&&s.length,datasets:[{dimensions:c,source:l}],type:"proportion"}}}catch(u){}}function j(e,t,n,a){var i=n&&n.length>0&&n[0].values[0].values.map((function(e){return e.split("_")[1]})),r=[];try{if(e&&e instanceof Array){r=e.sort((function(e,t){return!!(i&&t.name&&e.name)&&i.indexOf(e.name)-i.indexOf(t.name)}));var o=[],l=[];try{o=r&&r.map((function(e){return e.name})),l=r&&r[0]&&r[0].dateList.map((function(e){return[e.date]}))}catch(u){}var s=["\u65e5\u671f"].concat(o),c=r&&JSON.parse((0,R.WZ)(r)).reduce((function(e,t){return t.dateList.forEach((function(t){return e.some((function(e){return e[0]===t.date}))&&e.find((function(e){return e[0]===t.date})).push("POSITIVE"===a?0===t.count?0:t.positive/t.count:0===t.count?0:t.negative/t.count)})),e}),[].concat(l)).filter((function(e){return e.length>1}));return{length:r.length,datasets:[{dimensions:s,source:c}],type:"proportion"}}}catch(u){}}function P(e,t,n,a){var i=n&&n.length>0&&n[0].values[0].values.map((function(e){return e.split("_")[1]})),r=[];try{if(e&&e instanceof Array){r=e.sort((function(e,t){return!!(i&&t.name&&e.name)&&i.indexOf(e.name)-i.indexOf(t.name)}));var o=[],l=[];try{o=r&&r.map((function(e){return e.name})),l=r&&r[0]&&r[0].dateList.map((function(e){return[e.date]}))}catch(u){}var s=["\u65e5\u671f"].concat(o),c=(0,R.WZ)(r)&&JSON.parse((0,R.WZ)(r)).reduce((function(e,t){return t.dateList.forEach((function(t){return e.some((function(e){return e[0]===t.date}))&&e.find((function(e){return e[0]===t.date})).push("POSITIVE"===a?t.positive:"NEGATIVE"===a?t.negative:t.count)})),e}),[].concat(l)).filter((function(e){return e.length>1}));return{length:r.length,datasets:[{dimensions:s,source:c}],type:"vol"}}}catch(u){}}var L=[{title:"\u8d1f\u9762\u58f0\u91cf",value:"NEGATIVE"},{title:"\u6b63\u9762\u58f0\u91cf",value:"POSITIVE"},{title:"\u603b\u58f0\u91cf",value:"TOTAL"}],D=[{title:"\u8d1f\u9762\u76f8\u5bf9\u5360\u6bd4",value:"NEGATIVE"},{title:"\u6b63\u9762\u76f8\u5bf9\u5360\u6bd4",value:"POSITIVE"},{title:"\u603b\u76f8\u5bf9\u5360\u6bd4",value:"TOTAL"}],A=[{title:"\u5dee\u8bc4\u7387",value:"NEGATIVE"},{title:"\u597d\u8bc4\u7387",value:"POSITIVE"}],Z=function(e){var t=e.analysisModel,n=e.title,a=e.options,i=e.loading,r=e.data,l=e.dateRange,s=e.timeType,c=e.fTimeType,u=e.volType,p=e.fVolType,d=e.onFilterChange,f=e.onFlavorChange,m=e.onClick,v=o.useState(void 0),h=v[0],g=v[1];return o.useEffect((function(){if(h)if((0,O.P)(r)){var e=function(e,t,n,a,i){var r="\u8d1f\u9762\u76f8\u5bf9\u5360\u6bd4\u8d70\u52bf"===t||"\u6b63\u9762\u76f8\u5bf9\u5360\u6bd4\u8d70\u52bf"===t||"\u603b\u76f8\u5bf9\u5360\u6bd4\u8d70\u52bf"===t?V(e,0,a,i):"\u5dee\u8bc4\u7387\u8d70\u52bf"===t||"\u597d\u8bc4\u7387\u8d70\u52bf"===t?j(e,0,a,i):P(e,0,a,i),o=r.datasets,l=r.length,s=r.type,c=o&&o[0].dimensions.slice(1),u=k.Fq.slice();c.forEach((function(e,t){var n=F.fv[e.toLocaleLowerCase()];n&&u.splice(t,0,n["TOTAL"===i?1:"NEGATIVE"===i?0:2])}));var p={title:{text:t},color:u,grid:{top:80,left:48,right:"4%",bottom:40,containLabel:!0},dataset:JSON.parse(JSON.stringify(o)),legend:{top:40,left:20,itemWidth:14,itemHeight:12,type:"scroll",pageIconSize:12,data:c,icon:k.W4.lineRing},dataZoom:[{show:"slider",bottom:15,xAxisIndex:0,height:16,handleSize:"100%",showDetail:!1}],tooltip:{trigger:"item",formatter:function(e){var a=e.name,i=e.marker,r=e.seriesName,o=e.seriesIndex,l=e.data[o+1];return'<span class="yt_echart_tooltip_title">'+(t.includes("\u8d70\u52bf")?t.replace("\u8d70\u52bf",""):t)+'<span style="color: #8C8C8C;font-weight: 500;">\uff08'+(0,w.yV)(n,a)+"\uff09</span></span><br />"+i+" "+r+"\uff1a"+("proportion"===s?(100*l).toFixed(2)+"%":w.ZP.getApproximateNum(l))}},xAxis:{type:"category",boundaryGap:!1,axisLabel:{formatter:function(e){return(0,w.yV)(n,e)}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return"proportion"===s?(100*e).toFixed(2)+"%":(0,w.uf)(e)}}},series:Array.from({length:l}).map((function(e,t){return{type:"line"}}))};return p}(C()(r),n,Object.values(s)[0],t,Object.values(u)[0]);h.clear(),h.setOption(e)}else g(void 0)}),[r,h]),o.createElement(O.Z,{data:r,className:"yt_trend_chart_wrapper",loading:i,renderTitle:o.createElement(b.Z,{title:n,data:r,onMoreClick:function(e){return function(e,t,n,a,i,r,o){if("image"===t)(0,I._v)(e,a);else if("data"===t){var l=("\u8d1f\u9762\u76f8\u5bf9\u5360\u6bd4\u8d70\u52bf"===a||"\u6b63\u9762\u76f8\u5bf9\u5360\u6bd4\u8d70\u52bf"===a||"\u603b\u76f8\u5bf9\u5360\u6bd4\u8d70\u52bf"===a?V(JSON.parse(JSON.stringify(n)),0,r,o):"\u5dee\u8bc4\u7387\u8d70\u52bf"===a||"\u597d\u8bc4\u7387\u8d70\u52bf"===a?j(JSON.parse(JSON.stringify(n)),0,r,o):P(JSON.parse(JSON.stringify(n)),0,r,o)).datasets;if(l){var s=[l[0].dimensions].concat(l[0].source);(0,I.aT)([s],a)}}}(h,e,r,n,Object.values(s)[0],t,Object.values(u)[0])}},o.createElement(S.Z,{options:a,objName:Object.keys(u)[0],activeObj:Object.values(u)[0],flavor:p,onFlavorChange:f,onChange:d}),l&&o.createElement(N.Z,{dateRange:l,objName:Object.keys(s)[0],defaultValue:Object.values(s)[0],collectValue:c,updateCollectValue:function(e){var t;return f(((t={})[Object.keys(s)[0]]=e,t))},onChange:function(e){var t;return d(((t={})[Object.keys(s)[0]]=e,t))}}))},o.createElement(_.Z,{theme:"yunting_multi_color",className:"yt_echarts_style",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return g(e)},onEvents:{click:m}}))};const x=Z;Z.propTypes={title:p().string,loading:p().bool,data:p().oneOfType([p().string,p().object]),dateRange:p().number,timeType:p().object,fTimeType:p().string,formulaType:p().object,fFormulaType:p().string,onFilterChange:p().func,onFlavorChange:p().func,onClick:p().func};const M=function(e){var t=e.onFilterReady,n=e.onFilterChange,a=e.label,i=e.filterData,r=e.loading,l=e.volumeData,c=e.volTimeType,u=e.fVolTimeType,p=e.volType,d=e.fVolType,f=e.ratioLoading,m=e.ratioData,v=e.ratioTimeType,h=e.fRatioTimeType,g=e.ratioType,y=e.fRatioType,E=e.cmtLoading,C=e.commentData,O=e.cmtTimeType,_=e.fCmtTimeType,N=e.cmtType,S=e.fCmtType,b=e.analysisModel,w=e.dateRange,I=e.onFlavorChange,R=e.onVolumeClick;return o.createElement("div",{className:"yt_social_trend_wrapper"},o.createElement(s.Z,{pageType:location&&location.pathname.includes("brand")?"SOCIAL_TAG_BRAND_LINE":"SOCIAL_TAG_SERIES_LINE",onReady:t,onChange:n}),o.createElement("div",{className:"content",id:"social_tag_trend_content"},o.createElement("div",{className:"volume_charts"},i&&a&&o.createElement(T,{defaultValue:a,options:i,onChange:n,objName:"label"}),o.createElement(x,{analysisModel:b,title:""+(L.some((function(e){return e.value===p}))?L.find((function(e){return e.value===p})).title:"\u8d1f\u9762\u58f0\u91cf"),loading:r,data:l,options:L,dateRange:w,timeType:{volTimeType:c},fTimeType:u,volType:{volType:p},fVolType:d,onFlavorChange:I,onFilterChange:n,onClick:function(e,t,n){return R(e,t,"vol")}}),o.createElement(x,{analysisModel:b,title:(D.some((function(e){return e.value===g}))?D.find((function(e){return e.value===g})).title:"\u8d1f\u9762\u76f8\u5bf9\u5360\u6bd4")+"\u8d70\u52bf",loading:f,data:m,options:D,dateRange:w,timeType:{ratioTimeType:v},fTimeType:h,volType:{ratioType:g},fVolType:y,onFlavorChange:I,onFilterChange:n,onClick:function(e,t,n){return R(e,t,"ratio")}}),o.createElement(x,{analysisModel:b,title:(A.some((function(e){return e.value===N}))?A.find((function(e){return e.value===N})).title:"\u5dee\u8bc4\u7387")+"\u8d70\u52bf",loading:E,data:C,options:A,dateRange:w,timeType:{cmtTimeType:O},fTimeType:_,volType:{cmtType:N},fVolType:S,onFlavorChange:I,onFilterChange:n,onClick:function(e,t,n){return R(e,t,"cmt")}}))))};var J=n(35239),W=n(64396),U=["loading"],G=W.Z.social.tag.trend,H=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handleOnFilterReady=function(e){n.props.fetchParams((0,i.Z)({},e,{projectId:J.t.get(J.V.curProject).id,dateRange:e.dateFilter.numOfDays+Math.random(),type:n.props.type}))},n._handleOnFilterChange=function(e){var t=n.props,a=t.save,r=t.fetchVolumeData,o=t.fetchRatioData,l=t.fetchCmtData,s=t.label;if(e.filterValue)if(JSON.stringify(e.dateFilter)!==JSON.stringify(n.props.dateFilter))a((0,i.Z)({},e,{dateRange:e.dateFilter.numOfDays+Math.random()}));else{var c=(0,i.Z)({},e,{filtedObjs:(0,R.gJ)(n.props,e),label:s});r(c),o(c),l(c)}e.volType?a({volType:e.volType}):e.ratioType?a({ratioType:e.ratioType}):e.cmtType&&a({cmtType:e.cmtType}),(e.volTimeType||e.label)&&r((0,i.Z)({},e,{projectId:J.t.get(J.V.curProject).id})),(e.ratioTimeType||e.label)&&o((0,i.Z)({},e,{projectId:J.t.get(J.V.curProject).id})),(e.cmtTimeType||e.label)&&l((0,i.Z)({},e,{projectId:J.t.get(J.V.curProject).id}))},n._handleOnFlavorChange=function(e){n.props.updateFlavors((0,i.Z)({},e,{type:n.props.type}))},n._handleOnVolumeClick=function(e,t,a){var i=e.seriesName,r=e.name,o=n.props,l=o.type,s=o.projectId,c=o.filterValue,u=o.volType,p=o.volumeData,d=o.volTimeType,f=o.ratioType,m=o.ratioData,v=o.ratioTimeType,g=o.cmtType,y=o.commentData,T=o.cmtTimeType,E=o.label,C=c.some((function(e){return"TAG_RULE"===e.id}))&&c.find((function(e){return"TAG_RULE"===e.id})).values,O=c.some((function(e){return"DEFAULT"===e.id}))&&c.find((function(e){return"DEFAULT"===e.id})),_=c.some((function(e){return"BRAND_SERIES"===e.id}))&&c.find((function(e){return"BRAND_SERIES"===e.id})).values.some((function(e){return"SERIES"===e.id}))&&c.find((function(e){return"BRAND_SERIES"===e.id})).values.find((function(e){return"SERIES"===e.id})).values,N=_&&_.map((function(e){return e.split("_")[0]})),S={projectId:s,dateFilter:(0,h.ZP)(n.props.dateFilter,(function(e){var t="vol"===a?d:"ratio"===a?v:T,n="vol"===a?p[0].dateList.map((function(e){return e.date})):"ratio"===a?m[0].dateList.map((function(e){return e.date})):y[0].dateList.map((function(e){return e.date})),i=(0,w.LV)(r,t),o=i.from,l=i.to;"DAY"!==t&&"HOUR"!==t&&(parseInt(r)===parseInt(n[0])?o=e.from:parseInt(r)===parseInt(n[n.length-1])&&(l=e.to)),e.from=o,e.to=l})),filterModel:{label:E,emotion:"vol"===a?(0,R.jn)(u):"ratio"===a?(0,R.jn)(f):(0,R.jn)(g),messageType:["QUE_ANS_QUESTION","QUE_ANS_ANSWER","WEIBO","WEIBO_REPORT","COMMON_POST","NEWS_TEXT","COMPLAINT"],project:[s]},filterTip:"\u8206\u60c5\u770b\u677f/\u6807\u7b7e\u5206\u6790/"+("brandTrend"===l?"\u54c1\u724c\u8d70\u52bf":"\u673a\u578b\u8d70\u52bf")+"/"+t._model.option.title[0].text};if(C&&(S.filterModel.tag=C.map((function(e){return{id:e.id,special:"tag",values:e.values}}))),O&&O.values.some((function(e){return"SOURCE"===e.id}))&&(S.filterModel.source=O.values.find((function(e){return"SOURCE"===e.id})).values),"brandTrend"===l){var b=p.find((function(e){return e.name===i})).id;S.filterModel.brandsSeries=[{id:"brand",special:"brandsSeries",values:[b]}],_&&S.filterModel.brandsSeries.unshift({id:"series",special:"brandsSeries",values:N})}else S.filterModel.brandsSeries=[{id:"series",special:"brandsSeries",values:N}];window.open("/inbox/public?"+encodeURIComponent(JSON.stringify(S)))},n.state={},n.event={onFilterReady:n._handleOnFilterReady,onFilterChange:n._handleOnFilterChange,onFlavorChange:n._handleOnFlavorChange,onVolumeClick:n._handleOnVolumeClick},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.fetchAspectFliter({projectId:J.t.get(J.V.curProject).id})},n.componentWillUnmount=function(){this.props.clean()},n.render=function(){return o.createElement(M,(0,i.Z)({},this.props,this.state,this.event))},t}(o.PureComponent);const B=(0,l.connect)((function(e){var t=e.loading,n=(0,a.Z)(e,U);return(0,i.Z)({},n[G],{loading:t.effects[G+"/fetchVolumeData"]||!1,ratioLoading:t.effects[G+"/fetchRatioData"]||!1,cmtLoading:t.effects[G+"/fetchCmtData"]||!1})}),(function(e){return{fetchParams:function(t){return e({type:G+"/fetchParams",payload:t})},fetchAspectFliter:function(t){return e({type:G+"/fetchAspectFliter",payload:t})},updateFlavors:function(t){return e({type:G+"/updateFlavors",payload:t})},fetchVolumeData:function(t){return e({type:G+"/fetchVolumeData",payload:t})},fetchRatioData:function(t){return e({type:G+"/fetchRatioData",payload:t})},fetchCmtData:function(t){return e({type:G+"/fetchCmtData",payload:t})},save:function(t){return e({type:G+"/save",payload:t})},clean:function(t){return e({type:G+"/clean",payload:t})}}}))(H)},83680:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(94578),i=n(67294),r=n(45697),o=n.n(r),l=n(35239),s=n(94184),c=n.n(s),u=[{name:"\u6309\u5929",id:"DAY"},{name:"\u6309\u5468",id:"WEEK"},{name:"\u6309\u6708",id:"MONTH"},{name:"\u6309\u5b63",id:"QUARTER"},{name:"\u6309\u5e74",id:"YEAR"}],p=function(e){function t(t){var n,a=Object.prototype.hasOwnProperty.call(t,"dateRange");return(n=e.call(this,t)||this).handleToggleDisplay=function(e){var t=n.state.panelShow;setTimeout((function(){return n.setState({panelShow:!t})}),0)},n.handleParentClick=function(e){n.state.panelShow&&n.props.showFlavor&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n.handleCollapse=function(){return n.setState({panelShow:!1})},n.handleSwitchValue=function(e){var t=n.state.dateOptions,a=n.props.onChange;if(e!==n.state.value){var i=(t.filter((function(t){return t.id===e})).length>0?t.filter((function(t){return t.id===e}))[0]:t[0]).id;n.setState({value:e},(function(){return a&&a(i)}))}},n.DATE_DIMENSIONS=a?[{id:"HOUR",name:"\u6309\u65f6"}].concat(u):u,n.state={value:"",dateRange:parseInt(t.dateRange),dateOptions:a?[{id:"HOUR",name:"\u6309\u65f6"}].concat(u):u,panelShow:!1},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=(e.uniqueId,e.dateRange),n=e.onChange,a=this.state.value;this.projectId=l.t.get(l.V.curProject).id,window.addEventListener("click",this.handleCollapse),Object.prototype.hasOwnProperty.call(this.props,"dateRange")?this.getCurrDateOptions(parseInt(t)):n&&n(a)},n.componentWillUnmount=function(){window.removeEventListener("click",this.handleCollapse)},n.componentDidUpdate=function(e,t){var n=this,a=this.props,i=a.dateRange,r=a.defaultValue;e.dateRange!==i&&this.setState({dateRange:parseInt(i)},(function(){return n.getCurrDateOptions(parseInt(i))})),e.defaultValue!==r&&this.setState({value:r})},n.getCurrDateOptions=function(e,t){if(e>=1){var n=this.props,a=n.onChange,i=n.noHour,r=n.collectValue,o=n.defaultValue,l=this.DATE_DIMENSIONS,s=[],c="";if(1===e){s=l.slice(i?1:0,i?2:1);var u=i?l.filter((function(e){return"\u6309\u5929"===e.name})):l.filter((function(e){return"\u6309\u65f6"===e.name}));c=u[0].id}else if(e>1&&e<=7){s=l.slice(i?1:0,i?3:2);var p=l.filter((function(e){return"\u6309\u5929"===e.name}));c=p[0].id}else if(e>7&&e<=30){s=l.slice(i?1:0,i?4:3);var d=l.filter((function(e){return"\u6309\u5929"===e.name}));c=d[0].id}else if(e>30&&e<=60){s=l.slice(1,i?5:4);var f=l.filter((function(e){return"\u6309\u5929"===e.name}));c=f[0].id}else if(e>60&&e<=180){s=l.slice(1,i?5:4);var m=l.filter((function(e){return"\u6309\u5468"===e.name}));c=m[0].id}else{s=l.slice(1,i?6:5);var v=l.filter((function(e){return"\u6309\u6708"===e.name}));c=v[0].id}s.some((function(e){return e.id===r}))?c=r:t&&s.some((function(e){return e.id===o}))&&(c=o),this.setState({dateOptions:s,value:c},(function(){a&&a(c)}))}},n.render=function(){var e=this,t=this.props,n=t.style,a=t.showFlavor,r=t.collectValue,o=t.updateCollectValue,l=this.state,s=l.dateOptions,u=l.value,p=l.panelShow,d=s.filter((function(e){return e.id===u}))[0]&&s.filter((function(e){return e.id===u}))[0].name;return i.createElement("div",{className:"date_dimension_selector_wrapper",style:n,onClick:this.handleParentClick},i.createElement("div",{className:p?"date_dimension_btn active":"date_dimension_btn",onClick:this.handleToggleDisplay},i.createElement("span",null,d),i.createElement("i",{className:"icon icon-cem_arrow-launches",style:{transform:p?"rotate(-180deg)":""}})),i.createElement("ul",{className:"date_dimension_panel",style:{display:p?"inline-block":"none"}},s.map((function(t){var n=t.name,l=t.id;return i.createElement("li",{className:c()(u===l?"date_dimension_item active":"date_dimension",a&&"flavor_style"),key:l,onClick:function(){return e.handleSwitchValue(l)}},i.createElement("span",null,n),i.createElement("i",{className:r===l?"icon-cem_star stared":"icon-cem_star",onClick:function(e){e.stopPropagation(),o(l===r?"":l)}}))}))))},t}(i.Component);p.propTypes={noHour:o().bool,dateRange:o().number,defaultValue:o().oneOf(["HOUR","DAY","WEEK","MONTH","QUARTER","YEAR"]),onChange:o().func.isRequired,style:o().object,collectValue:o().string,updateCollectValue:o().func}},24062:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(94578),i=n(67294),r=n(45697),o=n.n(r),l=n(39432),s=n(43036),c=function(e){function t(t){var n;return(n=e.call(this,t)||this).getPanelWidth=function(){var e=n.props,t=e.flavor,a=e.options,i=Math.max.apply(null,a.map((function(e){return(0,l.jD)(e.title,14)})))+2+10+32;return(i+=void 0!==t?24:0)>100?i:100},n._setPadShowFalse=function(){n.state.show&&n.setState({show:!1})},n._handleParentClick=function(e){n.state.show&&n.props.showFlavor&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n._handleTriggerOnClick=function(){var e=n.state.show;setTimeout((function(){n.setState({show:!e})}),0)},n.state={show:!1,firstLiHover:!1,panelWidth:n.getPanelWidth()},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("click",this._setPadShowFalse)},n.componentWillUnmount=function(){window.removeEventListener("click",this._setPadShowFalse)},n.componentDidUpdate=function(e){var t=e.options,n=this.props.options;JSON.stringify(t)!==JSON.stringify(n)&&this.setState({panelWidth:this.getPanelWidth()})},n.render=function(){var e=this.state,t=e.show,n=e.panelWidth,a=this.props,r=a.activeObj,o=void 0===r?"":r,l=a.onChange,c=a.options,u=a.objName,p=a.preTitle,d=a.sufTitle,f=void 0===d?"":d,m=a.showTitle,v=void 0===m||m,h=a.overlay,g=a.divider,y=void 0===g?"right":g,T=a.flavor,E=a.onFlavorChange,C=c.find((function(e){return e.value===o})),O=""===o?f:C&&C.title;return i.createElement("div",{className:"single_select_button_wrapper single_select_diviver_"+y,onClick:this._handleParentClick},i.createElement("div",{className:"button_content"},i.createElement("span",{onClick:this._handleTriggerOnClick},i.createElement("span",{className:"button-trigger "+(t?"sel":"")},v&&i.createElement(i.Fragment,null,p&&i.createElement("span",{className:"pre-title"},p,"\uff1a"),i.createElement("span",{className:"button-title"},O)),i.createElement("i",{className:"icon-cem_arrow-launches",style:{transform:t?"rotate(-180deg)":""}})),h&&i.createElement("span",{style:{marginLeft:4}},i.createElement(s.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:h},i.createElement("i",{className:"icon-cem_file1"})))),i.createElement("div",{className:"button-panel "+(t?"active":""),style:{minWidth:n}},c.map((function(e,t){return i.createElement("div",{className:"panel-item "+(e.value===o?"sel":"")+" "+(e.disabled?"disabled":""),key:e.value,onClick:function(){var t;!e.disabled&&l(u?((t={})[u]=e.value,t):e.value)}},e.title,i.createElement("i",{className:T===e.value?"icon-cem_star":"icon-cem_star-filling star_hide",onClick:function(t){var n,a;t.stopPropagation(),E(T===e.value?((n={})[u]="",n):((a={})[u]=e.value,a))}}))})))))},t}(i.PureComponent);c.propTypes={activeObj:o().any,onChange:o().func.isRequired,options:o().array.isRequired,objName:o().any,preTitle:o().string,sufTitle:o().string,showTitle:o().bool,overlay:o().string,divider:o().oneOf(["both","left","right"]),flavor:o().string,onFlavorChange:o().func};const u=c}}]);