(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[8505],{33097:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var t=n(67154),s=n.n(t),t=n(85354),a=n.n(t),t=n(67294),r=n.n(t),i=n(36144),p=n(61193),o=n(97911),u=n(92360),c=n(5133),l=n(97189),h=function(n){function e(e){var l=n.call(this,e)||this;l.changeState=function(e){l.setState(e,function(){l.updateFilter()})},l.clickCheckbox=function(e){var t=e.aspect1,n=e.aspect2,a=l.state.limit;a&&(t&&t.length>a||n&&n.length>a)?c.Z.warning("当前条件下最多支持选择"+a+"个分析指标"):l.setState(e)},l.updateFilter=function(){var e=l.state.aspectType,t=l.state,n=t.aspect1,t=t.aspect2;e&&n&&0<n.length?t=[]:0<t.length&&(n=[]),l.setState({aspect1:n,aspect2:t})},l.clickCancelBtn=function(){var e=l.state,t=e.aspectShow,e=e.confirmedValue,a=l.props.getCurrValue,e=JSON.parse(JSON.stringify(e));t&&(l.props.closePanel(),l.setState(s()({},e),function(){var e=l.state,t=e.aspectType,n=e.aspect1,e=e.aspect2;a(t?n:e)}))},l.orderAspect=function(e){for(var t=l.state.aspectList,n=[],a=[],s=0;s<t.length;s++){for(var i=!1,c=0;c<e.length;c++)if(t[s].name===e[c]){i=!0,n[c]=t[s];break}i||a.push(t[s])}l.setState({aspectList:n.concat(a)})};var t=e.defaultValue;return l.state={aspectShow:!1,aspectType:!(t&&0<t.aspect2.length),aspect1:t&&t.aspect1||[],aspect2:t&&t.aspect2||[],confirmedValue:{aspectType:!1,aspect1:[],aspect2:[]},rawAspectList:[],aspectList:[],projectId:e.projectId,model:e.model,ready:!1,limit:e.limit},l}a()(e,n);var t=e.prototype;return t.UNSAFE_componentWillReceiveProps=function(e){var t=e.aspectShow,e=e.limit;this.setState({aspectShow:t,limit:e})},t.componentDidMount=function(){this.getValue(),this.props.defaultValue&&this.clickConfirmBtn(),window.addEventListener("click",this.clickCancelBtn)},t.componentDidUpdate=function(){this.setLeftBlockHeight()},t.componentWillUnmount=function(){window.removeEventListener("click",this.clickCancelBtn)},t.setLeftBlockHeight=function(){var e=document.querySelectorAll(".analyse-aspect-panel-body .left .new-checkbox-panel .wt-checkbox-group .wt-checkbox"),t=document.querySelectorAll(".analyse-aspect-panel-body .right .new-checkbox-panel");if(e.forEach(function(e){return e.style.marginBottom="0"}),0<t.length)for(var n=t.length-1;0<=n;n--){var a=t[n].offsetHeight;36<a&&(e[n].style.marginBottom=a-36+"px")}},t.getValue=function(){var e=this.state,t=e.aspectType,n=e.aspect1,a=e.aspect2;if(e.ready)return{aspect1:t?n:[],aspect2:t?[]:a};a=this.props.projectId;this.fetchAspects(a)},t.getSndIndex=function(e){e=this.state.aspects[e];return e&&0<e.length&&this.setState({aspectType:!1,aspect1:[],aspect2:e}),e},t.setAspectFromOutside=function(e){this.setState(s()({aspectType:0<e.aspect1.length},e))},t.fetchAspects=function(n){var a=this,s=["PRODUCT","MARKETING","SERVICE"],e=s.map(function(e){return i.h.post("filter/find",{filterTypes:["ASPECT"],projectId:n,type:e})});Promise.all(e).then(function(e){e.forEach(function(e){var t=e.data.result,e=a.state.rawAspectList;t.aspect&&a.setState({projectId:n,model:s,rawAspectList:e.concat(t.aspect)})}),a.formatData()})},t.formatData=function(){var n,a,e,t=this.state,s=t.model,i=t.aspect1,c=t.aspect2,l=t.rawAspectList,r=t.limit,o=this.state,t=o.aspectShow,o=o.aspectType,l=l,u={};"BRAND"===s?(n=l.map(function(e){return e&&JSON.parse(e)}),(s=0)<=(a=p.Z.getAuthority()).indexOf("ANALYZE_PRODUCT")&&s++,0<=a.indexOf("ANALYZE_SERVER")&&s++,0<=a.indexOf("ANALYZE_MARKETING")&&s++,0===s?n.forEach(function(e){Object.keys(e).forEach(function(e,t){return u[t]=e})}):1===s?["ANALYZE_PRODUCT","ANALYZE_SERVER","ANALYZE_MARKETING"].forEach(function(e,t){0<=a.indexOf(e)&&Object.keys(n[t]).map(function(e,t){return u[t]=e})}):1<s&&(0<=a.indexOf("ANALYZE_PRODUCT")&&(1===(s=Object.keys(n[0])).length?u["产品"]=n[0][s[0]]:1<s.length&&(u["产品"]=n[0])),0<=a.indexOf("ANALYZE_SERVER")&&(1===(e=Object.keys(n[1])).length?u["服务"]=n[1][e[0]]:1<e.length&&(u["服务"]=n[1])),0<=a.indexOf("ANALYZE_MARKETING")&&(1===(e=Object.keys(n[2])).length?u["市场"]=n[2][e[0]]:1<e.length&&(u["市场"]=n[2])))):l&&l[0]&&(u=JSON.parse(l[0]));l=Object.keys(u).map(function(e,t){var a=u[e];return{id:t,name:e,contain:a.length?a:Object.keys(a).map(function(e,t){var n=a[e];return{id:t,name:e,contain:n.length?n:Object.keys(n)}})}});(o=l.length<=1?t=!1:o)&&!i.length?null!==r?l.forEach(function(e,t){t<r&&i.push(e.name)}):l.forEach(function(e){return i.push(e.name)}):o||c.length||l&&l[0]&&l[0].contain.forEach(function(e){"object"==typeof e?c.push(e.name):c.push(e)}),this.changeState({aspectList:l,aspectShow:t,aspects:u,aspectType:o,aspect1:i,aspect2:c,ready:!0})},t.handleClickBlock=function(e,t){var n=this.state,a=n.aspectType;n.aspectShow&&a!==e&&(n=document.querySelectorAll(".analyse-aspect-panel-body div"),a="disabled",e?this.hanldeClass("remove",n[1],a):this.hanldeClass("remove",n[0],a),e?this.setState({aspectType:e,aspect2:[]}):this.setState({aspectType:e,aspect1:[]}))},t.hanldeClass=function(e,t,n){("add"===e?(0,l.addClass):(0,l.removeClass))(t,n)},t.clickConfirmBtn=function(){var e=this.state,t=e.aspectType,n=e.aspect1,a=e.aspect2,s=this.props,i=s.onChange,e=s.closePanel,s=s.getCurrValue;this.setState({confirmedValue:{aspectType:t,aspect1:JSON.parse(JSON.stringify(n)),aspect2:JSON.parse(JSON.stringify(a))}}),s(t?n:a),i({aspect1:n,aspect2:a}),e()},t.clearOptions=function(){this.setState({aspect1:[],aspect2:[]})},t.render=function(){var n=this,e=this.state,t=e.aspectList,a=e.aspectType,s=e.aspect1,i=e.aspect2,c=e.aspectShow,l=e.limit;return r().createElement("div",{className:"analyse-aspect-panel-wrapper",style:{display:c?"block":"none"},onClick:function(e){return e.stopPropagation()}},r().createElement("div",{className:"analyse-aspect-panel-body"},r().createElement("div",{className:a?"left":"left disabled",onClick:function(e){return n.handleClickBlock(!0,e)}},r().createElement(o.Z,{changeState:function(e){return n.clickCheckbox({aspect1:e})},checkedList:s,ITEMS:t.map(function(e){return e.name||e}),categoryTitle:"一级指标",type:"vertical",limit:l})),r().createElement("div",{className:a?"right disabled":"right",onClick:function(e){return n.handleClickBlock(!1,e)}},r().createElement("div",null,"二级指标"),0<t.length&&t.map(function(e,t){return r().createElement(o.Z,{changeState:function(e){return n.clickCheckbox({aspect2:e})},checkedList:JSON.parse(JSON.stringify(i)),key:"aspect1-"+t,categoryTitle:e.name,ITEMS:e.contain.map(function(e){return e.name||e}),type:"horizontal",limit:l})}))),r().createElement("div",{className:"analyse-aspect-panel-footer"},r().createElement("span",{onClick:function(){return n.clearOptions()}},"清空全部选项"),r().createElement("div",null,r().createElement(u.Button,{type:"primary",onClick:function(){return n.clickConfirmBtn()}},"确定"),r().createElement("span",{className:"cancelBtn",onClick:function(){return n.clickCancelBtn()}},"取消"))))},e}(r().Component),f=function(n){function e(e){var t=n.call(this,e)||this;return t.getCurrValue=function(e){t.setState({currValue:e})},t.closePanel=function(){t.setState({showPanel:!1})},t.state={showPanel:!1,currValue:[]},t}a()(e,n);var t=e.prototype;return t.togglePanel=function(e){var t=this,n=this.state.showPanel;n&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),setTimeout(function(){return t.setState({showPanel:!n})},0)},t.getValue=function(){if(this.panel)return this.panel.getValue()},t.getSndIndex=function(e){return this.panel.getSndIndex(e)},t.setAspectFromOutside=function(e){return this.panel.setAspectFromOutside(e)},t.orderAspect=function(e){this.panel.orderAspect(e)},t.render=function(){var t=this,e=this.state,n=e.showPanel,e=e.currValue;return r().createElement("div",{className:"alert-analyse-aspect-wrapper"},r().createElement("div",{className:n?"analyse-aspect-trigger sel":"analyse-aspect-trigger",style:{backgroundColor:n?"rgb(97,121,155)":"",color:n?"white":"#8C8C8C"},onClick:function(e){return t.togglePanel(e)}},r().createElement("span",null,"预警指标："),r().createElement("span",{className:"currValue",title:0<e.length?e.join("，"):"全部"},0<e.length?e.join("，"):"全部"),r().createElement("i",{className:"icon-cem_arrow-launches",style:{transform:n?"rotate(-180deg)":"",color:n?"white":"#8C8C8C"}})),r().createElement(h,s()({ref:function(e){t.panel=e},aspectShow:n,closePanel:this.closePanel,getCurrValue:this.getCurrValue},this.props)))},e}(r().Component)},59762:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(67154),i=n.n(a),t=n(85354),s=n.n(t),a=n(67294),h=n.n(a),t=n(45697),t=n.n(t),f=n(92360),c=n(36144),d=function(t){function e(e){var n=t.call(this,e)||this;return n._setEvent=function(e){return 0===e?{onMouseEnter:function(){n.setState({firstLiHover:!0})},onMouseLeave:function(){n.setState({firstLiHover:!1})}}:{}},n.setDefaultValue=function(){var t=n.getValue();c.h.post("/default/value/update",{projectId:n.props.projectId,key:"ALERT_OBJ",value:JSON.stringify(t)}).then(function(e){n.setState({defaultSelectValue:t,shouldUpdataDefaultSelectValue:!1})})},n.state={options:[{}],sel:[{name:""},{name:""}],defaultSelectValue:n.props.defaultSelectValue,shouldUpdataDefaultSelectValue:!0,value:{},firstLiHover:!1},n}s()(e,t);var n=e.prototype;return n.onSel=function(e,t){var n=this,a=this.state.options;a.forEach(function(e){return e.sel=!1}),a[t].sel=!0,this.setState({options:a},function(e){return n.props.onChange&&n.props.onChange(n.getValue())})},n.getValue=function(){return JSON.parse(JSON.stringify(this.state.options)).filter(function(e){return e.sel})[0]},n.UNSAFE_componentWillReceiveProps=function(e){var t,n;(e.options||e.value)&&(t=JSON.parse(JSON.stringify(e.options)),n=JSON.parse(JSON.stringify(e.value)),t.forEach(function(e){e.id===n.id&&(e.sel=!0)}),this.setState({options:t,value:n}),this.state.shouldUpdataDefaultSelectValue&&this.setState({defaultSelectValue:e.defaultSelectValue}))},n.UNSAFE_componentWillMount=function(){var e=this.props.options,t=this.props.value||{};e.forEach(function(e){e.id===t.id&&(e.sel=!0)}),this.setState({options:e,value:t})},n.componentWillUnmount=function(){},n.render=function(){var n=this,e=this.state,t=e.options,a=e.defaultSelectValue,e=t[0]&&t[0].sel;return h().createElement("div",{className:"selItem "+(this.props.triangle?"triangle":"")+" "+(this.state.firstLiHover||e?"selPadHover":""),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},h().createElement("div",{className:"wrap"},h().createElement("ul",null,0<t.length?t.map(function(e,t){return h().createElement("li",i()({className:(e.sel?"sel":"")+(e.disable?" disable":""),key:t,onClick:function(e){return n.onSel(e,t)}},n._setEvent(t)),h().createElement("span",null,e.name),e.sel&&h().createElement("i",{className:"default icon-cem_star",style:{color:a.id===e.id?"#D5B437":"#8C8C8C",opacity:a.id===e.id?"1":""},onClick:a.id===e.id?null:n.setDefaultValue}),h().createElement("i",{className:"check cem-icon icon-cem_arrow-thick"}))}):h().createElement("div",{className:"noData"},"无数据"))))},e}(a.Component);d.propTypes={options:t().array,value:t().object,onChange:t().func,projectId:t().string.isRequired};var l=n(5133),r=n(85151),m=function(e){function t(){var i=e.call(this)||this;return i.sortList=function(e,t,n){n.stopPropagation(),n.nativeEvent.stopImmediatePropagation();var a=JSON.parse(JSON.stringify(i.state.value)),s=a.splice(e,1)[0];switch(t){case"top":a.unshift(s);break;case"up":a.splice(e-1,0,s);break;case"down":a.splice(e+1,0,s)}i.setState({value:a},function(e){return i.props.onChange&&i.props.onChange(i.getValue())})},i._setEvent=function(e){return 0===e?{onMouseEnter:function(){i.setState({firstLiHover:!0})},onMouseLeave:function(){i.setState({firstLiHover:!1})}}:{}},i.state={options:[],value:[],showSel:!1,firstLiHover:!1},i}s()(t,e);var n=t.prototype;return n.onSel=function(e,n){var t=this,a=this.state,s=a.options,i=a.value;!n.sel&&this.props.limit&&i.length>=this.props.limit?l.Z.warning("最多选择"+this.props.limit+"个对象！"):((s=JSON.parse(JSON.stringify(s))).forEach(function(e){e.id===n&&(e.sel=!e.sel,e.sel?i.push(e.id):i.some(function(e,t){return e===n&&(i.splice(t,1),!0)}))}),this.setState({options:s,value:i},function(e){return t.props.onChange&&t.props.onChange(t.getValue())}))},n.getValue=function(){return this.state.value},n.UNSAFE_componentWillReceiveProps=function(e){var t,n;(e.options||e.value)&&(t=JSON.parse(JSON.stringify(e.options)),n=JSON.parse(JSON.stringify(e.value)),t.forEach(function(e){n.includes(e.id)?e.sel=!0:e.sel=!1}),this.setState({options:t,value:n}))},n.UNSAFE_componentWillMount=function(){var e=this.props,t=e.options,e=e.value,n=void 0===e?[]:e;t.forEach(function(e){n.includes(e.id)&&(e.sel=!0)}),this.setState({options:t,value:n})},n.componentWillUnmount=function(){},n.render=function(){var a=this,e=this.state,n=e.options,e=e.value,s=[];return 0<e.length&&0<n.filter(function(e){return e.sel}).length&&e.forEach(function(t){n.filter(function(e){return e.id===t})[0]&&s.push(n.filter(function(e){return e.id===t})[0])}),h().createElement("div",{className:"analyze-object-sort-select"},h().createElement("div",{className:"selItem "+(this.props.triangle?"triangle":"")+" "+(this.state.firstLiHover?"selPadHover":""),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},h().createElement("div",{className:"wrap"},h().createElement("ul",null,0<s.length&&s.map(function(t,n){return h().createElement("li",i()({className:(t.sel?"sel":"")+(t.disable?" disable":""),key:n,onClick:function(e){return a.onSel(e,t.id)}},a._setEvent(n)),h().createElement(r.Jg,{className:"check-all",checked:t.sel,onChange:function(e){}}),h().createElement("span",null,t.name),h().createElement("div",{className:"handle"},0!==n&&h().createElement("i",{title:"置顶",onClick:function(e){a.sortList(n,"top",e)},className:"icon-cem_roof-placement"}),0!==n&&h().createElement("i",{title:"上一位",onClick:function(e){a.sortList(n,"up",e)},className:"icon-cem_upper"}),n!==s.length-1&&h().createElement("i",{title:"下一位",onClick:function(e){a.sortList(n,"down",e)},className:"icon-cem_lower"})))}),0<s.length&&0<n.filter(function(e){return!e.sel}).length&&h().createElement("div",{className:"line"}),0<n.filter(function(e){return!e.sel}).length&&n.filter(function(e){return!e.sel}).map(function(t,e){return h().createElement("li",{className:(t.sel?"sel":"")+(t.disable?" disable":""),key:e,onClick:function(e){return a.onSel(e,t.id)}},h().createElement(r.Jg,{className:"check-all",checked:t.sel,onChange:function(e){}}),h().createElement("span",{className:"dark"},t.name))}),0===n.length&&h().createElement("div",{className:"noData"},"无数据")))))},t}(a.Component);m.propTypes={options:t().array,value:t().array,onChange:t().func};var o=function(t){function e(e){var i=t.call(this,e)||this;return i.stop=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},i.setShowSelFalse=function(){i.state.show&&i.cancel(),i.state.show&&i.setState({show:!1})},i.cancel=function(){var e=i.state,t=e.selectValue,n=e.confirmedSelectValue,a=n.id,s=n.values,e=e.list;i.setState({selectValue:a?e.filter(function(e){return e.id===a})[0]:t,sortSelectValue:a?e.filter(function(e){return e.id===a})[0].values.filter(function(e){return s.includes(e.id)}).map(function(e){return e.id}):[],show:!1})},i.getList=function(){var e=i.props,t=e.projectId,e=e.type;c.h.post("/filter/find",{filterTypes:["CONN_CONFIG","SOURCE","TAG","EXPAND_TOPIC"],projectId:t,type:e}).then(function(e){2e4===e.data.code&&(e=i.formatData(e.data.result),i.setState({list:e}))})},i.onSelChange=function(e,t){var n;i.setState(((n={})[e]=t,n),function(){"sortSelectValue"===e&&i.setState({sortSelectValue:t})})},i.getSecondLevelList=function(){var t=i.getValue(),e=i.state.list.filter(function(e){return e.id===t.id})[0].values,n=e.filter(function(e){return 0===t.values.length||t.values.includes(e.id)});return{list:e,valueList:n,id:t.id,name:t.name}},i.state={list:[],defaultSelectValue:{},defaultValue:e.defaultValue,selectValue:{},sortSelectValue:[],confirmedSelectValue:{id:"",name:"",special:"",values:[]},show:!1,triangle:"select"},i}s()(e,t);var n=e.prototype;return n.UNSAFE_componentWillMount=function(){this.props.left&&this.props.left<-200&&this.setState({triangle:"sortSelect"})},n.componentDidMount=function(){var t=this;this.getList(),setTimeout(function(){return t.getDefault()},300),window.addEventListener("setItemEvent",this.getList),window.addEventListener("click",this.setShowSelFalse),this.props.left&&document.querySelectorAll(".analyze-object").forEach(function(e){return e.style.setProperty("--x",t.props.left+"px")})},n.componentWillUnmount=function(){window.removeEventListener("setItemEvent",this.getList),window.removeEventListener("click",this.setShowSelFalse)},n.formatData=function(e){var t=[];return e.topics&&e.topics.titles&&0<e.topics.titles.length&&(this.setState({reFilterData:e.topics.data}),t.push.apply(t,e.topics.titles.filter(function(e){return e.special="connConfig",1<e.values.length}))),e.source&&0<e.source.length&&t.push({id:"source",name:"数据来源",special:"source",values:e.source}),e.tag&&0<e.tag.length&&e.tag.forEach(function(e){e.special="tag",t.push(e)}),this.props.filterConfig&&this.props.filterConfig.forEach(function(e){switch(e){case"ESCORE":t.push({id:"escore",special:"escore",name:"情感",values:[{id:"1",name:"好评"},{id:"0",name:"中评"},{id:"-1",name:"差评"}]});break;case"MESSAGE_TYPE":t.push({id:"messageType",special:"messageType",name:"消息类型",values:[{id:"PL",name:"评论"},{id:"ZP",name:"追评"},{id:"TW",name:"提问"},{id:"HD",name:"回答"},{id:"SX",name:"私信"},{id:"YW",name:"原文"},{id:"HF",name:"回复"},{id:"KH",name:"客服回复"},{id:"DSWT",name:"电商问题"},{id:"DSDA",name:"电商答案"}]});break;case"KEY_WORD":t.push({id:"KEY_WORD",special:"content",name:"关键词",values:[]})}}),e.expandTopics&&t.push({id:"expandTopic",name:"组合分析",special:"expandTopic",values:e.expandTopics}),JSON.parse(JSON.stringify(t))},n.setDefaultValue=function(){var e,t=[],n=this.state,a=n.defaultSelectValue,s=n.defaultValue,i=n.list,n=this.state.confirmedSelectValue;s&&this.state.list.some(function(e){return e.id===s.id})?(e=this.state.list.filter(function(e){return e.id===s.id})[0],t=s.values,n=JSON.parse(JSON.stringify(s))):e=a&&i.some(function(e){return e.id===a.id})?a:this.state.list[0],this.setState({selectValue:e,sortSelectValue:t,confirmedSelectValue:n})},n.getDefault=function(){var t=this;c.h.post("/default/value/find",{projectId:this.props.projectId,key:"ALERT_OBJ"}).then(function(e){e.data.result?t.setState({defaultSelectValue:JSON.parse(e.data.result)},function(){return t.setDefaultValue()}):t.setDefaultValue()})},n.getValue=function(){var e=this.state,t=e.selectValue,n=e.sortSelectValue,e=e.list;if(t.id){e=e.filter(function(e){return e.id===t.id})[0].values.filter(function(e){return n.includes(e.id)}).map(function(e){return e.id});this.setState({confirmedSelectValue:i()({},t,{values:e}),sortSelectValue:e});var a="";switch(t.special){case"connConfig":a="CONN_CONFIG";break;case"expandTopic":a="EXPAND_TOPIC";break;default:a=t.special.toUpperCase()}return{id:t.id,values:e,name:t.name,type:a}}return this.setState({confirmedSelectValue:{id:"",name:"",special:"",values:[]}}),{}},n.changeShow=function(e){var t=this;this.state.show&&this.stop(e),setTimeout(function(){t.setState({show:!t.state.show})},0)},n.render=function(){var t=this,e=this.state,n=e.list,a=e.selectValue,s=e.sortSelectValue,i=e.defaultSelectValue,c=e.show,l=e.triangle,r=e.confirmedSelectValue,o=r.id,u=r.values,p=this.props.projectId,e=n.map(function(e){return{id:e.id,name:e.name,special:e.special}}),r=a&&n.filter(function(e){return e.id===a.id})[0]?n.filter(function(e){return e.id===a.id})[0].values.map(function(e){return delete e.sel,e}):[],n=0<u.length?n.filter(function(e){return e.id===o})[0].values.filter(function(e){return u.includes(e.id)}).map(function(e){return e.name}):[];return h().createElement("div",{className:"alert-object",style:this.props.style||{}},h().createElement("div",{className:"alert-object-select",onClick:function(e){return t.changeShow(e)}},h().createElement("div",{className:"infor "+(c?"sel":"")},h().createElement("span",null,"预警对象："),h().createElement("span",{className:"currValue",title:0<n.length?n.join("，"):"全部"},0<n.length?n.join("，"):"全部"),h().createElement("i",{className:"icon-cem_arrow-launches",style:{transform:c?"rotate(-180deg)":""}})),c&&h().createElement(d,{options:e,defaultSelectValue:i,value:a,onChange:function(e){return t.onSelChange("selectValue",e)},triangle:"select"===l,projectId:p})),c&&h().createElement(m,{options:r,limit:this.props.limit,value:JSON.parse(JSON.stringify(s)),onChange:function(e){return t.onSelChange("sortSelectValue",e)},triangle:"sortSelect"===l}),c&&h().createElement("div",{className:"footer",onClick:function(e){return t.stop(e)}},0<e.length&&h().createElement("div",{className:"control"},h().createElement(f.Button,{type:"primary",onClick:function(){t.setState({show:!1}),t.props.onChange&&t.props.onChange(t.getValue())}},"确定"),h().createElement("span",{className:"cancel",onClick:function(){return t.cancel()}},"取消"))))},e}(a.Component);o.propTypes={defaultValue:t().object}},97911:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(85354),s=n.n(t),t=n(67294),r=n.n(t),o=n(85151),c=n(5133),a=function(a){function e(){for(var i,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(i=a.call.apply(a,[this].concat(t))||this).handleCheckedAll=function(e){var t=i.props,n=t.ITEMS,a=t.changeState,t=t.checkedList,s=[];e.target.checked?(t.map(function(e){return s.push(e)}),n.filter(function(e){return s.indexOf(e)<0}).map(function(e){return s.push(e)})):t.filter(function(e){return n.indexOf(e)<0}).map(function(e){return s.push(e)}),a&&a(s)},i.handleChange=function(e){var t=i.props,n=t.changeState,a=t.checkedList,t=t.limit;Array.prototype.remove=function(e){e=this.indexOf(e);-1<e&&this.splice(e,1)},t?-1===a.indexOf(e)?a.length<t?a.push(e):c.Z.warning("当前条件下最多支持选择"+t+"个分析指标"):a.remove(e):-1===a.indexOf(e)?a.push(e):a.remove(e),n&&n(a)},i}return s()(e,a),e.prototype.render=function(){var t=this,e=this.props,n=e.ITEMS,a=e.categoryTitle,s=e.titles,i=e.checkedList,c=e.type,l=(e.limit,i.filter(function(e){return 0<=n.indexOf(e)})),e=!!l.length&&l.length===n.length,l=!!l.length&&l.length!==n.length;return r().createElement("div",{className:"vertical"===c?"new-checkbox-panel new-checkbox-panel-vertical":"new-checkbox-panel"},r().createElement(o.Jg,{checked:e,indeterminate:l,onChange:this.handleCheckedAll},a||"全选"),r().createElement(o.CS,{checkedList:i,onChange:function(e){return t.handleChange(e)}},n&&n.map(function(e,t){return r().createElement(o.Jg,{key:t,value:e},s?s[e]:e)})))},e}(t.Component)},24473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a=n(67154),p=n.n(a),s=n(37316),h=n.n(s),t=n(85354),i=n.n(t),a=n(67294),f=n.n(a),s=n(45697),t=n.n(s),s=n(94184),d=n.n(s),a=function(e){function t(){return e.apply(this,arguments)||this}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.children,a=e.className,s=e.block,i=e.indeterminate,c=e.value,l=e.checked,r=e.defaultChecked,o=e.onChange,u=e.disabled,e=h()(e,["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"]),o={value:c,checked:l,defaultChecked:r,onChange:o,disabled:u},a=d()(t,((u={})[t+"-disabled"]=o.disabled,u[t+"-block"]=s,u[t+"-indeterminate"]=i,u),a);return f().createElement("label",p()({tabIndex:o.disabled?-1:0,className:a},e),f().createElement("input",p()({type:"checkbox",className:t+"-input"},o)),f().createElement("span",{className:t+"-status"}),n&&f().createElement("span",{className:t+"-text",title:n},n))},t}(a.Component);a.propTypes={prefixCls:t().string,value:t().oneOfType([t().string,t().number]),checked:t().bool,defaultChecked:t().bool,onChange:t().func,indeterminate:t().bool,disabled:t().bool,block:t().bool},a.defaultProps={prefixCls:"wt-checkbox"};const c=a},85151:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>a.Z,CS:()=>l});var a=n(24473),s=n(67154),r=n.n(s),i=n(37316),o=n.n(i),t=n(85354),c=n.n(t),s=n(67294),u=n.n(s),i=n(45697),t=n.n(i),i=n(94184),p=n.n(i),i=function(s){function e(){for(var n,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=s.call.apply(s,[this].concat(t))||this).handleCheckBoxChange=function(e){var t=n.props.onChange;t&&t(e)},n}return c()(e,s),e.prototype.render=function(){var s=this,e=this.props,t=e.prefixCls,n=e.children,a=e.className,i=(e.onChange,e.values),c=e.checkedList,l=e.block,e=o()(e,["prefixCls","children","className","onChange","values","checkedList","block"]),n=i?i.map(function(e,t){var n=0!==c.length&&-1!==c.indexOf(e);return u().createElement(Checkbox,{key:t,value:e,checked:n,onChange:function(e){return s.handleCheckBoxChange(e)},block:l},e)}):u().Children.map(n,function(e,t){if(e){var n=e.props,a=n.value,a=0!==c.length&&-1!==c.indexOf(a);return u().cloneElement(e,{checked:a,key:t,block:n.block||l,onChange:function(){var e=n.value;s.handleCheckBoxChange(e)}})}});return u().createElement("div",r()({className:p()(t,a)},e),n)},e}(s.Component);i.defaultProps={prefixCls:"wt-checkbox-group"},i.propTypes={onChange:t().func,values:t().array,block:t().bool};const l=i;var h=function(t){var n={};return Object.keys(t).forEach(function(e){/^data\-.+$/.test(e)&&(n[e]=t[e])}),n},s=function(e){function t(){return e.apply(this,arguments)||this}return c()(t,e),t.prototype.render=function(){var e=this.props,t=h(e);return u().createElement("label",{className:e.className,title:e.children},u().createElement("div",{className:"checkbox"},u().createElement("input",r()({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),u().createElement("div",{className:"checkbox-body"}))," ",u().createElement("span",null,e.children))},t}(s.Component);s.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}}}]);