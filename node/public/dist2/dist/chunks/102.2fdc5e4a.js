(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[102],{70102:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var a=n(37316),r=n.n(a),t=n(67154),x=n.n(t),a=n(85354),o=n.n(a),t=n(67294),G=n.n(t),J=n(26198),q=n(27310),K=n(8201),Q=n(60222),N=n(50976),S=n(39432),A=n(60496),R=n(98191),Y=n(9166),k=n(70715),F=n(94644);function l(e,n,a,t){var r=t&&0<t.length&&t[0].values[0].values,t=[];try{t=e.sort(function(e,t){return!!(r&&t.id&&e.id)&&r.indexOf(e.id)-r.indexOf(t.id)});var t=(0,Y.zV)(e),o=[].concat(t.map(function(e){return e.name})),c=t.map(function(e){return e[a]}),i=t[0][n].sort(function(e,t){return t[a]-e[a]}).map(function(e){return[e.aspect]});return[{dimensions:o,source:c},{dimensions:["指标"].concat(t.map(function(e){return e.name})),source:t.reduce(function(e,t){return t[n].forEach(function(t){return e&&e.some(function(e){return e[0]===t.aspect})&&e.find(function(e){return e[0]===t.aspect}).push(t[a])}),e},[].concat(i))}]}catch(e){}}function O(e,t,n,a,r,o,c){var i=n.includes("占比")?function(e,t,a,n){var r=n&&0<n.length&&n[0].values[0].values,o=[];try{o=e.sort(function(e,t){return!!(r&&t.id&&e.id)&&r.indexOf(e.id)-r.indexOf(t.id)});var o=(0,Y.zV)(e),c=[].concat(o.map(function(e){return e.name})),i=(0,Y.yE)(t),l=i.find(function(e){return e.name===o[0].name}).aspectTotal,s=o.map(function(e){return e.aspectTotal}),u=o[0][a].sort(function(e,t){return 0===l?t.aspectTotal-e.aspectTotal:t.aspectTotal/l-e.aspectTotal/l}).map(function(e){return[e.aspect]});return[{dimensions:c,source:s},{dimensions:["指标"].concat(o.map(function(e){return e.name})),source:o.reduce(function(e,n){return n[a].forEach(function(t){return e&&e.some(function(e){return e[0]===t.aspect})&&e.find(function(e){return e[0]===t.aspect}).push(0===i.find(function(e){return e.name===n.name}).aspectTotal?0:t.aspectTotal/i.find(function(e){return e.name===n.name}).aspectTotal)}),e},[].concat(u))}]}catch(e){}}(e,t,a,o):n.includes("提及率")?l(e,a,"mentionRate",o):l(e,a,r,o);return c&&(i[1].source=c.map(function(t){return i[1].source.find(function(e){return e[0]===t})})),i}var a=n(45697),t=n.n(a),c=n(43036),a=function(e){var t=e.onChange,n=e.check,e=e.enable,a=void 0===e||e,e=G().useState(n),r=e[0],o=e[1];return G().useEffect(function(){o(n)},[n]),G().createElement("div",{className:"yt_range_button_wrapper"},G().createElement(c.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:r?"各图独立排序":G().createElement("div",null,G().createElement("div",null,"此图作为其他图"),G().createElement("div",null,"表的排序依据"))},G().createElement("span",{onClick:function(){var e;a&&(e=!r,t&&t(e),o(e))},style:{color:r?"#0847a6":"#8c8c8c"},className:"button_trigger "+(a?"enable":"disable")},G().createElement("i",{className:"icon-cem_independent"}))))};a.propTypes={check:t().bool,onChange:t().func,enable:t().bool};const w=a;a=function(e){var u=e.title,t=e.titleOverlay,n=e.loading,p=e.data,m=e.fetchedData,d=e.aspectType,a=e.aspectTypeFlavor,r=e.volOptions,g=e.volType,o=e.volTypeFlavor,c=e.onFilterChange,i=e.onFlavorChange,f=e.cachedAnalysisObjs,l=e.onClick,s=e.rangeChecked,h=e.chartType,v=e.rangedNames,e=G().useState(void 0),y=e[0],C=e[1],e=G().useState(void 0),E=e[0],T=e[1],e=G().useState(s),b=e[0],_=e[1];G().useEffect(function(){y&&((0,K.P)(p)?T(O(p,m,u,d,g,f,v)):C(void 0))},[p,y,d,g,v]),G().useEffect(function(){_(s)},[s]),G().useEffect(function(){var n,o,e,t;E&&(o=u,e=(n=E)&&n[1].dimensions.slice(1),t=n&&n[0].dimensions,e={title:{text:o},grid:[{left:36,right:"69.4%",top:"30%",bottom:"3%",height:"55%",containLabel:!0},{left:"34%",top:"30%",right:36,bottom:"3%",height:"55%",containLabel:!0}],dataZoom:[{show:"slider",left:"35%",right:"4%",bottom:15,xAxisIndex:1,height:16,handleSize:"100%",showDetail:!1}],dataset:n&&n.map(function(e){return x()({},e,{sourceHeader:!1})}),tooltip:{trigger:"axis"},legend:{top:40,left:"33%",right:40,itemWidth:14,itemHeight:12,type:"scroll",pageIconSize:12,data:t,icon:k.W4.lineRing},xAxis:[{type:"category",gridIndex:0,boundaryGap:[0,.01],data:e,axisLabel:{formatter:function(e){return 7<e.length?e.substring(0,7)+"...":e}},axisTick:{show:!0,alignWithLabel:!0}},{type:"category",gridIndex:1,boundaryGap:!1,axisTick:{show:!0},triggerEvent:!0}],yAxis:n&&n.map(function(e,t){return{minInterval:o.includes("声量")||0===t&&o.includes("占比")?1:void 0,gridIndex:t,axisLabel:{showMinLabel:!1,formatter:function(e){return o.includes("声量")||0===t&&o.includes("占比")?S.ZP.formatNumber(e):(100*e).toFixed(2)+"%"}}}}),series:[{type:"bar",datasetIndex:0,barMaxWidth:24,xAxisIndex:0,yAxisIndex:0,tooltip:{trigger:"item",formatter:function(e){var t=e.marker,n=e.data,e=n.value;return t+" "+n.name+"："+(o.includes("声量")||o.includes("占比")?S.ZP.formatNumber(e):(100*e).toFixed(2)+"%")}},data:n.length&&n[0].source.map(function(e,t){return{value:e,name:n[0].dimensions[t],itemStyle:{color:k.Fq[t]}}})}].concat(Array.from({length:n[1].dimensions.length-1}).map(function(e,t){return{type:"line",xAxisIndex:1,yAxisIndex:1,datasetIndex:1,areaStyle:{opacity:.1},itemStyle:{color:k.Fq[t]},tooltip:{trigger:"item",formatter:function(e){var t=e.marker,n=e.data,a=e.name,r=e.seriesName,e=n[e.seriesIndex];return'<span class="yt_echart_tooltip_title"><span style="color: #262626;">'+a+"</span></span><br />"+t+" "+r+"："+(o.includes("声量")?S.ZP.getApproximateNum(e):(100*e).toFixed(2)+"%")}}}}))},y.clear(),y.setOption(e))},[E]);return G().createElement("div",{className:"bar_trend_chart"},G().createElement(K.Z,{data:p,loading:n,className:"product_compare_chart_wrap",renderTitle:G().createElement(R.Z,{title:u,titleOverlay:t,data:p,onMoreClick:function(e){var t,n,a,r,o,c,i,l,s;t=y,n=p,a=m,r=u,o=d,c=g,i=f,l=v,"image"===(e=e)?(0,F._v)(t,r):"data"!==e||(s=O(n,a,r,o,c,i,l))&&(l&&(s[1].source=l.map(function(t){return s[1].source.find(function(e){return e[0]===t})})),i=[s[0].dimensions,s[0].source],l=[s[1].dimensions].concat(s[1].source),l=[].concat(i,[[""]],l),(0,F.aT)([l],r))}},G().createElement(w,{check:b,onChange:function(n){var e;!v||b?c(((e={})[h+"RangeCheck"]=n,e.tarAspectType=n?d:void 0,e.tarRangedNames=n?E[1].source.reduce(function(e,t,n){return e.push(t[0]),e},[]):void 0,e)):new Promise(function(e,t){e(O(p,m,u,d,g,f,void 0))}).then(function(e){var t;c(((t={})[h+"RangeCheck"]=n,t.tarRangedNames=n?e[1].source.reduce(function(e,t){return e.push(t[0]),e},[]):void 0,t)),T(e)}),_(n)}}),d&&G().createElement(A.Z,{options:Y.Rx,activeObj:d,flavor:a,onFlavorChange:function(e){var t;return i(((t={})[h+"AspectType"]=e,t))},onChange:function(n){var e;b?new Promise(function(e,t){e(O(p,m,u,n,g,f,void 0))}).then(function(e){var t;c(((t={})[h+"RangeCheck"]=b,t.tarAspectType=n,t.tarRangedNames=e[1].source.reduce(function(e,t){return e.push(t[0]),e},[]),t))}):c(((e={})[h+"AspectType"]=n,e))},enable:!v||b}),g&&G().createElement(A.Z,{objName:h+"Type",options:r,activeObj:g,flavor:o,onFlavorChange:i,onChange:c}))},G().createElement(N.Z,{theme:"yunting_multi_color",className:"yt_echarts_style",option:{},style:{width:"100%",height:"100%"},onChartReady:function(e){return C(e)},onEvents:{click:l}})))};const $=a;a.propTypes={title:t().string,loading:t().bool,data:t().oneOfType([t().string,t().object]),dateRange:t().number,timeType:t().string,fTimeType:t().string,aspectType:t().string,aspectTypeFlavor:t().string,onFilterChange:t().func,onFlavorChange:t().func,onClick:t().func,rangeChecked:t().bool,chartType:t().string,rangedNames:t().arrayOf(t().string)};var y=n(71339),a=function(e){function t(){var e=document.getElementById("detail_content");p(e.clientWidth)}var n=e.key,a=e.data,r=e.loading,o=e.aspectListType,c=e.aspectListTypeFlavor,i=e.onFilterChange,l=e.onFlavorChange,s=G().useState(0),u=s[0],p=s[1],e=G().useState([]),s=e[0],m=e[1],e=G().useState(1),d=e[0],g=e[1],e=G().useState(10),f=e[0],h=e[1];G().useEffect(function(){return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}},[]),G().useEffect(function(){var e;(0,K.P)(a)&&(e=a[o].slice(1),m(e.slice((d-1)*f,d*f)))},[a,o,d,f]);var v;return G().createElement("div",{key:n},G().createElement(K.Z,{className:"yt_product_compare_detail_wrapper",data:a,loading:r,renderTitle:G().createElement("span",{className:"product_compare_detail_header"},G().createElement("span",{style:{fontWeight:"bold"}},"详细数据"),G().createElement(R.Z,{data:a,onMoreClick:function(e){"data"===e&&(0,K.P)(a)&&(0,F.aT)([a[o].map(function(n){return n.map(function(e,t){return e%1?(100*e).toFixed(t===n.length-1?4:2)+"%":e})})],"详细数据")},moreOptions:[{title:"导出数据",type:"data"}]},G().createElement(A.Z,{activeObj:o,flavor:c,options:Y.Rx,objName:"aspectListType",onChange:i,onFlavorChange:l})))},(0,K.P)(a)&&G().createElement("div",{id:"detail_content"},G().createElement(y.Z,{loading:!1,total:a[o].length-1,data:s,columns:(v=u-16-40-32-5,[{label:"",width:16}].concat(a[o][0].reduce(function(e,t,n,a){return e.push({label:t,width:v/a.length,render:function(e){e=e[n];return o.includes("aspect1")?5<n||3===n?(100*e).toFixed(n===a.length-1?4:2)+"%":e:o.includes("aspect2")?6<n||4===n?(100*e).toFixed(n===a.length-1?4:2)+"%":e:void 0}}),e},[]),[{label:"",width:16}])),pageSize:f,pageIndex:d,onPageChange:g,onPageSizeChange:function(e){h(e),g(1)}}))))};const X=a;a.propTypes={key:t().string,data:t().any,total:t().number,pageIndex:t().number,pageSize:t().number,loading:t().bool,onPageChange:t().func,onPageSizeChange:t().func,onAspectTypeChange:t().func};var ee=n(2329);const i=function(e){var t=e.cmtData,n=e.cmtAspectType,a=e.cmtAspFlavor,r=e.cmtType,o=e.cmtFlavor,c=e.cmtRangeCheck,i=e.volData,l=e.volAspectType,s=e.volAspFlavor,u=e.volType,p=e.volFlavor,m=e.volRangeCheck,d=e.menData,g=e.menAspectType,f=e.menAspFlavor,h=e.menRangeCheck,v=e.perData,y=e.perAspectType,C=e.perAspFlavor,E=e.perRangeCheck,T=e.aspectData,b=e.pageSize,_=e.pageIndex,N=e.total,S=e.aspectListType,A=e.aspectListTypeFlavor,R=e.onPageChange,k=e.onPageSizeChange,x=e.count,F=e.countLoading,O=e.countSameRateType,w=e.positiveRate,P=e.postiveLoading,I=e.positiveSameRateType,L=e.negativeRate,Z=e.negativeLoading,D=e.negativeSameRateType,z=e.onSetSameRate,M=e.tarRangedNames,j=e.fetchedAspectData,V=e.loading,U=e.analysisModel,W=e.onChartClick,B=e.onFilterChange,H=e.onFlavorChange,e=e.onFilterReady;return G().createElement("div",{className:"yt_compare_product_wrapper"},G().createElement(J.Z,{pageType:"PRODUCT_COMPARE",values:[],onReady:e,onChange:B}),G().createElement("div",{className:"content",id:"detail_content"},G().createElement(q.Z,{orientation:"horizontal",colNumber:4,showList:["count","positive","negative"]},G().createElement(Q.Z,{key:"count",style:{width:"100%",height:"160px"},loading:F,data:(0,K.P)(x)?[{name:"指标声量",count:x.usefulAspectCount,format:"myriad"},{name:(0,ee.kV)(O)+"同比",count:x.sameRate,rise:x.sameRate&&0<x.sameRate,format:"percent"},{name:"环比",count:x.circleRate,rise:x.circleRate&&0<x.circleRate,format:"percent"},{name:"有效评论",count:x.usefulCommentCount,format:"myriad"},{name:"指标提及率",count:x.aspectMentionRate,format:"percent"}]:w,tip:Y.aH,compare:x&&x.sameRateType,onSetting:function(e){return z(e,"USEFUL_ASPECT_COUNT_CARD")}}),G().createElement(Q.Z,{key:"positive",style:{width:"100%",height:"160px"},loading:P,data:(0,K.P)(w)?[{name:"指标好评率",count:w.positiveAspectRate,format:"percent"},{name:(0,ee.kV)(I)+"同比",count:w.sameRate,rise:w.sameRate&&0<w.sameRate,format:"percent"},{name:"环比",count:w.circleRate,rise:w.circleRate&&0<w.circleRate,format:"percent"},{name:"正面声量",count:w.usefulPositiveAspectCount,format:"myriad"},{name:"指标声量",count:w.usefulAspectCount,format:"myriad"}]:w,tip:Y.qR,compare:w&&w.sameRateType,onSetting:function(e){return z(e,"POSITIVE_ASPECT_RATE_CARD")}}),G().createElement(Q.Z,{key:"negative",style:{width:"100%",height:"160px"},loading:Z,data:(0,K.P)(L)?[{name:"指标差评率",count:L.negativeAspectRate,format:"percent"},{name:(0,ee.kV)(D)+"同比",count:L.sameRate,rise:L.sameRate&&0<L.sameRate,format:"percent"},{name:"环比",count:L.circleRate,rise:L.circleRate&&0<L.circleRate,format:"percent"},{name:"负面声量",count:L.usefulNegativeAspectCount,format:"myriad"},{name:"指标声量",count:L.usefulAspectCount,format:"myriad"}]:L,tip:Y.k_,compare:L&&L.sameRateType,onSetting:function(e){return z(e,"NEGATIVE_ASPECT_RATE_CARD")}})),G().createElement(q.Z,{className:"bar_trend_table",orientation:"vertical",showList:["cmt","vol","men","per","detail"]},G().createElement($,{key:"cmt",chartType:"cmt",title:Y.JM.find(function(e){return e.value.includes(r)}).title,titleOverlay:Y.ct,loading:V,data:t,aspectType:n,aspectTypeFlavor:a,volOptions:Y.JM,volType:r,volTypeFlavor:o,onFilterChange:B,onFlavorChange:H,cachedAnalysisObjs:U,onClick:W,rangeChecked:c,rangedNames:M}),G().createElement($,{key:"vol",chartType:"vol",title:Y.BI.find(function(e){return e.value.includes(u)}).title,loading:V,data:i,aspectType:l,aspectTypeFlavor:s,volOptions:Y.BI,volType:u,volTypeFlavor:p,onFilterChange:B,onFlavorChange:H,cachedAnalysisObjs:U,onClick:W,rangeChecked:m,rangedNames:M}),G().createElement($,{key:"men",chartType:"men",title:"指标提及率",titleOverlay:"「指标提及率」是指选中的消息中，指标的声量÷消息数量。",loading:V,data:d,aspectType:g,aspectTypeFlavor:f,onFilterChange:B,onFlavorChange:H,cachedAnalysisObjs:U,onClick:W,rangeChecked:h,rangedNames:M}),G().createElement($,{key:"per",chartType:"per",title:"指标占比",titleOverlay:Y.$j,loading:V,data:v,fetchedData:j,aspectType:y,aspectTypeFlavor:C,onFilterChange:B,onFlavorChange:H,cachedAnalysisObjs:U,rangeChecked:E,rangedNames:M}),G().createElement(X,{key:"detail",title:"详细数据",name:U.length?U[0].values[0].label:"品牌",aspectListType:S,aspectListTypeFlavor:A,total:N,data:T,pageSize:b,pageIndex:_,loading:V,onPageChange:R,onPageSizeChange:k,onFilterChange:B,onFlavorChange:H}))))};var s=n(35239),t=n(55609),n=n(64396),u=n.Z.product.compare,p=n.Z.screening,m=["cmtRangeCheck","volRangeCheck","menRangeCheck","perRangeCheck"],n=function(t){function e(e){var k=t.call(this,e)||this;return k._handleOnFilterReady=function(e){k.props.fetchParams(x()({},e,{projectId:s.t.get(s.V.curProject).id,dateRange:e.dateFilter.numOfDays+Math.random()}))},k._handleOnPageChange=function(e){k.props.save({pageIndex:e})},k._handleOnPageSizeChange=function(e){k.props.save({pageIndex:1,pageSize:e})},k._handleOnChartClick=function(e,t){var n,a,r,o,c,i=e.componentSubType,l=e.componentType,s=e.seriesName,u=e.name,p=e.data,m=e.seriesIndex,d=e.value,g=k.props,f=g.projectId,h=g.dateFilter,v=g.filterModel,y=g.analysisModel,C=g.cmtAspectType,E=g.volAspectType,T=g.menAspectType,b=g.perAspectType,_=g.cmtData,N=g.volData,S=g.menData,A=g.perData,e=(g.aspectData,g.fetchedAspectData),g=g.curScreeningMap,R=y[0].values[0],t=t._model.option.title[0].text,g=g.find(function(e){return"CONFIG"===e.id}).data.find(function(e){return e.id===R.id}).options.filter(function(e){return e.label!==s}).map(function(e){return e.id});if("line"===i&&"series"===l&&(y={projectId:f,leftName:"竞品分析",analyseName:s,type:"EMOTION_ASPECT_LEVEL_BAR",aspect:u,aspectTotal:p[m],dateFilter:h,analysisObjs:g,filterModel:x()({},(0,ee.bF)(v),{analysis:{id:y[0].values[0].id,name:y[0].values[0].label,type:"CONFIG"===y[0].id?"CONN_CONFIG":y[0].id,values:[e.find(function(e){return e.name===s}).id]}})},t.includes("好评")||t.includes("差评")?(y.seriesName=t.includes("好评")?"正面":"负面",y.filterModel.aspect={aspect1:C.includes("aspect1")?[u]:[],aspect2:C.includes("aspect2")?[u]:[],emotion:t.includes("好评")?["positive"]:["negative"]},window.open("/tab/detail?"+encodeURIComponent(JSON.stringify(y)))):(t.includes("正面")||t.includes("负面"))&&(y.seriesName=t.includes("正面")?"正面":"负面",y.filterModel.aspect={aspect1:E.includes("aspect1")?[u]:[],aspect2:E.includes("aspect2")?[u]:[],emotion:t.includes("正面")?["positive"]:["negative"]},window.open("/tab/detail?"+encodeURIComponent(JSON.stringify(y))))),"xAxis"===l){switch(t){case"指标好评率":case"指标差评率":case"NES":n=C,a="cmtAspectType",r=_,o="cmtData";break;case"指标声量":case"指标正面声量":case"指标负面声量":n=E,a="volAspectType",r=N,o="volData";break;case"指标提及率":n=T,a="menAspectType",r=S,o="menData";break;case"指标占比":n=b,a="perAspectType",r=A,o="perData"}n.includes("aspect2")?k.props.save(((c={})[a]="aspect1",c[o]=e,c.tarRangedNames=void 0,c)):k.props.save(((c={})[a]="aspect2",c[o]=r.filter(function(e){return e.aspect1===d}),c.tarRangedNames=void 0,c))}},k._handleOnSetSameRate=function(e,t){k.props.setSameRate({sameRateType:e.compareValue,cartType:t})},k._handleOnFilterChange=function(a){var e=k.props,r=e.save,t=e.fetchAspectData,n=e.fetchCountCard,o=e.fetchPositiveCard,c=e.fetchNegativeCard,i=e.fetchedAspectData;a.filterValue&&(JSON.stringify(a.dateFilter)!==JSON.stringify(k.props.dateFilter)&&r(x()({},a,{dateRange:a.dateFilter.numOfDays+Math.random()})),t(a),n(a),o(a),c(a)),Object.keys(a).forEach(function(e){var t,n;["cmtAspectType","cmtType","volAspectType","volType","menAspectType","perAspectType","aspectListType"].includes(e)?(n="cmtAspectType"===e?"cmtData":"volAspectType"===e?"volData":"menAspectType"===e?"menData":"perAspectType"===e?"perData":"",r(((t={})[e]=a[e],t[n||""]=i,t))):m.includes(e)&&r(x()({},m.reduce(function(e,t){return e[t]=!1,e},{}),a.tarAspectType?["cmtAspectType","volAspectType","menAspectType","perAspectType"].reduce(function(e,t){return e[t]=a.tarAspectType,e},{}):{},a))})},k._handleOnFlavorChange=function(e){k.props.updateFlavors(e)},k.event={onFilterReady:k._handleOnFilterReady,onFilterChange:k._handleOnFilterChange,onFlavorChange:k._handleOnFlavorChange,onPageChange:k._handleOnPageChange,onPageSizeChange:k._handleOnPageSizeChange,onChartClick:k._handleOnChartClick,onSetSameRate:k._handleOnSetSameRate},k}return o()(e,t),e.prototype.render=function(){return G().createElement(i,x()({},this.props,this.state,this.event))},e}(G().PureComponent);const d=(0,t.connect)(function(e){var t=e.loading,e=r()(e,["loading"]);return x()({},e[u],{curScreeningMap:e[p].curScreeningMap,loading:t.effects[u+"/fetchAspectData"]||!1,countLoading:t.effects[u+"/fetchCountCard"]||!1,postiveLoading:t.effects[u+"/fetchPositiveCard"]||!1,negativeLoading:t.effects[u+"/fetchNegativeCard"]||!1})},function(t){return{save:function(e){return t({type:u+"/save",payload:e})},clean:function(){return t({type:u+"/clean"})},fetchParams:function(e){return t({type:u+"/fetchParams",payload:e})},setSameRate:function(e){return t({type:u+"/setSameRate",payload:e})},fetchCountCard:function(e){return t({type:u+"/fetchCountCard",payload:e})},fetchPositiveCard:function(e){return t({type:u+"/fetchPositiveCard",payload:e})},fetchNegativeCard:function(e){return t({type:u+"/fetchNegativeCard",payload:e})},fetchAspectData:function(e){return t({type:u+"/fetchAspectData",payload:e})},updateFlavors:function(e){return t({type:u+"/updateFlavors",payload:e})}}})(n)},25022:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(67294),s=n.n(t),u=n(92360),p=n(35303),t=n(45697),t=n.n(t),m=[{label:"10项/页",value:10},{label:"20项/页",value:20},{label:"40项/页",value:40},{label:"100项/页",value:100}];const a=function(e){var t=e.onPageChange,n=e.onSizeChange,a=e.total,r=void 0===a?0:a,o=e.pageIndex,c=e.pageSize,i=e.layout,l=e.className,a=e.currLength,e=0===r?0:(o-1)*c+1,a=0===r?0:a?e+a-1:e+c-1;return 0===r?null:s().createElement("div",{className:"yt-awp-pagination "+(l||"")},s().createElement("span",{className:"total_num"},s().createElement("span",null,e+" - "+a+" "),"项，共",s().createElement("span",null," "+r+" "),"项"),s().createElement("div",{style:{textAlign:"right",float:"right"},className:"new_pagination"},s().createElement(u.Pagination,{small:!0,pageSize:c,currentPage:o,pageCount:Math.ceil(r/c),layout:0===r?"":"prev, pager, next",onCurrentChange:t}),void 0===i||i.includes("sizes")?s().createElement(p.RS,{multiple:!1,tags:!1,showSearch:!1,optionFilterProp:"label",optionLabelProp:"label",animation:"slide-up",dropdownClassName:"custom-pagination-dropdown",value:c||10,onChange:n},m.map(function(e,t){return s().createElement(p.Wx,{key:t,label:e.label,value:e.value},e.label)})):null))};t().propTypes={onPageChange:t().func,onSizeChange:t().func,total:t().number,pageIndex:t().number,pageSize:t().number,layout:t().string,className:t().string}},71339:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(67294),p=n.n(t),m=n(92360),d=n(25022),t=n(45697),n=n.n(t),t=function(e){var t=e.data,n=e.total,a=void 0===n?0:n,r=e.loading,o=e.pageIndex,c=e.columns,i=e.pageSize,l=e.onPageChange,n=e.onPageSizeChange,s=e.onSortChange,u=e.defaultSort,e=e.className,e=void 0===e?"":e;return p().useEffect(function(){var e=document.getElementsByClassName("is-sortable")[0];u&&e&&e.classList.add(u.order)},[u]),p().createElement("div",{className:"yt-awp-content-list "+e},p().createElement(m.Loading,{loading:r,className:"awp-content-loading"},p().createElement(m.Table,{defaultSort:u,columns:c,style:{width:"100%"},data:t,onSortChange:function(e){return s(e)}})),l&&p().createElement(d.Z,{onPageChange:l,onSizeChange:n,total:a,currLength:t.length,pageIndex:o,pageSize:i}))};t.propTypes={data:n().array,total:n().number,loading:n().bool,pageIndex:n().number,columns:n().array,pageSize:n().number,onPageChange:n().func,onPageSizeChange:n().func,onSortChange:n().func,defaultSort:n().any,className:n().string};const a=t},27310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});function s(e){return e=e.height,u().createElement("div",{style:{background:"#fff",height:e,display:"flex",alignItems:"center",justifyContent:"center"}},"Template")}var t=n(85354),r=n.n(t),t=n(67294),u=n.n(t),t=n(45697),t=n.n(t),c=n(92360),n=function(a){function e(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=a.call.apply(a,[this].concat(t))||this).clientHeight=160,o.notShowList=[],o._handleOnCheckBoxChange=function(e,t){var n,a=o.props,r=a.onChange,a=a.showList;e?(n=a.slice()).push(t):n=a.filter(function(e){return e!==t}),r&&r(n)},o._renderEditableFrame=function(t,e){var n=o.props,a=n.editable,n=n.colNumber,n=void 0===n?1:n;return u().createElement("div",{id:t.key,key:t.key,style:{width:"calc("+100/n+"% - 12px)"},className:a?"child_editable":""},t,a&&u().createElement(c.Checkbox,{checked:e,className:"checkbox_style",onChange:function(e){return o._handleOnCheckBoxChange(e,t.key)}}))},o}r()(e,a);var t=e.prototype;return t.componentDidMount=function(){var e=this.props.children,e=e instanceof Array?e[0]:e,e=document.getElementById(e.key);e&&(this.childHeight=e.clientHeight)},t.render=function(){var o=this,e=this.props,t=e.className,n=void 0===t?"":t,a=e.editable,c=void 0!==a&&a,t=e.orientation,a=void 0===t?"horiziontal":t,t=e.children,e=e.showList,i=void 0===e?[]:e,l=t instanceof Array?t:[t];return this.notShowList=[],u().createElement("div",{className:"yt_drag_layout_wrapper yt_drag_layout_"+a+" "+n},l.reduce(function(e,t,n){var a=i.indexOf(t.key);if(-1<a?e[a]=o._renderEditableFrame(t,!0):o.notShowList.push(t.key),n!==l.length-1)return e;var r=e.filter(function(e){return e});return c&&0<o.notShowList.length&&o.notShowList.forEach(function(e){r.push(o._renderEditableFrame(u().createElement(s,{key:e,height:o.childHeight}),!1))}),r},[]))},e}(u().PureComponent);const a=n;n.propTypes={orientation:t().oneOf(["horizontal","vertical"]),colNumber:t().number,className:t().oneOfType([t().string,t().object]),editable:t().bool,showList:t().arrayOf(t().string),onChange:t().func}},60222:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});function o(e){var t=e.value,n=e.getValue,a=(t=g().useState(t))[0],r=t[1];return g().createElement("div",{className:"yt_modal_dashboard_edit_wrapper"},g().createElement("div",{className:"content_item"},g().createElement("span",null,"同比类型"),g().createElement("span",null,g().createElement(c(),{className:"content_item_select",value:(l.find(function(e){return e.value===a})||{}).label,onChange:function(e){var t;r(t=e),setTimeout(function(){return n&&n(t)},0)},inputIcon:g().createElement("i",{className:"icon-cem_arrow-launches",style:{color:"#8C8C8C"}})},l.map(function(e){return g().createElement(c().Option,{value:e.value,key:e.value},e.label)})))))}var a=n(67154),m=n.n(a),t=n(37316),d=n.n(t),a=n(67294),g=n.n(a),t=n(45697),a=n.n(t),f=n(25713),h=n(43036),t=n(2258),c=n.n(t),i=n(57522),l=[{value:"WEEK",label:"周"},{value:"MONTH",label:"月"},{value:"QUATER",label:"季"},{value:"YEAR",label:"年"}],t=function(r){return new Promise(function(e,t){var n=r.value,a=m()({},r,{titleText:g().createElement("div",{className:"indicator_card_comfirm"},g().createElement("span",null,"同比设置"),g().createElement("span",{onClick:function(){return window.open("https://www.yuque.com/docs/share/5615d490-0056-4bb9-b208-bf747c9048c0")}},"查看更多")),content:g().createElement(o,m()({},r,{getValue:function(e){n=e}}))});a.onOk=function(){return e(n)},a.onCancel=t,(0,i.Z)(a)})};const v=t;t.propTypes={getValue:a().func,value:a().string};function y(e){return!["",null,void 0].includes(e)}function C(e){return e&&(5<e.length?String(e).substring(0,5)+"...":e)}function E(e,t,n){var r,o;"image"===e?(r=t,o=(0,s.UO)(n[0]&&n[0].name),new Promise(function(e){var t=r.offsetWidth,n=r.cloneNode(!0),a=document.createElement("canvas");a.width=12*t,a.height=1920,a.style.width=t+"px",a.style.height="160px",a.className="yt_trend_list_canvas",a.getContext("2d").scale(12,12),n.style.width=t+"px",n.style.height="160px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=-1,n.style.opacity=0,document.body.appendChild(n),u()(n,{allowTaint:!0,taintTest:!1,canvas:a,useCORS:!0,width:t,height:160,onrendered:function(e){document.body.appendChild(e);e=e.toDataURL("png");(0,p.saveAs)(e,o,"image/png"),setTimeout(function(){document.body.removeChild(n),document.body.removeChild(document.querySelector(".yt_trend_list_canvas"))},0)}})})):"data"===e&&(e=[n.reduce(function(e,t){return[].concat(e,[[t.name,t.count]])},[])],(0,s.aT)(e,n[0]&&n[0].name))}var T=n(8201),b=n(39432),s=n(94644),t=n(29531),u=n.n(t),p=n(93162),_=[{title:"导出图片",type:"image"},{title:"导出数据",type:"data"}],N=[{title:"设置同比",type:"compare"}];n=function(e){function a(e){return n&&n[e]?n[e]:{}}function t(e){if(a(e).name){if(y(a(e).count)){var t=a(e).count;switch(a(e).format){case"myriad":t=(0,b.hE)(t);break;case"percent":n=t,t=y(null)?null:0===n?"0.00%":Math.abs(100*n).toFixed(2)+"%"}return t}return"--"}var n;return""}var n=e.data,r=e.tip,o=e.compare,c=e.onSetting,i=e.loading,l=e.paragraph,s=d()(e,["data","tip","compare","onSetting","loading","paragraph"]),e=g().useState(),u=e[0],p=e[1],e=function(e){return"myriad"!==a(e).format?t(e):a(e).count.toLocaleString()};return g().createElement("div",m()({className:"indicator_card"},s,{ref:function(e){return p(e)}}),g().createElement(T.Z,{data:n,className:"section_com",loading:i,paragraph:l},g().createElement("div",{className:"title_wrap"},g().createElement("span",{className:"chart_title"},g().createElement("span",{className:"chart_title_name"},a(0).name,r&&g().createElement(h.Z,{placement:"top",overlayClassName:"alert-log-tips",overlay:r},g().createElement("i",{className:"icon-cem_file1","data-html2canvas-ignore":!0})))),g().createElement("span",{className:"chart_title_buttons","data-html2canvas-ignore":!0},g().createElement(f.Z,{onClick:function(e){"compare"===e?v({value:o}).then(function(e){c({compareValue:e})}):E(e,u,n)},options:_.concat(c?N:[])}))),g().createElement("div",{className:"section_mid"},g().createElement("p",null,g().createElement(h.Z,{placement:"top",overlay:e(0)},g().createElement("section",null,t(0)))),a(1).name||a(2).name?g().createElement("p",null,g().createElement("span",null,g().createElement("span",null,g().createElement(h.Z,{placement:"top",overlay:a(1).name},g().createElement("section",{className:"name"},a(1).name))),g().createElement("span",null,g().createElement(h.Z,{placement:"top",overlay:e(1)},g().createElement("section",null,t(1))),"boolean"==typeof a(1).rise&&g().createElement("i",{className:a(1).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"}))),g().createElement("span",null,g().createElement("span",null,g().createElement(h.Z,{placement:"top",overlay:a(2).name},g().createElement("section",{className:"name"},a(2).name))),g().createElement("span",null,g().createElement(h.Z,{placement:"top",overlay:e(2)},g().createElement("section",null,t(2))),"boolean"==typeof a(2).rise&&g().createElement("i",{className:a(2).rise?"icon-cem_three-states-up":"icon-cem_three-states-down"})))):null),(a(3).name||a(4).name)&&g().createElement("div",{className:"section_bottom"},g().createElement("span",null,g().createElement("span",null,g().createElement(h.Z,{placement:"top",overlay:a(3).name},g().createElement("section",{className:"name"},C(a(3).name)))),g().createElement("span",null,g().createElement(h.Z,{placement:"top",overlay:e(3)},g().createElement("section",null,t(3))))),a(4).name?g().createElement("span",null,g().createElement("span",null,g().createElement(h.Z,{placement:"top",overlay:a(4).name},g().createElement("section",{className:"name"},C(a(4).name)))),g().createElement("span",null,g().createElement(h.Z,{placement:"top",overlay:e(4)},g().createElement("section",null,t(4))))):null)))};const r=n;n.propTypes={data:a().arrayOf(a().shape({name:a().string,count:a().oneOfType([a().string,a().number]),rise:a().bool,format:a().oneOfType(["myriad","percent",void 0])})),tip:a().oneOfType([a().string,a().node]),compare:a().string,onSetting:a().func,loading:a().bool,paragraph:a().arrayOf(a().string)}}}]);