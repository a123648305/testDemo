(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[2707],{2786:(e,t,a)=>{"use strict";a.d(t,{X_:()=>r});var t=a(30381),u=a.n(t),n=a(87219);function d(e,t){var a,n=JSON.parse(JSON.stringify(e)),r=e.quickChoice,o=e.from,i=e.to,e=u()().format("YYYY-MM-DD HH:mm:ss").split(" ")[1];return"近24小时"===r?1===t?(a=o.split(" ").map(function(e){return e.trim()}),n.from=u()(a[0]).format("YYYY-MM-DD")+" "+e,n.to=""+u()(a[0]).endOf("day").format("YYYY-MM-DD HH:mm:ss")):(a=i.split(" ").map(function(e){return e.trim()}),n.from=""+u()(a[0]).startOf("day").format("YYYY-MM-DD"),n.to=u()(a[0]).format("YYYY-MM-DD")+" "+e):/小时/.test(r)&&(r=o.split(" ").map(function(e){return e.trim()}),1===t?(n.from=o,n.to=u()(r[0]).format("YYYY-MM-DD")+" "+u()(o).hour()+":59:59"):(n.from=""+u()(r[0]).startOf("day").format("YYYY-MM-DD HH:mm:ss"),n.to=i)),n}var r=function(e,o,i,l,s,t){o.quickChoice;var c=o.numOfDays,p=/:/.test(o.quickChoice)||-1===o.quickChoice.indexOf("-");return"line"===e&&l instanceof Array&&0<l.length?(0,n.ZP)(o,function(e){var t,a=function(e,t,a){var n=a?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";switch(t){case"HOUR":return{from:u()(e).format("YYYY-MM-DD HH:00:00"),to:u()(e).format("YYYY-MM-DD HH:59:59")};case"YEAR":var r=u()(e);return{from:r.startOf("year").format(n),to:r.endOf("year").format(n)};case"QUARTER":var o=e.split("-"),o=u()().year(o[0]).quarter(o[1]);return{from:o.startOf("quarter").format(n),to:o.endOf("quarter").format(n)};case"MONTH":var i=u()(e);return{from:i.startOf("month").format(n),to:i.endOf("month").format(n)};case"WEEK":o=e.split("-"),i=o[0],o=o[1],o=u()().year(i).week(o);return{from:o.startOf("week").format(n),to:o.endOf("week").format(n)};case"DAY":default:return{from:e,to:e}}}(i,s,p),n=a.from,r=a.to;"DAY"!==s&&"HOUR"!==s?JSON.stringify(i)===JSON.stringify(l[0])?n=e.from:JSON.stringify(i)===JSON.stringify(l[l.length-1])&&(r=e.to):"DAY"!==s&&"HOUR"!==s||1!==c&&2!==c||(JSON.stringify(i)===JSON.stringify(l[0])?(n=d(o,1).from,r=d(o,1).to):JSON.stringify(i)===JSON.stringify(l[l.length-1])&&(r=d(o,2).to,n=d(o,2).from)),e.from=n,e.to=r,e.numOfDays=(t=r,a=n,t=Date.parse(r),a=Date.parse(a),a=Math.abs(t-a),Math.floor(a/864e5)+1),e.quickChoice=n.replaceAll("-",".")+" - "+r.replaceAll("-",".")}):o}},67133:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});a(43378);function c(e){var t=0;e.forEach(function(e){e=parseFloat(e.count);t<e&&(t=e)});for(var t=Math.ceil(t),a=0;a<4;a++)t%4!=0&&t++;return{intVal:(t=0===t?4:t)/4,maxVal:t}}var l=a(62443),t=a(85354),r=a.n(t),t=a(67294),s=a.n(t),p=a(39432),u=a(87300),t=(a(70715),function(n){function e(){for(var s,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(s=n.call.apply(n,[this].concat(t))||this).chartRef=void 0,s.source=void 0,s.datasetIndex=-1,s.getChartRef=function(e){return s.chartRef=e},s.getOption=function(e,i,t,a,n,r,l){s.datasetIndex=0;var o=s.chartRef.getWidth(),o=1<(0,p.jD)(e.map(function(e){return e.name}).join(""),12)/(.5*o);return{title:{text:i},tooltip:{trigger:"item",showDelay:20,hideDelay:55,confine:!0,enterable:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",formatter:function(e,t,a){var n=e.marker,r=e.name,o=e.value;return setTimeout(function(){a(t,(0,u.r)("                \n                <span>"+r+"<span style='position:absolute;width:30px;height:250px;top:-50px;left:-36px;'></span>\n                <span style='position:absolute;width:30px;height:250px;top:-50px;right:-38px;'></span>\n            <br/></span>",["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+n+"</span>标签数量</div><div style='color: #262626;margin-left: 10px;'>"+(0,p.hE)(o)+"</div></div>"],[{title:"消息",icon:"icon-cem_jump-message",callback:function(){return l(e,i)}}],"yt_new_tooltip_wrapper"))},0)}},grid:{top:60,left:36,right:36,bottom:56,containLabel:!0},dataZoom:{show:!0,bottom:24,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)",start:n,end:r},xAxis:{type:"category",boundaryGap:[0,.01],triggerEvent:!0,data:e.map(function(e){return e.name}),nameTextStyle:{color:"#626262"},axisLabel:{interval:0,rotate:o&&a?45:0}},yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return(0,p.hE)(e)}},interval:c(e).intVal,max:c(e).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},series:[{type:"bar",barMaxWidth:24,data:e.map(function(e,t){return{name:e.name,value:e.count,itemStyle:{color:"#1890ff"}}}),label:{show:t,position:"top",color:"#262626"}}]}},s}return r()(e,n),e.prototype.renderChart=function(e,t,a,n,r,o,i){this.chartRef.clear(),this.chartRef.setOption(this.getOption(e,t,a,n,r,o,i))},e}(s().PureComponent)),d=a(8201),h=a(98191),f=a(50976),n=a(94644);const o=function(i){function e(e){var o=i.call(this,e)||this;return o.resizeListener=function(){var e;o.chartRef&&(0,d.P)(o.props.data)&&(e=o.chartRef.getWidth(),1<(0,p.jD)(o.props.data.map(function(e){return e}).join(""),12)/(.6*e)&&o.setState({dragEnd:!0}))},o.onExportImage=function(){o.chartRef&&(0,n._v)(o.chartRef,o.props.title)},o.onExportExcel=function(){var e=o.props.data,t=e.map(function(e){return[e.name,e.count]});(0,d.P)(e)&&(t=[].concat([["标签","标签数量"]],t),(0,n.aT)([t],o.props.title))},o.onDataZoom=function(e){var t,a,n=e.start,r=e.end;"datazoom"===e.type&&o.chartRef&&(0,d.P)(o.props.data)&&(t=o.chartRef.getWidth(),o.timer&&clearTimeout(o.timer),a=100<o.props.data.length?73:40,o.timer=setTimeout(function(){t/a<=r-n?o.setState({dragEnd:!0,start:n,end:r}):o.setState({dragEnd:!1,start:n,end:r})},200))},o._handleOnJumpMsg=function(e,t){o.props.onMsgClick(e,t)},o.titleOverlay=function(){var e=o.props.tips;return s().createElement("div",{className:"yt_product_aspectTrend_trendOverlay"},e)},o.state={showLabel:!0,dragEnd:!1,start:0,end:54},o}r()(e,i);var t=e.prototype;return t.componentDidMount=function(){var n=this;this.renderChart(),this.internalId=setInterval(function(){var e,t,a;n.chartRef&&(clearInterval(n.internalId),n.renderChart(),t=(e=n.chartRef._dom.children)[0],a=e[1],t.addEventListener("mouseleave",function(e){n.chartLeaveTimeout=setTimeout(function(){n.chartLeaveTimeout&&(a.style.display="none")},2e3)}),a&&a.addEventListener("mouseenter",function(e){n.chartLeaveTimeout=void 0}))},200),window.addEventListener("resize",this.resizeListener)},t.componentDidUpdate=function(e,t){var a=e.data,n=this.props.data,r=t.showLabel,o=t.dragEnd,i=t.start,l=t.end,s=this.state,c=s.showLabel,e=s.dragEnd,t=s.start,s=s.end;JSON.stringify(a)!==JSON.stringify(n)&&(0,d.P)(n)&&(this.renderChart(),this.setState({start:0,end:15<n.length?Math.floor(15/n.length*100)-.93:100})),r!==c&&this.renderChart(),o===e&&i===t&&l===s||(this.setState({dragEnd:e,start:t,end:s}),this.renderChart()),!(0,d.P)(n)&&this.chartRef&&(this.chartRef=void 0)},t.componentWillUnmount=function(){window.removeEventListener("resize",this.resizeListener)},t.renderChart=function(){var e=this.props,t=e.title,a=e.data,n=this.state,r=n.showLabel,o=n.dragEnd,e=n.start,n=n.end;(0,d.P)(a)&&this.chartRef&&i.prototype.renderChart.call(this,a,t,r,o,e,n,this._handleOnJumpMsg)},t.render=function(){var e=this,t=this.props,a=t.data,n=t.loading,r=t.title,t=this.state,o=t.showLabel;t.dragEnd;return s().createElement(d.Z,{className:"yt_explore_com_bar_chart",data:a,loading:n,renderTitle:s().createElement(h.Z,{title:r,data:a,titleOverlay:this.titleOverlay()},s().createElement("div",{className:"icon_zone"},s().createElement("div",{className:"icon"},s().createElement(l.default,{placement:"top",content:"显示图表标签",mouseEnterDelay:.6},s().createElement("i",{className:"icon-tubiaobiaoqian "+(o?"active":""),onClick:function(){e.setState({showLabel:!o})}}))),s().createElement("div",{className:"icon"},s().createElement(l.default,{placement:"top",content:"导出数据",mouseEnterDelay:.6},s().createElement("i",{className:"icon-daochu",onClick:this.onExportExcel}))),s().createElement("div",{className:"icon"},s().createElement(l.default,{placement:"top",content:"导出图片",mouseEnterDelay:.6},s().createElement("i",{className:"icon-xiazaitupian",onClick:this.onExportImage})))))},s().createElement(f.Z,{onChartReady:this.getChartRef,theme:"yt_multi_color_10",option:{},style:{width:"100%",height:"100%"},onEvents:{datazoom:this.onDataZoom}}))},e}(t)},89604:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});a(56120);var f=a(74253),m=(a(35797),a(64749)),n=a(67294),y=a.n(n),d=(a(43378),a(62443)),t=a(85354),r=a.n(t),g=a(8201),v=a(98191),h=a(60496),p=a(39432),u=a(70715),x=a(87300),i=a(94644),b=a(81408);function C(e,t){var a=["日期",t],t=e.map(function(e){return[e.name,e.count]});return{length:e.length,datasets:{dimensions:a,source:t}}}function E(e,t,a,n){a=a.data,"image"===t?(0,i._v)(e,n):"data"===t&&(a=[(a=C(a,n).datasets).dimensions].concat(a.source),(0,i.aT)([a],n))}var n=a(45697),t=a.n(n),w=a(50976),n=function(t){function e(e){var i=t.call(this,e)||this;return i.renderChart=function(){var l,s,c,a,e=i.props,t=e.data,n=e.title,r=e.alzTimeType,o=e.onMsgClick,e=i.state.showLabel;(0,g.P)(t)&&i.chartRef&&(t=t,l=n,s=r,i.chartRef.getWidth(),c=o,a=e,e=t.total,t=C(t.data,l).datasets.source,t={title:{text:l},tooltip:{trigger:"axis",showDelay:20,hideDelay:50,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n      box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,a,n,r){var o=r.contentSize,i=r.viewSize,l=e[0]<i[0]/2?0:-1,r=e[1]<i[1]/2?-.5:-1,i=e[0]<i[0]/2?16:-16;return[e[0]+l*o[0]+i,e[1]+r*o[1]]},formatter:function(e,t,a){if(e.length){var n=e[0],r=n.marker,o=(n.seriesName,n.name),i=n.value;return setTimeout(function(){a(t,(0,x.r)(""+(0,p.Sn)(s,o),["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+r+"</span>标签数量</div><div style='color: #262626;margin-left: 10px;'>\n                  "+(0,p.hE)(i)+"\n                </div></div>"],[{title:"消息",icon:"icon-cem_jump-message",callback:function(){return c(e[0],l,"trend")}}],"yt_new_tooltip_wrapper"))},0)}}},grid:{top:100,left:36,right:48,bottom:24,containLabel:!0},graphic:{type:"group",left:40,top:52,silent:!0,children:[{type:"text",style:{text:""+(0,p.hE)(e),fill:"#262620",font:"500 24px "+u.I8}}]},dataZoom:{show:!1,bottom:24,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"},xAxis:{type:"category",boundaryGap:!1,axisPointer:{type:"line",label:{show:!1}},data:t.map(function(e){return(0,p.Sn)(s,e[0])})},yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return(0,p.hE)(e)}},interval:(0,b.lQ)(t).intVal,max:(0,b.lQ)(t).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},series:[{type:"line",name:"标签数量",data:t.map(function(e,t){return{name:e[0],value:e[1],symbol:"circle",symbolSize:1,label:{show:a,position:"top",color:"#8C8C8C"}}})}]},i.chartRef.clear(),i.chartRef.setOption(t))},i.getChartRef=function(e){return i.chartRef=e},i.state={showLabel:!1},i}r()(e,t);var a=e.prototype;return a.componentDidMount=function(){var n=this;this.internalId=setInterval(function(){var e,t,a;n.chartRef&&(clearInterval(n.internalId),n.renderChart(),t=(e=n.chartRef._dom.children)[0],a=e[1],t.addEventListener("mouseleave",function(e){n.chartLeaveTimeout=setTimeout(function(){n.chartLeaveTimeout&&(a.style.display="none")},2e3)}),a&&a.addEventListener("mouseenter",function(e){n.chartLeaveTimeout=void 0}))},200)},a.componentDidUpdate=function(e,t){var a=e.data,n=this.props.data,e=t.showLabel,t=this.state.showLabel;(0,g.P)(n)&&JSON.stringify(a)!==JSON.stringify(n)&&this.renderChart(),e!==t&&this.renderChart(),!(0,g.P)(n)&&this.chartRef&&(this.chartRef=void 0)},a.render=function(){var e=this,t=this.props,a=t.className,n=t.title,r=t.data,o=t.loading,i=t.timeOptions,l=t.alzTimeType,s=t.alzFTimeType,c=t.onFilterChange,p=t.onFlavorChange,u=this.state.showLabel;return y().createElement(g.Z,{data:r,loading:o,className:"product_scene_line_chart_wrap "+a,renderTitle:y().createElement(v.Z,{title:n,data:r},y().createElement(h.Z,{options:i,activeObj:l,flavor:s,rightHook:!0,onChange:function(e){return c({alzTimeType:e})},onFlavorChange:function(e){return p({alzFTimeType:e})}}),y().createElement(d.default,{placement:"top",content:"显示图表标签",mouseEnterDelay:.6},y().createElement("i",{className:"icon-tubiaobiaoqian "+(u?"active":""),onClick:function(){e.setState({showLabel:!u})}})),y().createElement(d.default,{placement:"top",content:"导出数据",mouseEnterDelay:.6},y().createElement("i",{className:"icon-daochu",onClick:function(){return E(e.chartRef,"data",r,n)}})),y().createElement(d.default,{placement:"top",content:"导出图片",mouseEnterDelay:.6},y().createElement("i",{className:"icon-xiazaitupian",onClick:function(){return E(e.chartRef,"image",r,n)}})))},y().createElement(w.Z,{theme:"yt_compare_primary",className:"yt_echarts_style",option:{},style:{width:"100%",height:"100%"},onChartReady:this.getChartRef}))},e}(y().Component);const T=n;n.propsType={className:t().string,title:t().string,data:t().any,loading:t().bool,onFilterChange:t().func,timeOptions:t().arrayOf(t().shape({title:t().string,value:t().string})),timeType:t().string,fTimeType:t().string,onFlavorChange:t().func};function c(e){var t=0;e.forEach(function(e){e=e.slice(4,5),e=parseFloat(e);t<e&&(t=e)});for(var t=Math.ceil(t),a=0;a<4;a++)t%4!=0&&t++;return{intVal:(t=0===t?4:t)/4,maxVal:t}}var O=["性别","年龄段","角色与关系","使用场合","用途","购买决策","代言人"],n=function(n){function e(){for(var s,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(s=n.call.apply(n,[this].concat(t))||this).source=void 0,s.chartRef=void 0,s.clusterData=void 0,s.globalCata=void 0,s.categories=void 0,s.arrTmp=void 0,s.getChartRef=function(e){return s.chartRef=e},s.setValue=function(e){var t=["场景","标签","总提及数量","标签数量","关联标签数量","关联数","置信度","提升度"];s.clusterData=[t];var n=[],e=e.reduce(function(e,t){var a=[t.sceneName,t.key,t.messageCount,t.aspectCount,t.relTotal,t.total,t.trustRate,t.upRate];return e[t.sceneName]||(e[t.sceneName]=[]),e[t.sceneName].push(a),n.push(a),e},{});s.categories=Object.keys(e),s.arrTmp=s.categories,Object.values(e).forEach(function(e){e.sort(function(e,t){return t[4]-e[4]}).forEach(function(e){s.clusterData.push(e)})}),s.globalCata=n.sort(function(e,t){return t[4]-e[4]}),s.globalCata.splice(0,0,t)},s.handleOnClick=function(t,e,a){-1===s.arrTmp.findIndex(function(e){return t===e})?s.arrTmp.push(t):s.arrTmp=s.arrTmp.filter(function(e){return t!==e}),s.source=s.clusterData.slice(1).filter(function(e){return s.arrTmp.includes(e[0])}),s.source.unshift(s.clusterData[0]),s.updateChart(e,"cluster","",a)},s.getOptions=function(i,e,o){var l=s.arrTmp.map(function(e,t){e=O.indexOf(e);return u.OW[-1<e?e:t]}),t=s.categories.reduce(function(e,t,a,n){var r="";n.slice(0,a).map(function(e){return r+=e});n=(0,p.jD)(r,12)+48*a,a={type:"circle",left:n,top:.5,shape:{cx:5,cy:4,r:5},style:{fill:s.arrTmp.includes(t)?l[s.arrTmp.findIndex(function(e){return e===t})]:"#bfbfbf"},onclick:function(){return s.handleOnClick(t,i,o)}},n={type:"text",left:n+16,style:{text:t,fill:"#8C8C8C",font:"400 12px "+u.I8},onclick:function(){return s.handleOnClick(t,i,o)}};return e.push(a,n),e},[]);return{title:{text:i},dataset:[{source:s.source}],grid:{top:86,bottom:52,left:36,right:48,containLabel:!0},graphic:[{type:"group",top:48,left:36,silent:!1,children:t}],visualMap:[{show:!1,type:"piecewise",top:46,left:20,itemWidth:10,itemHeight:10,orient:"horizontal",dimension:0,categories:s.arrTmp,inRange:{symbol:"circle",color:l}}],dataZoom:{show:!0,bottom:24,xAxisIndex:0,height:20,handleSize:"100%",showDetail:!1,borderColor:"transparent",dataBackground:{lineStyle:{color:"rgba(231, 243, 255, 1)",opacity:1},areaStyle:{color:"rgba(231, 243, 255, 1)",opacity:1}},fillerColor:"rgba(114, 98, 253, 0.3)",handleIcon:"path://M249.376256 0m102.4 0l0 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l0 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z",handleColor:"rgba(114, 98, 253, 1)"},tooltip:{showDelay:20,hideDelay:50,enterable:!0,confine:!0,padding:0,backgroundColor:"#ffffff",borderColor:"#e5e5e5",borderWidth:"1",extraCssText:"border-radius: 2px;\n        box-shadow: 0px 9px 28px 8px rgba(0,0,0,0.05), 0px 6px 16px 0px rgba(0,0,0,0.08), 0px 3px 6px -4px rgba(0,0,0,0.12)",position:function(e,t,a,n,r){var o=r.contentSize,i=r.viewSize,l=e[0]<i[0]/2?0:-1,r=e[1]<i[1]/2?-.5:-1,i=e[0]<i[0]/2?16:-16;return[e[0]+l*o[0]+i,e[1]+r*o[1]]},formatter:function(n,r,o){return setTimeout(function(){var e=n.marker,t=n.data,a=t[1].split(":")[1];o(r,(0,x.r)(""+t[0],["<div style='display: flex;justify-content: space-between;align-items: center;color: #8c8c8c;'><div><span style='vertical-align: bottom'>"+e+"</span>"+a+"</div><div style='color: #262626;margin-left: 10px;'>\n                    "+(0,p.hE)(t[4])+"\n                  </div></div>"],[{title:"消息",icon:"icon-cem_jump-message",callback:function(){return s.handleOnMsgClick(n,i)}}],"yt_new_tooltip_wrapper"))},0)}},xAxis:{type:"category",axisLabel:{formatter:function(e){return e.split(":")[1]}}},yAxis:{type:"value",axisLabel:{color:"#626262",formatter:function(e){return(0,p.hE)(e)}},interval:c(s.source.slice(1)).intVal,max:c(s.source.slice(1)).maxVal,axisLine:{show:!1,lineStyle:{type:"dashed",color:"#e5e5e5"}},splitLine:{show:!0,lineStyle:{color:["#e5e5e5"],width:1,type:"dashed"}}},series:[{type:"bar",barMaxWidth:24,encode:{x:1,y:4},label:{show:o,position:"top",color:"#8C8C8C"}}]}},s}r()(e,n);var t=e.prototype;return t.renderChart=function(e,t,a,n,r){this.setValue(e),this.source=this.clusterData,this.updateChart(t,a,n,r)},t.updateChart=function(e,t,a,n){this.chartRef.clear(),this.chartRef.setOption(this.getOptions(e,a,n))},e}(y().Component),n=(a(33798),a(61409),function(o){function e(e){var n=o.call(this,e)||this;return n.handleOnMoreClick=function(e){var t=n.props,a=t.title,t=t.data;"image"===e&&n.chartRef?(0,i._v)(n.chartRef,a):"data"===e&&(0,g.P)(t)&&(0,i.aT)([n.source.map(function(e,t){return 0===t?[e[0],e[1],e[4]]:[e[0],e[1].split(":")[1],e[4]]})],a)},n.handleOnMsgClick=function(e,t){n.props.onMsgClick(e,t,"aspect")},n.state={rangeType:"cluster",showLabel:!0},n}r()(e,o);var t=e.prototype;return t.componentDidMount=function(){var n=this;this.internalId=setInterval(function(){var e,t,a;n.chartRef&&(clearInterval(n.internalId),n.renderChart(),t=(e=n.chartRef._dom.children)[0],a=e[1],t.addEventListener("mouseleave",function(e){n.chartLeaveTimeout=setTimeout(function(){n.chartLeaveTimeout&&(a.style.display="none")},2e3)}),a&&a.addEventListener("mouseenter",function(e){n.chartLeaveTimeout=void 0}))},200)},t.componentDidUpdate=function(e,t){var a=e.data,n=this.props.data,r=t.rangeType,e=this.state.rangeType;t.showLabel!==this.state.showLabel&&this.renderChart(),(0,g.P)(n)&&JSON.stringify(a)!==JSON.stringify(n)&&this.renderChart(),!(0,g.P)(n)&&this.chartRef&&(this.chartRef=void 0),r!==e&&this.chartRef&&o.prototype.updateChart.call(this,this.props.title,e)},t.renderChart=function(){var e=this.props,t=e.data,a=e.title,n=e.aspectName,r=this.state,e=r.rangeType,r=r.showLabel;(0,g.P)(t)&&this.chartRef&&o.prototype.renderChart.call(this,t,a,e,n,r)},t.render=function(){var e=this,t=this.state,a=(t.rangeType,t.showLabel),n=this.props,r=n.data,t=n.loading,n=n.title;return y().createElement(g.Z,{className:"yt_scene_bar_chart_wrapper",data:r,loading:t,renderTitle:y().createElement(v.Z,{title:n,data:r,titleOverlay:y().createElement("div",null,y().createElement("p",null,"展示一个消息中共同提及的其他场景标签统计。"),y().createElement("p",null,"例如，消息中提到「第二次买给父亲使用」，那么「购买决策」的场景标签为「复购」，共同提及的「角色与关系」的场景标签为「父亲」。"))},y().createElement(d.default,{placement:"top",content:"显示图表标签",mouseEnterDelay:.6},y().createElement("i",{className:"icon-tubiaobiaoqian "+(a?"active":""),onClick:function(){e.setState({showLabel:!a})}})),y().createElement(d.default,{placement:"top",content:"导出数据",mouseEnterDelay:.6},y().createElement("i",{className:"icon-daochu",onClick:function(){return e.handleOnMoreClick("data")}})),y().createElement(d.default,{placement:"top",content:"导出图片",mouseEnterDelay:.6},y().createElement("i",{className:"icon-xiazaitupian",onClick:function(){return e.handleOnMoreClick("image")}})))},y().createElement(w.Z,{onChartReady:this.getChartRef,theme:"yt_multi_color_10",option:{},style:{height:"100%"},onEvents:{click:this.handleOnChartClick}}))},e}(n));const D=n;n.propTypes={data:t().any,loading:t().bool,title:t().string,aspectName:t().string};var _=m.default.Option;const o=function(e){e.target;var t=e.aspectName,a=(e.topicName,e.onMsgClick),n=e.onFilterChange,r=e.onFlavorChange,o=e.analyzeLineData,i=e.analyzeBarData,l=e.fetchingAnalyzeLineData,s=e.fetchingAnalyzeBarData,c=e.alzTimeType,p=e.alzFTimeType,u=e.timeOptions,d=(e.data,e.loading),h=void 0!==d&&d,d=e.alzOptions,e=e.alzName;return y().createElement(g.Z,{data:o&&i,loading:h,className:"yt_explore_scene_singleAnalysis_wrap",renderTitle:y().createElement(v.Z,{title:"单个场景标签相关分析"},y().createElement(m.default,{value:e,style:{width:200},dropdownClassName:"explore_scene_select_dropdown",onChange:function(e){return n({alzName:e})},showSearch:!0,getPopupContainer:function(){return document.querySelector(".yt_explore_scene_singleAnalysis_wrap")}},d&&d.map(function(e){return y().createElement(_,{key:e.name},e.name)})))},y().createElement("div",{className:"analyze_content"},y().createElement(T,{title:"标签数量",data:o,timeOptions:u,alzTimeType:c,alzFTimeType:p,loading:l,onMsgClick:a,onFilterChange:n,onFlavorChange:r}),y().createElement(f.Z,null),y().createElement(D,{title:"共同提及的其他场景标签",data:i instanceof Array&&0===i.length?"empty":i,loading:s,onMsgClick:a,aspectName:t})))}}}]);