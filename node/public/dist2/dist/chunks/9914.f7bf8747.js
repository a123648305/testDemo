(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9914],{76180:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a=n.p+"html-459a43"},78436:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var t=a(85354),r=a.n(t),t=a(67294),i=a.n(t),o=a(94644),n=function(e){function t(){var i=e.call(this)||this;return i.isEmpty=!0,i.group=function(e){i.myChart.group=e,i.echarts.connect(e)},i.refreshChart=function(e){i.setState(e)},i.setWidth=function(e){i.refs.chart.style.width=e,i.init()},i.loading=function(){i.myChart.clear(),i.myChart.showLoading({text:"拼命加载中",color:"#20a0ff",maskColor:"rgba(255, 255, 255, 0.9)",zlevel:0})},i.setOption=function(e){if(e.textStyle={fontFamily:"'PingFang SC','Microsoft Yahei', 'Helvetica Neue', Helvetica, Tahoma, Arial, 'Hiragino Sans GB', 'WenQuanYi Micro Hei', sans-serif"},e.legend&&(e.legend.data=e.legend.data.map(function(e){return{name:e,icon:"circle"}}),e.legend.itemWidth=10,e.legend.itemHeight=10),e.tooltip&&!e.tooltip.extraCssText?(e.tooltip.backgroundColor="rgba(255,255,255,0.9)",e.tooltip.textStyle={color:"#262626"},e.tooltip.extraCssText="box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);"):e.tooltip&&(e.tooltip=e.tooltip),e.series.forEach(function(e){"line"===e.type&&(e.showAllSymbol=!0,e.symbol="circle",e.symbolSize=2,e.itemStyle={normal:{borderColor:"rgba(255,255,255,0)",borderWidth:5}})}),e.hoverLayerThreshold=500,e.progressiveThreshold=500,e.animationThreshold=500,i.myChart){var t;i.myChart.clear(),i.myChart.hideLoading();for(var n=arguments.length,a=new Array(1<n?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];(t=i.myChart).setOption.apply(t,[e].concat(a)),i.isEmpty=!1}},i.setEmptyOption=function(e){var t=i.myChart.getHeight(),n=i.myChart.getWidth(),n=Math.min(t/2,n/2,20),n={type:"pie",radius:[0,0],center:["50%","50%"],silent:!0,data:[{value:0,name:"",label:{normal:{show:!0,position:"center",backgroundColor:{image:a(76180)},padding:n,formatter:function(){return""}}}},{value:0,name:"",label:{normal:{show:!0,position:"center",formatter:function(){return"{a|\n}{b|"+e+"}"},rich:{a:{height:n+60},b:{fontSize:20,color:"#999"}}}}}]};i.myChart&&(i.myChart.clear(),i.myChart.hideLoading(),i.myChart.setOption({series:n,animation:!1},!0),i.isEmpty=!0)},i.init=function(){i.echarts.getInstanceByDom(i.refs.chart)&&i.echarts.dispose(i.refs.chart);var e=i.echarts.init(i.refs.chart);i.myChart=e,i.props.myChartClick&&e.on("click",function(e){i.isEmpty||i.props.myChartClick(e)}),i.props.dataZoomChange&&e.on("dataZoom",function(e){i.isEmpty||i.props.dataZoomChange(e)})},i.downloadExcel=function(e,t){(0,o.aT)([[t].concat(e)],"")},i.echarts=a(70596),i}r()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.init()},n.componentWillUnmount=function(){this.myChart.dispose()},n.render=function(){var e=this.props.minHeight,e=Object.assign({},e?{minHeight:e}:{});return i().createElement("div",{ref:"chart",className:"widget-chart",style:e})},t}(t.Component)},49914:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var t=n(67154),S=n.n(t),t=n(85354),r=n.n(t),x=n(67294),N=n.n(x),w=n(92360),d=n(36144),c=n(29383),l=n(84267),o=n(35239),T=function(t){function e(e){var i=t.call(this,e)||this;return i.getConfigList=function(){var n=S()({},i.state),a=i.state.columns,r=[];d.h.post("/projects/config/list",[i.projectId]).then(function(e){e.data.result.filter(function(t){return 0===n.columns.filter(function(e){return e.label===t.configName}).length}).map(function(e,t){var n=0<=[0,1,2].indexOf(t),t={},t={label:e.configName,prop:e.id,checked:n,minWidth:"商品名称"===e.configName?"150":"60"};r.push(t)});var t=[],e=a.slice(0),t=i.props.showSelectColumns?(e.splice.apply(e,[1,0].concat(r)),i.refs.SelectableColumns?i.refs.SelectableColumns.competeSelectMenuItem(e):null===o.t.get(o.V.storageColumns)||""===o.t.get(o.V.storageColumns)?e:JSON.parse(o.t.get(o.V.storageColumns)).price_check):e;i.setState(S()({},n,{selectMenuItem:t}))})},i.getShowColumns=function(e){i.setState({selectMenuItem:e})},i.open=function(t){var e=i.state.data;e.forEach(function(e){e.openId===t.openId&&(e.open=!0)}),i.setState({data:e})},i.onExpand=function(t,e){var n=i.state.data;n.forEach(function(e){e.openId===t.openId&&(e.open=!1)}),i.setState({data:n})},i.state={selectMenuItem:[],defaultColumns:[],expandPannel:[{type:"expand",expandPannel:function(n){return N().createElement("div",{className:"expandPannel-wrapper"},n?N().createElement("div",null,N().createElement("div",null,N().createElement("a",{href:n.url,target:"_blank"},N().createElement("img",{src:n.image,alt:""}))),N().createElement("div",null,N().createElement("div",{className:"title"},n.title),n.slogan&&N().createElement("div",{className:"slogan"},n.slogan),N().createElement("p",{className:"price"},N().createElement("span",null,N().createElement("i",null,"挂牌价"),N().createElement("span",null,-1===n.listPrice?"已下架":n.listPrice)),N().createElement("span",null,N().createElement("i",null,"最低到手价"),N().createElement("span",null,-1===n.takePrice?"已下架":n.minPrice))),N().createElement("p",{className:"info"},"促销信息"),""!==n.rate[0]?N().createElement("div",{className:"rateMessage"},0<n.rate.length&&n.rate.map(function(e,t){e=e.split(":&:");return N().createElement("div",{style:{float:n.open||1===n.rate.length?"":"left"},key:t},N().createElement("span",null,e[0]),(n.open||1===n.rate.length)&&N().createElement("span",null,e[1]))}),!n.open&&1<n.rate.length&&N().createElement("div",{className:"open",onClick:function(e){return i.open(n)}},"展开促销 ",N().createElement("i",{className:"icon-cem_pull-down-or-take-up "})," ")):N().createElement("div",{style:{color:"#262626",fontSize:"12px"}},"无促销信息"))):N().createElement("div",{className:"no-data"},"暂无数据"))}}],columns:e.columns,pageSize:20,pageIndex:1},i}r()(e,t);var n=e.prototype;return n.UNSAFE_componentWillReceiveProps=function(e,t){e=S()({},e);this.setState(S()({},e))},n.componentDidMount=function(){this.projectId=o.t.get(o.V.curProject).id,this.getConfigList()},n.clickHandeler=function(e,t,n){this.state.clickHandeler(e,t,n)},n.rowClick=function(e,t,n){document.querySelectorAll(".el-table__expand-icon")[e.openId].click()},n.render=function(){var e=this.state,t=e.data,n=e.count,a=e.expandPannel,r=e.selectMenuItem,i=e.showSelectColumns,o=e.columns,e=e.pagePosition;return t&&t.forEach(function(e,t){return e.openId=t}),i&&r.map(function(a,e){return a.render=0<o.filter(function(e){return e.label===a.label}).length?o.filter(function(e){return e.label===a.label})[0].render:function(e,t,n){return N().createElement("span",null,e[a.prop])}}),N().createElement("div",{className:"priceTable-wrapper"},i&&N().createElement(l.Z,{ref:"SelectableColumns",multiSave:{name:"price_check"},columns:r||[],getShowColumns:this.getShowColumns}),N().createElement(c.Z,{ref:"table",columns:a.concat(i?r?r.filter(function(e){return e.checked}):[]:o),data:t,total:n,pagePosition:e,pageSize:this.state.pageSize,currentPage:this.state.pageIndex,onPage:this.state.getPageTable,onExpand:this.onExpand,onRowClick:this.rowClick}))},e}(x.Component),i=n(78436),t=n(45697),t=n.n(t),D=function(a){function e(){for(var c,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(c=a.call.apply(a,[this].concat(t))||this).json=null,c.timeId=null,c.dataZoomChange=function(e){var t=e.start,n=e.end;c.timeId&&clearTimeout(c.timeId);var a,r,i=c.props,e=i.data,o=i.dataZoomChange;o&&(e=e.map(function(e){return e[0]}),a=e[Math.floor(e.length*t/100)],r=e[Math.floor(e.length*n/100)-1],c.min=t,c.max=n,a=(a=(a=a.replace("年","-")).replace("月","-")).replace("日",""),r=(r=(r=r.replace("年","-")).replace("月","-")).replace("日",""),c.timeId=setTimeout(function(){o(a,r)},500))},c.buildChart=function(){var e=c.props,t=e.data,n=e.type,a=e.priceType,r=e.priceName;if(!t||!t.length)return null;var e=t.map(function(e){return e}),t=e[e.length-1].map(function(e){return e});t[0]="当前时间",(n&&"amount"!==n||!n)&&e.push(t);e={color:["#2985ff","#A9A557"],tooltip:{trigger:"axis",formatter:function(e){return e[0].axisValue+e.map(function(e){var t=e.value[1];return"<br/>"+e.marker+e.seriesName+"："+((n&&"amount"!==n||!n)&&0===t?"已下架":t)}).join("")}},legend:{orient:"vertical",right:20,top:80,data:n&&"amount"===n?["销量"]:[r,"挂牌价"],selected:n&&"amount"===n?{"销量":!0}:((t={"挂牌价":!1})[r]=!0,t)},grid:{left:64,right:95,top:0,bottom:40,containLabel:!0},xAxis:[{show:!0,type:"category",boundaryGap:!1,data:e.map(function(e){return e[0]}),axisTick:{show:!1},axisLabel:{formatter:function(e){return e.indexOf("时间")?e:e.split("时")[0]+"时"}}}],yAxis:[{type:"value",boundaryGap:["20%","20%"],axisTick:{show:!1},scale:!0,splitLine:{show:!1},axisLabel:{showMinLabel:!1,showMaxLabel:!1}}],dataZoom:{type:"slider",xAxisIndex:0,showDetail:!1,bottom:0},series:n&&"amount"===n?[{name:"销量",type:"line",step:"end",data:e.map(function(e){return[e[0],-1===e[1]?0:e[1]]})}]:[{name:r,type:"line",step:"end",data:e.map(function(e){return[e[0],-1===e[a]?0:e[a]]})},{name:"挂牌价",type:"line",step:"end",data:e.map(function(e){return[e[0],-1===e[1]?0:e[1]]})}]};c.chart.myChart.getOption&&c.chart.myChart.getOption()&&c.chart.myChart.getOption().legend&&(e.legend.selected=c.chart.myChart.getOption().legend[0].selected),c.chart.setOption(e)},c}r()(e,a);var t=e.prototype;return t.componentDidUpdate=function(e){this.json===JSON.stringify(this.props.data)&&e.priceType===this.props.priceType||(this.json=JSON.stringify(this.props.data),this.buildChart())},t.componentDidMount=function(){this.width=this.widget.offsetWidth,this.height=this.widget.offsetHeight,this.props.data&&this.buildChart()},t.render=function(){var t=this;return N().createElement("div",{ref:function(e){return t.widget=e},className:"widget-container"},N().createElement("div",{className:"widget-body"},N().createElement(i.Z,{minHeight:255,ref:function(e){return t.chart=e},className:"widget-chart",dataZoomChange:this.dataZoomChange})))},e}(x.Component);D.propTypes={type:t().string};var u=n(50976),m=n(43036),I=n(37841),p=n(70715),M=function(n){function e(e){var t=n.call(this,e)||this;return t.init=function(){t.setState(S()({},t.props))},t.handleTabChange=function(e){t.setState({yAxisNum:e})},t.state={configs:[],chartList:[],yAxisNum:2},t}r()(e,n);var t=e.prototype;return t.componentDidMount=function(){this.init()},t.UNSAFE_componentWillReceiveProps=function(e){this.setState(S()({},e))},t.render=function(){var e=this.state,t=e.configs,n=e.chartList,a=e.yAxisNum,r=this.props.onDataZoomChange,i=0<n.length?n.map(function(e){var t=e.date,n=e.takePrice,a=e.listPrice,e=Number(a)-Number(n),e=Number.isInteger(e)?e:e.toFixed(2);return{date:t,takePrice:Number(n),listPrice:Number(a),discount:e}}):[],o=JSON.parse(JSON.stringify(i));i.sort(function(e,t){return t.takePrice-e.takePrice});var c=0<n.length?n[n.length-1].takePrice:"",e=0<n.length?i[0]:{date:"",takePrice:""},l={date:"",takePrice:""};if(0<n.length)for(var s=i.length-1;0<=s;s--)if(0<i[s].takePrice){l=i[s];break}o={title:{text:"价格走势",left:0,top:0},tooltip:{trigger:"axis"},legend:{left:"0",top:36,itemGap:26,itemHeight:10,icon:p.W4.lineRing,data:[{name:"最低到手价"},{name:"挂牌价"},{name:"优惠力度"}]},grid:{left:10,right:10,top:100,bottom:50,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:0<n.length?o.map(function(e){return e.date}):[]},yAxis:2===a?[{type:"value"},{type:"value"}]:[{type:"value"}],series:[{name:"最低到手价",z:3,type:"line",data:0<n.length?o.map(function(e){return e.takePrice}):[],showSymbol:!1},{name:"挂牌价",type:"line",data:0<n.length?o.map(function(e){return e.listPrice}):[],showSymbol:!1},{name:"优惠力度",type:"line",data:0<n.length?o.map(function(e){return e.discount}):[],showSymbol:!1,areaStyle:{color:"#FCF5F1"},yAxisIndex:2===a?1:0}],dataZoom:{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter",start:75,end:100}};return N().createElement("div",{className:"history-price-trend-wrapper"},N().createElement("div",null,N().createElement("div",{className:"title"},"商品（sku）价格概览"),t[0]&&t[0].configName&&N().createElement("div",{className:"item"},N().createElement("span",null,t[0].configName),N().createElement("span",null,t[0].configValue)),t[1]&&t[1].configName&&N().createElement("div",{className:"item"},N().createElement("span",null,t[1].configName),N().createElement("span",null,t[1].configValue)),N().createElement("div",{className:"item"},N().createElement("span",null,"最低到手价"),N().createElement("span",null,c)),N().createElement("div",{className:"item"},N().createElement("span",null,"历史最高"),N().createElement("span",null,"￥",e.takePrice),N().createElement("span",null,"（",e.date,"）")),N().createElement("div",{className:"item"},N().createElement("span",null,"历史最低"),N().createElement("span",null,"￥",l.takePrice),N().createElement("span",null,"（",l.date,"）"))),N().createElement("div",null,N().createElement(u.Z,{theme:"yunting_price",option:o,style:{height:288,width:"100%"},onEvents:{dataZoom:r}}),N().createElement(m.Z,{placement:"top",overlay:"与最低时刻对应的挂牌价"},N().createElement("i",{className:"icon-cem_file1"})),N().createElement(m.Z,{placement:"top",overlay:"与最低时刻对应的挂牌价"},N().createElement("i",{className:"icon-cem_file1"})),N().createElement(I.Z,{activeKey:a,options:[{key:"单轴",value:1},{key:"双轴",value:2}],onTabClick:this.handleTabChange})))},e}(x.Component),O=n(55815),t=n(30381),s=n.n(t),V=n(60496),h="YYYY-MM-DD",L=[{title:"单品到手价",value:2,key:"takePrice"},{title:"单品拼单价",value:3,key:"groupTakePrice"},{title:"完美拼单价",value:4,key:"perfectGroupTakePrice"}],a=function(a){function e(){for(var p,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(p=a.call.apply(a,[this].concat(t))||this).state={data:[],priceType:2,showPriceOnly:!0,chartData:[],minPrice:0,maxPrice:0,currentPrice:0,priceName:"单品到手价",count:0,pageSize:40,pageIndex:1,params:{},columns:[{label:"时间",minWidth:"170",render:function(e){return N().createElement("div",null,p.formatterTime(e.ctime))}},{label:"单品到手价",prop:"takePrice",minWidth:"70",render:function(e){return N().createElement("span",null,-1!==e.takePrice?e.takePrice:"下架")}},{label:"单品拼单价",prop:"groupTakePrice",minWidth:"70",render:function(e){return N().createElement("span",null,-1!==e.takePrice?e.groupTakePrice:"下架")}},{label:"完美拼单价",prop:"perfectGroupTakePrice",minWidth:"70",render:function(e){return N().createElement("span",null,-1!==e.takePrice?e.perfectGroupTakePrice:"下架")}},{label:"最低到手价",prop:"minPrice",minWidth:"70",render:function(e){return N().createElement("span",null,-1!==e.takePrice?e.minPrice:"下架")}},{label:"挂牌价",prop:"listPrice",minWidth:"70",render:function(e){return N().createElement("span",null,-1!==e.minPrice?e.listPrice:"下架")}},{label:"优惠合计",prop:"rateCount",checked:!0,minWidth:"60",render:function(e){return N().createElement("span",null,0===e.rateCount?"":"-"+e.rateCount)}},{label:"采纳优惠策略",prop:"trueRate",checked:!0,minWidth:"150",render:function(e){return""!==e.trueRate?N().createElement("span",{className:"rate"},e.trueRate):""}}],historyPriceChartData:{configs:[],chartList:[]},historyPriceTableData:{pageIndex:1,tableList:[],total:0},source:3,selectedTabIndex:1,loading:!1},p.init=function(){var e=opener.windowPool?opener.windowPool.filter(function(e){return e.window===window})[0].parameter:{},t=e.data,n=e.source;switch(p.params=t,p.setState({selectedTabIndex:3!==n?n:1,source:n},function(){var e=s()().subtract(1===n?6:89,"days").format(h)+" 0时0分0秒",t=s()().format(h)+" 23时59分59秒";3!==n&&p.getPriceDetails(e,t)}),n){case 1:p.getChartData();break;case 2:p.fetchHistoryData();break;case 3:p.fetchSpuSale()}},p.getPriceDetails=function(e,t,n){var a=p.state,r=a.selectedTabIndex,i=a.pageIndex,o=a.pageSize,c=a.showPriceOnly,l=a.historyPriceTableData,s=void 0===n?p.state.priceType:n,u=(opener.windowPool?opener.windowPool.filter(function(e){return e.window===window})[0].parameter:{}).data,a=new Date,n=a.getFullYear()+"-"+(+a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds()),a=new Date(a-6048e5),a=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds()),m={userConnectionId:u.userConnectionId,from:e||a,to:t||n,priceType:L[s-2].key};1===r?(m.pageIndex=i,m.pageSize=o,m.change=c):(m.pageIndex=l.pageIndex,m.pageSize=40,m.change=!0),p.setState({loading:!0},function(){d.h.post("/price/one",m).then(function(e){e.data.result.result.map(function(e){return Object.assign.apply(Object,[e].concat(e.connectionConfig))});var t=e.data.result.result,n=e.data.result,a=n.from,e=n.to,n=n.count;1===r?p.setState({data:t,from:a,to:e,count:n,params:m}):p.setState({historyPriceTableData:S()({},l,{tableList:t,total:n})})}).finally(function(){p.setState({loading:!1})})})},p.getChartData=function(e){var i=void 0===e?p.state.priceType:e,e={userConnectionId:p.params.userConnectionId,change:p.state.showPriceOnly,priceType:L[i-2].key,from:"2018-09-04 14:00:00",to:""};d.h.post("/price/bar",e).then(function(e){var n=[];e.data.result.forEach(function(e){var t=new Date(e.ctime),t=t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日 "+t.getHours()+"时"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+"分"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+"秒";n.push([t,e.listPrice,e.takePrice,e.groupTakePrice,e.perfectGroupTakePrice])});var t=n.length?n[n.length-1][i]:0,a=n.length?n.map(function(e){return e[i]}):[0],r=JSON.parse(JSON.stringify(a)).filter(function(e){return 0<e}),e=Math.max.apply(Math,r),a=Math.min.apply(Math,r),r=L.find(function(e){return e.value===i}).title;p.setState({chartData:n,priceType:i,currentPrice:t,maxPrice:e,minPrice:a,priceName:r})})},p.dataZoomChange=function(e,t){p.getPriceDetails(e,t)},p.chartClick=function(e){var t=new Date(e),e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":00:00",t=new Date(e),t=new Date(t.getTime()+36e5),t=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":00:00";p.getPriceDetails(e,t)},p.onChangePage=function(e){var t,n,a=p.state,r=a.selectedTabIndex,a=a.historyPriceTableData;1===r?p.setState({pageIndex:e},function(){return p.getPriceDetails()}):(t=s()().subtract(89,"days").format(h)+" 0时0分0秒",n=s()().format(h)+" 23时59分59秒",p.setState({historyPriceTableData:S()({},a,{pageIndex:e})},function(){return p.getPriceDetails(t,n)}))},p.fetchHistoryData=function(){var a=p.state.historyPriceChartData.configs,e=p.params.userConnectionId,t=o.t.get(o.V.curProject).id;d.h.post("/price/history/trend/list",{dateFilter:{from:s()().subtract(364,"days").format(h),to:s()().format(h),quickChoice:"",dateGroupType:"DAY",remoteName:"cTime"},userConnectionId:e,index:t}).then(function(e){if(2e4===e.data.code){var e=e.data.result,t=e.connConfig,e=e.data;if(0<t.length){for(var n=0;n<t.length;n++)"品牌"===t[n].topicTypeValue&&a.push({configName:"品牌",configValue:t[n].topicValue}),"型号"===t[n].topicTypeValue&&a.push({configName:"型号",configValue:t[n].topicValue});0===a.length&&0<=t.length&&(a.push({configName:t[0].topicTypeValue,configValue:t[0].topicValue}),1<t.length&&a.push({configName:t[1].topicTypeValue,configValue:t[1].topicValue}))}p.setState({historyPriceChartData:{configs:a,chartList:e||[]}})}})},p.switchTab=function(e){var t,n,a=p.state,r=a.data,a=a.historyPriceChartData.chartList;2===e?0===a.length?(p.fetchHistoryData(),t=s()().subtract(89,"days").format(h)+" 0时0分0秒",n=s()().format(h)+" 23时59分59秒",p.setState({selectedTabIndex:e},function(){return p.getPriceDetails(t,n)})):p.setState({selectedTabIndex:e}):0===r.length?(p.getChartData(),p.setState({selectedTabIndex:e},function(){return p.getPriceDetails()})):p.setState({selectedTabIndex:e})},p.onDataZoomChange=function(e){p.timer&&clearTimeout(p.timer);var t=p.state.historyPriceChartData.chartList,n=e.start,a=e.end,e=t.map(function(e){return e.date}),n=Math.ceil(n/(100/e.length)),e=Math.floor(a/(100/e.length))<e.length?Math.floor(a/(100/e.length)):e.length-1,r={min:t[n].date+" 0时0分0秒",max:t[e].date+" 23时59分59秒"};p.timer=setTimeout(function(){return p.getPriceDetails(r.min,r.max)},500)},p.fetchSpuSale=function(){var e=p.params,t=e.spu,n=e.dateFilter;p.setState({loading:!0},function(){d.h.post("/sales/spu/find",{projectId:o.t.get(o.V.curProject).id,spu:t,dateFilter:n}).then(function(e){var t,n,a,r=e.data;2e4===r.code&&(t=(a=r.result).currentSales,(n=a.rangeData)&&0<n.length&&(r=(e=n[0]).data,a=e.name,n=e.sourceName,e=e.url,p.params.url=e,p.params.title=a,p.params.configDetailVoList=[{topicTypeValue:"品牌",topicValue:n}],a=r.map(function(e){return e.count}),n=Math.max.apply(null,a),a=Math.min.apply(null,a),p.setState({chartData:r.map(function(e){return[e.date,e.count]}),maxPrice:n,minPrice:a,currentPrice:t})))}).finally(function(){p.setState({loading:!1})})})},p._handleOnPriceChange=function(e){p.getPriceDetails(void 0,void 0,e),p.getChartData(e)},p}r()(e,a);var t=e.prototype;return t.componentDidMount=function(){this.init()},t.formatterTime=function(e){e=new Date(e);return e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日 "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},t.render=function(){var e=this,t=this.state,n=t.data,a=t.count,r=t.columns,i=t.chartData,o=t.currentPrice,c=t.maxPrice,l=t.minPrice,s=t.priceName,u=t.pageSize,m=t.pageIndex,p=t.showPriceOnly,d=t.source,h=t.selectedTabIndex,g=t.historyPriceChartData,f=t.historyPriceTableData,y=t.historyPriceTableData.tableList,v=t.loading,b=t.priceType,C=this.params,E=[];if(C)for(var k in C.configDetailVoList)E.push(C.configDetailVoList[k].topicValue);var P=[{title:1===d?"实时价格":2===d?"每日最低价":"SPU分析",url:1===d?"/price/realTimePrice":2===d?"/priceHistory":"/price/spu"},{title:C&&C.title?C.title:"",url:""}],t=N().createElement("div",{className:"right-content"},N().createElement("a",{className:"operation",href:C&&C.url,target:"_blank",rel:"noopener noreferrer"},"进入链接详情"),3!==d&&N().createElement(x.Fragment,null,N().createElement("span",{className:"line"},"|"),1===h&&N().createElement(x.Fragment,null,N().createElement(w.Checkbox,{checked:p,value:p,onChange:function(){return e.setState({showPriceOnly:!p,pageIndex:1},function(){e.getPriceDetails(),e.getChartData()})}},"只显示变动价格"),N().createElement("span",{className:"line"},"|")),N().createElement(I.Z,{activeKey:h,options:[{key:"近7天实时价格",value:1},{key:"历史价格走势",value:2}],onTabClick:this.switchTab})));return N().createElement("div",{className:"priceDetail-wrapper"},N().createElement(O.Z,{title:P,rightContent:t}),N().createElement("div",{className:"priceDetail-body"},1===h?N().createElement("div",{className:"echarts-wrapper"},N().createElement("div",{className:"echarts-title"},N().createElement("div",null,N().createElement("span",null,3===d?"销量":"价格","趋势图")),N().createElement("div",null,N().createElement(V.Z,{options:L,activeObj:b,onChange:this._handleOnPriceChange,type:"button"}),N().createElement("span",null,N().createElement("i",{className:"icon-cem_jingdong-shop"}),N().createElement("span",null,E[0])),E[1]&&N().createElement(x.Fragment,null,N().createElement("span",{className:"line"},"|"),N().createElement("span",null,N().createElement("i",{className:"icon-cem_shop"}),N().createElement("span",null,E[1]))))),N().createElement("div",{className:"echarts-sub-title"},N().createElement("span",null,"最高",3===d?"销量":s),N().createElement("span",{className:"echarts-value"},c===-1/0?"已下架":c),N().createElement("span",null,"最低",3===d?"销量":s),N().createElement("span",{className:"echarts-value"},l===1/0?"已下架":l),N().createElement("span",null,"当前",3===d?"销量":s),N().createElement("span",{className:"echarts-value"},-1===o?"已下架":o)),N().createElement(D,{dataZoomChange:this.dataZoomChange,myChartClick:this.chartClick,data:i,type:3===d?"amount":"",priceType:b,priceName:s})):N().createElement(M,S()({},g,{onDataZoomChange:this.onDataZoomChange})),3!==d&&N().createElement("div",{className:"priceList",style:{marginTop:1===h?"50px":"0"}},N().createElement(w.Loading,{loading:v,text:"拼命加载中"},N().createElement(T,{key:"detail",type:"detail",data:1===h?n:y,columns:r,pageSize:u,pageIndex:1===h?m:f.pageIndex,count:1===h?a:f.total,showSelectColumns:!1,getPageTable:this.onChangePage})))))},e}(x.Component)},24473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(67154),m=n.n(a),r=n(37316),p=n.n(r),t=n(85354),i=n.n(t),a=n(67294),d=n.n(a),r=n(45697),t=n.n(r),r=n(94184),h=n.n(r),a=function(e){function t(){return e.apply(this,arguments)||this}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.children,a=e.className,r=e.block,i=e.indeterminate,o=e.value,c=e.checked,l=e.defaultChecked,s=e.onChange,u=e.disabled,e=p()(e,["prefixCls","children","className","block","indeterminate","value","checked","defaultChecked","onChange","disabled"]),s={value:o,checked:c,defaultChecked:l,onChange:s,disabled:u},a=h()(t,((u={})[t+"-disabled"]=s.disabled,u[t+"-block"]=r,u[t+"-indeterminate"]=i,u),a);return d().createElement("label",m()({tabIndex:s.disabled?-1:0,className:a},e),d().createElement("input",m()({type:"checkbox",className:t+"-input"},s)),d().createElement("span",{className:t+"-status"}),n&&d().createElement("span",{className:t+"-text",title:n},n))},t}(a.Component);a.propTypes={prefixCls:t().string,value:t().oneOfType([t().string,t().number]),checked:t().bool,defaultChecked:t().bool,onChange:t().func,indeterminate:t().bool,disabled:t().bool,block:t().bool},a.defaultProps={prefixCls:"wt-checkbox"};const o=a},85151:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>a.Z,CS:()=>c});var a=n(24473),r=n(67154),l=n.n(r),i=n(37316),s=n.n(i),t=n(85354),o=n.n(t),r=n(67294),u=n.n(r),i=n(45697),t=n.n(i),i=n(94184),m=n.n(i),i=function(r){function e(){for(var n,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=r.call.apply(r,[this].concat(t))||this).handleCheckBoxChange=function(e){var t=n.props.onChange;t&&t(e)},n}return o()(e,r),e.prototype.render=function(){var r=this,e=this.props,t=e.prefixCls,n=e.children,a=e.className,i=(e.onChange,e.values),o=e.checkedList,c=e.block,e=s()(e,["prefixCls","children","className","onChange","values","checkedList","block"]),n=i?i.map(function(e,t){var n=0!==o.length&&-1!==o.indexOf(e);return u().createElement(Checkbox,{key:t,value:e,checked:n,onChange:function(e){return r.handleCheckBoxChange(e)},block:c},e)}):u().Children.map(n,function(e,t){if(e){var n=e.props,a=n.value,a=0!==o.length&&-1!==o.indexOf(a);return u().cloneElement(e,{checked:a,key:t,block:n.block||c,onChange:function(){var e=n.value;r.handleCheckBoxChange(e)}})}});return u().createElement("div",l()({className:m()(t,a)},e),n)},e}(r.Component);i.defaultProps={prefixCls:"wt-checkbox-group"},i.propTypes={onChange:t().func,values:t().array,block:t().bool};const c=i;var p=function(t){var n={};return Object.keys(t).forEach(function(e){/^data\-.+$/.test(e)&&(n[e]=t[e])}),n},r=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.render=function(){var e=this.props,t=p(e);return u().createElement("label",{className:e.className,title:e.children},u().createElement("div",{className:"checkbox"},u().createElement("input",l()({checked:e.checked,type:"checkbox",name:e.name,onChange:e.onChange,disabled:e.disabled},t)),u().createElement("div",{className:"checkbox-body"}))," ",u().createElement("span",null,e.children))},t}(r.Component);r.defaultProps={className:"",name:"",checked:!1,disabled:!1,onChange:function(e){return e}}},84267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var t=n(67154),a=n.n(t),t=n(85354),r=n.n(t),t=n(67294),o=n.n(t),i=n(85151),c=n(35239),l=function(t){function e(e){var i=t.call(this,e)||this;return i.openMenu=function(){i.setState({menuState:!i.state.menuState})},i.onChange=function(e){var t,n=i.props,a=n.columns,r=n.getShowColumns,n=n.multiSave;a&&a[e]&&((t=a.slice(0))[e].checked=!t[e].checked);e=n?n.name:"",n=c.t.get(c.V.storageColumns)?c.t.get(c.V.storageColumns):{};n[e]=t,c.t.set(c.V.storageColumns,n),r&&r(t),i.resize(),i.setState({columns:t})},i.competeSelectMenuItem=function(e){var t,n=i.props.multiSave,a=n?n.name:"",r=i.props.columns,n=c.t.get(c.V.storageColumns)?c.t.get(c.V.storageColumns)[a]:[];return r=n&&0!==n.length?("price_check"===a?n.map(function(a,e){return a.render=0<r.filter(function(e){return e.label===a.label}).length?r.filter(function(e){return e.label===a.label})[0].render:function(e,t,n){return o().createElement("span",null,e[a.prop])}}):n.map(function(e,a){return e.render=function(e,t,n){return o().createElement("span",null,e.configDetails[a]&&e.configDetails[a].topicValue)}}),n.slice(0)):e&&e.every(function(e){return e.label&&e.prop})?e:(t=[],e&&e.forEach(function(e,a){t.push({label:e.topicTypeValue,checked:!1,render:function(e,t,n){return o().createElement("span",null,e.configDetails[a].topicValue)}})}),t.slice(0)),i.setState({columns:r}),r},i.resize=function(){var e=document.querySelector(".connection-table .is-sortable");if(e){var t=i.getStyle(e,"width"),e=document.body.offsetWidth,n=i.state.columns;if(800<e&&2<n.length&&parseInt(t)<275)for(var a=0;a<n.length-2;a++)if(n[a].checked)return void i.onChange(a)}},i.close=function(e){i.state.menuState&&i.setState({menuState:!1})},i.state={menuState:!1,multiSave:null,columns:e.columns.map(function(e){return e.checked||(e.checked=!1),e})},i}r()(e,t);var n=e.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){this.setState(a()({},e))},n.getStyle=function(e,t){return e.style[t]||(e.currentStyle||getComputedStyle(e,null))[t]},n.componentDidMount=function(){window.addEventListener("click",this.close),window.addEventListener("resize",this.resize,!1)},n.componentWillUnmount=function(){window.removeEventListener("resize",this.resize,!1),window.removeEventListener("click",this.close)},n.render=function(){var n=this,e=this.state.columns;return o().createElement("div",{className:"menu-wrapper",onClick:function(e){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()}},o().createElement("span",{className:"el-dropdown-link "+(this.state.menuState?"sel":""),onClick:this.openMenu},"列",o().createElement("i",{className:"icon-cem_pull-down-or-take-up",style:{transform:this.state.menuState?"rotate(-180deg)":""}})),this.state.menuState&&o().createElement("div",{className:"menuList"},o().createElement("ul",null,0===e.length?o().createElement("li",{style:{color:"#8c8c8c"}},"无可选择内容"):e.map(function(e,t){return o().createElement("li",{key:t},o().createElement(i.Jg,{key:t,value:e.label,checked:e.checked,onChange:n.onChange.bind(n,t),block:!0},e.label))}))))},e}(t.Component)},37841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(67294),r=n.n(t),t=n(45697),n=n.n(t),t=function(e){var n=e.activeKey,t=e.options,a=e.onTabClick;return r().createElement("div",{className:"tabs"},t.map(function(e,t){return r().createElement("div",{key:t,className:n===e.value?"active-tab":"",onClick:function(){return n!==e.value&&a(e.value,e)}},e.key||e.label)}))};t.propTypes={activeKey:n().oneOfType([n().string,n().number]),options:n().arrayOf(n().shape({key:n().string,value:n().oneOfType([n().string,n().number])})).isRequired,onTabClick:n().func.isRequired};const a=t}}]);