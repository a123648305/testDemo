(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[4162],{17582:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});var e=a(85354),n=a.n(e),e=a(67294),d=a.n(e),c=a(8201),p=a(98191),h=a(60496),o=a(94644),r=a(50976),e=a(67154),f=a.n(e),m=a(70715);const g=function(t){var i=t.data,e=t.getRef,l=t.formula,a=t.onChartClick,s=t.positiveTitle,u=t.negativeTitle,c=t.title,n=d().useState({}),t=n[0],p=n[1];return d().useEffect(function(){var t,a,e,n,r,o;p((t=i.slice(),e=s,n=u,r=c,o={positiveData:("count"===(a=l)?t.sort(function(t,e){return e.positiveCount-t.positiveCount}):t.sort(function(t,e){return e.posRate-t.posRate})).slice(0,10),negativeData:("count"===a?t.sort(function(t,e){return e.negativeCount-t.negativeCount}):t.sort(function(t,e){return e.negRate-t.negRate})).slice(0,10)},{title:{text:r},grid:[{x:"3%",y:"20%",width:"92%",height:"25%"},{x:"3%",y2:"10%",width:"92%",height:"25%"}],tooltip:{formatter:function(t){var e=t.seriesName,a=t.marker,n=t.data,t=t.data.name;return[(0,m.Zi)(a+" "+t),("positive"===e?"正面":"负面")+"声量："+n[e+"Count"],"声量占比："+(100*n[e.substring(0,3)+"Rate"]).toFixed(2)+"%"].join("<br>")}},graphic:[{type:"group",top:"13%",silent:!0,children:[{type:"text",left:15,style:{text:e,font:"bolder 12px "+m.I8,fill:"#262626"}}]},{type:"group",top:"58%",silent:!0,children:[{type:"text",left:15,style:{text:n,font:"bolder 12px "+m.I8,fill:"#262626"}}]}],xAxis:["positive","negative"].map(function(t,e){return{gridIndex:e,axisTick:{show:!0,alignWithLabel:!0},axisLabel:{interval:0},data:o[t+"Data"].map(function(t){return t.name})}}),yAxis:["positive","negative"].map(function(t,e){return{gridIndex:e,axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:"#E8E8E8",type:"dashed"}}}}),series:["positive","negative"].map(function(e,t){return{type:"bar",name:e,barWidth:30,xAxisIndex:t,yAxisIndex:t,data:o[e+"Data"].map(function(t){return f()({},t,{value:"count"===a?t[e+"Count"]:t[e.substring(0,3)+"Rate"],escore:["positive"===e?1:-1]})})}})}))},[i,l]),d().createElement(r.Z,{theme:"yunting_pos_neg",option:t,style:{height:"100%",width:"100%"},onChartReady:function(t){e(t)},onEvents:{click:a}})};const y=function(e){function t(t){var u=e.call(this,t)||this;return u._resetChart=function(){var o,i,l,t,e,a,n,r,s=u.props.data;u.echartIns&&(u.echartIns.clear(),t=u.echartIns,e=s,a=t.getHeight()-60,n=t.getWidth()-60,e={series:[{type:"graph",layout:"force",silent:!0,animation:!1,legendHoverLink:!1,force:{repulsion:[.4*(r=a<n?a:n),.8*r],gravity:.15,layoutAnimation:!1},data:e.map(function(t){return{symbolSize:t.rate*r/3}})}]},t.setOption(e),o=u.echartIns,i=s,e=o.getHeight(),s=o.getWidth(),l=e<s?e:s,s={tooltip:{formatter:function(t){var e=t.marker,a=t.data,n=a.value,t=a.name,a=a.total;return("label"!==t?[(0,m.Zi)(e+" "+t),"声量："+n,"占比："+(n/a*100).toFixed(2)+"%"]:[(0,m.Zi)(a.name+"："+a.total),'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#D96969;"></span> 负面：'+a.negativeCount+'<span style="color: #8c8c8c">('+(a.negativeCount/a.total*100).toFixed(2)+"%)</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#0074B8;"></span> 中性：'+a.neutralCount+'<span style="color: #8c8c8c">('+(a.neutralCount/a.total*100).toFixed(2)+"%)</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#00B76E;"></span> 正面：'+a.positiveCount+'<span style="color: #8c8c8c">('+(a.positiveCount/a.total*100).toFixed(2)+"%)</span>"]).join("<br>")}},series:o._zr.storage._displayList.map(function(t,e){var a=i[e],n=a.rate*l/3*.3,r=o.convertToPixel({seriesIndex:0},[t.transform[4]+30,t.transform[5]+30]),e=26*a.rate,t=e*a.name.length>2*(n-10)?2*(n-10)/a.name.length:e,e=24*a.rate;e*a.total.toString().length>2*(n-10)&&a.total.toString().length;return{type:"pie",name:a.name,center:r,hoverOffset:4,radius:[n-5,n],label:{normal:{show:!0,position:"center",formatter:"{a|"+a.name+"}",rich:{a:{color:"#262626",fontSize:t,fontFamily:m.I8}}}},itemStyle:{shadowBlur:10,shadowColor:"rgba(155,155,155,0.5)",borderColor:"#ffffff",borderWidth:.5},data:[{value:a.positiveCount,name:"正面",realName:a.name,total:a.total,escore:[1]},{value:a.neutralCount,name:"中性",realName:a.name,total:a.total,escore:[0]},{value:a.negativeCount,name:"负面",realName:a.name,total:a.total,escore:[-1]},{value:0,name:"label",total:a,realName:a.name,escore:[-1,0,1]}]}})},o.setOption(s))},u.echartIns,u}n()(t,e);var a=t.prototype;return a.componentDidMount=function(){0<this.props.data.length&&this._resetChart(),window.addEventListener("resize",this._resetChart)},a.componentWillUnmount=function(){window.removeEventListener("resize",this._resetChart)},a.componentDidUpdate=function(t){var e=t.data,t=this.props.data;JSON.stringify(e)!==JSON.stringify(t)&&this._resetChart()},a.render=function(){var e=this,t=this.props,a=t.getRef,t=t.onChartClick;return d().createElement(r.Z,{theme:"yunting_pos_neu_neg",option:{},style:{height:"100%",width:"100%"},onEvents:{click:t},onChartReady:function(t){a(t),e.echartIns=t}})},t}(d().PureComponent);var e=a(45697),a=a.n(e),v=[{title:"比例",value:"rato"},{title:"数量",value:"count"}],e=function(e){function t(t){var r=e.call(this,t)||this;return r.handleOnMoreClick=function(t){var e,a=r.props,n=a.title,a=a.doubleBarChartData;"image"===t&&r.doubleChartRef&&r.graphPieChartRef?(0,o.OH)([r.doubleChartRef,r.graphPieChartRef],n,["词频","词频"]):"data"===t&&(0,c.P)(a)&&(a=a.reduce(function(t,a){return[].concat(t,[[].concat(e.map(function(t){var e;return"词名"===t?e=a.name:"总词频"===t?e=a.total:"正"===t?e=a.positiveCount:"中"===t?e=a.neutralCount:"负"===t&&(e=a.negativeCount),e}))])},[e=["词名","总词频","正","中","负"]]),(0,o.aT)([a],"词频分析"))},r.handleOnChange=function(t){r.setState({dataType:t})},r.handleOnFlavorChange=function(t){var e=r.props.setDefaultValue;e&&e({value:t,key:"fBarCompareType"})},r.state={dataType:"rato",defaultDataType:""},r.doubleChartRef=void 0,r.graphPieChartRef=void 0,r}return n()(t,e),t.getDerivedStateFromProps=function(t,e){if(t.defaultDataType&&t.defaultDataType!==e.defaultDataType)return{defaultDataType:t.defaultDataType,dataType:t.defaultDataType}},t.prototype.render=function(){var e=this,t=this.props,a=t.doubleBarChartData,n=t.graphPieChartData,r=t.loading,o=t.title,i=t.positiveTitle,l=t.negativeTitle,s=t.overlay,u=this.state,t=u.dataType,u=u.defaultDataType;return d().createElement(c.Z,{className:"yt_research_analysis_bar_pop_chart_wrapper",data:a,loading:r,renderTitle:d().createElement(p.Z,{titleOverlay:s,title:o,data:a,onMoreClick:this.handleOnMoreClick},d().createElement(h.Z,{options:v,activeObj:t,flavor:u,onFlavorChange:this.handleOnFlavorChange,onChange:this.handleOnChange}))},(0,c.P)(a)&&d().createElement("div",{className:"chart_zone"},d().createElement(g,{positiveTitle:i,negativeTitle:l,title:o,data:a,getRef:function(t){return e.doubleChartRef=t},formula:t}),d().createElement(y,{getRef:function(t){return e.graphPieChartRef=t},data:n})))},t}(d().PureComponent);e.propTypes={data:a().any,title:a().string,loading:a().bool,setDefaultValue:a().func,defaultDataType:a().string};const i=e},54898:(t,e,a)=>{"use strict";a.d(e,{Z:()=>l});var n=a(85354),o=a.n(n),r=a(67294),s=a.n(r),u=a(70715),e=function(r){function t(){for(var n,t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return(n=r.call.apply(r,[this].concat(e))||this).chartRef=void 0,n.graphData={categories:[],links:[],data:[]},n.graphData=void 0,n.sunburstData=void 0,n.title=void 0,n.getChartRef=function(t){return n.chartRef=t},n.setValue=function(t){var e=t.sort(function(t,e){return e.count-t.count}).slice(0,50).reduce(function(t,e,a){var n=t.find(function(t){return t.name===e.secondWord});return n?(n.value+=e.count,n.children.push({id:"f"+a,name:e.firstWord,value:e.count,itemStyle:n.itemStyle})):(e.count,t.push({id:"s"+a,name:e.secondWord,value:e.count,itemStyle:{color:u.Fq[a%u.Fq.length]},children:[{id:"f"+a,name:e.firstWord,value:e.count,itemStyle:{color:u.Fq[a%u.Fq.length]}}]})),t},[]),a=e.map(function(t){return t.value}),t=e.map(function(t){return t.name}),o=Math.max.apply(null,a),i=Math.min.apply(null,a),l=[],a=e.reduce(function(e,a,n){var r=o===i?10:(a.value-i)/(o-i)*40+10;return e.push({id:a.id,name:a.name,value:a.value,category:n,symbolSize:r,itemStyle:{color:u.Fq[0]},label:{show:!0,fontSize:10,color:"#262626"}}),a.children.forEach(function(t){l.push({source:t.id,target:a.id}),e.push({id:t.id,name:t.name,value:t.value,category:n,symbolSize:r*t.value/a.value,itemStyle:{color:u.Fq[1]},label:{show:!0,fontSize:10,color:"#262626"}})}),e},[]);n.graphData={links:l,data:a,categories:t},n.sunburstData=e},n.getGraphOption=function(t,e,a){return{title:{text:t},tooltip:{},series:[{type:"graph",layout:a,roam:!0,draggable:!0,force:{initLayout:"circular",repulsion:100,gravity:.2,edgeLength:[50,100]},data:e.data,links:e.links,categories:e.categories,focusNodeAdjacency:!0,itemStyle:{borderColor:"#fff",borderWidth:1,shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.1)"},label:{position:"right",formatter:"{b}"},lineStyle:{curveness:"circular"===a?.3:0},emphasis:{lineStyle:{width:5}}}]}},n}o()(t,r);var e=t.prototype;return e.renderChart=function(t,e,a){this.setValue(t),this.title=e,this.changeChartType(a)},e.changeChartType=function(t){var e={},e="sunburst"===t?this.getSunburstOption(this.title,this.sunburstData):this.getGraphOption(this.title,this.graphData,t);this.chartRef.clear(),this.chartRef.setOption(e)},e.getSunburstOption=function(t,e){return{title:{text:t},tooltip:{},series:{type:"sunburst",highlightPolicy:"ancestor",data:e,levels:[{},{r0:"27%",r:"61%",label:{}},{r0:"62%",r:"67%",label:{position:"outside",color:"#262626"}}],emphasis:{label:{rotate:"radial",formatter:"{b}（{@score}）",fontSize:10}},label:{rotate:"radial",formatter:"{b}（{@score}）",fontSize:10},itemStyle:{color:"#ddd",borderWidth:2}}}},t}(s().PureComponent),c=a(8201),p=a(98191),d=a(50976),i=a(94644),n=a(45697),r=a.n(n),n=a(30381),h=a.n(n),f=a(33798),m=a(43036),e=function(r){function t(t){var n=r.call(this,t)||this;return n.handleOnMoreClick=function(t){var e=n.props,a=e.title,e=e.data;"image"===t&&n.chartRef?(0,i._v)(n.chartRef,a):"data"===t&&(0,c.P)(e)&&(0,i.aT)([e.reduce(function(t,e){return t.push([e.firstWord,e.secondWord,e.count]),t},[["关键词","属性","关系数"]])],a)},n.state={chartType:"sunburst"},n}o()(t,r);var e=t.prototype;return e.componentDidMount=function(){this.renderChart()},e.componentDidUpdate=function(t,e){var a=t.data,t=this.props.data;(0,c.P)(t)&&JSON.stringify(a)!==JSON.stringify(t)&&this.renderChart(),!(0,c.P)(t)&&this.chartRef&&(this.chartRef=void 0),(0,c.P)(t)&&e.chartType!==this.state.chartType&&r.prototype.changeChartType.call(this,this.state.chartType)},e.renderChart=function(){var t=this.props,e=t.data,a=t.title,t=this.state.chartType;(0,c.P)(e)&&this.chartRef&&r.prototype.renderChart.call(this,e,a,t)},e.render=function(){var t=this,e=this.props,a=e.data,n=e.loading,r=e.title,o=e.titleOverlay,i=e.refreshTime,l=e.onRefresh,e=this.state.chartType;return s().createElement(c.Z,{className:"yt_market_bm_analysis_bar_line_in_one_chart",data:a,loading:n,renderTitle:s().createElement(p.Z,{title:r,titleOverlay:o,data:a,onMoreClick:this.handleOnMoreClick},s().createElement(m.Z,{placement:"top",overlay:s().createElement("div",null,s().createElement("div",null,"数据更新于"),s().createElement("div",null,h()(i).format("YYYY-MM-DD HH:mm:ss")))},s().createElement("span",{onClick:l,className:"refresh"},s().createElement("i",{className:"icon-cem_auto-refresh "+(n?"icon_loading":"")}))),s().createElement("span",{className:"divider"}),s().createElement(m.Z,{placement:"top",overlay:"关系图"},s().createElement("span",{onClick:function(){return t.setState({chartType:"force"})}},s().createElement(f.Z,{isActive:"force"===e,defaultIcon:"cem_relation-diagram-gray",activeIcon:"cem_relation-diagram"}))),s().createElement(m.Z,{placement:"top",overlay:"旭日图"},s().createElement("span",{onClick:function(){return t.setState({chartType:"sunburst"})}},s().createElement(f.Z,{isActive:"sunburst"===e,defaultIcon:"cem_asahi-chart--gray",activeIcon:"cem_asahi-chart"}))),s().createElement("span",{className:"divider"}))},s().createElement(d.Z,{onChartReady:this.getChartRef,theme:"yunting_multi_color",option:{},style:{height:"100%"}}))},t}(e);e.propTypes={data:r().any,titleOverlay:r().oneOf([r().string,r().node]),title:r().string,loading:r().bool,onRefresh:r().func,refreshTime:r().string};const l=e},55363:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var e=a(67294),n=a.n(e),r=a(61409);const o=function(t){var a=t.titles;return n().createElement("div",{className:"reasearch_analyze_header_route"},a.map(function(t,e){return n().createElement(n().Fragment,{key:e},n().createElement("span",{className:t.url?"hover":"",onClick:function(){return t.url&&r.mW.push({pathname:t.url,state:t.state})}},t.title),e===a.length-1?"":" / ")}))}},10291:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var e=a(85354),n=a.n(e),e=a(67294),f=a.n(e),m=a(8201),g=a(98191),y=a(60496),l=a(94644),v=[{title:"比例",value:"rato"},{title:"数量",value:"count"}],e=a(67154),u=a.n(e),c=a(39432),p=a(70715),d={promoterCount:"推荐者",passiveCount:"被动者",detractorCount:"贬损者"},h={positiveCount:"好评",neutralCount:"中评",negativeCount:"差评"};function C(t,n){var e=["时间"].concat(Object.values("NPS"===n?d:h)),a=t.reduce(function(t,e){return[].concat(t,[["time"].concat(Object.keys("NPS"===n?d:h)).map(function(t){return e[t]})])},[e]),r=t.reduce(function(t,a){return[].concat(t,[["time"].concat(Object.keys("NPS"===n?d:h)).map(function(t,e){return 0===e?a[t]:0===a.questionnaireTotal?0:a[t]/a.questionnaireTotal})])},[e]);return{length:t.length,datasets:[{dimensions:e,source:a},{dimensions:e,source:r}]}}function b(t,e,o,a,r,n){var i,l,s=C(e,r),e=s.datasets,t=(s.length,{total:t.questionnaireTotal,neutralCount:t.passiveCount,positiveCount:t.promoterCount,negativeCount:t.detractorCount}),a=(a.getWidth(),a.getHeight());return{title:{text:n},grid:{containLabel:!0,left:430,right:50,bottom:50,top:80},tooltip:{trigger:"axis",formatter:function(t){var e=t[0].name,t=t.map(function(t,e){var a=t.data,n=t.seriesName,r=t.seriesIndex,t=t.marker,r=a[r+1],r="count"===o?(0,c.hE)(r):(100*r).toFixed(2)+"%";return t+" "+n.replace("1","")+"："+r});return[""+(0,p.Zi)(e)].concat(t).join("</br>")}},legend:[{itemWidth:12,itemHeight:12,left:280,top:"27%",orient:"vertical",itemGap:.15*a,data:[{name:"NPS"===r?"推荐者":"好评",icon:p.W4.square},{name:"NPS"===r?"被动者":"中评",icon:p.W4.square},{name:"NPS"===r?"贬损者":"差评",icon:p.W4.square}],textStyle:{fontSize:14,padding:[0,6]}},{top:42,left:470,itemWidth:12,itemHeight:12,itemGap:16,icon:p.W4.square,data:[{name:"NPS"===r?"推荐者1":"好评1",icon:p.W4.square},{name:"NPS"===r?"被动者1":"中评1",icon:p.W4.square},{name:"NPS"===r?"贬损者1":"差评1",icon:p.W4.square}],formatter:function(t){return t.replace("1","")}}],graphic:(l=a,[(i=t).positiveCount,i.neutralCount,i.negativeCount].map(function(t,e){var a=(0===i.total?0:(t/i.total*100).toFixed(2))+"%",n=(0,c.jD)(a,14)-2;return{type:"group",silent:!0,left:310,top:(.3+.15*e)*l+16*(e+1),children:[{type:"text",style:{text:a}},{type:"text",left:n,style:{text:"（"+t+"）",fill:"#8C8C8C"}}]}})),dataZoom:[{show:!0,left:470,bottom:16,height:16,handleSize:"100%",showDetail:!1}],dataset:e.map(function(t){return u()({},t)}),xAxis:[{type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(t){return"rato"===o?100<t?"":100*t+"%":t}}}],series:[].concat(Object.keys("NPS"===r?d:h).map(function(t,e){return{type:"bar",barMaxWidth:24,name:"NPS"===r?d[t]+"1":h[t]+"1",datasetIndex:"rato"===o?1:0,stack:r,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:p.Rt[e]}}}),[{type:"pie",center:["145","52%"],radius:["48%","58%"],hoverOffset:4,label:{show:!0,position:"center",formatter:["{a|"+t.total+"}","{b|答题客户数}"].join("\n"),rich:{a:{color:"#262626",fontSize:30,padding:[10,0,0,0],fontFamily:p.I8},b:{color:"#8C8C8C",fontSize:16,fontFamily:p.I8}}},tooltip:{trigger:"item",formatter:function(t){var e=t.marker,a=t.data,n=a.value,t=a.name,a=a.total;return("label"!==t?[e+" "+(0,p.Zi)(t),"声量："+(0,c.hE)(n),"占比："+(0===a?0:(n/a*100).toFixed(2))+"%"]:[""+(0,p.Zi)("答题客户数："+a.total),'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#00B76E;"></span> '+("NPS"===r?"推荐者":"好评")+"："+(0,c.hE)(a.positiveCount)+'<span style="color: #8c8c8c">（'+(0===a.total?0:(a.positiveCount/a.total*100).toFixed(2))+"%）</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#0074B8;"></span> '+("NPS"===r?"被动者":"中评")+"："+(0,c.hE)(a.neutralCount)+'<span style="color: #8c8c8c">（'+(0===a.total?0:(a.neutralCount/a.total*100).toFixed(2))+"%）</span>",'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#D96969;"></span> '+("NPS"===r?"贬损者":"差评")+"："+(0,c.hE)(a.negativeCount)+'<span style="color: #8c8c8c">（'+(0===a.total?0:(a.negativeCount/a.total*100).toFixed(2))+"%）</span>"]).join("<br>")}},data:[{value:t.positiveCount,name:"NPS"===r?"推荐者":"好评",total:t.total,itemStyle:{color:"#15B374"}},{value:t.neutralCount,name:"NPS"===r?"被动者":"中评",total:t.total,itemStyle:{color:"#1574B3"}},{value:t.negativeCount,name:"NPS"===r?"贬损者":"差评",total:t.total,itemStyle:{color:"#D96969"}},{value:0,name:"label",total:t,itemStyle:{color:"#ffffffff"}}]}])}}var r=a(50976);const T=function(t){var e=t.getRef,l=t.customerData,s=t.graphicData,u=t.dataType,c=t.type,p=t.title,t=f().useState(void 0),d=t[0],a=t[1];return f().useEffect(function(){var e,a,n,r,o,i;e=s,n=u,r=d,o=c,i=p,(a=l)&&r&&new Promise(function(t){t(b(e,a,n,r,o,i))}).then(function(t){r.clear(),r.setOption(t)})},[l,d,u]),f().createElement(r.Z,{theme:"yunting_pos_neg",option:{},style:{height:"100%",width:"100%"},onChartReady:function(t){e(t),a(t)}})},o=function(e){function t(t){var i=e.call(this,t)||this;return i.handleOnMoreClick=function(t){var e=i.props,a=e.title,n=e.customerData,r=e.graphicData,o=e.type,e=i.state.dataType;"image"===t&&i.graphicBarChartRef?(0,l._v)(i.graphicBarChartRef,a):"data"===e&&(0,m.P)(n)&&(t=C(n,t).datasets,t=("rato"===e?t[0]:t[1]).source,r=["NPS"===o?["答题客户数","推荐者","被动者","贬损者"]:["答题客户数","好评","中评","差评"],[r.promoterCount,r.detractorCount,r.passiveCount]],t=[].concat(r,[[""]],t),(0,l.aT)([t],a))},i.state={dataType:"rato",defaultDataType:"",dateGroupType:void 0},i}n()(t,e),t.getDerivedStateFromProps=function(t,e){if(t.defaultDataType&&t.defaultDataType!==e.defaultDataType)return{defaultDataType:t.defaultDataType,dataType:t.defaultDataType}};var a=t.prototype;return a.componentDidUpdate=function(t){var e=t.flavorObj,a=t.dateOptions,n=t.defaultDateType,r=this.props,o=r.flavorObj,i=r.dateOptions,t=r.defaultDateType;r.dataType;JSON.stringify(e)===JSON.stringify(o)&&JSON.stringify(n)===JSON.stringify(t)&&JSON.stringify(a)===JSON.stringify(i)||o&&this.setState({dateGroupType:i.some(function(t){return t.value===o.fCustTimeType})?o.fCustTimeType:t})},a.render=function(){var e=this,t=this.props,a=t.type,n=t.loading,r=t.title,o=t.titleOverlay,i=t.customerData,l=t.graphicData,s=t.flavorObj,u=t.defaultDataType,c=t.dateOptions,p=t.setDefaultValue,d=t.onFilterChange,h=this.state,t=h.dateGroupType,h=h.dataType;return f().createElement(m.Z,{className:"yt_reasearch_analysis_graphic_chart_wrapper",data:i,loading:n,renderTitle:f().createElement(g.Z,{titleOverlay:o,title:r,data:i,onMoreClick:this.handleOnMoreClick},f().createElement(y.Z,{options:v,flavor:u,activeObj:h,onChange:function(t){e.setState({dataType:t})},onFlavorChange:function(t){return p({key:"fCustDataType",value:t})}}),f().createElement(y.Z,{options:c,flavor:(s||{}).fCustTimeType,activeObj:t,onChange:function(t){e.setState({dateGroupType:t}),d({dateGroupType:t})},onFlavorChange:function(t){return p({key:"fCustTimeType",value:t})}}))},(0,m.P)(i)&&f().createElement("div",{className:"chart_zone"},f().createElement(T,{customerData:i,graphicData:l,getRef:function(t){return e.graphicBarChartRef=t},type:a,title:r,dataType:h})))},t}(f().PureComponent)},61210:(t,e,a)=>{"use strict";a.d(e,{Z:()=>h});function s(e,a,n){setTimeout(function(){var t={type:a,seriesIndex:0,seriesName:"overview-wordcloud"};n&&(t.name=n),e.dispatchAction(t)},0)}var e=a(85354),n=a.n(e),e=a(67294),o=a.n(e),i=a(8201),l=a(94644),r=a(50976),e=a(67154),u=a.n(e),c=a(70715);const p=function(e){function t(t){var n=e.call(this,t)||this;return n._handleOnMouseOver=function(t){var e=t.componentType,a=t.componentSubType,t=t.name;n.shouldNotCallOutside=!0,"series"===e&&"wordCloud"===a&&(s(n.wordcloudRef,"downplay",t),s(n.wordcloudRef,"showTip",t))},n._handleOnMouseOut=function(t){var e=t.componentType,a=t.componentSubType;n.shouldNotCallOutside=!0;t=n.state.hightlightNames;"series"===e&&"wordCloud"===a&&(s(n.wordcloudRef,"downplay",void 0),t&&s(n.wordcloudRef,"highlight",t),s(n.wordcloudRef,"hideTip",void 0))},n._resize=function(){n.shouldNotCallOutside=!1},n._handleFinished=function(){n.shouldNotCallOutside||(n.lastFinishTimeoutId||n.props.onReady(!1),n.lastFinishTimeoutId&&clearTimeout(n.lastFinishTimeoutId),n.lastFinishTimeoutId=setTimeout(function(){n.props.onReady(!0),n.lastFinishTimeoutId=void 0},100))},n.wordcloudRef,n.lastFinishTimeoutId=void 0,n.shouldNotCallOutside=!1,n.state={hightlightNames:void 0},n}n()(t,e);var a=t.prototype;return a.componentDidUpdate=function(t){var e=this,a=t.data,n=t.top,t=this.props,r=t.data,o=t.top;if(n!==o||JSON.stringify(a)!==JSON.stringify(r)){var i=void 0;if(0!==o)for(var i=[],l=r.length-1;o<=l;l--)i.push(r[l].name);this.setState({hightlightNames:i},function(){s(e.wordcloudRef,"downplay",void 0),i&&s(e.wordcloudRef,"highlight",i)})}},a.componentDidMount=function(){window.addEventListener("resize",this._resize)},a.componentWillUnmount=function(){window.removeEventListener("resize",this._resize)},a.render=function(){var e=this,t=this.props,a=t.option,n=t.getRef;t.onChartClick;return o().createElement(r.Z,{theme:"yunting_multi_color",option:a,style:{height:"100%",width:"100%"},onChartReady:function(t){n(t),e.wordcloudRef=t}})},t}(o().PureComponent);var d=a(98191),e=a(45697),a=a.n(e),e=function(e){function t(t){var r=e.call(this,t)||this;return r.handleOnMoreClick=function(t){var e,a=r.props,n=a.title,a=a.data;"image"===t&&r.chartRef?(0,l._v)(r.chartRef,n):"data"===t&&(0,i.P)(a)&&(a=a.reduce(function(t,a){return[].concat(t,[[].concat(e.map(function(t){var e;return"词名"===t?e=a.name:"总词频"===t?e=a.total:"正"===t?e=a.positiveCount:"中"===t?e=a.neutralCount:"负"===t&&(e=a.negativeCount),e}))])},[e=["词名","总词频","正","中","负"]]),(0,l.aT)([a],"词频分析"))},r.state={data:t.data,option:{}},r}return n()(t,e),t.getDerivedStateFromProps=function(t,e){if(JSON.stringify(t.data)!==JSON.stringify(e.data)&&(0,i.P)(t.data))return{option:{title:{text:"词频分析"},tooltip:{formatter:function(t){var e=t.marker,a=t.data,n=a.name,r=a.total,o=a.positiveCount,i=a.posRate,l=a.negativeCount,s=a.negRate,t=a.neutralCount,a=a.neuRate;return[(0,c.Zi)(e+" "+n+": "+r),"负面："+l+' <span style="color: #8C8C8C">('+(100*s).toFixed(2)+"%)</span>","中性："+t+' <span style="color: #8C8C8C">('+(100*a).toFixed(2)+"%)</span>","正面："+o+' <span style="color: #8C8C8C">('+(100*i).toFixed(2)+"%)</span>"].join("<br>")}},series:[{type:"wordCloud",name:"overview-wordcloud",gridSize:8,sizeRange:[12,60],rotationRange:[0,0],width:"95%",height:"85%",data:t.data.map(function(t){return u()({},t,{name:t.name,value:Math.sqrt(t.total),escore:[-1,0,1]})}),textStyle:{emphasis:{color:"#D8D8D8"}}}]}}},t.prototype.render=function(){var e=this,t=this.props,a=t.data,n=t.loading,r=t.title,t=this.state.option;return o().createElement(i.Z,{className:"yt_research_analysis_word_chart_wrapper",data:a,loading:n,renderTitle:o().createElement(d.Z,{title:r,data:a,onMoreClick:this.handleOnMoreClick})},(0,i.P)(a)&&o().createElement(p,{data:a,getRef:function(t){return e.chartRef=t},option:t}))},t}(o().PureComponent);e.propTypes={data:a().any,title:a().string,loading:a().bool};const h=e},8833:(t,e,a)=>{"use strict";a.d(e,{Z:()=>n});var e=a(67154),l=a.n(e),e=a(37316),s=a.n(e),e=a(67294),u=a.n(e),c=a(26198),p=a(97194),e=a(45697),a=a.n(e),e=function(t){var e=t.getFilterRef,a=t.className,n=t.hour,r=t.children,o=t.onReady,i=t.onChange,t=s()(t,["getFilterRef","className","hour","children","onReady","onChange"]);return u().createElement("div",{className:a},u().createElement(c.Z,l()({ref:e,onReady:function(){o.apply(null,[].concat(Array.prototype.slice.call(arguments),[(0,p.X)(arguments[0].dateFilter.numOfDays,n)]))},onChange:function(){i.apply(null,[].concat(Array.prototype.slice.call(arguments),[(0,p.X)(arguments[0].dateFilter.numOfDays,n)]))}},t)),r)};const n=e;e.propTypes={className:a().string,hour:a().bool,onReady:a().func,onChange:a().func,pageType:a().string,titles:a().shape({titel:a().string,url:a().string,state:a().object})}}}]);