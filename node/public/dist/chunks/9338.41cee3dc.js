(self.webpackChunkyunting=self.webpackChunkyunting||[]).push([[9338],{19338:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var a=n(37316),l=n.n(a),t=n(67154),r=n.n(t),a=n(85354),c=n.n(a),t=n(67294),m=n.n(t),a=n(55609),i=n(55815),g=n(92360),y=n(8201),S=n(29383),w=n(61918),E=n(61409),t=n(30381),_=n.n(t),v="YYYY-MM-DD HH:mm";const o=function(e){var t=e.loading,n=e.ruleList,a=e.keyword,l=e.pageIndex,r=e.pageSize,c=e.total,i=e.onSearch,o=e.onSiwtchPage,s=e.onSiwtchPageSize,u=e.onDelete,p=m().useState(!1),e=p[0],d=p[1],p=m().useState(void 0),h=p[0],f=p[1];return m().createElement(y.Z,{className:"price_rule_list_wrapper",data:n,loading:t,renderTitle:m().createElement("div",{className:"rule_list_top"},m().createElement(w.Z,{placeholder:"请输入规则名称",defValue:a,onSearch:function(e){return i(e)},style:{width:186}}))},m().createElement(S.Z,{data:n instanceof Array?n:[],pagePosition:"down",columns:[{label:"",width:16},{label:"规则名称",prop:"name"},{label:"上一次提醒时间",minWidth:135,render:function(e){e=e.lastPushTime;return m().createElement("span",null,e.length?_()(e).format(v):"- -")}},{label:"创建时间",minWidth:135,render:function(e){e=e.createAt;return m().createElement("span",null,e.length?_()(e).format(v):"- -")}},{label:"操作",width:170,render:function(e){var t=e.id;return m().createElement("div",{className:"operation"},m().createElement("span",{className:"control",onClick:function(){E.mW.push({pathname:"/priceChaos/pushLog",state:{pushId:t}})}},"推送日志"),m().createElement("span",{className:"control",onClick:function(){window.open("/priceChaos/editRule").ruleId=t}},"编辑"),m().createElement("span",{className:"control",onClick:function(){d(!0),f(t)}},"删除"))}},{label:"",width:16}],currentPage:l,onPage:o,pageSizeSelectorShow:!0,onPageSizeChange:s,pageSize:r,total:c,notLimit:!0}),m().createElement(g.Dialog,{title:m().createElement("span",null,m().createElement("i",{className:"icon-cem_warning",style:{color:"#D96969",fontSize:"20px",paddingRight:"10px"}}),"确定要删除此规则？"),size:"tiny",visible:e,onCancel:function(){d(!1),f(void 0)},lockScroll:!0},m().createElement(g.Dialog.Body,null,m().createElement("div",{style:{paddingLeft:"30px"}},"删除后，基于此规则产生的“乱价提醒”也将删除。")),m().createElement(g.Dialog.Footer,{className:"dialog-footer"},m().createElement(g.Button,{type:"primary",onClick:function(){u({id:h}),d(!1)}},"确定"),m().createElement(g.Button,{onClick:function(){return d(!1)}},"取消"))))};const s=function(e){return m().createElement("div",{className:"yt_price_rule_list_wrapper"},m().createElement(i.Z,{title:[{title:"渠道乱价",url:"/priceChaos"},{title:"规则列表",url:""}],rightContent:m().createElement(g.Button,{type:"primary",onClick:function(){window.open("/priceChaos/editRule")}},"创建规则")}),m().createElement("div",{className:"content",id:"price_rule_list_content"},m().createElement(o,e)))};var u=n(35239),p=n(64396).Z.price.ruleList,n=function(t){function e(e){var l=t.call(this,e)||this;return l._handleOnSearch=function(e){l.props.fetchRuleList({keyword:e,pageIndex:1})},l._handleOnSiwtchPage=function(e){var t=l.props,n=t.fetchRuleList,a=t.pageSize;n({pageIndex:e,keyword:t.keyword,pageSize:a})},l._handleOnSiwtchPageSize=function(e){var t=l.props;(0,t.fetchRuleList)({pageSize:e,pageIndex:1,keyword:t.keyword})},l._handleOnDelete=function(e){e=e.id;l.props.fetchDeleteRule({id:e})},e.fetchRuleList({projectId:u.t.get(u.V.curProject).id}),l.state={},l.event={onSearch:l._handleOnSearch,onSiwtchPage:l._handleOnSiwtchPage,onSiwtchPageSize:l._handleOnSiwtchPageSize,onDelete:l._handleOnDelete},l}return c()(e,t),e.prototype.render=function(){return m().createElement(s,r()({},this.props,this.state,this.event))},e}(m().PureComponent);const d=(0,a.connect)(function(e){var t=e.loading,e=l()(e,["loading"]);return r()({},e[p],{loading:t.effects[p+"/fetchRuleList"]||!1})},function(t){return{save:function(e){return t({type:p+"/save",payload:e})},clean:function(e){return t({type:p+"/clean",payload:e})},fetchRuleList:function(e){return t({type:p+"/fetchRuleList",payload:e})},fetchDeleteRule:function(e){return t({type:p+"/fetchDeleteRule",payload:e})}}})(n)},61918:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var t=n(67294),u=n.n(t),t=n(45697),n=n.n(t),t=function(e){var t=e.className,n=e.onClear,a=e.onSearch,l=e.placeholder,r=e.style,c=e.defValue,i=e.signal,e=u().useState(c),o=e[0],s=e[1];u().useEffect(function(){s(c)},[c,i]);return u().createElement("div",{style:r,className:"yt_search_input_wrapper "+(t||"")},u().createElement("input",{placeholder:l,value:o,onKeyDown:function(e){13===e.keyCode&&a(o)},onChange:function(e){return s(e.target.value)},autoComplete:"off"}),o&&u().createElement("i",{className:"icon-cem_log-off",onClick:function(){s(""),n&&n("")}}),u().createElement("i",{className:"icon-cem_small-search",onClick:function(){return a(o)}}))};t.propTypes={className:n().string,onSearch:n().func.isRequired,placeholder:n().string,style:n().object,defValue:n().string,signal:n().any,onClear:n().func};const a=t}}]);